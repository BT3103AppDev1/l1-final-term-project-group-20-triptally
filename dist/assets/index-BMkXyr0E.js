var aV=Object.defineProperty;var lV=(e,t,n)=>t in e?aV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var it=(e,t,n)=>(lV(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qy(e,t){const n=new Set(e.split(","));return t?s=>n.has(s.toLowerCase()):s=>n.has(s)}const Me={},Ja=[],Ks=()=>{},cV=()=>!1,sp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Xy=e=>e.startsWith("onUpdate:"),Mn=Object.assign,Jy=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},uV=Object.prototype.hasOwnProperty,oe=(e,t)=>uV.call(e,t),Dt=Array.isArray,Za=e=>Vu(e)==="[object Map]",ip=e=>Vu(e)==="[object Set]",HE=e=>Vu(e)==="[object Date]",zt=e=>typeof e=="function",_n=e=>typeof e=="string",no=e=>typeof e=="symbol",ke=e=>e!==null&&typeof e=="object",Z1=e=>(ke(e)||zt(e))&&zt(e.then)&&zt(e.catch),tx=Object.prototype.toString,Vu=e=>tx.call(e),hV=e=>Vu(e).slice(8,-1),ex=e=>Vu(e)==="[object Object]",Zy=e=>_n(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Oc=Qy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},dV=/-(\w)/g,Ni=rp(e=>e.replace(dV,(t,n)=>n?n.toUpperCase():"")),fV=/\B([A-Z])/g,Pl=rp(e=>e.replace(fV,"-$1").toLowerCase()),op=rp(e=>e.charAt(0).toUpperCase()+e.slice(1)),Mm=rp(e=>e?`on${op(e)}`:""),so=(e,t)=>!Object.is(e,t),Vd=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},gf=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},nu=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let WE;const nx=()=>WE||(WE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ap(e){if(Dt(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=_n(s)?_V(s):ap(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(_n(e)||ke(e))return e}const pV=/;(?![^(]*\))/g,gV=/:([^]+)/,mV=/\/\*[^]*?\*\//g;function _V(e){const t={};return e.replace(mV,"").split(pV).forEach(n=>{if(n){const s=n.split(gV);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Dl(e){let t="";if(_n(e))t=e;else if(Dt(e))for(let n=0;n<e.length;n++){const s=Dl(e[n]);s&&(t+=s+" ")}else if(ke(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const yV="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",vV=Qy(yV);function sx(e){return!!e||e===""}function bV(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=lp(e[s],t[s]);return n}function lp(e,t){if(e===t)return!0;let n=HE(e),s=HE(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=no(e),s=no(t),n||s)return e===t;if(n=Dt(e),s=Dt(t),n||s)return n&&s?bV(e,t):!1;if(n=ke(e),s=ke(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!lp(e[o],t[o]))return!1}}return String(e)===String(t)}function wV(e,t){return e.findIndex(n=>lp(n,t))}const ot=e=>_n(e)?e:e==null?"":Dt(e)||ke(e)&&(e.toString===tx||!zt(e.toString))?JSON.stringify(e,ix,2):String(e),ix=(e,t)=>t&&t.__v_isRef?ix(e,t.value):Za(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],r)=>(n[Nm(s,r)+" =>"]=i,n),{})}:ip(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Nm(n))}:no(t)?Nm(t):ke(t)&&!Dt(t)&&!ex(t)?String(t):t,Nm=(e,t="")=>{var n;return no(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ei;class EV{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ei,!t&&ei&&(this.index=(ei.scopes||(ei.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=ei;try{return ei=this,t()}finally{ei=n}}}on(){ei=this}off(){ei=this.parent}stop(t){if(this._active){let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.scopes)for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function TV(e,t=ei){t&&t.active&&t.effects.push(e)}function IV(){return ei}let Go;class tv{constructor(t,n,s,i){this.fn=t,this.trigger=n,this.scheduler=s,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,TV(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,ma();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(AV(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),_a()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=Yr,n=Go;try{return Yr=!0,Go=this,this._runnings++,zE(this),this.fn()}finally{jE(this),this._runnings--,Go=n,Yr=t}}stop(){var t;this.active&&(zE(this),jE(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function AV(e){return e.value}function zE(e){e._trackId++,e._depsLength=0}function jE(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)rx(e.deps[t],e);e.deps.length=e._depsLength}}function rx(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let Yr=!0,P_=0;const ox=[];function ma(){ox.push(Yr),Yr=!1}function _a(){const e=ox.pop();Yr=e===void 0?!0:e}function ev(){P_++}function nv(){for(P_--;!P_&&D_.length;)D_.shift()()}function ax(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const s=e.deps[e._depsLength];s!==t?(s&&rx(s,e),e.deps[e._depsLength++]=t):e._depsLength++}}const D_=[];function lx(e,t,n){ev();for(const s of e.keys()){let i;s._dirtyLevel<t&&(i??(i=e.get(s)===s._trackId))&&(s._shouldSchedule||(s._shouldSchedule=s._dirtyLevel===0),s._dirtyLevel=t),s._shouldSchedule&&(i??(i=e.get(s)===s._trackId))&&(s.trigger(),(!s._runnings||s.allowRecurse)&&s._dirtyLevel!==2&&(s._shouldSchedule=!1,s.scheduler&&D_.push(s.scheduler)))}nv()}const cx=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},k_=new WeakMap,Yo=Symbol(""),O_=Symbol("");function ws(e,t,n){if(Yr&&Go){let s=k_.get(e);s||k_.set(e,s=new Map);let i=s.get(n);i||s.set(n,i=cx(()=>s.delete(n))),ax(Go,i)}}function dr(e,t,n,s,i,r){const o=k_.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(n==="length"&&Dt(e)){const c=Number(s);o.forEach((h,d)=>{(d==="length"||!no(d)&&d>=c)&&a.push(h)})}else switch(n!==void 0&&a.push(o.get(n)),t){case"add":Dt(e)?Zy(n)&&a.push(o.get("length")):(a.push(o.get(Yo)),Za(e)&&a.push(o.get(O_)));break;case"delete":Dt(e)||(a.push(o.get(Yo)),Za(e)&&a.push(o.get(O_)));break;case"set":Za(e)&&a.push(o.get(Yo));break}ev();for(const c of a)c&&lx(c,4);nv()}const xV=Qy("__proto__,__v_isRef,__isVue"),ux=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(no)),qE=SV();function SV(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const s=Ut(this);for(let r=0,o=this.length;r<o;r++)ws(s,"get",r+"");const i=s[t](...n);return i===-1||i===!1?s[t](...n.map(Ut)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){ma(),ev();const s=Ut(this)[t].apply(this,n);return nv(),_a(),s}}),e}function RV(e){const t=Ut(this);return ws(t,"has",e),t.hasOwnProperty(e)}class hx{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){const i=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return r;if(n==="__v_raw")return s===(i?r?$V:gx:r?px:fx).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Dt(t);if(!i){if(o&&oe(qE,n))return Reflect.get(qE,n,s);if(n==="hasOwnProperty")return RV}const a=Reflect.get(t,n,s);return(no(n)?ux.has(n):xV(n))||(i||ws(t,"get",n),r)?a:Es(a)?o&&Zy(n)?a:a.value:ke(a)?i?_x(a):Vi(a):a}}class dx extends hx{constructor(t=!1){super(!1,t)}set(t,n,s,i){let r=t[n];if(!this._isShallow){const c=ul(r);if(!mf(s)&&!ul(s)&&(r=Ut(r),s=Ut(s)),!Dt(t)&&Es(r)&&!Es(s))return c?!1:(r.value=s,!0)}const o=Dt(t)&&Zy(n)?Number(n)<t.length:oe(t,n),a=Reflect.set(t,n,s,i);return t===Ut(i)&&(o?so(s,r)&&dr(t,"set",n,s):dr(t,"add",n,s)),a}deleteProperty(t,n){const s=oe(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&dr(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!no(n)||!ux.has(n))&&ws(t,"has",n),s}ownKeys(t){return ws(t,"iterate",Dt(t)?"length":Yo),Reflect.ownKeys(t)}}class CV extends hx{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const PV=new dx,DV=new CV,kV=new dx(!0),sv=e=>e,cp=e=>Reflect.getPrototypeOf(e);function ad(e,t,n=!1,s=!1){e=e.__v_raw;const i=Ut(e),r=Ut(t);n||(so(t,r)&&ws(i,"get",t),ws(i,"get",r));const{has:o}=cp(i),a=s?sv:n?ov:su;if(o.call(i,t))return a(e.get(t));if(o.call(i,r))return a(e.get(r));e!==i&&e.get(t)}function ld(e,t=!1){const n=this.__v_raw,s=Ut(n),i=Ut(e);return t||(so(e,i)&&ws(s,"has",e),ws(s,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function cd(e,t=!1){return e=e.__v_raw,!t&&ws(Ut(e),"iterate",Yo),Reflect.get(e,"size",e)}function KE(e){e=Ut(e);const t=Ut(this);return cp(t).has.call(t,e)||(t.add(e),dr(t,"add",e,e)),this}function GE(e,t){t=Ut(t);const n=Ut(this),{has:s,get:i}=cp(n);let r=s.call(n,e);r||(e=Ut(e),r=s.call(n,e));const o=i.call(n,e);return n.set(e,t),r?so(t,o)&&dr(n,"set",e,t):dr(n,"add",e,t),this}function YE(e){const t=Ut(this),{has:n,get:s}=cp(t);let i=n.call(t,e);i||(e=Ut(e),i=n.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return i&&dr(t,"delete",e,void 0),r}function QE(){const e=Ut(this),t=e.size!==0,n=e.clear();return t&&dr(e,"clear",void 0,void 0),n}function ud(e,t){return function(s,i){const r=this,o=r.__v_raw,a=Ut(o),c=t?sv:e?ov:su;return!e&&ws(a,"iterate",Yo),o.forEach((h,d)=>s.call(i,c(h),c(d),r))}}function hd(e,t,n){return function(...s){const i=this.__v_raw,r=Ut(i),o=Za(r),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,h=i[e](...s),d=n?sv:t?ov:su;return!t&&ws(r,"iterate",c?O_:Yo),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:a?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function Dr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function OV(){const e={get(r){return ad(this,r)},get size(){return cd(this)},has:ld,add:KE,set:GE,delete:YE,clear:QE,forEach:ud(!1,!1)},t={get(r){return ad(this,r,!1,!0)},get size(){return cd(this)},has:ld,add:KE,set:GE,delete:YE,clear:QE,forEach:ud(!1,!0)},n={get(r){return ad(this,r,!0)},get size(){return cd(this,!0)},has(r){return ld.call(this,r,!0)},add:Dr("add"),set:Dr("set"),delete:Dr("delete"),clear:Dr("clear"),forEach:ud(!0,!1)},s={get(r){return ad(this,r,!0,!0)},get size(){return cd(this,!0)},has(r){return ld.call(this,r,!0)},add:Dr("add"),set:Dr("set"),delete:Dr("delete"),clear:Dr("clear"),forEach:ud(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=hd(r,!1,!1),n[r]=hd(r,!0,!1),t[r]=hd(r,!1,!0),s[r]=hd(r,!0,!0)}),[e,n,t,s]}const[MV,NV,LV,UV]=OV();function iv(e,t){const n=t?e?UV:LV:e?NV:MV;return(s,i,r)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(oe(n,i)&&i in s?n:s,i,r)}const FV={get:iv(!1,!1)},VV={get:iv(!1,!0)},BV={get:iv(!0,!1)},fx=new WeakMap,px=new WeakMap,gx=new WeakMap,$V=new WeakMap;function HV(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function WV(e){return e.__v_skip||!Object.isExtensible(e)?0:HV(hV(e))}function Vi(e){return ul(e)?e:rv(e,!1,PV,FV,fx)}function mx(e){return rv(e,!1,kV,VV,px)}function _x(e){return rv(e,!0,DV,BV,gx)}function rv(e,t,n,s,i){if(!ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=i.get(e);if(r)return r;const o=WV(e);if(o===0)return e;const a=new Proxy(e,o===2?s:n);return i.set(e,a),a}function tl(e){return ul(e)?tl(e.__v_raw):!!(e&&e.__v_isReactive)}function ul(e){return!!(e&&e.__v_isReadonly)}function mf(e){return!!(e&&e.__v_isShallow)}function up(e){return tl(e)||ul(e)}function Ut(e){const t=e&&e.__v_raw;return t?Ut(t):e}function yx(e){return Object.isExtensible(e)&&gf(e,"__v_skip",!0),e}const su=e=>ke(e)?Vi(e):e,ov=e=>ke(e)?_x(e):e;class vx{constructor(t,n,s,i){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new tv(()=>t(this._value),()=>Bd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=s}get value(){const t=Ut(this);return(!t._cacheable||t.effect.dirty)&&so(t._value,t._value=t.effect.run())&&Bd(t,4),bx(t),t.effect._dirtyLevel>=2&&Bd(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function zV(e,t,n=!1){let s,i;const r=zt(e);return r?(s=e,i=Ks):(s=e.get,i=e.set),new vx(s,i,r||!i,n)}function bx(e){var t;Yr&&Go&&(e=Ut(e),ax(Go,(t=e.dep)!=null?t:e.dep=cx(()=>e.dep=void 0,e instanceof vx?e:void 0)))}function Bd(e,t=4,n){e=Ut(e);const s=e.dep;s&&lx(s,t)}function Es(e){return!!(e&&e.__v_isRef===!0)}function We(e){return wx(e,!1)}function av(e){return wx(e,!0)}function wx(e,t){return Es(e)?e:new jV(e,t)}class jV{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ut(t),this._value=n?t:su(t)}get value(){return bx(this),this._value}set value(t){const n=this.__v_isShallow||mf(t)||ul(t);t=n?t:Ut(t),so(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:su(t),Bd(this,4))}}function Ei(e){return Es(e)?e.value:e}const qV={get:(e,t,n)=>Ei(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Es(i)&&!Es(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function Ex(e){return tl(e)?e:new Proxy(e,qV)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qr(e,t,n,s){try{return s?e(...s):e()}catch(i){hp(i,t,n)}}function ri(e,t,n,s){if(zt(e)){const r=Qr(e,t,n,s);return r&&Z1(r)&&r.catch(o=>{hp(o,t,n)}),r}const i=[];for(let r=0;r<e.length;r++)i.push(ri(e[r],t,n,s));return i}function hp(e,t,n,s=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const h=r.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](e,o,a)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){Qr(c,null,10,[e,o,a]);return}}KV(e,n,i,s)}function KV(e,t,n,s=!0){console.error(e)}let iu=!1,M_=!1;const Hn=[];let bi=0;const el=[];let Lr=null,Vo=0;const Tx=Promise.resolve();let lv=null;function kl(e){const t=lv||Tx;return e?t.then(this?e.bind(this):e):t}function GV(e){let t=bi+1,n=Hn.length;for(;t<n;){const s=t+n>>>1,i=Hn[s],r=ru(i);r<e||r===e&&i.pre?t=s+1:n=s}return t}function cv(e){(!Hn.length||!Hn.includes(e,iu&&e.allowRecurse?bi+1:bi))&&(e.id==null?Hn.push(e):Hn.splice(GV(e.id),0,e),Ix())}function Ix(){!iu&&!M_&&(M_=!0,lv=Tx.then(xx))}function YV(e){const t=Hn.indexOf(e);t>bi&&Hn.splice(t,1)}function QV(e){Dt(e)?el.push(...e):(!Lr||!Lr.includes(e,e.allowRecurse?Vo+1:Vo))&&el.push(e),Ix()}function XE(e,t,n=iu?bi+1:0){for(;n<Hn.length;n++){const s=Hn[n];if(s&&s.pre){if(e&&s.id!==e.uid)continue;Hn.splice(n,1),n--,s()}}}function Ax(e){if(el.length){const t=[...new Set(el)].sort((n,s)=>ru(n)-ru(s));if(el.length=0,Lr){Lr.push(...t);return}for(Lr=t,Vo=0;Vo<Lr.length;Vo++)Lr[Vo]();Lr=null,Vo=0}}const ru=e=>e.id==null?1/0:e.id,XV=(e,t)=>{const n=ru(e)-ru(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function xx(e){M_=!1,iu=!0,Hn.sort(XV);try{for(bi=0;bi<Hn.length;bi++){const t=Hn[bi];t&&t.active!==!1&&Qr(t,null,14)}}finally{bi=0,Hn.length=0,Ax(),iu=!1,lv=null,(Hn.length||el.length)&&xx()}}function JV(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Me;let i=n;const r=t.startsWith("update:"),o=r&&t.slice(7);if(o&&o in s){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:p,trim:g}=s[d]||Me;g&&(i=n.map(_=>_n(_)?_.trim():_)),p&&(i=n.map(nu))}let a,c=s[a=Mm(t)]||s[a=Mm(Ni(t))];!c&&r&&(c=s[a=Mm(Pl(t))]),c&&ri(c,e,6,i);const h=s[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,ri(h,e,6,i)}}function Sx(e,t,n=!1){const s=t.emitsCache,i=s.get(e);if(i!==void 0)return i;const r=e.emits;let o={},a=!1;if(!zt(e)){const c=h=>{const d=Sx(h,t,!0);d&&(a=!0,Mn(o,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!a?(ke(e)&&s.set(e,null),null):(Dt(r)?r.forEach(c=>o[c]=null):Mn(o,r),ke(e)&&s.set(e,o),o)}function dp(e,t){return!e||!sp(t)?!1:(t=t.slice(2).replace(/Once$/,""),oe(e,t[0].toLowerCase()+t.slice(1))||oe(e,Pl(t))||oe(e,t))}let ys=null,fp=null;function _f(e){const t=ys;return ys=e,fp=e&&e.type.__scopeId||null,t}function Yn(e){fp=e}function Qn(){fp=null}function vs(e,t=ys,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&lT(-1);const r=_f(t);let o;try{o=e(...i)}finally{_f(r),s._d&&lT(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Lm(e){const{type:t,vnode:n,proxy:s,withProxy:i,props:r,propsOptions:[o],slots:a,attrs:c,emit:h,render:d,renderCache:p,data:g,setupState:_,ctx:y,inheritAttrs:b}=e;let w,A;const R=_f(e);try{if(n.shapeFlag&4){const O=i||s,N=O;w=vi(d.call(N,O,p,r,_,g,y)),A=c}else{const O=t;w=vi(O.length>1?O(r,{attrs:c,slots:a,emit:h}):O(r,null)),A=t.props?c:ZV(c)}}catch(O){Uc.length=0,hp(O,e,1),w=Et(ea)}let D=w;if(A&&b!==!1){const O=Object.keys(A),{shapeFlag:N}=D;O.length&&N&7&&(o&&O.some(Xy)&&(A=tB(A,o)),D=sa(D,A))}return n.dirs&&(D=sa(D),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&(D.transition=n.transition),w=D,_f(R),w}const ZV=e=>{let t;for(const n in e)(n==="class"||n==="style"||sp(n))&&((t||(t={}))[n]=e[n]);return t},tB=(e,t)=>{const n={};for(const s in e)(!Xy(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function eB(e,t,n){const{props:s,children:i,component:r}=e,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?JE(s,o,h):!!o;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==s[g]&&!dp(h,g))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?JE(s,o,h):!0:!!o;return!1}function JE(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==e[r]&&!dp(n,r))return!0}return!1}function nB({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Rx="components";function ze(e,t){return iB(Rx,e,!0,t)||e}const sB=Symbol.for("v-ndc");function iB(e,t,n=!0,s=!1){const i=ys||Wn;if(i){const r=i.type;if(e===Rx){const a=YB(r,!1);if(a&&(a===t||a===Ni(t)||a===op(Ni(t))))return r}const o=ZE(i[e]||r[e],t)||ZE(i.appContext[e],t);return!o&&s?r:o}}function ZE(e,t){return e&&(e[t]||e[Ni(t)]||e[op(Ni(t))])}const rB=e=>e.__isSuspense;function oB(e,t){t&&t.pendingBranch?Dt(e)?t.effects.push(...e):t.effects.push(e):QV(e)}const aB=Symbol.for("v-scx"),lB=()=>Si(aB);function $d(e,t){return uv(e,null,t)}const dd={};function Mc(e,t,n){return uv(e,t,n)}function uv(e,t,{immediate:n,deep:s,flush:i,once:r,onTrack:o,onTrigger:a}=Me){if(t&&r){const L=t;t=(...V)=>{L(...V),N()}}const c=Wn,h=L=>s===!0?L:Ho(L,s===!1?1:void 0);let d,p=!1,g=!1;if(Es(e)?(d=()=>e.value,p=mf(e)):tl(e)?(d=()=>h(e),p=!0):Dt(e)?(g=!0,p=e.some(L=>tl(L)||mf(L)),d=()=>e.map(L=>{if(Es(L))return L.value;if(tl(L))return h(L);if(zt(L))return Qr(L,c,2)})):zt(e)?t?d=()=>Qr(e,c,2):d=()=>(_&&_(),ri(e,c,3,[y])):d=Ks,t&&s){const L=d;d=()=>Ho(L())}let _,y=L=>{_=D.onStop=()=>{Qr(L,c,4),_=D.onStop=void 0}},b;if(yp)if(y=Ks,t?n&&ri(t,c,3,[d(),g?[]:void 0,y]):d(),i==="sync"){const L=lB();b=L.__watcherHandles||(L.__watcherHandles=[])}else return Ks;let w=g?new Array(e.length).fill(dd):dd;const A=()=>{if(!(!D.active||!D.dirty))if(t){const L=D.run();(s||p||(g?L.some((V,B)=>so(V,w[B])):so(L,w)))&&(_&&_(),ri(t,c,3,[L,w===dd?void 0:g&&w[0]===dd?[]:w,y]),w=L)}else D.run()};A.allowRecurse=!!t;let R;i==="sync"?R=A:i==="post"?R=()=>gs(A,c&&c.suspense):(A.pre=!0,c&&(A.id=c.uid),R=()=>cv(A));const D=new tv(d,Ks,R),O=IV(),N=()=>{D.stop(),O&&Jy(O.effects,D)};return t?n?A():w=D.run():i==="post"?gs(D.run.bind(D),c&&c.suspense):D.run(),b&&b.push(N),N}function cB(e,t,n){const s=this.proxy,i=_n(e)?e.includes(".")?Cx(s,e):()=>s[e]:e.bind(s,s);let r;zt(t)?r=t:(r=t.handler,n=t);const o=Hu(this),a=uv(i,r.bind(s),n);return o(),a}function Cx(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}function Ho(e,t,n=0,s){if(!ke(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(s=s||new Set,s.has(e))return e;if(s.add(e),Es(e))Ho(e.value,t,n,s);else if(Dt(e))for(let i=0;i<e.length;i++)Ho(e[i],t,n,s);else if(ip(e)||Za(e))e.forEach(i=>{Ho(i,t,n,s)});else if(ex(e))for(const i in e)Ho(e[i],t,n,s);return e}function Ae(e,t){if(ys===null)return e;const n=vp(ys)||ys.proxy,s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,c=Me]=t[i];r&&(zt(r)&&(r={mounted:r,updated:r}),r.deep&&Ho(o),s.push({dir:r,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function Po(e,t,n,s){const i=e.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(ma(),ri(c,n,8,[e.el,a,e,t]),_a())}}/*! #__NO_SIDE_EFFECTS__ */function uo(e,t){return zt(e)?Mn({name:e.name},t,{setup:e}):e}const Hd=e=>!!e.type.__asyncLoader,Px=e=>e.type.__isKeepAlive;function uB(e,t){Dx(e,"a",t)}function hB(e,t){Dx(e,"da",t)}function Dx(e,t,n=Wn){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(pp(t,s,n),n){let i=n.parent;for(;i&&i.parent;)Px(i.parent.vnode)&&dB(s,t,n,i),i=i.parent}}function dB(e,t,n,s){const i=pp(t,e,s,!0);$u(()=>{Jy(s[t],i)},n)}function pp(e,t,n=Wn,s=!1){if(n){const i=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;ma();const a=Hu(n),c=ri(t,n,e,o);return a(),_a(),c});return s?i.unshift(r):i.push(r),r}}const _r=e=>(t,n=Wn)=>(!yp||e==="sp")&&pp(e,(...s)=>t(...s),n),fB=_r("bm"),Bu=_r("m"),pB=_r("bu"),gB=_r("u"),mB=_r("bum"),$u=_r("um"),_B=_r("sp"),yB=_r("rtg"),vB=_r("rtc");function bB(e,t=Wn){pp("ec",e,t)}function Pn(e,t,n,s){let i;const r=n&&n[s];if(Dt(e)||_n(e)){i=new Array(e.length);for(let o=0,a=e.length;o<a;o++)i[o]=t(e[o],o,void 0,r&&r[o])}else if(typeof e=="number"){i=new Array(e);for(let o=0;o<e;o++)i[o]=t(o+1,o,void 0,r&&r[o])}else if(ke(e))if(e[Symbol.iterator])i=Array.from(e,(o,a)=>t(o,a,void 0,r&&r[a]));else{const o=Object.keys(e);i=new Array(o.length);for(let a=0,c=o.length;a<c;a++){const h=o[a];i[a]=t(e[h],h,a,r&&r[a])}}else i=[];return n&&(n[s]=i),i}const N_=e=>e?Wx(e)?vp(e)||e.proxy:N_(e.parent):null,Nc=Mn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>N_(e.parent),$root:e=>N_(e.root),$emit:e=>e.emit,$options:e=>hv(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,cv(e.update)}),$nextTick:e=>e.n||(e.n=kl.bind(e.proxy)),$watch:e=>cB.bind(e)}),Um=(e,t)=>e!==Me&&!e.__isScriptSetup&&oe(e,t),wB={get({_:e},t){const{ctx:n,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=e;let h;if(t[0]!=="$"){const _=o[t];if(_!==void 0)switch(_){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return r[t]}else{if(Um(s,t))return o[t]=1,s[t];if(i!==Me&&oe(i,t))return o[t]=2,i[t];if((h=e.propsOptions[0])&&oe(h,t))return o[t]=3,r[t];if(n!==Me&&oe(n,t))return o[t]=4,n[t];L_&&(o[t]=0)}}const d=Nc[t];let p,g;if(d)return t==="$attrs"&&ws(e,"get",t),d(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(n!==Me&&oe(n,t))return o[t]=4,n[t];if(g=c.config.globalProperties,oe(g,t))return g[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:r}=e;return Um(i,t)?(i[t]=n,!0):s!==Me&&oe(s,t)?(s[t]=n,!0):oe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!n[o]||e!==Me&&oe(e,o)||Um(t,o)||(a=r[0])&&oe(a,o)||oe(s,o)||oe(Nc,o)||oe(i.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:oe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function tT(e){return Dt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let L_=!0;function EB(e){const t=hv(e),n=e.proxy,s=e.ctx;L_=!1,t.beforeCreate&&eT(t.beforeCreate,e,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:_,updated:y,activated:b,deactivated:w,beforeDestroy:A,beforeUnmount:R,destroyed:D,unmounted:O,render:N,renderTracked:L,renderTriggered:V,errorCaptured:B,serverPrefetch:tt,expose:bt,inheritAttrs:At,components:kt,directives:de,filters:qe}=t;if(h&&TB(h,s,null),o)for(const wt in o){const xt=o[wt];zt(xt)&&(s[wt]=xt.bind(n))}if(i){const wt=i.call(n,n);ke(wt)&&(e.data=Vi(wt))}if(L_=!0,r)for(const wt in r){const xt=r[wt],Ee=zt(xt)?xt.bind(n,n):zt(xt.get)?xt.get.bind(n,n):Ks,on=!zt(xt)&&zt(xt.set)?xt.set.bind(n):Ks,Re=Se({get:Ee,set:on});Object.defineProperty(s,wt,{enumerable:!0,configurable:!0,get:()=>Re.value,set:$e=>Re.value=$e})}if(a)for(const wt in a)kx(a[wt],s,n,wt);if(c){const wt=zt(c)?c.call(n):c;Reflect.ownKeys(wt).forEach(xt=>{Wd(xt,wt[xt])})}d&&eT(d,e,"c");function Nt(wt,xt){Dt(xt)?xt.forEach(Ee=>wt(Ee.bind(n))):xt&&wt(xt.bind(n))}if(Nt(fB,p),Nt(Bu,g),Nt(pB,_),Nt(gB,y),Nt(uB,b),Nt(hB,w),Nt(bB,B),Nt(vB,L),Nt(yB,V),Nt(mB,R),Nt($u,O),Nt(_B,tt),Dt(bt))if(bt.length){const wt=e.exposed||(e.exposed={});bt.forEach(xt=>{Object.defineProperty(wt,xt,{get:()=>n[xt],set:Ee=>n[xt]=Ee})})}else e.exposed||(e.exposed={});N&&e.render===Ks&&(e.render=N),At!=null&&(e.inheritAttrs=At),kt&&(e.components=kt),de&&(e.directives=de)}function TB(e,t,n=Ks){Dt(e)&&(e=U_(e));for(const s in e){const i=e[s];let r;ke(i)?"default"in i?r=Si(i.from||s,i.default,!0):r=Si(i.from||s):r=Si(i),Es(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function eT(e,t,n){ri(Dt(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function kx(e,t,n,s){const i=s.includes(".")?Cx(n,s):()=>n[s];if(_n(e)){const r=t[e];zt(r)&&Mc(i,r)}else if(zt(e))Mc(i,e.bind(n));else if(ke(e))if(Dt(e))e.forEach(r=>kx(r,t,n,s));else{const r=zt(e.handler)?e.handler.bind(n):t[e.handler];zt(r)&&Mc(i,r,e)}}function hv(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let c;return a?c=a:!i.length&&!n&&!s?c=t:(c={},i.length&&i.forEach(h=>yf(c,h,o,!0)),yf(c,t,o)),ke(t)&&r.set(t,c),c}function yf(e,t,n,s=!1){const{mixins:i,extends:r}=t;r&&yf(e,r,n,!0),i&&i.forEach(o=>yf(e,o,n,!0));for(const o in t)if(!(s&&o==="expose")){const a=IB[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const IB={data:nT,props:sT,emits:sT,methods:vc,computed:vc,beforeCreate:ss,created:ss,beforeMount:ss,mounted:ss,beforeUpdate:ss,updated:ss,beforeDestroy:ss,beforeUnmount:ss,destroyed:ss,unmounted:ss,activated:ss,deactivated:ss,errorCaptured:ss,serverPrefetch:ss,components:vc,directives:vc,watch:xB,provide:nT,inject:AB};function nT(e,t){return t?e?function(){return Mn(zt(e)?e.call(this,this):e,zt(t)?t.call(this,this):t)}:t:e}function AB(e,t){return vc(U_(e),U_(t))}function U_(e){if(Dt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ss(e,t){return e?[...new Set([].concat(e,t))]:t}function vc(e,t){return e?Mn(Object.create(null),e,t):t}function sT(e,t){return e?Dt(e)&&Dt(t)?[...new Set([...e,...t])]:Mn(Object.create(null),tT(e),tT(t??{})):t}function xB(e,t){if(!e)return t;if(!t)return e;const n=Mn(Object.create(null),e);for(const s in t)n[s]=ss(e[s],t[s]);return n}function Ox(){return{app:null,config:{isNativeTag:cV,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let SB=0;function RB(e,t){return function(s,i=null){zt(s)||(s=Mn({},s)),i!=null&&!ke(i)&&(i=null);const r=Ox(),o=new WeakSet;let a=!1;const c=r.app={_uid:SB++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:jx,get config(){return r.config},set config(h){},use(h,...d){return o.has(h)||(h&&zt(h.install)?(o.add(h),h.install(c,...d)):zt(h)&&(o.add(h),h(c,...d))),c},mixin(h){return r.mixins.includes(h)||r.mixins.push(h),c},component(h,d){return d?(r.components[h]=d,c):r.components[h]},directive(h,d){return d?(r.directives[h]=d,c):r.directives[h]},mount(h,d,p){if(!a){const g=Et(s,i);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),d&&t?t(g,h):e(g,h,p),a=!0,c._container=h,h.__vue_app__=c,vp(g.component)||g.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(h,d){return r.provides[h]=d,c},runWithContext(h){const d=Lc;Lc=c;try{return h()}finally{Lc=d}}};return c}}let Lc=null;function Wd(e,t){if(Wn){let n=Wn.provides;const s=Wn.parent&&Wn.parent.provides;s===n&&(n=Wn.provides=Object.create(s)),n[e]=t}}function Si(e,t,n=!1){const s=Wn||ys;if(s||Lc){const i=s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:Lc._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&zt(t)?t.call(s&&s.proxy):t}}function CB(e,t,n,s=!1){const i={},r={};gf(r,mp,1),e.propsDefaults=Object.create(null),Mx(e,t,i,r);for(const o in e.propsOptions[0])o in i||(i[o]=void 0);n?e.props=s?i:mx(i):e.type.props?e.props=i:e.props=r,e.attrs=r}function PB(e,t,n,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=e,a=Ut(i),[c]=e.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(dp(e.emitsOptions,g))continue;const _=t[g];if(c)if(oe(r,g))_!==r[g]&&(r[g]=_,h=!0);else{const y=Ni(g);i[y]=F_(c,a,y,_,e,!1)}else _!==r[g]&&(r[g]=_,h=!0)}}}else{Mx(e,t,i,r)&&(h=!0);let d;for(const p in a)(!t||!oe(t,p)&&((d=Pl(p))===p||!oe(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=F_(c,a,p,void 0,e,!0)):delete i[p]);if(r!==a)for(const p in r)(!t||!oe(t,p))&&(delete r[p],h=!0)}h&&dr(e,"set","$attrs")}function Mx(e,t,n,s){const[i,r]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Oc(c))continue;const h=t[c];let d;i&&oe(i,d=Ni(c))?!r||!r.includes(d)?n[d]=h:(a||(a={}))[d]=h:dp(e.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Ut(n),h=a||Me;for(let d=0;d<r.length;d++){const p=r[d];n[p]=F_(i,c,p,h[p],e,!oe(h,p))}}return o}function F_(e,t,n,s,i,r){const o=e[n];if(o!=null){const a=oe(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&zt(c)){const{propsDefaults:h}=i;if(n in h)s=h[n];else{const d=Hu(i);s=h[n]=c.call(null,t),d()}}else s=c}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Pl(n))&&(s=!0))}return s}function Nx(e,t,n=!1){const s=t.propsCache,i=s.get(e);if(i)return i;const r=e.props,o={},a=[];let c=!1;if(!zt(e)){const d=p=>{c=!0;const[g,_]=Nx(p,t,!0);Mn(o,g),_&&a.push(..._)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!r&&!c)return ke(e)&&s.set(e,Ja),Ja;if(Dt(r))for(let d=0;d<r.length;d++){const p=Ni(r[d]);iT(p)&&(o[p]=Me)}else if(r)for(const d in r){const p=Ni(d);if(iT(p)){const g=r[d],_=o[p]=Dt(g)||zt(g)?{type:g}:Mn({},g);if(_){const y=aT(Boolean,_.type),b=aT(String,_.type);_[0]=y>-1,_[1]=b<0||y<b,(y>-1||oe(_,"default"))&&a.push(p)}}}const h=[o,a];return ke(e)&&s.set(e,h),h}function iT(e){return e[0]!=="$"&&!Oc(e)}function rT(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function oT(e,t){return rT(e)===rT(t)}function aT(e,t){return Dt(t)?t.findIndex(n=>oT(n,e)):zt(t)&&oT(t,e)?0:-1}const Lx=e=>e[0]==="_"||e==="$stable",dv=e=>Dt(e)?e.map(vi):[vi(e)],DB=(e,t,n)=>{if(t._n)return t;const s=vs((...i)=>dv(t(...i)),n);return s._c=!1,s},Ux=(e,t,n)=>{const s=e._ctx;for(const i in e){if(Lx(i))continue;const r=e[i];if(zt(r))t[i]=DB(i,r,s);else if(r!=null){const o=dv(r);t[i]=()=>o}}},Fx=(e,t)=>{const n=dv(t);e.slots.default=()=>n},kB=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ut(t),gf(t,"_",n)):Ux(t,e.slots={})}else e.slots={},t&&Fx(e,t);gf(e.slots,mp,1)},OB=(e,t,n)=>{const{vnode:s,slots:i}=e;let r=!0,o=Me;if(s.shapeFlag&32){const a=t._;a?n&&a===1?r=!1:(Mn(i,t),!n&&a===1&&delete i._):(r=!t.$stable,Ux(t,i)),o=t}else t&&(Fx(e,t),o={default:1});if(r)for(const a in i)!Lx(a)&&o[a]==null&&delete i[a]};function V_(e,t,n,s,i=!1){if(Dt(e)){e.forEach((g,_)=>V_(g,t&&(Dt(t)?t[_]:t),n,s,i));return}if(Hd(s)&&!i)return;const r=s.shapeFlag&4?vp(s.component)||s.component.proxy:s.el,o=i?null:r,{i:a,r:c}=e,h=t&&t.r,d=a.refs===Me?a.refs={}:a.refs,p=a.setupState;if(h!=null&&h!==c&&(_n(h)?(d[h]=null,oe(p,h)&&(p[h]=null)):Es(h)&&(h.value=null)),zt(c))Qr(c,a,12,[o,d]);else{const g=_n(c),_=Es(c);if(g||_){const y=()=>{if(e.f){const b=g?oe(p,c)?p[c]:d[c]:c.value;i?Dt(b)&&Jy(b,r):Dt(b)?b.includes(r)||b.push(r):g?(d[c]=[r],oe(p,c)&&(p[c]=d[c])):(c.value=[r],e.k&&(d[e.k]=c.value))}else g?(d[c]=o,oe(p,c)&&(p[c]=o)):_&&(c.value=o,e.k&&(d[e.k]=o))};o?(y.id=-1,gs(y,n)):y()}}}const gs=oB;function MB(e){return NB(e)}function NB(e,t){const n=nx();n.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:_=Ks,insertStaticContent:y}=e,b=(x,C,U,Q=null,$=null,st=null,ht=void 0,et=null,nt=!!C.dynamicChildren)=>{if(x===C)return;x&&!rc(x,C)&&(Q=G(x),$e(x,$,st,!0),x=null),C.patchFlag===-2&&(nt=!1,C.dynamicChildren=null);const{type:Z,ref:ft,shapeFlag:It}=C;switch(Z){case gp:w(x,C,U,Q);break;case ea:A(x,C,U,Q);break;case zd:x==null&&R(C,U,Q,ht);break;case xe:kt(x,C,U,Q,$,st,ht,et,nt);break;default:It&1?N(x,C,U,Q,$,st,ht,et,nt):It&6?de(x,C,U,Q,$,st,ht,et,nt):(It&64||It&128)&&Z.process(x,C,U,Q,$,st,ht,et,nt,_t)}ft!=null&&$&&V_(ft,x&&x.ref,st,C||x,!C)},w=(x,C,U,Q)=>{if(x==null)s(C.el=a(C.children),U,Q);else{const $=C.el=x.el;C.children!==x.children&&h($,C.children)}},A=(x,C,U,Q)=>{x==null?s(C.el=c(C.children||""),U,Q):C.el=x.el},R=(x,C,U,Q)=>{[x.el,x.anchor]=y(x.children,C,U,Q,x.el,x.anchor)},D=({el:x,anchor:C},U,Q)=>{let $;for(;x&&x!==C;)$=g(x),s(x,U,Q),x=$;s(C,U,Q)},O=({el:x,anchor:C})=>{let U;for(;x&&x!==C;)U=g(x),i(x),x=U;i(C)},N=(x,C,U,Q,$,st,ht,et,nt)=>{C.type==="svg"?ht="svg":C.type==="math"&&(ht="mathml"),x==null?L(C,U,Q,$,st,ht,et,nt):tt(x,C,$,st,ht,et,nt)},L=(x,C,U,Q,$,st,ht,et)=>{let nt,Z;const{props:ft,shapeFlag:It,transition:yt,dirs:Ot}=x;if(nt=x.el=o(x.type,st,ft&&ft.is,ft),It&8?d(nt,x.children):It&16&&B(x.children,nt,null,Q,$,Fm(x,st),ht,et),Ot&&Po(x,null,Q,"created"),V(nt,x,x.scopeId,ht,Q),ft){for(const ee in ft)ee!=="value"&&!Oc(ee)&&r(nt,ee,null,ft[ee],st,x.children,Q,$,ge);"value"in ft&&r(nt,"value",null,ft.value,st),(Z=ft.onVnodeBeforeMount)&&mi(Z,Q,x)}Ot&&Po(x,null,Q,"beforeMount");const Ht=LB($,yt);Ht&&yt.beforeEnter(nt),s(nt,C,U),((Z=ft&&ft.onVnodeMounted)||Ht||Ot)&&gs(()=>{Z&&mi(Z,Q,x),Ht&&yt.enter(nt),Ot&&Po(x,null,Q,"mounted")},$)},V=(x,C,U,Q,$)=>{if(U&&_(x,U),Q)for(let st=0;st<Q.length;st++)_(x,Q[st]);if($){let st=$.subTree;if(C===st){const ht=$.vnode;V(x,ht,ht.scopeId,ht.slotScopeIds,$.parent)}}},B=(x,C,U,Q,$,st,ht,et,nt=0)=>{for(let Z=nt;Z<x.length;Z++){const ft=x[Z]=et?Ur(x[Z]):vi(x[Z]);b(null,ft,C,U,Q,$,st,ht,et)}},tt=(x,C,U,Q,$,st,ht)=>{const et=C.el=x.el;let{patchFlag:nt,dynamicChildren:Z,dirs:ft}=C;nt|=x.patchFlag&16;const It=x.props||Me,yt=C.props||Me;let Ot;if(U&&Do(U,!1),(Ot=yt.onVnodeBeforeUpdate)&&mi(Ot,U,C,x),ft&&Po(C,x,U,"beforeUpdate"),U&&Do(U,!0),Z?bt(x.dynamicChildren,Z,et,U,Q,Fm(C,$),st):ht||xt(x,C,et,null,U,Q,Fm(C,$),st,!1),nt>0){if(nt&16)At(et,C,It,yt,U,Q,$);else if(nt&2&&It.class!==yt.class&&r(et,"class",null,yt.class,$),nt&4&&r(et,"style",It.style,yt.style,$),nt&8){const Ht=C.dynamicProps;for(let ee=0;ee<Ht.length;ee++){const Te=Ht[ee],Ke=It[Te],Jn=yt[Te];(Jn!==Ke||Te==="value")&&r(et,Te,Ke,Jn,$,x.children,U,Q,ge)}}nt&1&&x.children!==C.children&&d(et,C.children)}else!ht&&Z==null&&At(et,C,It,yt,U,Q,$);((Ot=yt.onVnodeUpdated)||ft)&&gs(()=>{Ot&&mi(Ot,U,C,x),ft&&Po(C,x,U,"updated")},Q)},bt=(x,C,U,Q,$,st,ht)=>{for(let et=0;et<C.length;et++){const nt=x[et],Z=C[et],ft=nt.el&&(nt.type===xe||!rc(nt,Z)||nt.shapeFlag&70)?p(nt.el):U;b(nt,Z,ft,null,Q,$,st,ht,!0)}},At=(x,C,U,Q,$,st,ht)=>{if(U!==Q){if(U!==Me)for(const et in U)!Oc(et)&&!(et in Q)&&r(x,et,U[et],null,ht,C.children,$,st,ge);for(const et in Q){if(Oc(et))continue;const nt=Q[et],Z=U[et];nt!==Z&&et!=="value"&&r(x,et,Z,nt,ht,C.children,$,st,ge)}"value"in Q&&r(x,"value",U.value,Q.value,ht)}},kt=(x,C,U,Q,$,st,ht,et,nt)=>{const Z=C.el=x?x.el:a(""),ft=C.anchor=x?x.anchor:a("");let{patchFlag:It,dynamicChildren:yt,slotScopeIds:Ot}=C;Ot&&(et=et?et.concat(Ot):Ot),x==null?(s(Z,U,Q),s(ft,U,Q),B(C.children||[],U,ft,$,st,ht,et,nt)):It>0&&It&64&&yt&&x.dynamicChildren?(bt(x.dynamicChildren,yt,U,$,st,ht,et),(C.key!=null||$&&C===$.subTree)&&Vx(x,C,!0)):xt(x,C,U,ft,$,st,ht,et,nt)},de=(x,C,U,Q,$,st,ht,et,nt)=>{C.slotScopeIds=et,x==null?C.shapeFlag&512?$.ctx.activate(C,U,Q,ht,nt):qe(C,U,Q,$,st,ht,nt):Gt(x,C,nt)},qe=(x,C,U,Q,$,st,ht)=>{const et=x.component=zB(x,Q,$);if(Px(x)&&(et.ctx.renderer=_t),jB(et),et.asyncDep){if($&&$.registerDep(et,Nt),!x.el){const nt=et.subTree=Et(ea);A(null,nt,C,U)}}else Nt(et,x,C,U,$,st,ht)},Gt=(x,C,U)=>{const Q=C.component=x.component;if(eB(x,C,U))if(Q.asyncDep&&!Q.asyncResolved){wt(Q,C,U);return}else Q.next=C,YV(Q.update),Q.effect.dirty=!0,Q.update();else C.el=x.el,Q.vnode=C},Nt=(x,C,U,Q,$,st,ht)=>{const et=()=>{if(x.isMounted){let{next:ft,bu:It,u:yt,parent:Ot,vnode:Ht}=x;{const di=Bx(x);if(di){ft&&(ft.el=Ht.el,wt(x,ft,ht)),di.asyncDep.then(()=>{x.isUnmounted||et()});return}}let ee=ft,Te;Do(x,!1),ft?(ft.el=Ht.el,wt(x,ft,ht)):ft=Ht,It&&Vd(It),(Te=ft.props&&ft.props.onVnodeBeforeUpdate)&&mi(Te,Ot,ft,Ht),Do(x,!0);const Ke=Lm(x),Jn=x.subTree;x.subTree=Ke,b(Jn,Ke,p(Jn.el),G(Jn),x,$,st),ft.el=Ke.el,ee===null&&nB(x,Ke.el),yt&&gs(yt,$),(Te=ft.props&&ft.props.onVnodeUpdated)&&gs(()=>mi(Te,Ot,ft,Ht),$)}else{let ft;const{el:It,props:yt}=C,{bm:Ot,m:Ht,parent:ee}=x,Te=Hd(C);if(Do(x,!1),Ot&&Vd(Ot),!Te&&(ft=yt&&yt.onVnodeBeforeMount)&&mi(ft,ee,C),Do(x,!0),It&&me){const Ke=()=>{x.subTree=Lm(x),me(It,x.subTree,x,$,null)};Te?C.type.__asyncLoader().then(()=>!x.isUnmounted&&Ke()):Ke()}else{const Ke=x.subTree=Lm(x);b(null,Ke,U,Q,x,$,st),C.el=Ke.el}if(Ht&&gs(Ht,$),!Te&&(ft=yt&&yt.onVnodeMounted)){const Ke=C;gs(()=>mi(ft,ee,Ke),$)}(C.shapeFlag&256||ee&&Hd(ee.vnode)&&ee.vnode.shapeFlag&256)&&x.a&&gs(x.a,$),x.isMounted=!0,C=U=Q=null}},nt=x.effect=new tv(et,Ks,()=>cv(Z),x.scope),Z=x.update=()=>{nt.dirty&&nt.run()};Z.id=x.uid,Do(x,!0),Z()},wt=(x,C,U)=>{C.component=x;const Q=x.vnode.props;x.vnode=C,x.next=null,PB(x,C.props,Q,U),OB(x,C.children,U),ma(),XE(x),_a()},xt=(x,C,U,Q,$,st,ht,et,nt=!1)=>{const Z=x&&x.children,ft=x?x.shapeFlag:0,It=C.children,{patchFlag:yt,shapeFlag:Ot}=C;if(yt>0){if(yt&128){on(Z,It,U,Q,$,st,ht,et,nt);return}else if(yt&256){Ee(Z,It,U,Q,$,st,ht,et,nt);return}}Ot&8?(ft&16&&ge(Z,$,st),It!==Z&&d(U,It)):ft&16?Ot&16?on(Z,It,U,Q,$,st,ht,et,nt):ge(Z,$,st,!0):(ft&8&&d(U,""),Ot&16&&B(It,U,Q,$,st,ht,et,nt))},Ee=(x,C,U,Q,$,st,ht,et,nt)=>{x=x||Ja,C=C||Ja;const Z=x.length,ft=C.length,It=Math.min(Z,ft);let yt;for(yt=0;yt<It;yt++){const Ot=C[yt]=nt?Ur(C[yt]):vi(C[yt]);b(x[yt],Ot,U,null,$,st,ht,et,nt)}Z>ft?ge(x,$,st,!0,!1,It):B(C,U,Q,$,st,ht,et,nt,It)},on=(x,C,U,Q,$,st,ht,et,nt)=>{let Z=0;const ft=C.length;let It=x.length-1,yt=ft-1;for(;Z<=It&&Z<=yt;){const Ot=x[Z],Ht=C[Z]=nt?Ur(C[Z]):vi(C[Z]);if(rc(Ot,Ht))b(Ot,Ht,U,null,$,st,ht,et,nt);else break;Z++}for(;Z<=It&&Z<=yt;){const Ot=x[It],Ht=C[yt]=nt?Ur(C[yt]):vi(C[yt]);if(rc(Ot,Ht))b(Ot,Ht,U,null,$,st,ht,et,nt);else break;It--,yt--}if(Z>It){if(Z<=yt){const Ot=yt+1,Ht=Ot<ft?C[Ot].el:Q;for(;Z<=yt;)b(null,C[Z]=nt?Ur(C[Z]):vi(C[Z]),U,Ht,$,st,ht,et,nt),Z++}}else if(Z>yt)for(;Z<=It;)$e(x[Z],$,st,!0),Z++;else{const Ot=Z,Ht=Z,ee=new Map;for(Z=Ht;Z<=yt;Z++){const In=C[Z]=nt?Ur(C[Z]):vi(C[Z]);In.key!=null&&ee.set(In.key,Z)}let Te,Ke=0;const Jn=yt-Ht+1;let di=!1,xa=0;const Wi=new Array(Jn);for(Z=0;Z<Jn;Z++)Wi[Z]=0;for(Z=Ot;Z<=It;Z++){const In=x[Z];if(Ke>=Jn){$e(In,$,st,!0);continue}let cs;if(In.key!=null)cs=ee.get(In.key);else for(Te=Ht;Te<=yt;Te++)if(Wi[Te-Ht]===0&&rc(In,C[Te])){cs=Te;break}cs===void 0?$e(In,$,st,!0):(Wi[cs-Ht]=Z+1,cs>=xa?xa=cs:di=!0,b(In,C[cs],U,null,$,st,ht,et,nt),Ke++)}const Sa=di?UB(Wi):Ja;for(Te=Sa.length-1,Z=Jn-1;Z>=0;Z--){const In=Ht+Z,cs=C[In],yh=In+1<ft?C[In+1].el:Q;Wi[Z]===0?b(null,cs,U,yh,$,st,ht,et,nt):di&&(Te<0||Z!==Sa[Te]?Re(cs,U,yh,2):Te--)}}},Re=(x,C,U,Q,$=null)=>{const{el:st,type:ht,transition:et,children:nt,shapeFlag:Z}=x;if(Z&6){Re(x.component.subTree,C,U,Q);return}if(Z&128){x.suspense.move(C,U,Q);return}if(Z&64){ht.move(x,C,U,_t);return}if(ht===xe){s(st,C,U);for(let It=0;It<nt.length;It++)Re(nt[It],C,U,Q);s(x.anchor,C,U);return}if(ht===zd){D(x,C,U);return}if(Q!==2&&Z&1&&et)if(Q===0)et.beforeEnter(st),s(st,C,U),gs(()=>et.enter(st),$);else{const{leave:It,delayLeave:yt,afterLeave:Ot}=et,Ht=()=>s(st,C,U),ee=()=>{It(st,()=>{Ht(),Ot&&Ot()})};yt?yt(st,Ht,ee):ee()}else s(st,C,U)},$e=(x,C,U,Q=!1,$=!1)=>{const{type:st,props:ht,ref:et,children:nt,dynamicChildren:Z,shapeFlag:ft,patchFlag:It,dirs:yt}=x;if(et!=null&&V_(et,null,U,x,!0),ft&256){C.ctx.deactivate(x);return}const Ot=ft&1&&yt,Ht=!Hd(x);let ee;if(Ht&&(ee=ht&&ht.onVnodeBeforeUnmount)&&mi(ee,C,x),ft&6)Tn(x.component,U,Q);else{if(ft&128){x.suspense.unmount(U,Q);return}Ot&&Po(x,null,C,"beforeUnmount"),ft&64?x.type.remove(x,C,U,$,_t,Q):Z&&(st!==xe||It>0&&It&64)?ge(Z,C,U,!1,!0):(st===xe&&It&384||!$&&ft&16)&&ge(nt,C,U),Q&&ls(x)}(Ht&&(ee=ht&&ht.onVnodeUnmounted)||Ot)&&gs(()=>{ee&&mi(ee,C,x),Ot&&Po(x,null,C,"unmounted")},U)},ls=x=>{const{type:C,el:U,anchor:Q,transition:$}=x;if(C===xe){Nn(U,Q);return}if(C===zd){O(x);return}const st=()=>{i(U),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(x.shapeFlag&1&&$&&!$.persisted){const{leave:ht,delayLeave:et}=$,nt=()=>ht(U,st);et?et(x.el,st,nt):nt()}else st()},Nn=(x,C)=>{let U;for(;x!==C;)U=g(x),i(x),x=U;i(C)},Tn=(x,C,U)=>{const{bum:Q,scope:$,update:st,subTree:ht,um:et}=x;Q&&Vd(Q),$.stop(),st&&(st.active=!1,$e(ht,x,C,U)),et&&gs(et,C),gs(()=>{x.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},ge=(x,C,U,Q=!1,$=!1,st=0)=>{for(let ht=st;ht<x.length;ht++)$e(x[ht],C,U,Q,$)},G=x=>x.shapeFlag&6?G(x.component.subTree):x.shapeFlag&128?x.suspense.next():g(x.anchor||x.el);let dt=!1;const rt=(x,C,U)=>{x==null?C._vnode&&$e(C._vnode,null,null,!0):b(C._vnode||null,x,C,null,null,null,U),dt||(dt=!0,XE(),Ax(),dt=!1),C._vnode=x},_t={p:b,um:$e,m:Re,r:ls,mt:qe,mc:B,pc:xt,pbc:bt,n:G,o:e};let te,me;return t&&([te,me]=t(_t)),{render:rt,hydrate:te,createApp:RB(rt,te)}}function Fm({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Do({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function LB(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Vx(e,t,n=!1){const s=e.children,i=t.children;if(Dt(s)&&Dt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Ur(i[r]),a.el=o.el),n||Vx(o,a)),a.type===gp&&(a.el=o.el)}}function UB(e){const t=e.slice(),n=[0];let s,i,r,o,a;const c=e.length;for(s=0;s<c;s++){const h=e[s];if(h!==0){if(i=n[n.length-1],e[i]<h){t[s]=i,n.push(s);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,e[n[a]]<h?r=a+1:o=a;h<e[n[r]]&&(r>0&&(t[s]=n[r-1]),n[r]=s)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=t[o];return n}function Bx(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bx(t)}const FB=e=>e.__isTeleport,xe=Symbol.for("v-fgt"),gp=Symbol.for("v-txt"),ea=Symbol.for("v-cmt"),zd=Symbol.for("v-stc"),Uc=[];let si=null;function W(e=!1){Uc.push(si=e?null:[])}function VB(){Uc.pop(),si=Uc[Uc.length-1]||null}let ou=1;function lT(e){ou+=e}function $x(e){return e.dynamicChildren=ou>0?si||Ja:null,VB(),ou>0&&si&&si.push(e),e}function j(e,t,n,s,i,r){return $x(I(e,t,n,s,i,r,!0))}function na(e,t,n,s,i){return $x(Et(e,t,n,s,i,!0))}function au(e){return e?e.__v_isVNode===!0:!1}function rc(e,t){return e.type===t.type&&e.key===t.key}const mp="__vInternal",Hx=({key:e})=>e??null,jd=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?_n(e)||Es(e)||zt(e)?{i:ys,r:e,k:t,f:!!n}:e:null);function I(e,t=null,n=null,s=0,i=null,r=e===xe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Hx(t),ref:t&&jd(t),scopeId:fp,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ys};return a?(fv(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=_n(n)?8:16),ou>0&&!o&&si&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&si.push(c),c}const Et=BB;function BB(e,t=null,n=null,s=0,i=null,r=!1){if((!e||e===sB)&&(e=ea),au(e)){const a=sa(e,t,!0);return n&&fv(a,n),ou>0&&!r&&si&&(a.shapeFlag&6?si[si.indexOf(e)]=a:si.push(a)),a.patchFlag|=-2,a}if(QB(e)&&(e=e.__vccOpts),t){t=$B(t);let{class:a,style:c}=t;a&&!_n(a)&&(t.class=Dl(a)),ke(c)&&(up(c)&&!Dt(c)&&(c=Mn({},c)),t.style=ap(c))}const o=_n(e)?1:rB(e)?128:FB(e)?64:ke(e)?4:zt(e)?2:0;return I(e,t,n,s,i,o,r,!0)}function $B(e){return e?up(e)||mp in e?Mn({},e):e:null}function sa(e,t,n=!1){const{props:s,ref:i,patchFlag:r,children:o}=e,a=t?yr(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Hx(a),ref:t&&t.ref?n&&i?Dt(i)?i.concat(jd(t)):[i,jd(t)]:jd(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&sa(e.ssContent),ssFallback:e.ssFallback&&sa(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function bs(e=" ",t=0){return Et(gp,null,e,t)}function _p(e,t){const n=Et(zd,null,e);return n.staticCount=t,n}function Xt(e="",t=!1){return t?(W(),na(ea,null,e)):Et(ea,null,e)}function vi(e){return e==null||typeof e=="boolean"?Et(ea):Dt(e)?Et(xe,null,e.slice()):typeof e=="object"?Ur(e):Et(gp,null,String(e))}function Ur(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:sa(e)}function fv(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(Dt(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),fv(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(mp in t)?t._ctx=ys:i===3&&ys&&(ys.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else zt(t)?(t={default:t,_ctx:ys},n=32):(t=String(t),s&64?(n=16,t=[bs(t)]):n=8);e.children=t,e.shapeFlag|=n}function yr(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Dl([t.class,s.class]));else if(i==="style")t.style=ap([t.style,s.style]);else if(sp(i)){const r=t[i],o=s[i];o&&r!==o&&!(Dt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function mi(e,t,n,s=null){ri(e,t,7,[n,s])}const HB=Ox();let WB=0;function zB(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||HB,r={uid:WB++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EV(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Nx(s,i),emitsOptions:Sx(s,i),emit:null,emitted:null,propsDefaults:Me,inheritAttrs:s.inheritAttrs,ctx:Me,data:Me,props:Me,attrs:Me,slots:Me,refs:Me,setupState:Me,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=JV.bind(null,r),e.ce&&e.ce(r),r}let Wn=null,vf,B_;{const e=nx(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};vf=t("__VUE_INSTANCE_SETTERS__",n=>Wn=n),B_=t("__VUE_SSR_SETTERS__",n=>yp=n)}const Hu=e=>{const t=Wn;return vf(e),e.scope.on(),()=>{e.scope.off(),vf(t)}},cT=()=>{Wn&&Wn.scope.off(),vf(null)};function Wx(e){return e.vnode.shapeFlag&4}let yp=!1;function jB(e,t=!1){t&&B_(t);const{props:n,children:s}=e.vnode,i=Wx(e);CB(e,n,i,t),kB(e,s);const r=i?qB(e,t):void 0;return t&&B_(!1),r}function qB(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=yx(new Proxy(e.ctx,wB));const{setup:s}=n;if(s){const i=e.setupContext=s.length>1?GB(e):null,r=Hu(e);ma();const o=Qr(s,e,0,[e.props,i]);if(_a(),r(),Z1(o)){if(o.then(cT,cT),t)return o.then(a=>{uT(e,a,t)}).catch(a=>{hp(a,e,0)});e.asyncDep=o}else uT(e,o,t)}else zx(e,t)}function uT(e,t,n){zt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ke(t)&&(e.setupState=Ex(t)),zx(e,n)}let hT;function zx(e,t,n){const s=e.type;if(!e.render){if(!t&&hT&&!s.render){const i=s.template||hv(e).template;if(i){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:c}=s,h=Mn(Mn({isCustomElement:r,delimiters:a},o),c);s.render=hT(i,h)}}e.render=s.render||Ks}{const i=Hu(e);ma();try{EB(e)}finally{_a(),i()}}}function KB(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return ws(e,"get","$attrs"),t[n]}}))}function GB(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return KB(e)},slots:e.slots,emit:e.emit,expose:t}}function vp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Ex(yx(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Nc)return Nc[n](e)},has(t,n){return n in t||n in Nc}}))}function YB(e,t=!0){return zt(e)?e.displayName||e.name:e.name||t&&e.__name}function QB(e){return zt(e)&&"__vccOpts"in e}const Se=(e,t)=>zV(e,t,yp);function ir(e,t,n){const s=arguments.length;return s===2?ke(t)&&!Dt(t)?au(t)?Et(e,null,[t]):Et(e,t):Et(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&au(n)&&(n=[n]),Et(e,t,n))}const jx="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XB="http://www.w3.org/2000/svg",JB="http://www.w3.org/1998/Math/MathML",Fr=typeof document<"u"?document:null,dT=Fr&&Fr.createElement("template"),ZB={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Fr.createElementNS(XB,e):t==="mathml"?Fr.createElementNS(JB,e):Fr.createElement(e,n?{is:n}:void 0);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Fr.createTextNode(e),createComment:e=>Fr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,r){const o=n?n.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===r||!(i=i.nextSibling)););else{dT.innerHTML=s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e;const a=dT.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},t4=Symbol("_vtc");function e4(e,t,n){const s=e[t4];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const bf=Symbol("_vod"),qx=Symbol("_vsh"),Vm={beforeMount(e,{value:t},{transition:n}){e[bf]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):oc(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),oc(e,!0),s.enter(e)):s.leave(e,()=>{oc(e,!1)}):oc(e,t))},beforeUnmount(e,{value:t}){oc(e,t)}};function oc(e,t){e.style.display=t?e[bf]:"none",e[qx]=!t}const n4=Symbol(""),s4=/(^|;)\s*display\s*:/;function i4(e,t,n){const s=e.style,i=_n(n);let r=!1;if(n&&!i){if(t)if(_n(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&qd(s,a,"")}else for(const o in t)n[o]==null&&qd(s,o,"");for(const o in n)o==="display"&&(r=!0),qd(s,o,n[o])}else if(i){if(t!==n){const o=s[n4];o&&(n+=";"+o),s.cssText=n,r=s4.test(n)}}else t&&e.removeAttribute("style");bf in e&&(e[bf]=r?s.display:"",e[qx]&&(s.display="none"))}const fT=/\s*!important$/;function qd(e,t,n){if(Dt(n))n.forEach(s=>qd(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=r4(e,t);fT.test(n)?e.setProperty(Pl(s),n.replace(fT,""),"important"):e[s]=n}}const pT=["Webkit","Moz","ms"],Bm={};function r4(e,t){const n=Bm[t];if(n)return n;let s=Ni(t);if(s!=="filter"&&s in e)return Bm[t]=s;s=op(s);for(let i=0;i<pT.length;i++){const r=pT[i]+s;if(r in e)return Bm[t]=r}return t}const gT="http://www.w3.org/1999/xlink";function o4(e,t,n,s,i){if(s&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(gT,t.slice(6,t.length)):e.setAttributeNS(gT,t,n);else{const r=vV(t);n==null||r&&!sx(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function a4(e,t,n,s,i,r,o){if(t==="innerHTML"||t==="textContent"){s&&o(s,i,r),e[t]=n??"";return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const h=a==="OPTION"?e.getAttribute("value")||"":e.value,d=n??"";(h!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=sx(n):n==null&&h==="string"?(n="",c=!0):h==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(t)}function Bo(e,t,n,s){e.addEventListener(t,n,s)}function l4(e,t,n,s){e.removeEventListener(t,n,s)}const mT=Symbol("_vei");function c4(e,t,n,s,i=null){const r=e[mT]||(e[mT]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=u4(t);if(s){const h=r[t]=f4(s,i);Bo(e,a,h,c)}else o&&(l4(e,a,o,c),r[t]=void 0)}}const _T=/(?:Once|Passive|Capture)$/;function u4(e){let t;if(_T.test(e)){t={};let s;for(;s=e.match(_T);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Pl(e.slice(2)),t]}let $m=0;const h4=Promise.resolve(),d4=()=>$m||(h4.then(()=>$m=0),$m=Date.now());function f4(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;ri(p4(s,n.value),t,5,[s])};return n.value=e,n.attached=d4(),n}function p4(e,t){if(Dt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const yT=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,g4=(e,t,n,s,i,r,o,a,c)=>{const h=i==="svg";t==="class"?e4(e,s,h):t==="style"?i4(e,n,s):sp(t)?Xy(t)||c4(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):m4(e,t,s,h))?a4(e,t,s,r,o,a,c):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),o4(e,t,s,h))};function m4(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&yT(t)&&zt(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return yT(t)&&_n(n)?!1:t in e}const wf=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Dt(t)?n=>Vd(t,n):t};function _4(e){e.target.composing=!0}function vT(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const nl=Symbol("_assign"),gn={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[nl]=wf(i);const r=s||i.props&&i.props.type==="number";Bo(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),r&&(a=nu(a)),e[nl](a)}),n&&Bo(e,"change",()=>{e.value=e.value.trim()}),t||(Bo(e,"compositionstart",_4),Bo(e,"compositionend",vT),Bo(e,"change",vT))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:s,number:i}},r){if(e[nl]=wf(r),e.composing)return;const o=i||e.type==="number"?nu(e.value):e.value,a=t??"";o!==a&&(document.activeElement===e&&e.type!=="range"&&(n||s&&e.value.trim()===a)||(e.value=a))}},lu={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ip(t);Bo(e,"change",()=>{const r=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?nu(Ef(o)):Ef(o));e[nl](e.multiple?i?new Set(r):r:r[0]),e._assigning=!0,kl(()=>{e._assigning=!1})}),e[nl]=wf(s)},mounted(e,{value:t,modifiers:{number:n}}){bT(e,t,n)},beforeUpdate(e,t,n){e[nl]=wf(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||bT(e,t,n)}};function bT(e,t,n){const s=e.multiple,i=Dt(t);if(!(s&&!i&&!ip(t))){for(let r=0,o=e.options.length;r<o;r++){const a=e.options[r],c=Ef(a);if(s)if(i){const h=typeof c;h==="string"||h==="number"?a.selected=t.includes(n?nu(c):c):a.selected=wV(t,c)>-1}else a.selected=t.has(c);else if(lp(Ef(a),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ef(e){return"_value"in e?e._value:e.value}const y4=["ctrl","shift","alt","meta"],v4={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>y4.some(n=>e[`${n}Key`]&&!t.includes(n))},Wu=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(i,...r)=>{for(let o=0;o<t.length;o++){const a=v4[t[o]];if(a&&a(i,t))return}return e(i,...r)})},b4=Mn({patchProp:g4},ZB);let wT;function w4(){return wT||(wT=MB(b4))}const Kx=(...e)=>{const t=w4().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=T4(s);if(!i)return;const r=t._component;!zt(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,E4(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function E4(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function T4(e){return _n(e)?document.querySelector(e):e}var ET={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},I4=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const i=e[n++];if(i<128)t[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=e[n++];t[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=e[n++],o=e[n++],a=e[n++],c=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;t[s++]=String.fromCharCode(55296+(c>>10)),t[s++]=String.fromCharCode(56320+(c&1023))}else{const r=e[n++],o=e[n++];t[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return t.join("")},Yx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<e.length;i+=3){const r=e[i],o=i+1<e.length,a=o?e[i+1]:0,c=i+2<e.length,h=c?e[i+2]:0,d=r>>2,p=(r&3)<<4|a>>4;let g=(a&15)<<2|h>>6,_=h&63;c||(_=64,o||(g=64)),s.push(n[d],n[p],n[g],n[_])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Gx(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):I4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<e.length;){const r=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const h=i<e.length?n[e.charAt(i)]:64;++i;const p=i<e.length?n[e.charAt(i)]:64;if(++i,r==null||a==null||h==null||p==null)throw new A4;const g=r<<2|a>>4;if(s.push(g),h!==64){const _=a<<4&240|h>>2;if(s.push(_),p!==64){const y=h<<6&192|p;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class A4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x4=function(e){const t=Gx(e);return Yx.encodeByteArray(t,!0)},Tf=function(e){return x4(e).replace(/\./g,"")},Qx=function(e){try{return Yx.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=()=>S4().__FIREBASE_DEFAULTS__,C4=()=>{if(typeof process>"u"||typeof ET>"u")return;const e=ET.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},P4=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Qx(e[1]);return t&&JSON.parse(t)},bp=()=>{try{return R4()||C4()||P4()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Xx=e=>{var t,n;return(n=(t=bp())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Jx=e=>{const t=Xx(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},Zx=()=>{var e;return(e=bp())===null||e===void 0?void 0:e.config},tS=e=>{var t;return(t=bp())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Tf(JSON.stringify(n)),Tf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function O4(){var e;const t=(e=bp())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M4(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function N4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function L4(){const e=hn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function U4(){return!O4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nS(){try{return typeof indexedDB=="object"}catch{return!1}}function F4(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;t(((r=i.error)===null||r===void 0?void 0:r.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V4="FirebaseError";class Bi extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=V4,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zu.prototype.create)}}class zu{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},i=`${this.service}/${t}`,r=this.errors[t],o=r?B4(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Bi(i,a,s)}}function B4(e,t){return e.replace($4,(n,s)=>{const i=t[s];return i!=null?String(i):`<${s}?>`})}const $4=/\{\$([^}]+)}/g;function H4(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function hl(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const i of n){if(!s.includes(i))return!1;const r=e[i],o=t[i];if(TT(r)&&TT(o)){if(!hl(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function TT(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function bc(e){const t={};return e.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,r]=s.split("=");t[decodeURIComponent(i)]=decodeURIComponent(r)}}),t}function wc(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function W4(e,t){const n=new z4(e,t);return n.subscribe.bind(n)}class z4{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let i;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");j4(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:s},i.next===void 0&&(i.next=Hm),i.error===void 0&&(i.error=Hm),i.complete===void 0&&(i.complete=Hm);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),r}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j4(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Hm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(e){return e&&e._delegate?e._delegate:e}class io{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new D4;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(G4(t))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(t=Lo){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Lo){return this.instances.has(t)}getOptions(t=Lo){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(t,n){var s;const i=this.normalizeInstanceIdentifier(n),r=(s=this.onInitCallbacks.get(i))!==null&&s!==void 0?s:new Set;r.add(t),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&t(o,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:K4(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Lo){return this.component?this.component.multipleInstances?t:Lo:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K4(e){return e===Lo?void 0:e}function G4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new q4(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(se||(se={}));const Q4={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},X4=se.INFO,J4={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},Z4=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),i=J4[t];if(i)console[i](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class pv{constructor(t){this.name=t,this._logLevel=X4,this._logHandler=Z4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in se))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Q4[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...t),this._logHandler(this,se.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...t),this._logHandler(this,se.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,se.INFO,...t),this._logHandler(this,se.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,se.WARN,...t),this._logHandler(this,se.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...t),this._logHandler(this,se.ERROR,...t)}}const t$=(e,t)=>t.some(n=>e instanceof n);let IT,AT;function e$(){return IT||(IT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n$(){return AT||(AT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sS=new WeakMap,$_=new WeakMap,iS=new WeakMap,Wm=new WeakMap,gv=new WeakMap;function s$(e){const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{n(Xr(e.result)),i()},o=()=>{s(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&sS.set(n,e)}).catch(()=>{}),gv.set(t,e),t}function i$(e){if($_.has(e))return;const t=new Promise((n,s)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});$_.set(e,t)}let H_={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return $_.get(e);if(t==="objectStoreNames")return e.objectStoreNames||iS.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function r$(e){H_=e(H_)}function o$(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(zm(this),t,...n);return iS.set(s,t.sort?t.sort():[t]),Xr(s)}:n$().includes(e)?function(...t){return e.apply(zm(this),t),Xr(sS.get(this))}:function(...t){return Xr(e.apply(zm(this),t))}}function a$(e){return typeof e=="function"?o$(e):(e instanceof IDBTransaction&&i$(e),t$(e,e$())?new Proxy(e,H_):e)}function Xr(e){if(e instanceof IDBRequest)return s$(e);if(Wm.has(e))return Wm.get(e);const t=a$(e);return t!==e&&(Wm.set(e,t),gv.set(t,e)),t}const zm=e=>gv.get(e);function l$(e,t,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(e,t),a=Xr(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Xr(o.result),c.oldVersion,c.newVersion,Xr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const c$=["get","getKey","getAll","getAllKeys","count"],u$=["put","add","delete","clear"],jm=new Map;function xT(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(jm.get(t))return jm.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,i=u$.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||c$.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let h=c.store;return s&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&c.done]))[0]};return jm.set(t,r),r}r$(e=>({...e,get:(t,n,s)=>xT(t,n)||e.get(t,n,s),has:(t,n)=>!!xT(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d$(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function d$(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const W_="@firebase/app",ST="0.9.29";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=new pv("@firebase/app"),f$="@firebase/app-compat",p$="@firebase/analytics-compat",g$="@firebase/analytics",m$="@firebase/app-check-compat",_$="@firebase/app-check",y$="@firebase/auth",v$="@firebase/auth-compat",b$="@firebase/database",w$="@firebase/database-compat",E$="@firebase/functions",T$="@firebase/functions-compat",I$="@firebase/installations",A$="@firebase/installations-compat",x$="@firebase/messaging",S$="@firebase/messaging-compat",R$="@firebase/performance",C$="@firebase/performance-compat",P$="@firebase/remote-config",D$="@firebase/remote-config-compat",k$="@firebase/storage",O$="@firebase/storage-compat",M$="@firebase/firestore",N$="@firebase/firestore-compat",L$="firebase",U$="10.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_="[DEFAULT]",F$={[W_]:"fire-core",[f$]:"fire-core-compat",[g$]:"fire-analytics",[p$]:"fire-analytics-compat",[_$]:"fire-app-check",[m$]:"fire-app-check-compat",[y$]:"fire-auth",[v$]:"fire-auth-compat",[b$]:"fire-rtdb",[w$]:"fire-rtdb-compat",[E$]:"fire-fn",[T$]:"fire-fn-compat",[I$]:"fire-iid",[A$]:"fire-iid-compat",[x$]:"fire-fcm",[S$]:"fire-fcm-compat",[R$]:"fire-perf",[C$]:"fire-perf-compat",[P$]:"fire-rc",[D$]:"fire-rc-compat",[k$]:"fire-gcs",[O$]:"fire-gcs-compat",[M$]:"fire-fst",[N$]:"fire-fst-compat","fire-js":"fire-js",[L$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new Map,j_=new Map;function V$(e,t){try{e.container.addComponent(t)}catch(n){ia.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ra(e){const t=e.name;if(j_.has(t))return ia.debug(`There were multiple attempts to register component ${t}.`),!1;j_.set(t,e);for(const n of If.values())V$(n,e);return!0}function wp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Jr=new zu("app","Firebase",B$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(t,n,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya=U$;function rS(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s=Object.assign({name:z_,automaticDataCollectionEnabled:!1},t),i=s.name;if(typeof i!="string"||!i)throw Jr.create("bad-app-name",{appName:String(i)});if(n||(n=Zx()),!n)throw Jr.create("no-options");const r=If.get(i);if(r){if(hl(n,r.options)&&hl(s,r.config))return r;throw Jr.create("duplicate-app",{appName:i})}const o=new Y4(i);for(const c of j_.values())o.addComponent(c);const a=new $$(n,s,o);return If.set(i,a),a}function mv(e=z_){const t=If.get(e);if(!t&&e===z_&&Zx())return rS();if(!t)throw Jr.create("no-app",{appName:e});return t}function Ri(e,t,n){var s;let i=(s=F$[e])!==null&&s!==void 0?s:e;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${t}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ia.warn(a.join(" "));return}ra(new io(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="firebase-heartbeat-database",W$=1,cu="firebase-heartbeat-store";let qm=null;function oS(){return qm||(qm=l$(H$,W$,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(cu)}catch(n){console.warn(n)}}}}).catch(e=>{throw Jr.create("idb-open",{originalErrorMessage:e.message})})),qm}async function z$(e){try{const n=(await oS()).transaction(cu),s=await n.objectStore(cu).get(aS(e));return await n.done,s}catch(t){if(t instanceof Bi)ia.warn(t.message);else{const n=Jr.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ia.warn(n.message)}}}async function RT(e,t){try{const s=(await oS()).transaction(cu,"readwrite");await s.objectStore(cu).put(t,aS(e)),await s.done}catch(n){if(n instanceof Bi)ia.warn(n.message);else{const s=Jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ia.warn(s.message)}}}function aS(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j$=1024,q$=30*24*60*60*1e3;class K${constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y$(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=CT();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=q$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=CT(),{heartbeatsToSend:s,unsentEntries:i}=G$(this._heartbeatsCache.heartbeats),r=Tf(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function CT(){return new Date().toISOString().substring(0,10)}function G$(e,t=j$){const n=[];let s=e.slice();for(const i of e){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),PT(n)>t){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),PT(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Y${constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nS()?F4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await z$(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return RT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return RT(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function PT(e){return Tf(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(e){ra(new io("platform-logger",t=>new h$(t),"PRIVATE")),ra(new io("heartbeat",t=>new K$(t),"PRIVATE")),Ri(W_,ST,e),Ri(W_,ST,"esm2017"),Ri("fire-js","")}Q$("");function _v(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function lS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const X$=lS,cS=new zu("auth","Firebase",lS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new pv("@firebase/auth");function J$(e,...t){Af.logLevel<=se.WARN&&Af.warn(`Auth (${ya}): ${e}`,...t)}function Kd(e,...t){Af.logLevel<=se.ERROR&&Af.error(`Auth (${ya}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e,...t){throw yv(e,...t)}function Ci(e,...t){return yv(e,...t)}function Z$(e,t,n){const s=Object.assign(Object.assign({},X$()),{[t]:n});return new zu("auth","Firebase",s).create(t,{appName:e.name})}function yv(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return cS.create(e,...t)}function Pt(e,t,...n){if(!e)throw yv(t,...n)}function rr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Kd(t),new Error(t)}function pr(e,t){e||rr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function t5(){return DT()==="http:"||DT()==="https:"}function DT(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t5()||M4()||"connection"in navigator)?navigator.onLine:!0}function n5(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(t,n){this.shortDelay=t,this.longDelay=n,pr(n>t,"Short delay should be less than long delay!"),this.isMobile=k4()||N4()}get(){return e5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(e,t){pr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i5=new qu(3e4,6e4);function vr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function br(e,t,n,s,i={}){return hS(e,i,async()=>{let r={},o={};s&&(t==="GET"?o=s:r={body:JSON.stringify(s)});const a=ju(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),uS.fetch()(dS(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},r))})}async function hS(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},s5),t);try{const i=new o5(e),r=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw fd(e,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,h]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw fd(e,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw fd(e,"email-already-in-use",o);if(c==="USER_DISABLED")throw fd(e,"user-disabled",o);const d=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Z$(e,d,h);ai(e,d)}}catch(i){if(i instanceof Bi)throw i;ai(e,"network-request-failed",{message:String(i)})}}async function Ku(e,t,n,s,i={}){const r=await br(e,t,n,s,i);return"mfaPendingCredential"in r&&ai(e,"multi-factor-auth-required",{_serverResponse:r}),r}function dS(e,t,n,s){const i=`${t}${n}?${s}`;return e.config.emulator?vv(e.config,i):`${e.config.apiScheme}://${i}`}function r5(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class o5{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Ci(this.auth,"network-request-failed")),i5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fd(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const i=Ci(e,t,s);return i.customData._tokenResponse=n,i}function kT(e){return e!==void 0&&e.enterprise!==void 0}class a5{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return r5(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}async function l5(e,t){return br(e,"GET","/v2/recaptchaConfig",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c5(e,t){return br(e,"POST","/v1/accounts:delete",t)}async function u5(e,t){return br(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function h5(e,t=!1){const n=Xe(e),s=await n.getIdToken(t),i=bv(s);Pt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const r=typeof i.firebase=="object"?i.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:i,token:s,authTime:Fc(Km(i.auth_time)),issuedAtTime:Fc(Km(i.iat)),expirationTime:Fc(Km(i.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Km(e){return Number(e)*1e3}function bv(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return Kd("JWT malformed, contained fewer than 3 sections"),null;try{const i=Qx(n);return i?JSON.parse(i):(Kd("Failed to decode base64 JWT payload"),null)}catch(i){return Kd("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function d5(e){const t=bv(e);return Pt(t,"internal-error"),Pt(typeof t.exp<"u","internal-error"),Pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Bi&&f5(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function f5({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fc(this.lastLoginAt),this.creationTime=Fc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(e){var t;const n=e.auth,s=await e.getIdToken(),i=await uu(e,u5(n,{idToken:s}));Pt(i==null?void 0:i.users.length,n,"internal-error");const r=i.users[0];e._notifyReloadListener(r);const o=!((t=r.providerUserInfo)===null||t===void 0)&&t.length?_5(r.providerUserInfo):[],a=m5(e.providerData,o),c=e.isAnonymous,h=!(e.email&&r.passwordHash)&&!(a!=null&&a.length),d=c?h:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new fS(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,p)}async function g5(e){const t=Xe(e);await xf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function m5(e,t){return[...e.filter(s=>!t.some(i=>i.providerId===s.providerId)),...t]}function _5(e){return e.map(t=>{var{providerId:n}=t,s=_v(t,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y5(e,t){const n=await hS(e,{},async()=>{const s=ju({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,o=dS(e,i,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uS.fetch()(o,{method:"POST",headers:a,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function v5(e,t){return br(e,"POST","/v2/accounts:revokeToken",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Pt(t.idToken,"internal-error"),Pt(typeof t.idToken<"u","internal-error"),Pt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):d5(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}async getToken(t,n=!1){return Pt(!this.accessToken||this.refreshToken,t,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:i,expiresIn:r}=await y5(t,n);this.updateTokensAndExpiration(s,i,Number(r))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:i,expirationTime:r}=n,o=new hu;return s&&(Pt(typeof s=="string","internal-error",{appName:t}),o.refreshToken=s),i&&(Pt(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),r&&(Pt(typeof r=="number","internal-error",{appName:t}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new hu,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(e,t){Pt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Qo{constructor(t){var{uid:n,auth:s,stsTokenManager:i}=t,r=_v(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new p5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new fS(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const n=await uu(this,this.stsTokenManager.getToken(this.auth,t));return Pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return h5(this,t)}reload(){return g5(this)}_assign(t){this!==t&&(Pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Qo(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await uu(this,c5(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var s,i,r,o,a,c,h,d;const p=(s=n.displayName)!==null&&s!==void 0?s:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(r=n.phoneNumber)!==null&&r!==void 0?r:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,A=(h=n.createdAt)!==null&&h!==void 0?h:void 0,R=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:D,emailVerified:O,isAnonymous:N,providerData:L,stsTokenManager:V}=n;Pt(D&&V,t,"internal-error");const B=hu.fromJSON(this.name,V);Pt(typeof D=="string",t,"internal-error"),kr(p,t.name),kr(g,t.name),Pt(typeof O=="boolean",t,"internal-error"),Pt(typeof N=="boolean",t,"internal-error"),kr(_,t.name),kr(y,t.name),kr(b,t.name),kr(w,t.name),kr(A,t.name),kr(R,t.name);const tt=new Qo({uid:D,auth:t,email:g,emailVerified:O,displayName:p,isAnonymous:N,photoURL:y,phoneNumber:_,tenantId:b,stsTokenManager:B,createdAt:A,lastLoginAt:R});return L&&Array.isArray(L)&&(tt.providerData=L.map(bt=>Object.assign({},bt))),w&&(tt._redirectEventId=w),tt}static async _fromIdTokenResponse(t,n,s=!1){const i=new hu;i.updateFromServerResponse(n);const r=new Qo({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:s});return await xf(r),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=new Map;function or(e){pr(e instanceof Function,"Expected a class definition");let t=OT.get(e);return t?(pr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,OT.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}pS.type="NONE";const MT=pS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(e,t,n){return`firebase:${e}:${t}:${n}`}class sl{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:i,name:r}=this.auth;this.fullUserKey=Gd(this.userKey,i.apiKey,r),this.fullPersistenceKey=Gd("persistence",i.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Qo._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new sl(or(MT),t,s);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let r=i[0]||or(MT);const o=Gd(s,t.config.apiKey,t.name);let a=null;for(const h of n)try{const d=await h._get(o);if(d){const p=Qo._fromJSON(t,d);h!==r&&(a=p),r=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new sl(r,t,s):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==r)try{await h._remove(o)}catch{}})),new sl(r,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_S(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(vS(t))return"Blackberry";if(bS(t))return"Webos";if(wv(t))return"Safari";if((t.includes("chrome/")||mS(t))&&!t.includes("edge/"))return"Chrome";if(yS(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function gS(e=hn()){return/firefox\//i.test(e)}function wv(e=hn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mS(e=hn()){return/crios\//i.test(e)}function _S(e=hn()){return/iemobile/i.test(e)}function yS(e=hn()){return/android/i.test(e)}function vS(e=hn()){return/blackberry/i.test(e)}function bS(e=hn()){return/webos/i.test(e)}function Ep(e=hn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function b5(e=hn()){var t;return Ep(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function w5(){return L4()&&document.documentMode===10}function wS(e=hn()){return Ep(e)||yS(e)||bS(e)||vS(e)||/windows phone/i.test(e)||_S(e)}function E5(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(e,t=[]){let n;switch(e){case"Browser":n=NT(hn());break;case"Worker":n=`${NT(hn())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ya}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=r=>new Promise((o,a)=>{try{const c=t(r);o(c)}catch(c){a(c)}});s.onAbort=n,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(e,t={}){return br(e,"GET","/v2/passwordPolicy",vr(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=6;class x5{constructor(t){var n,s,i,r;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:A5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(s=t.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(r=t.forceUpgradeOnSignin)!==null&&r!==void 0?r:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,s,i,r,o,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(s=c.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsUppercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let i=0;i<t.length;i++)s=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(t,n,s,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new LT(this),this.idTokenSubscription=new LT(this),this.beforeStateQueue=new T5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=or(n)),this._initializationPromise=this.queue(async()=>{var s,i;if(!this._deleted&&(this.persistenceManager=await sl.create(this,t),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUser(t){var n;const s=await this.assertedPersistence.getCurrentUser();let i=s,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(t);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await xf(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=n5()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const n=t?Xe(t):null;return n&&Pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue(async()=>{await this.assertedPersistence.setPersistence(or(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await I5(this),n=new x5(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new zu("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await v5(this,s)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&or(t)||this._popupRedirectResolver;Pt(n,this,"argument-error"),this.redirectPersistenceManager=await sl.create(this,[or(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,i){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pt(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=t.addObserver(n,s,i);return()=>{o=!0,c()}}else{const c=t.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=ES(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&J$(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ho(e){return Xe(e)}class LT{constructor(t){this.auth=t,this.observer=null,this.addObserver=W4(n=>this.observer=n)}get next(){return Pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function R5(e){Tp=e}function TS(e){return Tp.loadJS(e)}function C5(){return Tp.recaptchaEnterpriseScript}function P5(){return Tp.gapiScript}function D5(e){return`__${e}${Math.floor(Math.random()*1e6)}`}const k5="recaptcha-enterprise",O5="NO_RECAPTCHA";class M5{constructor(t){this.type=k5,this.auth=ho(t)}async verify(t="verify",n=!1){async function s(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{l5(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const h=new a5(c);return r.tenantId==null?r._agentRecaptchaConfig=h:r._tenantRecaptchaConfigs[r.tenantId]=h,o(h.siteKey)}}).catch(c=>{a(c)})})}function i(r,o,a){const c=window.grecaptcha;kT(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:t}).then(h=>{o(h)}).catch(()=>{o(O5)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((r,o)=>{s(this.auth).then(a=>{if(!n&&kT(window.grecaptcha))i(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=C5();c.length!==0&&(c+=a),TS(c).then(()=>{i(a,r,o)}).catch(h=>{o(h)})}}).catch(a=>{o(a)})})}}async function UT(e,t,n,s=!1){const i=new M5(e);let r;try{r=await i.verify(n)}catch{r=await i.verify(n,!0)}const o=Object.assign({},t);return s?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Sf(e,t,n,s){var i;if(!((i=e._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await UT(e,t,n,n==="getOobCode");return s(e,r)}else return s(e,t).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await UT(e,t,n,n==="getOobCode");return s(e,o)}else return Promise.reject(r)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(e,t){const n=wp(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),r=n.getOptions();if(hl(r,t??{}))return i;ai(i,"already-initialized")}return n.initialize({options:t})}function L5(e,t){const n=(t==null?void 0:t.persistence)||[],s=(Array.isArray(n)?n:[n]).map(or);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t==null?void 0:t.popupRedirectResolver)}function U5(e,t,n){const s=ho(e);Pt(s._canInitEmulator,s,"emulator-config-failed"),Pt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),r=IS(t),{host:o,port:a}=F5(t),c=a===null?"":`:${a}`;s.config.emulator={url:`${r}//${o}${c}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||V5()}function IS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function F5(e){const t=IS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const r=i[1];return{host:r,port:FT(s.substr(r.length+1))}}else{const[r,o]=s.split(":");return{host:r,port:FT(o)}}}function FT(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function V5(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(t){return rr("not implemented")}_linkToIdToken(t,n){return rr("not implemented")}_getReauthenticationResolver(t){return rr("not implemented")}}async function B5(e,t){return br(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $5(e,t){return Ku(e,"POST","/v1/accounts:signInWithPassword",vr(e,t))}async function H5(e,t){return br(e,"POST","/v1/accounts:sendOobCode",vr(e,t))}async function W5(e,t){return H5(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z5(e,t){return Ku(e,"POST","/v1/accounts:signInWithEmailLink",vr(e,t))}async function j5(e,t){return Ku(e,"POST","/v1/accounts:signInWithEmailLink",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Ev{constructor(t,n,s,i=null){super("password",s),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new du(t,n,"password")}static _fromEmailAndCode(t,n,s=null){return new du(t,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sf(t,n,"signInWithPassword",$5);case"emailLink":return z5(t,{email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Sf(t,s,"signUpPassword",B5);case"emailLink":return j5(t,{idToken:n,email:this._email,oobCode:this._password});default:ai(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(e,t){return Ku(e,"POST","/v1/accounts:signInWithIdp",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="http://localhost";class oa extends Ev{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new oa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ai("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:i}=n,r=_v(n,["providerId","signInMethod"]);if(!s||!i)return null;const o=new oa(s,i);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return il(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,il(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,il(t,n)}buildRequest(){const t={requestUri:q5,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ju(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K5(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function G5(e){const t=bc(wc(e)).link,n=t?bc(wc(t)).deep_link_id:null,s=bc(wc(e)).deep_link_id;return(s?bc(wc(s)).link:null)||s||n||t||e}class Tv{constructor(t){var n,s,i,r,o,a;const c=bc(wc(t)),h=(n=c.apiKey)!==null&&n!==void 0?n:null,d=(s=c.oobCode)!==null&&s!==void 0?s:null,p=K5((i=c.mode)!==null&&i!==void 0?i:null);Pt(h&&d&&p,"argument-error"),this.apiKey=h,this.operation=p,this.code=d,this.continueUrl=(r=c.continueUrl)!==null&&r!==void 0?r:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(t){const n=G5(t);try{return new Tv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.providerId=Ol.PROVIDER_ID}static credential(t,n){return du._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const s=Tv.parseLink(n);return Pt(s,"argument-error"),du._fromEmailAndCode(t,s.code,s.tenantId)}}Ol.PROVIDER_ID="password";Ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends AS{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Gu{constructor(){super("facebook.com")}static credential(t){return oa._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Br.credentialFromTaggedObject(t)}static credentialFromError(t){return Br.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Br.credential(t.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends Gu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return oa._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return $r.credentialFromTaggedObject(t)}static credentialFromError(t){return $r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return $r.credential(n,s)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Gu{constructor(){super("github.com")}static credential(t){return oa._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Hr.credentialFromTaggedObject(t)}static credentialFromError(t){return Hr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Hr.credential(t.oauthAccessToken)}catch{return null}}}Hr.GITHUB_SIGN_IN_METHOD="github.com";Hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends Gu{constructor(){super("twitter.com")}static credential(t,n){return oa._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Wr.credentialFromTaggedObject(t)}static credentialFromError(t){return Wr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Wr.credential(n,s)}catch{return null}}}Wr.TWITTER_SIGN_IN_METHOD="twitter.com";Wr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y5(e,t){return Ku(e,"POST","/v1/accounts:signUp",vr(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,i=!1){const r=await Qo._fromIdTokenResponse(t,s,i),o=VT(s);return new aa({user:r,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const i=VT(s);return new aa({user:t,providerId:i,_tokenResponse:s,operationType:n})}}function VT(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends Bi{constructor(t,n,s,i){var r;super(n.code,n.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:t.name,tenantId:(r=t.tenantId)!==null&&r!==void 0?r:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,i){return new Rf(t,n,s,i)}}function xS(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Rf._fromErrorAndOperation(e,r,t,s):r})}async function Q5(e,t,n=!1){const s=await uu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return aa._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(e,t,n=!1){const{auth:s}=e,i="reauthenticate";try{const r=await uu(e,xS(s,i,t,e),n);Pt(r.idToken,s,"internal-error");const o=bv(r.idToken);Pt(o,s,"internal-error");const{sub:a}=o;return Pt(e.uid===a,s,"user-mismatch"),aa._forOperation(e,i,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&ai(s,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(e,t,n=!1){const s="signIn",i=await xS(e,s,t),r=await aa._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(r.user),r}async function J5(e,t){return SS(ho(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(e,t,n){var s;Pt(((s=n.url)===null||s===void 0?void 0:s.length)>0,e,"invalid-continue-uri"),Pt(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pt(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pt(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(e){const t=ho(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function t3(e,t,n){const s=ho(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Z5(s,i,n),await Sf(s,i,"getOobCode",W5)}async function e3(e,t,n){const s=ho(e),o=await Sf(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y5).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&RS(e),c}),a=await aa._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function n3(e,t,n){return J5(Xe(e),Ol.credential(t,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&RS(e),s})}function s3(e,t,n,s){return Xe(e).onIdTokenChanged(t,n,s)}function i3(e,t,n){return Xe(e).beforeAuthStateChanged(t,n)}function Qs(e,t,n,s){return Xe(e).onAuthStateChanged(t,n,s)}function r3(e){return Xe(e).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(){const e=hn();return wv(e)||Ep(e)}const a3=1e3,l3=10;class PS extends CS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=o3()&&E5(),this.fallbackToPolling=wS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),i=this.localCache[n];s!==i&&t(n,i,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const s=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(s);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(s,t.newValue):this.storage.removeItem(s);else if(this.localCache[s]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},r=this.storage.getItem(s);w5()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,l3):i()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},a3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}PS.type="LOCAL";const c3=PS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends CS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}DS.type="SESSION";const kS=DS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const s=new Ip(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:i,data:r}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,r)),c=await u3(a);n.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:c})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const h=Iv("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(d),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(){return window}function d3(e){Pi().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(){return typeof Pi().WorkerGlobalScope<"u"&&typeof Pi().importScripts=="function"}async function f3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p3(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function g3(){return OS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firebaseLocalStorageDb",m3=1,Pf="firebaseLocalStorage",NS="fbase_key";class Yu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ap(e,t){return e.transaction([Pf],t?"readwrite":"readonly").objectStore(Pf)}function _3(){const e=indexedDB.deleteDatabase(MS);return new Yu(e).toPromise()}function K_(){const e=indexedDB.open(MS,m3);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(Pf,{keyPath:NS})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(Pf)?t(s):(s.close(),await _3(),t(await K_()))})})}async function BT(e,t,n){const s=Ap(e,!0).put({[NS]:t,value:n});return new Yu(s).toPromise()}async function y3(e,t){const n=Ap(e,!1).get(t),s=await new Yu(n).toPromise();return s===void 0?null:s.value}function $T(e,t){const n=Ap(e,!0).delete(t);return new Yu(n).toPromise()}const v3=800,b3=3;class LS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await K_(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>b3)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(g3()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await f3(),!this.activeServiceWorker)return;this.sender=new h3(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((t=s[0])===null||t===void 0)&&t.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||p3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await K_();return await BT(t,Cf,"1"),await $T(t,Cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>BT(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>y3(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$T(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const r=Ap(i,!1).getAll();return new Yu(r).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:i,value:r}of t)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const i of Array.from(s))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),v3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}LS.type="LOCAL";const w3=LS;new qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(e,t){return t?or(t):(Pt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av extends Ev{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return il(t,this._buildIdpRequest())}_linkToIdToken(t,n){return il(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return il(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function T3(e){return SS(e.auth,new Av(e),e.bypassAuthState)}function I3(e){const{auth:t,user:n}=e;return Pt(n,t,"internal-error"),X5(n,new Av(e),e.bypassAuthState)}async function A3(e){const{auth:t,user:n}=e;return Pt(n,t,"internal-error"),Q5(n,new Av(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(t,n,s,i,r=!1){this.auth=t,this.resolver=s,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:i,tenantId:r,error:o,type:a}=t;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(h){this.reject(h)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return T3;case"linkViaPopup":case"linkViaRedirect":return A3;case"reauthViaPopup":case"reauthViaRedirect":return I3;default:ai(this.auth,"internal-error")}}resolve(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){pr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=new qu(2e3,1e4);class Qa extends US{constructor(t,n,s,i,r){super(t,n,i,r),this.provider=s,this.authWindow=null,this.pollId=null,Qa.currentPopupAction&&Qa.currentPopupAction.cancel(),Qa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Pt(t,this.auth,"internal-error"),t}async onExecution(){pr(this.filter.length===1,"Popup operations only handle one event");const t=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qa.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,x3.get())};t()}}Qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="pendingRedirect",Yd=new Map;class R3 extends US{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=Yd.get(this.auth._key());if(!t){try{const s=await C3(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}Yd.set(this.auth._key(),t)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function C3(e,t){const n=k3(t),s=D3(e);if(!await s._isAvailable())return!1;const i=await s._get(n)==="true";return await s._remove(n),i}function P3(e,t){Yd.set(e._key(),t)}function D3(e){return or(e._redirectPersistence)}function k3(e){return Gd(S3,e.config.apiKey,e.name)}async function O3(e,t,n=!1){const s=ho(e),i=E3(s,t),o=await new R3(s,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=10*60*1e3;class N3{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!L3(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var s;if(t.error&&!FS(t)){const i=((s=t.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(Ci(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=M3&&this.cachedEventUids.clear(),this.cachedEventUids.has(HT(t))}saveEventToCache(t){this.cachedEventUids.add(HT(t)),this.lastProcessedEventTime=Date.now()}}function HT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function FS({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function L3(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FS(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U3(e,t={}){return br(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V3=/^https?/;async function B3(e){if(e.config.emulator)return;const{authorizedDomains:t}=await U3(e);for(const n of t)try{if($3(n))return}catch{}ai(e,"unauthorized-domain")}function $3(e){const t=q_(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!V3.test(n))return!1;if(F3.test(e))return s===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new qu(3e4,6e4);function WT(){const e=Pi().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function W3(e){return new Promise((t,n)=>{var s,i,r;function o(){WT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{WT(),n(Ci(e,"network-request-failed"))},timeout:H3.get()})}if(!((i=(s=Pi().gapi)===null||s===void 0?void 0:s.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((r=Pi().gapi)===null||r===void 0)&&r.load)o();else{const a=D5("iframefcb");return Pi()[a]=()=>{gapi.load?o():n(Ci(e,"network-request-failed"))},TS(`${P5()}?onload=${a}`).catch(c=>n(c))}}).catch(t=>{throw Qd=null,t})}let Qd=null;function z3(e){return Qd=Qd||W3(e),Qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3=new qu(5e3,15e3),q3="__/auth/iframe",K3="emulator/auth/iframe",G3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Y3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q3(e){const t=e.config;Pt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?vv(t,K3):`https://${e.config.authDomain}/${q3}`,s={apiKey:t.apiKey,appName:e.name,v:ya},i=Y3.get(e.config.apiHost);i&&(s.eid=i);const r=e._getFrameworks();return r.length&&(s.fw=r.join(",")),`${n}?${ju(s).slice(1)}`}async function X3(e){const t=await z3(e),n=Pi().gapi;return Pt(n,e,"internal-error"),t.open({where:document.body,url:Q3(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G3,dontclear:!0},s=>new Promise(async(i,r)=>{await s.restyle({setHideOnLeave:!1});const o=Ci(e,"network-request-failed"),a=Pi().setTimeout(()=>{r(o)},j3.get());function c(){Pi().clearTimeout(a),i(s)}s.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z3=500,t9=600,e9="_blank",n9="http://localhost";class zT{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function s9(e,t,n,s=Z3,i=t9){const r=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let a="";const c=Object.assign(Object.assign({},J3),{width:s.toString(),height:i.toString(),top:r,left:o}),h=hn().toLowerCase();n&&(a=mS(h)?e9:n),gS(h)&&(t=t||n9,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[_,y])=>`${g}${_}=${y},`,"");if(b5(h)&&a!=="_self")return i9(t||"",a),new zT(null);const p=window.open(t||"",a,d);Pt(p,e,"popup-blocked");try{p.focus()}catch{}return new zT(p)}function i9(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="__/auth/handler",o9="emulator/auth/handler",a9=encodeURIComponent("fac");async function jT(e,t,n,s,i,r){Pt(e.config.authDomain,e,"auth-domain-config-required"),Pt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:ya,eventId:i};if(t instanceof AS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",H4(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,p]of Object.entries(r||{}))o[d]=p}if(t instanceof Gu){const d=t.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await e._getAppCheckToken(),h=c?`#${a9}=${encodeURIComponent(c)}`:"";return`${l9(e)}?${ju(a).slice(1)}${h}`}function l9({config:e}){return e.emulator?vv(e,o9):`https://${e.authDomain}/${r9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class c9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kS,this._completeRedirectFn=O3,this._overrideRedirectResult=P3}async _openPopup(t,n,s,i){var r;pr((r=this.eventManagers[t._key()])===null||r===void 0?void 0:r.manager,"_initialize() not called before _openPopup()");const o=await jT(t,n,s,q_(),i);return s9(t,o,Iv())}async _openRedirect(t,n,s,i){await this._originValidation(t);const r=await jT(t,n,s,q_(),i);return d3(r),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:r}=this.eventManagers[n];return i?Promise.resolve(i):(pr(r,"If manager is not set, promise should be"),r)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await X3(t),s=new N3(t);return n.register("authEvent",i=>(Pt(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Gm,{type:Gm},i=>{var r;const o=(r=i==null?void 0:i[0])===null||r===void 0?void 0:r[Gm];o!==void 0&&n(!!o),ai(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=B3(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return wS()||wv()||Ep()}}const u9=c9;var qT="@firebase/auth",KT="1.6.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f9(e){ra(new io("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=s.options;Pt(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ES(e)},h=new S5(s,i,r,c);return L5(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),ra(new io("auth-internal",t=>{const n=ho(t.getProvider("auth").getImmediate());return(s=>new h9(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ri(qT,KT,d9(e)),Ri(qT,KT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=5*60,g9=tS("authIdTokenMaxAge")||p9;let GT=null;const m9=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>g9)return;const i=n==null?void 0:n.token;GT!==i&&(GT=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Xn(e=mv()){const t=wp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=N5(e,{popupRedirectResolver:u9,persistence:[w3,c3,kS]}),s=tS("authTokenSyncURL");if(s&&s.match(/^\/[^\/].*/)){const r=m9(s);i3(n,r,()=>r(n.currentUser)),s3(n,o=>r(o))}const i=Xx("auth");return i&&U5(n,`http://${i}`),n}function _9(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}R5({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=i=>{const r=Ci("internal-error");r.customData=i,n(r)},s.type="text/javascript",s.charset="UTF-8",_9().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f9("Browser");var y9="firebase",v9="10.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ri(y9,v9,"app");var b9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut,xv=xv||{},Lt=b9||self;function xp(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Qu(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function w9(e){return Object.prototype.hasOwnProperty.call(e,Ym)&&e[Ym]||(e[Ym]=++E9)}var Ym="closure_uid_"+(1e9*Math.random()>>>0),E9=0;function T9(e,t,n){return e.call.apply(e.bind,arguments)}function I9(e,t,n){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function jn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?jn=T9:jn=I9,jn.apply(null,arguments)}function pd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),e.apply(this,s)}}function En(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(s,i,r){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[i].apply(s,o)}}function fo(){this.s=this.s,this.o=this.o}var A9=0;fo.prototype.s=!1;fo.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),A9!=0)&&w9(this)};fo.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const VS=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Sv(e){const t=e.length;if(0<t){const n=Array(t);for(let s=0;s<t;s++)n[s]=e[s];return n}return[]}function YT(e,t){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(xp(s)){const i=e.length||0,r=s.length||0;e.length=i+r;for(let o=0;o<r;o++)e[i+o]=s[o]}else e.push(s)}}function qn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}qn.prototype.h=function(){this.defaultPrevented=!0};var x9=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const n=()=>{};Lt.addEventListener("test",n,t),Lt.removeEventListener("test",n,t)}catch{}return e}();function fu(e){return/^[\s\xa0]*$/.test(e)}function Sp(){var e=Lt.navigator;return e&&(e=e.userAgent)?e:""}function wi(e){return Sp().indexOf(e)!=-1}function Rv(e){return Rv[" "](e),e}Rv[" "]=function(){};function S9(e,t){var n=v6;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var R9=wi("Opera"),dl=wi("Trident")||wi("MSIE"),BS=wi("Edge"),G_=BS||dl,$S=wi("Gecko")&&!(Sp().toLowerCase().indexOf("webkit")!=-1&&!wi("Edge"))&&!(wi("Trident")||wi("MSIE"))&&!wi("Edge"),C9=Sp().toLowerCase().indexOf("webkit")!=-1&&!wi("Edge");function HS(){var e=Lt.document;return e?e.documentMode:void 0}var Y_;t:{var Qm="",Xm=function(){var e=Sp();if($S)return/rv:([^\);]+)(\)|;)/.exec(e);if(BS)return/Edge\/([\d\.]+)/.exec(e);if(dl)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(C9)return/WebKit\/(\S+)/.exec(e);if(R9)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Xm&&(Qm=Xm?Xm[1]:""),dl){var Jm=HS();if(Jm!=null&&Jm>parseFloat(Qm)){Y_=String(Jm);break t}}Y_=Qm}var Q_;if(Lt.document&&dl){var QT=HS();Q_=QT||parseInt(Y_,10)||void 0}else Q_=void 0;var P9=Q_;function pu(e,t){if(qn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,s=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($S){t:{try{Rv(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:D9[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&pu.$.h.call(this)}}En(pu,qn);var D9={2:"touch",3:"pen",4:"mouse"};pu.prototype.h=function(){pu.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Xu="closure_listenable_"+(1e6*Math.random()|0),k9=0;function O9(e,t,n,s,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!s,this.la=i,this.key=++k9,this.fa=this.ia=!1}function Rp(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Cv(e,t,n){for(const s in e)t.call(n,e[s],s,e)}function M9(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function WS(e){const t={};for(const n in e)t[n]=e[n];return t}const XT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function zS(e,t){let n,s;for(let i=1;i<arguments.length;i++){s=arguments[i];for(n in s)e[n]=s[n];for(let r=0;r<XT.length;r++)n=XT[r],Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}}function Cp(e){this.src=e,this.g={},this.h=0}Cp.prototype.add=function(e,t,n,s,i){var r=e.toString();e=this.g[r],e||(e=this.g[r]=[],this.h++);var o=J_(e,t,s,i);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new O9(t,this.src,r,!!s,i),t.ia=n,e.push(t)),t};function X_(e,t){var n=t.type;if(n in e.g){var s=e.g[n],i=VS(s,t),r;(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Rp(t),e.g[n].length==0&&(delete e.g[n],e.h--))}}function J_(e,t,n,s){for(var i=0;i<e.length;++i){var r=e[i];if(!r.fa&&r.listener==t&&r.capture==!!n&&r.la==s)return i}return-1}var Pv="closure_lm_"+(1e6*Math.random()|0),Zm={};function jS(e,t,n,s,i){if(s&&s.once)return KS(e,t,n,s,i);if(Array.isArray(t)){for(var r=0;r<t.length;r++)jS(e,t[r],n,s,i);return null}return n=Ov(n),e&&e[Xu]?e.O(t,n,Qu(s)?!!s.capture:!!s,i):qS(e,t,n,!1,s,i)}function qS(e,t,n,s,i,r){if(!t)throw Error("Invalid event type");var o=Qu(i)?!!i.capture:!!i,a=kv(e);if(a||(e[Pv]=a=new Cp(e)),n=a.add(t,n,s,o,r),n.proxy)return n;if(s=N9(),n.proxy=s,s.src=e,s.listener=n,e.addEventListener)x9||(i=o),i===void 0&&(i=!1),e.addEventListener(t.toString(),s,i);else if(e.attachEvent)e.attachEvent(YS(t.toString()),s);else if(e.addListener&&e.removeListener)e.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function N9(){function e(n){return t.call(e.src,e.listener,n)}const t=L9;return e}function KS(e,t,n,s,i){if(Array.isArray(t)){for(var r=0;r<t.length;r++)KS(e,t[r],n,s,i);return null}return n=Ov(n),e&&e[Xu]?e.P(t,n,Qu(s)?!!s.capture:!!s,i):qS(e,t,n,!0,s,i)}function GS(e,t,n,s,i){if(Array.isArray(t))for(var r=0;r<t.length;r++)GS(e,t[r],n,s,i);else s=Qu(s)?!!s.capture:!!s,n=Ov(n),e&&e[Xu]?(e=e.i,t=String(t).toString(),t in e.g&&(r=e.g[t],n=J_(r,n,s,i),-1<n&&(Rp(r[n]),Array.prototype.splice.call(r,n,1),r.length==0&&(delete e.g[t],e.h--)))):e&&(e=kv(e))&&(t=e.g[t.toString()],e=-1,t&&(e=J_(t,n,s,i)),(n=-1<e?t[e]:null)&&Dv(n))}function Dv(e){if(typeof e!="number"&&e&&!e.fa){var t=e.src;if(t&&t[Xu])X_(t.i,e);else{var n=e.type,s=e.proxy;t.removeEventListener?t.removeEventListener(n,s,e.capture):t.detachEvent?t.detachEvent(YS(n),s):t.addListener&&t.removeListener&&t.removeListener(s),(n=kv(t))?(X_(n,e),n.h==0&&(n.src=null,t[Pv]=null)):Rp(e)}}}function YS(e){return e in Zm?Zm[e]:Zm[e]="on"+e}function L9(e,t){if(e.fa)e=!0;else{t=new pu(t,this);var n=e.listener,s=e.la||e.src;e.ia&&Dv(e),e=n.call(s,t)}return e}function kv(e){return e=e[Pv],e instanceof Cp?e:null}var t_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ov(e){return typeof e=="function"?e:(e[t_]||(e[t_]=function(t){return e.handleEvent(t)}),e[t_])}function wn(){fo.call(this),this.i=new Cp(this),this.S=this,this.J=null}En(wn,fo);wn.prototype[Xu]=!0;wn.prototype.removeEventListener=function(e,t,n,s){GS(this,e,t,n,s)};function kn(e,t){var n,s=e.J;if(s)for(n=[];s;s=s.J)n.push(s);if(e=e.S,s=t.type||t,typeof t=="string")t=new qn(t,e);else if(t instanceof qn)t.target=t.target||e;else{var i=t;t=new qn(s,e),zS(t,i)}if(i=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];i=gd(o,s,!0,t)&&i}if(o=t.g=e,i=gd(o,s,!0,t)&&i,i=gd(o,s,!1,t)&&i,n)for(r=0;r<n.length;r++)o=t.g=n[r],i=gd(o,s,!1,t)&&i}wn.prototype.N=function(){if(wn.$.N.call(this),this.i){var e=this.i,t;for(t in e.g){for(var n=e.g[t],s=0;s<n.length;s++)Rp(n[s]);delete e.g[t],e.h--}}this.J=null};wn.prototype.O=function(e,t,n,s){return this.i.add(String(e),t,!1,n,s)};wn.prototype.P=function(e,t,n,s){return this.i.add(String(e),t,!0,n,s)};function gd(e,t,n,s){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&X_(e.i,o),i=a.call(c,s)!==!1&&i}}return i&&!s.defaultPrevented}var Mv=Lt.JSON.stringify;class U9{constructor(t,n){this.i=t,this.j=n,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function F9(){var e=Nv;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class V9{constructor(){this.h=this.g=null}add(t,n){const s=QS.get();s.set(t,n),this.h?this.h.next=s:this.g=s,this.h=s}}var QS=new U9(()=>new B9,e=>e.reset());class B9{constructor(){this.next=this.g=this.h=null}set(t,n){this.h=t,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function $9(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function H9(e){Lt.setTimeout(()=>{throw e},0)}let gu,mu=!1,Nv=new V9,XS=()=>{const e=Lt.Promise.resolve(void 0);gu=()=>{e.then(W9)}};var W9=()=>{for(var e;e=F9();){try{e.h.call(e.g)}catch(n){H9(n)}var t=QS;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}mu=!1};function Pp(e,t){wn.call(this),this.h=e||1,this.g=t||Lt,this.j=jn(this.qb,this),this.l=Date.now()}En(Pp,wn);ut=Pp.prototype;ut.ga=!1;ut.T=null;ut.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kn(this,"tick"),this.ga&&(Lv(this),this.start()))}};ut.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Lv(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}ut.N=function(){Pp.$.N.call(this),Lv(this),delete this.g};function Uv(e,t,n){if(typeof e=="function")n&&(e=jn(e,n));else if(e&&typeof e.handleEvent=="function")e=jn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Lt.setTimeout(e,t||0)}function JS(e){e.g=Uv(()=>{e.g=null,e.i&&(e.i=!1,JS(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}class z9 extends fo{constructor(t,n){super(),this.m=t,this.j=n,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:JS(this)}N(){super.N(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _u(e){fo.call(this),this.h=e,this.g={}}En(_u,fo);var JT=[];function ZS(e,t,n,s){Array.isArray(n)||(n&&(JT[0]=n.toString()),n=JT);for(var i=0;i<n.length;i++){var r=jS(t,n[i],s||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function tR(e){Cv(e.g,function(t,n){this.g.hasOwnProperty(n)&&Dv(t)},e),e.g={}}_u.prototype.N=function(){_u.$.N.call(this),tR(this)};_u.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Dp(){this.g=!0}Dp.prototype.Ea=function(){this.g=!1};function j9(e,t,n,s,i,r){e.info(function(){if(e.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var h=a[c].split("=");if(1<h.length){var d=h[0];h=h[1];var p=d.split("_");o=2<=p.length&&p[1]=="type"?o+(d+"="+h+"&"):o+(d+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+s+") [attempt "+i+"]: "+t+`
`+n+`
`+o})}function q9(e,t,n,s,i,r,o){e.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+i+"]: "+t+`
`+n+`
`+r+" "+o})}function Xa(e,t,n,s){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+G9(e,n)+(s?" "+s:"")})}function K9(e,t){e.info(function(){return"TIMEOUT: "+t})}Dp.prototype.info=function(){};function G9(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var s=n[e];if(!(2>s.length)){var i=s[1];if(Array.isArray(i)&&!(1>i.length)){var r=i[0];if(r!="noop"&&r!="stop"&&r!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Mv(n)}catch{return t}}var va={},ZT=null;function kp(){return ZT=ZT||new wn}va.Ta="serverreachability";function eR(e){qn.call(this,va.Ta,e)}En(eR,qn);function yu(e){const t=kp();kn(t,new eR(t))}va.STAT_EVENT="statevent";function nR(e,t){qn.call(this,va.STAT_EVENT,e),this.stat=t}En(nR,qn);function is(e){const t=kp();kn(t,new nR(t,e))}va.Ua="timingevent";function sR(e,t){qn.call(this,va.Ua,e),this.size=t}En(sR,qn);function Ju(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){e()},t)}var Op={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},iR={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Fv(){}Fv.prototype.h=null;function tI(e){return e.h||(e.h=e.i())}function rR(){}var Zu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Vv(){qn.call(this,"d")}En(Vv,qn);function Bv(){qn.call(this,"c")}En(Bv,qn);var Z_;function Mp(){}En(Mp,Fv);Mp.prototype.g=function(){return new XMLHttpRequest};Mp.prototype.i=function(){return{}};Z_=new Mp;function th(e,t,n,s){this.l=e,this.j=t,this.m=n,this.W=s||1,this.U=new _u(this),this.P=Y9,e=G_?125:void 0,this.V=new Pp(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new oR}function oR(){this.i=null,this.g="",this.h=!1}var Y9=45e3,aR={},ty={};ut=th.prototype;ut.setTimeout=function(e){this.P=e};function ey(e,t,n){e.L=1,e.A=Lp(gr(t)),e.u=n,e.S=!0,lR(e,null)}function lR(e,t){e.G=Date.now(),eh(e),e.B=gr(e.A);var n=e.B,s=e.W;Array.isArray(s)||(s=[String(s)]),mR(n.i,"t",s),e.o=0,n=e.l.J,e.h=new oR,e.g=UR(e.l,n?t:null,!e.u),0<e.O&&(e.M=new z9(jn(e.Pa,e,e.g),e.O)),ZS(e.U,e.g,"readystatechange",e.nb),t=e.I?WS(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),yu(),j9(e.j,e.v,e.B,e.m,e.W,e.u)}ut.nb=function(e){e=e.target;const t=this.M;t&&Ti(e)==3?t.l():this.Pa(e)};ut.Pa=function(e){try{if(e==this.g)t:{const d=Ti(this.g);var t=this.g.Ia();const p=this.g.da();if(!(3>d)&&(d!=3||G_||this.g&&(this.h.h||this.g.ja()||iI(this.g)))){this.J||d!=4||t==7||(t==8||0>=p?yu(3):yu(2)),Np(this);var n=this.g.da();this.ca=n;e:if(cR(this)){var s=iI(this.g);e="";var i=s.length,r=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wo(this),Vc(this);var o="";break e}this.h.i=new Lt.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(s[t],{stream:r&&t==i-1});s.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,q9(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fu(a)){var h=a;break e}}h=null}if(n=h)Xa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ny(this,n);else{this.i=!1,this.s=3,is(12),Wo(this),Vc(this);break t}}this.S?(uR(this,d,o),G_&&this.i&&d==3&&(ZS(this.U,this.V,"tick",this.mb),this.V.start())):(Xa(this.j,this.m,o,null),ny(this,o)),d==4&&Wo(this),this.i&&!this.J&&(d==4?OR(this.l,this):(this.i=!1,eh(this)))}else m6(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,is(12)):(this.s=0,is(13)),Wo(this),Vc(this)}}}catch{}finally{}};function cR(e){return e.g?e.v=="GET"&&e.L!=2&&e.l.Ha:!1}function uR(e,t,n){let s=!0,i;for(;!e.J&&e.o<n.length;)if(i=Q9(e,n),i==ty){t==4&&(e.s=4,is(14),s=!1),Xa(e.j,e.m,null,"[Incomplete Response]");break}else if(i==aR){e.s=4,is(15),Xa(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}else Xa(e.j,e.m,i,null),ny(e,i);cR(e)&&e.o!=0&&(e.h.g=e.h.g.slice(e.o),e.o=0),t!=4||n.length!=0||e.h.h||(e.s=1,is(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),qv(t),t.M=!0,is(11))):(Xa(e.j,e.m,n,"[Invalid Chunked Response]"),Wo(e),Vc(e))}ut.mb=function(){if(this.g){var e=Ti(this.g),t=this.g.ja();this.o<t.length&&(Np(this),uR(this,e,t),this.i&&e!=4&&eh(this))}};function Q9(e,t){var n=e.o,s=t.indexOf(`
`,n);return s==-1?ty:(n=Number(t.substring(n,s)),isNaN(n)?aR:(s+=1,s+n>t.length?ty:(t=t.slice(s,s+n),e.o=s+n,t)))}ut.cancel=function(){this.J=!0,Wo(this)};function eh(e){e.Y=Date.now()+e.P,hR(e,e.P)}function hR(e,t){if(e.C!=null)throw Error("WatchDog timer not null");e.C=Ju(jn(e.lb,e),t)}function Np(e){e.C&&(Lt.clearTimeout(e.C),e.C=null)}ut.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(K9(this.j,this.B),this.L!=2&&(yu(),is(17)),Wo(this),this.s=2,Vc(this)):hR(this,this.Y-e)};function Vc(e){e.l.H==0||e.J||OR(e.l,e)}function Wo(e){Np(e);var t=e.M;t&&typeof t.sa=="function"&&t.sa(),e.M=null,Lv(e.V),tR(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ny(e,t){try{var n=e.l;if(n.H!=0&&(n.g==e||sy(n.i,e))){if(!e.K&&sy(n.i,e)&&n.H==3){try{var s=n.Ja.g.parse(t)}catch{s=null}if(Array.isArray(s)&&s.length==3){var i=s;if(i[0]==0){t:if(!n.u){if(n.g)if(n.g.G+3e3<e.G)Of(n),Bp(n);else break t;jv(n),is(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ju(jn(n.ib,n),6e3));if(1>=vR(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zo(n,11)}else if((e.K||n.g==e)&&Of(n),!fu(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let h=i[t];if(n.V=h[0],h=h[1],n.H==2)if(h[0]=="c"){n.K=h[1],n.pa=h[2];const d=h[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const p=h[4];p!=null&&(n.Ga=p,n.l.info("SVER="+n.Ga));const g=h[5];g!=null&&typeof g=="number"&&0<g&&(s=1.5*g,n.L=s,n.l.info("backChannelRequestTimeoutMs_="+s)),s=n;const _=e.g;if(_){const y=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var r=s.i;r.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(r.j=r.l,r.g=new Set,r.h&&($v(r,r.h),r.h=null))}if(s.F){const b=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(s.Da=b,Ne(s.I,s.F,b))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),s=n;var o=e;if(s.wa=LR(s,s.J?s.pa:null,s.Y),o.K){bR(s.i,o);var a=o,c=s.L;c&&a.setTimeout(c),a.C&&(Np(a),eh(a)),s.g=o}else DR(s);0<n.j.length&&$p(n)}else h[0]!="stop"&&h[0]!="close"||zo(n,7);else n.H==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?zo(n,7):zv(n):h[0]!="noop"&&n.h&&n.h.Aa(h),n.A=0)}}yu(4)}catch{}}function X9(e){if(e.Z&&typeof e.Z=="function")return e.Z();if(typeof Map<"u"&&e instanceof Map||typeof Set<"u"&&e instanceof Set)return Array.from(e.values());if(typeof e=="string")return e.split("");if(xp(e)){for(var t=[],n=e.length,s=0;s<n;s++)t.push(e[s]);return t}t=[],n=0;for(s in e)t[n++]=e[s];return t}function J9(e){if(e.ta&&typeof e.ta=="function")return e.ta();if(!e.Z||typeof e.Z!="function"){if(typeof Map<"u"&&e instanceof Map)return Array.from(e.keys());if(!(typeof Set<"u"&&e instanceof Set)){if(xp(e)||typeof e=="string"){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const s in e)t[n++]=s;return t}}}function dR(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(xp(e)||typeof e=="string")Array.prototype.forEach.call(e,t,void 0);else for(var n=J9(e),s=X9(e),i=s.length,r=0;r<i;r++)t.call(void 0,s[r],n&&n[r],e)}var fR=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Z9(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var s=e[n].indexOf("="),i=null;if(0<=s){var r=e[n].substring(0,s);i=e[n].substring(s+1)}else r=e[n];t(r,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Xo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xo){this.h=e.h,Df(this,e.j),this.s=e.s,this.g=e.g,kf(this,e.m),this.l=e.l;var t=e.i,n=new vu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),eI(this,n),this.o=e.o}else e&&(t=String(e).match(fR))?(this.h=!1,Df(this,t[1]||"",!0),this.s=Ec(t[2]||""),this.g=Ec(t[3]||"",!0),kf(this,t[4]),this.l=Ec(t[5]||"",!0),eI(this,t[6]||"",!0),this.o=Ec(t[7]||"")):(this.h=!1,this.i=new vu(null,this.h))}Xo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Tc(t,nI,!0),":");var n=this.g;return(n||t=="file")&&(e.push("//"),(t=this.s)&&e.push(Tc(t,nI,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&e.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&e.push("/"),e.push(Tc(n,n.charAt(0)=="/"?n6:e6,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Tc(n,i6)),e.join("")};function gr(e){return new Xo(e)}function Df(e,t,n){e.j=n?Ec(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function eI(e,t,n){t instanceof vu?(e.i=t,r6(e.i,e.h)):(n||(t=Tc(t,s6)),e.i=new vu(t,e.h))}function Ne(e,t,n){e.i.set(t,n)}function Lp(e){return Ne(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ec(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Tc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,t6),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function t6(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var nI=/[#\/\?@]/g,e6=/[#\?:]/g,n6=/[#\?]/g,s6=/[#\?@]/g,i6=/#/g;function vu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function po(e){e.g||(e.g=new Map,e.h=0,e.i&&Z9(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ut=vu.prototype;ut.add=function(e,t){po(this),this.i=null,e=Ml(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this};function pR(e,t){po(e),t=Ml(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function gR(e,t){return po(e),t=Ml(e,t),e.g.has(t)}ut.forEach=function(e,t){po(this),this.g.forEach(function(n,s){n.forEach(function(i){e.call(t,i,s,this)},this)},this)};ut.ta=function(){po(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let s=0;s<t.length;s++){const i=e[s];for(let r=0;r<i.length;r++)n.push(t[s])}return n};ut.Z=function(e){po(this);let t=[];if(typeof e=="string")gR(this,e)&&(t=t.concat(this.g.get(Ml(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t};ut.set=function(e,t){return po(this),this.i=null,e=Ml(this,e),gR(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this};ut.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t};function mR(e,t,n){pR(e,t),0<n.length&&(e.i=null,e.g.set(Ml(e,t),Sv(n)),e.h+=n.length)}ut.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var s=t[n];const r=encodeURIComponent(String(s)),o=this.Z(s);for(s=0;s<o.length;s++){var i=r;o[s]!==""&&(i+="="+encodeURIComponent(String(o[s]))),e.push(i)}}return this.i=e.join("&")};function Ml(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function r6(e,t){t&&!e.j&&(po(e),e.i=null,e.g.forEach(function(n,s){var i=s.toLowerCase();s!=i&&(pR(this,s),mR(this,i,n))},e)),e.j=t}var o6=class{constructor(e,t){this.g=e,this.map=t}};function _R(e){this.l=e||a6,Lt.PerformanceNavigationTiming?(e=Lt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var a6=10;function yR(e){return e.h?!0:e.g?e.g.size>=e.j:!1}function vR(e){return e.h?1:e.g?e.g.size:0}function sy(e,t){return e.h?e.h==t:e.g?e.g.has(t):!1}function $v(e,t){e.g?e.g.add(t):e.h=t}function bR(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}_R.prototype.cancel=function(){if(this.i=wR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const e of this.g.values())e.cancel();this.g.clear()}};function wR(e){if(e.h!=null)return e.i.concat(e.h.F);if(e.g!=null&&e.g.size!==0){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Sv(e.i)}var l6=class{stringify(e){return Lt.JSON.stringify(e,void 0)}parse(e){return Lt.JSON.parse(e,void 0)}};function c6(){this.g=new l6}function u6(e,t,n){const s=n||"";try{dR(e,function(i,r){let o=i;Qu(i)&&(o=Mv(i)),t.push(s+r+"="+encodeURIComponent(o))})}catch(i){throw t.push(s+"type="+encodeURIComponent("_badmap")),i}}function h6(e,t){const n=new Dp;if(Lt.Image){const s=new Image;s.onload=pd(md,n,s,"TestLoadImage: loaded",!0,t),s.onerror=pd(md,n,s,"TestLoadImage: error",!1,t),s.onabort=pd(md,n,s,"TestLoadImage: abort",!1,t),s.ontimeout=pd(md,n,s,"TestLoadImage: timeout",!1,t),Lt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=e}else t(!1)}function md(e,t,n,s,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(s)}catch{}}function Up(e){this.l=e.ec||null,this.j=e.ob||!1}En(Up,Fv);Up.prototype.g=function(){return new Fp(this.l,this.j)};Up.prototype.i=function(e){return function(){return e}}({});function Fp(e,t){wn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Hv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}En(Fp,wn);var Hv=0;ut=Fp.prototype;ut.open=function(e,t){if(this.readyState!=Hv)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,bu(this)};ut.send=function(e){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};ut.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nh(this)),this.readyState=Hv};ut.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,bu(this)),this.g&&(this.readyState=3,bu(this),this.g)))if(this.responseType==="arraybuffer")e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Lt.ReadableStream<"u"&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ER(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))};function ER(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}ut.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?nh(this):bu(this),this.readyState==3&&ER(this)}};ut.Za=function(e){this.g&&(this.response=this.responseText=e,nh(this))};ut.Ya=function(e){this.g&&(this.response=e,nh(this))};ut.ka=function(){this.g&&nh(this)};function nh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,bu(e)}ut.setRequestHeader=function(e,t){this.v.append(e,t)};ut.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""};ut.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join(`\r
`)};function bu(e){e.onreadystatechange&&e.onreadystatechange.call(e)}Object.defineProperty(Fp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(e){this.m=e?"include":"same-origin"}});var d6=Lt.JSON.parse;function Je(e){wn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=TR,this.L=this.M=!1}En(Je,wn);var TR="",f6=/^https?$/i,p6=["POST","PUT"];ut=Je.prototype;ut.Oa=function(e){this.M=e};ut.ha=function(e,t,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Z_.g(),this.C=this.u?tI(this.u):tI(Z_),this.g.onreadystatechange=jn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(r){sI(this,r);return}if(e=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var i in s)n.set(i,s[i]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const r of s.keys())n.set(r,s.get(r));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(r=>r.toLowerCase()=="content-type"),i=Lt.FormData&&e instanceof Lt.FormData,!(0<=VS(p6,t))||s||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{xR(this),0<this.B&&((this.L=g6(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jn(this.ua,this)):this.A=Uv(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(r){sI(this,r)}};function g6(e){return dl&&typeof e.timeout=="number"&&e.ontimeout!==void 0}ut.ua=function(){typeof xv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kn(this,"timeout"),this.abort(8))};function sI(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,IR(e),Vp(e)}function IR(e){e.F||(e.F=!0,kn(e,"complete"),kn(e,"error"))}ut.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,kn(this,"complete"),kn(this,"abort"),Vp(this))};ut.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vp(this,!0)),Je.$.N.call(this)};ut.La=function(){this.s||(this.G||this.v||this.l?AR(this):this.kb())};ut.kb=function(){AR(this)};function AR(e){if(e.h&&typeof xv<"u"&&(!e.C[1]||Ti(e)!=4||e.da()!=2)){if(e.v&&Ti(e)==4)Uv(e.La,0,e);else if(kn(e,"readystatechange"),Ti(e)==4){e.h=!1;try{const o=e.da();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var n;if(!(n=t)){var s;if(s=o===0){var i=String(e.I).match(fR)[1]||null;!i&&Lt.self&&Lt.self.location&&(i=Lt.self.location.protocol.slice(0,-1)),s=!f6.test(i?i.toLowerCase():"")}n=s}if(n)kn(e,"complete"),kn(e,"success");else{e.m=6;try{var r=2<Ti(e)?e.g.statusText:""}catch{r=""}e.j=r+" ["+e.da()+"]",IR(e)}}finally{Vp(e)}}}}function Vp(e,t){if(e.g){xR(e);const n=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||kn(e,"ready");try{n.onreadystatechange=s}catch{}}}function xR(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lt.clearTimeout(e.A),e.A=null)}ut.isActive=function(){return!!this.g};function Ti(e){return e.g?e.g.readyState:0}ut.da=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}};ut.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ut.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),d6(t)}};function iI(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case TR:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch{return null}}function m6(e){const t={};e=(e.g&&2<=Ti(e)&&e.g.getAllResponseHeaders()||"").split(`\r
`);for(let s=0;s<e.length;s++){if(fu(e[s]))continue;var n=$9(e[s]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const r=t[i]||[];t[i]=r,r.push(n)}M9(t,function(s){return s.join(", ")})}ut.Ia=function(){return this.m};ut.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function SR(e){let t="";return Cv(e,function(n,s){t+=s,t+=":",t+=n,t+=`\r
`}),t}function Wv(e,t,n){t:{for(s in n){var s=!1;break t}s=!0}s||(n=SR(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):Ne(e,t,n))}function ac(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function RR(e){this.Ga=0,this.j=[],this.l=new Dp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ac("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ac("baseRetryDelayMs",5e3,e),this.hb=ac("retryDelaySeedMs",1e4,e),this.eb=ac("forwardChannelMaxRetries",2,e),this.xa=ac("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new _R(e&&e.concurrentRequestLimit),this.Ja=new c6,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ut=RR.prototype;ut.ra=8;ut.H=1;function zv(e){if(CR(e),e.H==3){var t=e.W++,n=gr(e.I);if(Ne(n,"SID",e.K),Ne(n,"RID",t),Ne(n,"TYPE","terminate"),sh(e,n),t=new th(e,e.l,t),t.L=2,t.A=Lp(gr(n)),n=!1,Lt.navigator&&Lt.navigator.sendBeacon)try{n=Lt.navigator.sendBeacon(t.A.toString(),"")}catch{}!n&&Lt.Image&&(new Image().src=t.A,n=!0),n||(t.g=UR(t.l,null),t.g.ha(t.A)),t.G=Date.now(),eh(t)}NR(e)}function Bp(e){e.g&&(qv(e),e.g.cancel(),e.g=null)}function CR(e){Bp(e),e.u&&(Lt.clearTimeout(e.u),e.u=null),Of(e),e.i.cancel(),e.m&&(typeof e.m=="number"&&Lt.clearTimeout(e.m),e.m=null)}function $p(e){if(!yR(e.i)&&!e.m){e.m=!0;var t=e.Na;gu||XS(),mu||(gu(),mu=!0),Nv.add(t,e),e.C=0}}function _6(e,t){return vR(e.i)>=e.i.j-(e.m?1:0)?!1:e.m?(e.j=t.F.concat(e.j),!0):e.H==1||e.H==2||e.C>=(e.cb?0:e.eb)?!1:(e.m=Ju(jn(e.Na,e,t),MR(e,e.C)),e.C++,!0)}ut.Na=function(e){if(this.m)if(this.m=null,this.H==1){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new th(this,this.l,e);let r=this.s;if(this.U&&(r?(r=WS(r),zS(r,this.U)):r=this.U),this.o!==null||this.O||(i.I=r,r=null),this.P)t:{for(var t=0,n=0;n<this.j.length;n++){e:{var s=this.j[n];if("__data__"in s.map&&(s=s.map.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(t+=s,4096<t){t=n;break t}if(t===4096||n===this.j.length-1){t=n+1;break t}}t=1e3}else t=1e3;t=PR(this,i,t),n=gr(this.I),Ne(n,"RID",e),Ne(n,"CVER",22),this.F&&Ne(n,"X-HTTP-Session-Id",this.F),sh(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(SR(r)))+"&"+t:this.o&&Wv(n,this.o,r)),$v(this.i,i),this.bb&&Ne(n,"TYPE","init"),this.P?(Ne(n,"$req",t),Ne(n,"SID","null"),i.aa=!0,ey(i,n,null)):ey(i,n,t),this.H=2}}else this.H==3&&(e?rI(this,e):this.j.length==0||yR(this.i)||rI(this))};function rI(e,t){var n;t?n=t.m:n=e.W++;const s=gr(e.I);Ne(s,"SID",e.K),Ne(s,"RID",n),Ne(s,"AID",e.V),sh(e,s),e.o&&e.s&&Wv(s,e.o,e.s),n=new th(e,e.l,n,e.C+1),e.o===null&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=PR(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),$v(e.i,n),ey(n,s,t)}function sh(e,t){e.na&&Cv(e.na,function(n,s){Ne(t,s,n)}),e.h&&dR({},function(n,s){Ne(t,s,n)})}function PR(e,t,n){n=Math.min(e.j.length,n);var s=e.h?jn(e.h.Va,e.h,e):null;t:{var i=e.j;let r=-1;for(;;){const o=["count="+n];r==-1?0<n?(r=i[0].g,o.push("ofs="+r)):r=0:o.push("ofs="+r);let a=!0;for(let c=0;c<n;c++){let h=i[c].g;const d=i[c].map;if(h-=r,0>h)r=Math.max(0,i[c].g-100),a=!1;else try{u6(d,o,"req"+h+"_")}catch{s&&s(d)}}if(a){s=o.join("&");break t}}}return e=e.j.splice(0,n),t.F=e,s}function DR(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;gu||XS(),mu||(gu(),mu=!0),Nv.add(t,e),e.A=0}}function jv(e){return e.g||e.u||3<=e.A?!1:(e.ba++,e.u=Ju(jn(e.Ma,e),MR(e,e.A)),e.A++,!0)}ut.Ma=function(){if(this.u=null,kR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ju(jn(this.jb,this),e)}};ut.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,is(10),Bp(this),kR(this))};function qv(e){e.B!=null&&(Lt.clearTimeout(e.B),e.B=null)}function kR(e){e.g=new th(e,e.l,"rpc",e.ba),e.o===null&&(e.g.I=e.s),e.g.O=0;var t=gr(e.wa);Ne(t,"RID","rpc"),Ne(t,"SID",e.K),Ne(t,"AID",e.V),Ne(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ne(t,"TO",e.qa),Ne(t,"TYPE","xmlhttp"),sh(e,t),e.o&&e.s&&Wv(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Lp(gr(t)),n.u=null,n.S=!0,lR(n,e)}ut.ib=function(){this.v!=null&&(this.v=null,Bp(this),jv(this),is(19))};function Of(e){e.v!=null&&(Lt.clearTimeout(e.v),e.v=null)}function OR(e,t){var n=null;if(e.g==t){Of(e),qv(e),e.g=null;var s=2}else if(sy(e.i,t))n=t.F,bR(e.i,t),s=1;else return;if(e.H!=0){if(t.i)if(s==1){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;s=kp(),kn(s,new sR(s,n)),$p(e)}else DR(e);else if(i=t.s,i==3||i==0&&0<t.ca||!(s==1&&_6(e,t)||s==2&&jv(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:zo(e,5);break;case 4:zo(e,10);break;case 3:zo(e,6);break;default:zo(e,2)}}}function MR(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function zo(e,t){if(e.l.info("Error code "+t),t==2){var n=null;e.h&&(n=null);var s=jn(e.pb,e);n||(n=new Xo("//www.google.com/images/cleardot.gif"),Lt.location&&Lt.location.protocol=="http"||Df(n,"https"),Lp(n)),h6(n.toString(),s)}else is(2);e.H=0,e.h&&e.h.za(t),NR(e),CR(e)}ut.pb=function(e){e?(this.l.info("Successfully pinged google.com"),is(2)):(this.l.info("Failed to ping google.com"),is(1))};function NR(e){if(e.H=0,e.ma=[],e.h){const t=wR(e.i);(t.length!=0||e.j.length!=0)&&(YT(e.ma,t),YT(e.ma,e.j),e.i.i.length=0,Sv(e.j),e.j.length=0),e.h.ya()}}function LR(e,t,n){var s=n instanceof Xo?gr(n):new Xo(n);if(s.g!="")t&&(s.g=t+"."+s.g),kf(s,s.m);else{var i=Lt.location;s=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var r=new Xo(null);s&&Df(r,s),t&&(r.g=t),i&&kf(r,i),n&&(r.l=n),s=r}return n=e.F,t=e.Da,n&&t&&Ne(s,n,t),Ne(s,"VER",e.ra),sh(e,s),s}function UR(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=e.Ha&&!e.va?new Je(new Up({ob:n})):new Je(e.va),t.Oa(e.J),t}ut.isActive=function(){return!!this.h&&this.h.isActive(this)};function FR(){}ut=FR.prototype;ut.Ba=function(){};ut.Aa=function(){};ut.za=function(){};ut.ya=function(){};ut.isActive=function(){return!0};ut.Va=function(){};function Mf(){if(dl&&!(10<=Number(P9)))throw Error("Environmental error: no available transport.")}Mf.prototype.g=function(e,t){return new Ls(e,t)};function Ls(e,t){wn.call(this),this.g=new RR(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!fu(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fu(t)&&(this.g.F=t,e=this.h,e!==null&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new Nl(this)}En(Ls,wn);Ls.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;is(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=LR(e,null,e.Y),$p(e)};Ls.prototype.close=function(){zv(this.g)};Ls.prototype.u=function(e){var t=this.g;if(typeof e=="string"){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Mv(e),e=n);t.j.push(new o6(t.fb++,e)),t.H==3&&$p(t)};Ls.prototype.N=function(){this.g.h=null,delete this.j,zv(this.g),delete this.g,Ls.$.N.call(this)};function VR(e){Vv.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){t:{for(const n in t){e=n;break t}e=void 0}(this.i=e)&&(e=this.i,t=t!==null&&e in t?t[e]:void 0),this.data=t}else this.data=e}En(VR,Vv);function BR(){Bv.call(this),this.status=1}En(BR,Bv);function Nl(e){this.g=e}En(Nl,FR);Nl.prototype.Ba=function(){kn(this.g,"a")};Nl.prototype.Aa=function(e){kn(this.g,new VR(e))};Nl.prototype.za=function(e){kn(this.g,new BR)};Nl.prototype.ya=function(){kn(this.g,"b")};function y6(){this.blockSize=-1}function li(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}En(li,y6);li.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function e_(e,t,n){n||(n=0);var s=Array(16);if(typeof t=="string")for(var i=0;16>i;++i)s[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)s[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var r=e.g[3],o=t+(r^n&(i^r))+s[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[1]+3905402710&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[2]+606105819&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[5]+1200080426&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[6]+2821735955&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[9]+2336552879&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[10]+4294925233&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(r^n&(i^r))+s[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(i^t&(n^i))+s[13]+4254626195&4294967295,r=t+(o<<12&4294967295|o>>>20),o=i+(n^r&(t^n))+s[14]+2792965006&4294967295,i=r+(o<<17&4294967295|o>>>15),o=n+(t^i&(r^t))+s[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=t+(i^r&(n^i))+s[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[6]+3225465664&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[11]+643717713&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[10]+38016083&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[15]+3634488961&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[14]+3275163606&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[3]+4107603335&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(i^r&(n^i))+s[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^i&(t^n))+s[2]+4243563512&4294967295,r=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(r^t))+s[7]+1735328473&4294967295,i=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(i^r))+s[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=t+(n^i^r)+s[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[8]+2272392833&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[11]+1839030562&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[4]+1272893353&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[7]+4139469664&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[0]+3936430074&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[3]+3572445317&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(n^i^r)+s[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^i)+s[12]+3873151461&4294967295,r=t+(o<<11&4294967295|o>>>21),o=i+(r^t^n)+s[15]+530742520&4294967295,i=r+(o<<16&4294967295|o>>>16),o=n+(i^r^t)+s[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=t+(i^(n|~r))+s[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[7]+1126891415&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[14]+2878612391&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[3]+2399980690&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[10]+4293915773&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[15]+4264355552&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[6]+2734768916&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=t+(i^(n|~r))+s[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~i))+s[11]+3174756917&4294967295,r=t+(o<<10&4294967295|o>>>22),o=i+(t^(r|~n))+s[2]+718787259&4294967295,i=r+(o<<15&4294967295|o>>>17),o=n+(r^(i|~t))+s[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+r&4294967295}li.prototype.j=function(e,t){t===void 0&&(t=e.length);for(var n=t-this.blockSize,s=this.m,i=this.h,r=0;r<t;){if(i==0)for(;r<=n;)e_(this,e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(s[i++]=e.charCodeAt(r++),i==this.blockSize){e_(this,s),i=0;break}}else for(;r<t;)if(s[i++]=e[r++],i==this.blockSize){e_(this,s),i=0;break}}this.h=i,this.i+=t};li.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=n&255,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var s=0;32>s;s+=8)e[n++]=this.g[t]>>>s&255;return e};function we(e,t){this.h=t;for(var n=[],s=!0,i=e.length-1;0<=i;i--){var r=e[i]|0;s&&r==t||(n[i]=r,s=!1)}this.g=n}var v6={};function Kv(e){return-128<=e&&128>e?S9(e,function(t){return new we([t|0],0>t?-1:0)}):new we([e|0],0>e?-1:0)}function Ii(e){if(isNaN(e)||!isFinite(e))return rl;if(0>e)return Cn(Ii(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=iy;return new we(t,0)}function $R(e,t){if(e.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(e.charAt(0)=="-")return Cn($R(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ii(Math.pow(t,8)),s=rl,i=0;i<e.length;i+=8){var r=Math.min(8,e.length-i),o=parseInt(e.substring(i,i+r),t);8>r?(r=Ii(Math.pow(t,r)),s=s.R(r).add(Ii(o))):(s=s.R(n),s=s.add(Ii(o)))}return s}var iy=4294967296,rl=Kv(0),ry=Kv(1),oI=Kv(16777216);ut=we.prototype;ut.ea=function(){if(qs(this))return-Cn(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var s=this.D(n);e+=(0<=s?s:iy+s)*t,t*=iy}return e};ut.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(ar(this))return"0";if(qs(this))return"-"+Cn(this).toString(e);for(var t=Ii(Math.pow(e,6)),n=this,s="";;){var i=Lf(n,t).g;n=Nf(n,i.R(t));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=i,ar(n))return r+s;for(;6>r.length;)r="0"+r;s=r+s}};ut.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h};function ar(e){if(e.h!=0)return!1;for(var t=0;t<e.g.length;t++)if(e.g[t]!=0)return!1;return!0}function qs(e){return e.h==-1}ut.X=function(e){return e=Nf(this,e),qs(e)?-1:ar(e)?0:1};function Cn(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new we(n,~e.h).add(ry)}ut.abs=function(){return qs(this)?Cn(this):this};ut.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var r=s+(this.D(i)&65535)+(e.D(i)&65535),o=(r>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);s=o>>>16,r&=65535,o&=65535,n[i]=o<<16|r}return new we(n,n[n.length-1]&-2147483648?-1:0)};function Nf(e,t){return e.add(Cn(t))}ut.R=function(e){if(ar(this)||ar(e))return rl;if(qs(this))return qs(e)?Cn(this).R(Cn(e)):Cn(Cn(this).R(e));if(qs(e))return Cn(this.R(Cn(e)));if(0>this.X(oI)&&0>e.X(oI))return Ii(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var r=this.D(s)>>>16,o=this.D(s)&65535,a=e.D(i)>>>16,c=e.D(i)&65535;n[2*s+2*i]+=o*c,_d(n,2*s+2*i),n[2*s+2*i+1]+=r*c,_d(n,2*s+2*i+1),n[2*s+2*i+1]+=o*a,_d(n,2*s+2*i+1),n[2*s+2*i+2]+=r*a,_d(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new we(n,0)};function _d(e,t){for(;(e[t]&65535)!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function lc(e,t){this.g=e,this.h=t}function Lf(e,t){if(ar(t))throw Error("division by zero");if(ar(e))return new lc(rl,rl);if(qs(e))return t=Lf(Cn(e),t),new lc(Cn(t.g),Cn(t.h));if(qs(t))return t=Lf(e,Cn(t)),new lc(Cn(t.g),t.h);if(30<e.g.length){if(qs(e)||qs(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ry,s=t;0>=s.X(e);)n=aI(n),s=aI(s);var i=Ha(n,1),r=Ha(s,1);for(s=Ha(s,2),n=Ha(n,2);!ar(s);){var o=r.add(s);0>=o.X(e)&&(i=i.add(n),r=o),s=Ha(s,1),n=Ha(n,1)}return t=Nf(e,i.R(t)),new lc(i,t)}for(i=rl;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),s=Math.ceil(Math.log(n)/Math.LN2),s=48>=s?1:Math.pow(2,s-48),r=Ii(n),o=r.R(t);qs(o)||0<o.X(e);)n-=s,r=Ii(n),o=r.R(t);ar(r)&&(r=ry),i=i.add(r),e=Nf(e,o)}return new lc(i,e)}ut.gb=function(e){return Lf(this,e).h};ut.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)&e.D(s);return new we(n,this.h&e.h)};ut.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)|e.D(s);return new we(n,this.h|e.h)};ut.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.D(s)^e.D(s);return new we(n,this.h^e.h)};function aI(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.D(s)<<1|e.D(s-1)>>>31;return new we(n,e.h)}function Ha(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],r=0;r<s;r++)i[r]=0<t?e.D(r+n)>>>t|e.D(r+n+1)<<32-t:e.D(r+n);return new we(i,e.h)}Mf.prototype.createWebChannel=Mf.prototype.g;Ls.prototype.send=Ls.prototype.u;Ls.prototype.open=Ls.prototype.m;Ls.prototype.close=Ls.prototype.close;Op.NO_ERROR=0;Op.TIMEOUT=8;Op.HTTP_ERROR=6;iR.COMPLETE="complete";rR.EventType=Zu;Zu.OPEN="a";Zu.CLOSE="b";Zu.ERROR="c";Zu.MESSAGE="d";wn.prototype.listen=wn.prototype.O;Je.prototype.listenOnce=Je.prototype.P;Je.prototype.getLastError=Je.prototype.Sa;Je.prototype.getLastErrorCode=Je.prototype.Ia;Je.prototype.getStatus=Je.prototype.da;Je.prototype.getResponseJson=Je.prototype.Wa;Je.prototype.getResponseText=Je.prototype.ja;Je.prototype.send=Je.prototype.ha;Je.prototype.setWithCredentials=Je.prototype.Oa;li.prototype.digest=li.prototype.l;li.prototype.reset=li.prototype.reset;li.prototype.update=li.prototype.j;we.prototype.add=we.prototype.add;we.prototype.multiply=we.prototype.R;we.prototype.modulo=we.prototype.gb;we.prototype.compare=we.prototype.X;we.prototype.toNumber=we.prototype.ea;we.prototype.toString=we.prototype.toString;we.prototype.getBits=we.prototype.D;we.fromNumber=Ii;we.fromString=$R;var b6=function(){return new Mf},w6=function(){return kp()},n_=Op,E6=iR,T6=va,lI={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yd=rR,I6=Je,A6=li,ol=we;const cI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="10.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new pv("@firebase/firestore");function cc(){return la.logLevel}function lt(e,...t){if(la.logLevel<=se.DEBUG){const n=t.map(Gv);la.debug(`Firestore (${Ll}): ${e}`,...n)}}function Li(e,...t){if(la.logLevel<=se.ERROR){const n=t.map(Gv);la.error(`Firestore (${Ll}): ${e}`,...n)}}function fl(e,...t){if(la.logLevel<=se.WARN){const n=t.map(Gv);la.warn(`Firestore (${Ll}): ${e}`,...n)}}function Gv(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(e="Unexpected state"){const t=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+e;throw Li(t),new Error(t)}function De(e,t){e||Mt()}function $t(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pt extends Bi{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class x6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Bn.UNAUTHENTICATED))}shutdown(){}}class S6{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class R6{constructor(t){this.t=t,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let s=this.i;const i=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let r=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Di,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=r;t.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Di)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==t?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(De(typeof s.accessToken=="string"),new HR(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return De(t===null||typeof t=="string"),new Bn(t)}}class C6{constructor(t,n,s){this.l=t,this.h=n,this.P=s,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class P6{constructor(t,n,s){this.l=t,this.h=n,this.P=s}getToken(){return Promise.resolve(new C6(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D6{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k6{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const s=r=>{r.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.R;return this.R=r.token,lt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>s(r))};const i=r=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>i(r)),setTimeout(()=>{if(!this.appCheck){const r=this.A.getImmediate({optional:!0});r?i(r):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new D6(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const i=O6(40);for(let r=0;r<i.length;++r)s.length<20&&i[r]<n&&(s+=t.charAt(i[r]%t.length))}return s}}function ce(e,t){return e<t?-1:e>t?1:0}function pl(e,t,n){return e.length===t.length&&e.every((s,i)=>n(s,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new pt(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pt(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new pt(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new pt(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return un.fromMillis(Date.now())}static fromDate(t){return un.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*n));return new un(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ce(this.nanoseconds,t.nanoseconds):ce(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Vt(t)}static min(){return new Vt(new un(0,0))}static max(){return new Vt(new un(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t,n,s){n===void 0?n=0:n>t.length&&Mt(),s===void 0?s=t.length-n:s>t.length-n&&Mt(),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return wu.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof wu?t.forEach(s=>{n.push(s)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let i=0;i<s;i++){const r=t.get(i),o=n.get(i);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Le extends wu{construct(t,n,s){return new Le(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new pt(Y.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const M6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dn extends wu{construct(t,n,s){return new Dn(t,n,s)}static isValidIdentifier(t){return M6.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dn.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dn(["__name__"])}static fromServerFormat(t){const n=[];let s="",i=0;const r=()=>{if(s.length===0)throw new pt(Y.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new pt(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new pt(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(s+=a,i++):(r(),i++)}if(r(),o)throw new pt(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Dn(n)}static emptyPath(){return new Dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.path=t}static fromPath(t){return new Tt(Le.fromString(t))}static fromName(t){return new Tt(Le.fromString(t).popFirst(5))}static empty(){return new Tt(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Le.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Le.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tt(new Le(t.slice()))}}function N6(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(s===1e9?new un(n+1,0):new un(n,s));return new ro(i,Tt.empty(),t)}function L6(e){return new ro(e.readTime,e.key,-1)}class ro{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new ro(Vt.min(),Tt.empty(),-1)}static max(){return new ro(Vt.max(),Tt.empty(),-1)}}function U6(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Tt.comparator(e.documentKey,t.documentKey),n!==0?n:ce(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(e){if(e.code!==Y.FAILED_PRECONDITION||e.message!==F6)throw e;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new X((s,i)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(s,i)},this.catchCallback=r=>{this.wrapFailure(n,r).next(s,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):X.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):X.reject(n)}static resolve(t){return new X((n,s)=>{n(t)})}static reject(t){return new X((n,s)=>{s(t)})}static waitFor(t){return new X((n,s)=>{let i=0,r=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++r,o&&r===i&&n()},c=>s(c))}),o=!0,r===i&&n()})}static or(t){let n=X.resolve(!1);for(const s of t)n=n.next(i=>i?X.resolve(i):s());return n}static forEach(t,n){const s=[];return t.forEach((i,r)=>{s.push(n.call(this,i,r))}),this.waitFor(s)}static mapArray(t,n){return new X((s,i)=>{const r=t.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const h=c;n(t[h]).next(d=>{o[h]=d,++a,a===r&&s(o)},d=>i(d))}})}static doWhile(t,n){return new X((s,i)=>{const r=()=>{t()===!0?n().next(()=>{r()},i):s()};r()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Di,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Bc(t,n.error)):this.V.resolve()},this.transaction.onerror=s=>{const i=Qv(s.target.error);this.V.reject(new Bc(t,i))}}static open(t,n,s,i){try{return new Yv(n,t.transaction(i,s))}catch(r){throw new Bc(n,r)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(lt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new $6(n)}}class jo{constructor(t,n,s){this.name=t,this.version=n,this.p=s,jo.S(hn())===12.2&&Li("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return lt("SimpleDb","Removing database:",t),$o(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!nS())return!1;if(jo.C())return!0;const t=hn(),n=jo.S(t),s=0<n&&n<10,i=jo.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||s||r)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,n){return t.store(n)}static S(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static v(t){const n=t.match(/Android ([\d.]+)/i),s=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(s)}async O(t){return this.db||(lt("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,s)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=r=>{const o=r.target.result;n(o)},i.onblocked=()=>{s(new Bc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=r=>{const o=r.target.error;o.name==="VersionError"?s(new pt(Y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?s(new pt(Y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):s(new Bc(t,o))},i.onupgradeneeded=r=>{lt("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.p.N(o,i.transaction,r.oldVersion,this.version).next(()=>{lt("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db}B(t){this.L=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,s,i){const r=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(t);const a=Yv.open(this.db,t,r?"readonly":"readwrite",s),c=i(a).next(h=>(a.g(),h)).catch(h=>(a.abort(h),X.reject(h))).toPromise();return c.catch(()=>{}),await a.m,c}catch(a){const c=a,h=c.name!=="FirebaseError"&&o<3;if(lt("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}class B6{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return $o(this.k.delete())}}class Bc extends pt{constructor(t,n){super(Y.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function rh(e){return e.name==="IndexedDbTransactionError"}class $6{constructor(t){this.store=t}put(t,n){let s;return n!==void 0?(lt("SimpleDb","PUT",this.store.name,t,n),s=this.store.put(n,t)):(lt("SimpleDb","PUT",this.store.name,"<auto-key>",t),s=this.store.put(t)),$o(s)}add(t){return lt("SimpleDb","ADD",this.store.name,t,t),$o(this.store.add(t))}get(t){return $o(this.store.get(t)).next(n=>(n===void 0&&(n=null),lt("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return lt("SimpleDb","DELETE",this.store.name,t),$o(this.store.delete(t))}count(){return lt("SimpleDb","COUNT",this.store.name),$o(this.store.count())}W(t,n){const s=this.options(t,n),i=s.index?this.store.index(s.index):this.store;if(typeof i.getAll=="function"){const r=i.getAll(s.range);return new X((o,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}{const r=this.cursor(s),o=[];return this.G(r,(a,c)=>{o.push(c)}).next(()=>o)}}j(t,n){const s=this.store.getAll(t,n===null?void 0:n);return new X((i,r)=>{s.onerror=o=>{r(o.target.error)},s.onsuccess=o=>{i(o.target.result)}})}H(t,n){lt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(t,n);s.J=!1;const i=this.cursor(s);return this.G(i,(r,o,a)=>a.delete())}Y(t,n){let s;n?s=t:(s={},n=t);const i=this.cursor(s);return this.G(i,n)}Z(t){const n=this.cursor({});return new X((s,i)=>{n.onerror=r=>{const o=Qv(r.target.error);i(o)},n.onsuccess=r=>{const o=r.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():s()}):s()}})}G(t,n){const s=[];return new X((i,r)=>{t.onerror=o=>{r(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const c=new B6(a),h=n(a.primaryKey,a.value,c);if(h instanceof X){const d=h.catch(p=>(c.done(),X.reject(p)));s.push(d)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>X.waitFor(s))}options(t,n){let s;return t!==void 0&&(typeof t=="string"?s=t:n=t),{index:s,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const s=this.store.index(t.index);return t.J?s.openKeyCursor(t.range,n):s.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function $o(e){return new X((t,n)=>{e.onsuccess=s=>{const i=s.target.result;t(i)},e.onerror=s=>{const i=Qv(s.target.error);n(i)}})}let uI=!1;function Qv(e){const t=jo.S(hn());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){const s=new pt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uI||(uI=!0,setTimeout(()=>{throw s},0)),s}}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.se(s),this.oe=s=>n.writeSequenceNumber(s))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}Xv._e=-1;function Hp(e){return e==null}function Uf(e){return e===0&&1/e==-1/0}function H6(e){return typeof e=="number"&&Number.isInteger(e)&&!Uf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ba(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function zR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t,n){this.comparator=t,this.root=n||Rn.EMPTY}insert(t,n){return new je(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(t){return new je(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(t,s.key);if(i===0)return n+s.left.size;i<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,s)=>(t(n,s),!1))}toString(){const t=[];return this.inorderTraversal((n,s)=>(t.push(`${n}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vd(this.root,t,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vd(this.root,t,this.comparator,!0)}}class vd{constructor(t,n,s,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?s(t.key,n):1,n&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Rn{constructor(t,n,s,i,r){this.key=t,this.value=n,this.color=s??Rn.RED,this.left=i??Rn.EMPTY,this.right=r??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,i,r){return new Rn(t??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let i=this;const r=s(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,n,s),null):r===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Rn.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Mt();const t=this.left.check();if(t!==this.right.check())throw Mt();return t+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw Mt()}get value(){throw Mt()}get color(){throw Mt()}get left(){throw Mt()}get right(){throw Mt()}copy(t,n,s,i,r){return this}insert(t,n,s){return new Rn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(t){this.comparator=t,this.data=new je(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,s)=>(t(n),!1))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new dI(this.data.getIterator())}getIteratorFrom(t){return new dI(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(s=>{n=n.add(s)}),n}isEqual(t){if(!(t instanceof On)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(this.comparator(i,r)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new On(this.comparator);return n.data=t,n}}class dI{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(t){this.fields=t,t.sort(Dn.comparator)}static empty(){return new Os([])}unionWith(t){let n=new On(Dn.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Os(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return pl(this.fields,t.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new jR("Invalid base64 string: "+r):r}}(t);return new Kn(n)}static fromUint8Array(t){const n=function(i){let r="";for(let o=0;o<i.length;++o)r+=String.fromCharCode(i[o]);return r}(t);return new Kn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ce(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const W6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oo(e){if(De(!!e),typeof e=="string"){let t=0;const n=W6.exec(e);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:ln(e.seconds),nanos:ln(e.nanos)}}function ln(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ca(e){return typeof e=="string"?Kn.fromBase64String(e):Kn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Zv(e){const t=e.mapValue.fields.__previous_value__;return Jv(t)?Zv(t):t}function Eu(e){const t=oo(e.mapValue.fields.__local_write_time__.timestampValue);return new un(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(t,n,s,i,r,o,a,c,h){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=i,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=h}}class Tu{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new Tu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Tu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ua(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Jv(e)?4:j6(e)?9007199254740991:10:Mt()}function Ui(e,t){if(e===t)return!0;const n=ua(e);if(n!==ua(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Eu(e).isEqual(Eu(t));case 3:return function(i,r){if(typeof i.timestampValue=="string"&&typeof r.timestampValue=="string"&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const o=oo(i.timestampValue),a=oo(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,r){return ca(i.bytesValue).isEqual(ca(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,r){return ln(i.geoPointValue.latitude)===ln(r.geoPointValue.latitude)&&ln(i.geoPointValue.longitude)===ln(r.geoPointValue.longitude)}(e,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return ln(i.integerValue)===ln(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const o=ln(i.doubleValue),a=ln(r.doubleValue);return o===a?Uf(o)===Uf(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return pl(e.arrayValue.values||[],t.arrayValue.values||[],Ui);case 10:return function(i,r){const o=i.mapValue.fields||{},a=r.mapValue.fields||{};if(hI(o)!==hI(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Ui(o[c],a[c])))return!1;return!0}(e,t);default:return Mt()}}function Iu(e,t){return(e.values||[]).find(n=>Ui(n,t))!==void 0}function gl(e,t){if(e===t)return 0;const n=ua(e),s=ua(t);if(n!==s)return ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(e.booleanValue,t.booleanValue);case 2:return function(r,o){const a=ln(r.integerValue||r.doubleValue),c=ln(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return fI(e.timestampValue,t.timestampValue);case 4:return fI(Eu(e),Eu(t));case 5:return ce(e.stringValue,t.stringValue);case 6:return function(r,o){const a=ca(r),c=ca(o);return a.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let h=0;h<a.length&&h<c.length;h++){const d=ce(a[h],c[h]);if(d!==0)return d}return ce(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){const a=ce(ln(r.latitude),ln(o.latitude));return a!==0?a:ce(ln(r.longitude),ln(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,o){const a=r.values||[],c=o.values||[];for(let h=0;h<a.length&&h<c.length;++h){const d=gl(a[h],c[h]);if(d)return d}return ce(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===bd.mapValue&&o===bd.mapValue)return 0;if(r===bd.mapValue)return 1;if(o===bd.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),h=o.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=ce(c[p],d[p]);if(g!==0)return g;const _=gl(a[c[p]],h[d[p]]);if(_!==0)return _}return ce(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Mt()}}function fI(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ce(e,t);const n=oo(e),s=oo(t),i=ce(n.seconds,s.seconds);return i!==0?i:ce(n.nanos,s.nanos)}function ml(e){return oy(e)}function oy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const s=oo(n);return`time(${s.seconds},${s.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return ca(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Tt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let s="[",i=!0;for(const r of n.values||[])i?i=!1:s+=",",s+=oy(r);return s+"]"}(e.arrayValue):"mapValue"in e?function(n){const s=Object.keys(n.fields||{}).sort();let i="{",r=!0;for(const o of s)r?r=!1:i+=",",i+=`${o}:${oy(n.fields[o])}`;return i+"}"}(e.mapValue):Mt()}function pI(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ay(e){return!!e&&"integerValue"in e}function tb(e){return!!e&&"arrayValue"in e}function gI(e){return!!e&&"nullValue"in e}function mI(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xd(e){return!!e&&"mapValue"in e}function $c(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ba(e.mapValue.fields,(n,s)=>t.mapValue.fields[n]=$c(s)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=$c(e.arrayValue.values[n]);return t}return Object.assign({},e)}function j6(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t){this.value=t}static empty(){return new ms({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!Xd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=$c(n)}setAll(t){let n=Dn.emptyPath(),s={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,s,i),s={},i=[],n=a.popLast()}o?s[a.lastSegment()]=$c(o):i.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,s,i)}delete(t){const n=this.field(t.popLast());Xd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ui(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let i=n.mapValue.fields[t.get(s)];Xd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,s){ba(n,(i,r)=>t[i]=r);for(const i of s)delete t[i]}clone(){return new ms($c(this.value))}}function qR(e){const t=[];return ba(e.fields,(n,s)=>{const i=new Dn([n]);if(Xd(s)){const r=qR(s.mapValue).fields;if(r.length===0)t.push(i);else for(const o of r)t.push(i.child(o))}else t.push(i)}),new Os(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,n,s,i,r,o,a){this.key=t,this.documentType=n,this.version=s,this.readTime=i,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new $n(t,0,Vt.min(),Vt.min(),Vt.min(),ms.empty(),0)}static newFoundDocument(t,n,s,i){return new $n(t,1,n,Vt.min(),s,i,0)}static newNoDocument(t,n){return new $n(t,2,n,Vt.min(),Vt.min(),ms.empty(),0)}static newUnknownDocument(t,n){return new $n(t,3,n,Vt.min(),Vt.min(),ms.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(t,n){this.position=t,this.inclusive=n}}function _I(e,t,n){let s=0;for(let i=0;i<e.position.length;i++){const r=t[i],o=e.position[i];if(r.field.isKeyField()?s=Tt.comparator(Tt.fromName(o.referenceValue),n.key):s=gl(o,n.data.field(r.field)),r.dir==="desc"&&(s*=-1),s!==0)break}return s}function yI(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ui(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,n="asc"){this.field=t,this.dir=n}}function q6(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{}class cn extends KR{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new G6(t,n,s):n==="array-contains"?new X6(t,s):n==="in"?new J6(t,s):n==="not-in"?new Z6(t,s):n==="array-contains-any"?new tH(t,s):new cn(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new Y6(t,s):new Q6(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gl(n,this.value)):n!==null&&ua(this.value)===ua(n)&&this.matchesComparison(gl(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Mt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends KR{constructor(t,n){super(),this.filters=t,this.op=n,this.ue=null}static create(t,n){return new ci(t,n)}matches(t){return GR(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function GR(e){return e.op==="and"}function YR(e){return K6(e)&&GR(e)}function K6(e){for(const t of e.filters)if(t instanceof ci)return!1;return!0}function ly(e){if(e instanceof cn)return e.field.canonicalString()+e.op.toString()+ml(e.value);if(YR(e))return e.filters.map(t=>ly(t)).join(",");{const t=e.filters.map(n=>ly(n)).join(",");return`${e.op}(${t})`}}function QR(e,t){return e instanceof cn?function(s,i){return i instanceof cn&&s.op===i.op&&s.field.isEqual(i.field)&&Ui(s.value,i.value)}(e,t):e instanceof ci?function(s,i){return i instanceof ci&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce((r,o,a)=>r&&QR(o,i.filters[a]),!0):!1}(e,t):void Mt()}function XR(e){return e instanceof cn?function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`}(e):e instanceof ci?function(n){return n.op.toString()+" {"+n.getFilters().map(XR).join(" ,")+"}"}(e):"Filter"}class G6 extends cn{constructor(t,n,s){super(t,n,s),this.key=Tt.fromName(s.referenceValue)}matches(t){const n=Tt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Y6 extends cn{constructor(t,n){super(t,"in",n),this.keys=JR("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class Q6 extends cn{constructor(t,n){super(t,"not-in",n),this.keys=JR("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function JR(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>Tt.fromName(s.referenceValue))}class X6 extends cn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return tb(n)&&Iu(n.arrayValue,this.value)}}class J6 extends cn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}}class Z6 extends cn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}}class tH extends cn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!tb(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Iu(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eH{constructor(t,n=null,s=[],i=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=i,this.limit=r,this.startAt=o,this.endAt=a,this.ce=null}}function vI(e,t=null,n=[],s=[],i=null,r=null,o=null){return new eH(e,t,n,s,i,r,o)}function eb(e){const t=$t(e);if(t.ce===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(s=>ly(s)).join(","),n+="|ob:",n+=t.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Hp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ml(s)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ml(s)).join(",")),t.ce=n}return t.ce}function nb(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!q6(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!QR(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yI(e.startAt,t.startAt)&&yI(e.endAt,t.endAt)}function cy(e){return Tt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,n=null,s=[],i=[],r=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=i,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function nH(e,t,n,s,i,r,o,a){return new Ul(e,t,n,s,i,r,o,a)}function sb(e){return new Ul(e)}function bI(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function ZR(e){return e.collectionGroup!==null}function Hc(e){const t=$t(e);if(t.le===null){t.le=[];const n=new Set;for(const r of t.explicitOrderBy)t.le.push(r),n.add(r.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new On(Dn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.le.push(new Au(r,s))}),n.has(Dn.keyField().canonicalString())||t.le.push(new Au(Dn.keyField(),s))}return t.le}function ki(e){const t=$t(e);return t.he||(t.he=sH(t,Hc(e))),t.he}function sH(e,t){if(e.limitType==="F")return vI(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const r=i.dir==="desc"?"asc":"desc";return new Au(i.field,r)});const n=e.endAt?new Ff(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ff(e.startAt.position,e.startAt.inclusive):null;return vI(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function uy(e,t){const n=e.filters.concat([t]);return new Ul(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hy(e,t,n){return new Ul(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Wp(e,t){return nb(ki(e),ki(t))&&e.limitType===t.limitType}function tC(e){return`${eb(ki(e))}|lt:${e.limitType}`}function qa(e){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(i=>XR(i)).join(", ")}]`),Hp(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(i=>ml(i)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(i=>ml(i)).join(",")),`Target(${s})`}(ki(e))}; limitType=${e.limitType})`}function zp(e,t){return t.isFoundDocument()&&function(s,i){const r=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(r):Tt.isDocumentKey(s.path)?s.path.isEqual(r):s.path.isImmediateParentOf(r)}(e,t)&&function(s,i){for(const r of Hc(s))if(!r.field.isKeyField()&&i.data.field(r.field)===null)return!1;return!0}(e,t)&&function(s,i){for(const r of s.filters)if(!r.matches(i))return!1;return!0}(e,t)&&function(s,i){return!(s.startAt&&!function(o,a,c){const h=_I(o,a,c);return o.inclusive?h<=0:h<0}(s.startAt,Hc(s),i)||s.endAt&&!function(o,a,c){const h=_I(o,a,c);return o.inclusive?h>=0:h>0}(s.endAt,Hc(s),i))}(e,t)}function iH(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function eC(e){return(t,n)=>{let s=!1;for(const i of Hc(e)){const r=rH(i,t,n);if(r!==0)return r;s=s||i.field.isKeyField()}return 0}}function rH(e,t,n){const s=e.field.isKeyField()?Tt.comparator(t.key,n.key):function(r,o,a){const c=o.data.field(r),h=a.data.field(r);return c!==null&&h!==null?gl(c,h):Mt()}(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Mt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[i,r]of s)if(this.equalsFn(i,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),i=this.inner[s];if(i===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return s.length===1?delete this.inner[n]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ba(this.inner,(n,s)=>{for(const[i,r]of s)t(i,r)})}isEmpty(){return zR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oH=new je(Tt.comparator);function mr(){return oH}const nC=new je(Tt.comparator);function Ic(...e){let t=nC;for(const n of e)t=t.insert(n.key,n);return t}function sC(e){let t=nC;return e.forEach((n,s)=>t=t.insert(n,s.overlayedDocument)),t}function qo(){return Wc()}function iC(){return Wc()}function Wc(){return new Fl(e=>e.toString(),(e,t)=>e.isEqual(t))}const aH=new je(Tt.comparator),lH=new On(Tt.comparator);function Jt(...e){let t=lH;for(const n of e)t=t.add(n);return t}const cH=new On(ce);function uH(){return cH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(t)?"-0":t}}function oC(e){return{integerValue:""+e}}function aC(e,t){return H6(t)?oC(t):rC(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this._=void 0}}function hH(e,t,n){return e instanceof Vf?function(i,r){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&Jv(r)&&(r=Zv(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,t):e instanceof _l?cC(e,t):e instanceof yl?uC(e,t):function(i,r){const o=lC(i,r),a=wI(o)+wI(i.Ie);return ay(o)&&ay(i.Ie)?oC(a):rC(i.serializer,a)}(e,t)}function dH(e,t,n){return e instanceof _l?cC(e,t):e instanceof yl?uC(e,t):n}function lC(e,t){return e instanceof xu?function(s){return ay(s)||function(r){return!!r&&"doubleValue"in r}(s)}(t)?t:{integerValue:0}:null}class Vf extends jp{}class _l extends jp{constructor(t){super(),this.elements=t}}function cC(e,t){const n=hC(t);for(const s of e.elements)n.some(i=>Ui(i,s))||n.push(s);return{arrayValue:{values:n}}}class yl extends jp{constructor(t){super(),this.elements=t}}function uC(e,t){let n=hC(t);for(const s of e.elements)n=n.filter(i=>!Ui(i,s));return{arrayValue:{values:n}}}class xu extends jp{constructor(t,n){super(),this.serializer=t,this.Ie=n}}function wI(e){return ln(e.integerValue||e.doubleValue)}function hC(e){return tb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(t,n){this.field=t,this.transform=n}}function fH(e,t){return e.field.isEqual(t.field)&&function(s,i){return s instanceof _l&&i instanceof _l||s instanceof yl&&i instanceof yl?pl(s.elements,i.elements,Ui):s instanceof xu&&i instanceof xu?Ui(s.Ie,i.Ie):s instanceof Vf&&i instanceof Vf}(e.transform,t.transform)}class pH{constructor(t,n){this.version=t,this.transformResults=n}}class Gs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Gs}static exists(t){return new Gs(void 0,t)}static updateTime(t){return new Gs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Jd(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class qp{}function dC(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new rb(e.key,Gs.none()):new oh(e.key,e.data,Gs.none());{const n=e.data,s=ms.empty();let i=new On(Dn.comparator);for(let r of t.fields)if(!i.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?s.delete(r):s.set(r,o),i=i.add(r)}return new go(e.key,s,new Os(i.toArray()),Gs.none())}}function gH(e,t,n){e instanceof oh?function(i,r,o){const a=i.value.clone(),c=TI(i.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof go?function(i,r,o){if(!Jd(i.precondition,r))return void r.convertToUnknownDocument(o.version);const a=TI(i.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(fC(i)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(e,t,n):function(i,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function zc(e,t,n,s){return e instanceof oh?function(r,o,a,c){if(!Jd(r.precondition,o))return a;const h=r.value.clone(),d=II(r.fieldTransforms,c,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(e,t,n,s):e instanceof go?function(r,o,a,c){if(!Jd(r.precondition,o))return a;const h=II(r.fieldTransforms,c,o),d=o.data;return d.setAll(fC(r)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(p=>p.field))}(e,t,n,s):function(r,o,a){return Jd(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function mH(e,t){let n=null;for(const s of e.fieldTransforms){const i=t.data.field(s.field),r=lC(s.transform,i||null);r!=null&&(n===null&&(n=ms.empty()),n.set(s.field,r))}return n||null}function EI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&pl(s,i,(r,o)=>fH(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class oh extends qp{constructor(t,n,s,i=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class go extends qp{constructor(t,n,s,i,r=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function fC(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}}),t}function TI(e,t,n){const s=new Map;De(e.length===n.length);for(let i=0;i<n.length;i++){const r=e[i],o=r.transform,a=t.data.field(r.field);s.set(r.field,dH(o,a,n[i]))}return s}function II(e,t,n){const s=new Map;for(const i of e){const r=i.transform,o=n.data.field(i.field);s.set(i.field,hH(r,o,t))}return s}class rb extends qp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _H extends qp{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yH{constructor(t,n,s,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const r=this.mutations[i];r.key.isEqual(t.key)&&gH(r,t,s[i])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=zc(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=zc(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=iC();return this.mutations.forEach(i=>{const r=t.get(i.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(i.key)?null:a;const c=dC(o,a);c!==null&&s.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Vt.min())}),s}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Jt())}isEqual(t){return this.batchId===t.batchId&&pl(this.mutations,t.mutations,(n,s)=>EI(n,s))&&pl(this.baseMutations,t.baseMutations,(n,s)=>EI(n,s))}}class ob{constructor(t,n,s,i){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=i}static from(t,n,s){De(t.mutations.length===s.length);let i=function(){return aH}();const r=t.mutations;for(let o=0;o<r.length;o++)i=i.insert(r[o].key,s[o].version);return new ob(t,n,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vH{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var an,ie;function wH(e){switch(e){default:return Mt();case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0}}function pC(e){if(e===void 0)return Li("GRPC error has no .code"),Y.UNKNOWN;switch(e){case an.OK:return Y.OK;case an.CANCELLED:return Y.CANCELLED;case an.UNKNOWN:return Y.UNKNOWN;case an.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case an.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case an.INTERNAL:return Y.INTERNAL;case an.UNAVAILABLE:return Y.UNAVAILABLE;case an.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case an.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case an.NOT_FOUND:return Y.NOT_FOUND;case an.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case an.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case an.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case an.ABORTED:return Y.ABORTED;case an.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case an.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case an.DATA_LOSS:return Y.DATA_LOSS;default:return Mt()}}(ie=an||(an={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TH=new ol([4294967295,4294967295],0);function AI(e){const t=EH().encode(e),n=new A6;return n.update(t),new Uint8Array(n.digest())}function xI(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new ol([n,s],0),new ol([i,r],0)]}class ab{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Ac(`Invalid padding: ${n}`);if(s<0)throw new Ac(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Ac(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Ac(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ee=ol.fromNumber(this.Te)}de(t,n,s){let i=t.add(n.multiply(ol.fromNumber(s)));return i.compare(TH)===1&&(i=new ol([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=AI(t),[s,i]=xI(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);if(!this.Ae(o))return!1}return!0}static create(t,n,s){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new ab(r,i,n);return s.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=AI(t),[s,i]=xI(n);for(let r=0;r<this.hashCount;r++){const o=this.de(s,i,r);this.Re(o)}}Re(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Ac extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(t,n,s,i,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const i=new Map;return i.set(t,ah.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new Kp(Vt.min(),i,new je(ce),mr(),Jt())}}class ah{constructor(t,n,s,i,r){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new ah(s,n,Jt(),Jt(),Jt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,n,s,i){this.Ve=t,this.removedTargetIds=n,this.key=s,this.me=i}}class gC{constructor(t,n){this.targetId=t,this.fe=n}}class mC{constructor(t,n,s=Kn.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=i}}class SI{constructor(){this.ge=0,this.pe=CI(),this.ye=Kn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Jt(),n=Jt(),s=Jt();return this.pe.forEach((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:s=s.add(i);break;default:Mt()}}),new ah(this.ye,this.we,t,n,s)}Fe(){this.Se=!1,this.pe=CI()}Me(t,n){this.Se=!0,this.pe=this.pe.insert(t,n)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,De(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class IH{constructor(t){this.Be=t,this.ke=new Map,this.qe=mr(),this.Qe=RI(),this.Ke=new je(ce)}$e(t){for(const n of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(n,t.me):this.We(n,t.key,t.me);for(const n of t.removedTargetIds)this.We(n,t.key,t.me)}Ge(t){this.forEachTarget(t,n=>{const s=this.ze(n);switch(t.state){case 0:this.je(n)&&s.Ce(t.resumeToken);break;case 1:s.Ne(),s.be||s.Fe(),s.Ce(t.resumeToken);break;case 2:s.Ne(),s.be||this.removeTarget(n);break;case 3:this.je(n)&&(s.Le(),s.Ce(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.Ce(t.resumeToken));break;default:Mt()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ke.forEach((s,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,s=t.fe.count,i=this.Ye(n);if(i){const r=i.target;if(cy(r))if(s===0){const o=new Tt(r.path);this.We(n,o,$n.newNoDocument(o,Vt.min()))}else De(s===1);else{const o=this.Ze(n);if(o!==s){const a=this.Xe(t),c=a?this.et(a,t,o):1;if(c!==0){this.He(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,h)}}}}}Xe(t){const n=t.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:r=0}=n;let o,a;try{o=ca(s).toUint8Array()}catch(c){if(c instanceof jR)return fl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ab(o,i,r)}catch(c){return fl(c instanceof Ac?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,n,s){return n.fe.count===s-this.rt(t,n.targetId)?0:2}rt(t,n){const s=this.Be.getRemoteKeysForTarget(n);let i=0;return s.forEach(r=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.We(n,r,null),i++)}),i}it(t){const n=new Map;this.ke.forEach((r,o)=>{const a=this.Ye(o);if(a){if(r.current&&cy(a.target)){const c=new Tt(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,$n.newNoDocument(c,t))}r.De&&(n.set(o,r.ve()),r.Fe())}});let s=Jt();this.Qe.forEach((r,o)=>{let a=!0;o.forEachWhile(c=>{const h=this.Ye(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(s=s.add(r))}),this.qe.forEach((r,o)=>o.setReadTime(t));const i=new Kp(t,n,this.Ke,this.qe,s);return this.qe=mr(),this.Qe=RI(),this.Ke=new je(ce),i}Ue(t,n){if(!this.je(t))return;const s=this.st(t,n.key)?2:0;this.ze(t).Me(n.key,s),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(t))}We(t,n,s){if(!this.je(t))return;const i=this.ze(t);this.st(t,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(t)),s&&(this.qe=this.qe.insert(n,s))}removeTarget(t){this.ke.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let n=this.ke.get(t);return n||(n=new SI,this.ke.set(t,n)),n}ot(t){let n=this.Qe.get(t);return n||(n=new On(ce),this.Qe=this.Qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.ke.get(t);return n&&n.be?null:this.Be._t(t)}He(t){this.ke.set(t,new SI),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}st(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function RI(){return new je(Tt.comparator)}function CI(){return new je(Tt.comparator)}const AH={asc:"ASCENDING",desc:"DESCENDING"},xH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SH={and:"AND",or:"OR"};class RH{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function dy(e,t){return e.useProto3Json||Hp(t)?t:{value:t}}function Bf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function _C(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function CH(e,t){return Bf(e,t.toTimestamp())}function Oi(e){return De(!!e),Vt.fromTimestamp(function(n){const s=oo(n);return new un(s.seconds,s.nanos)}(e))}function lb(e,t){return fy(e,t).canonicalString()}function fy(e,t){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function yC(e){const t=Le.fromString(e);return De(TC(t)),t}function py(e,t){return lb(e.databaseId,t.path)}function s_(e,t){const n=yC(t);if(n.get(1)!==e.databaseId.projectId)throw new pt(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new pt(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Tt(bC(n))}function vC(e,t){return lb(e.databaseId,t)}function PH(e){const t=yC(e);return t.length===4?Le.emptyPath():bC(t)}function gy(e){return new Le(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bC(e){return De(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function PI(e,t,n){return{name:py(e,t),fields:n.value.mapValue.fields}}function DH(e,t){let n;if("targetChange"in t){t.targetChange;const s=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Mt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],r=function(h,d){return h.useProto3Json?(De(d===void 0||typeof d=="string"),Kn.fromBase64String(d||"")):(De(d===void 0||d instanceof Uint8Array),Kn.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(h){const d=h.code===void 0?Y.UNKNOWN:pC(h.code);return new pt(d,h.message||"")}(o);n=new mC(s,i,r,a||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const i=s_(e,s.document.name),r=Oi(s.document.updateTime),o=s.document.createTime?Oi(s.document.createTime):Vt.min(),a=new ms({mapValue:{fields:s.document.fields}}),c=$n.newFoundDocument(i,r,o,a),h=s.targetIds||[],d=s.removedTargetIds||[];n=new Zd(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const i=s_(e,s.document),r=s.readTime?Oi(s.readTime):Vt.min(),o=$n.newNoDocument(i,r),a=s.removedTargetIds||[];n=new Zd([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const i=s_(e,s.document),r=s.removedTargetIds||[];n=new Zd([],r,i,null)}else{if(!("filter"in t))return Mt();{t.filter;const s=t.filter;s.targetId;const{count:i=0,unchangedNames:r}=s,o=new bH(i,r),a=s.targetId;n=new gC(a,o)}}return n}function kH(e,t){let n;if(t instanceof oh)n={update:PI(e,t.key,t.value)};else if(t instanceof rb)n={delete:py(e,t.key)};else if(t instanceof go)n={update:PI(e,t.key,t.data),updateMask:$H(t.fieldMask)};else{if(!(t instanceof _H))return Mt();n={verify:py(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(s=>function(r,o){const a=o.transform;if(a instanceof Vf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _l)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof xu)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Mt()}(0,s))),t.precondition.isNone||(n.currentDocument=function(i,r){return r.updateTime!==void 0?{updateTime:CH(i,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Mt()}(e,t.precondition)),n}function OH(e,t){return e&&e.length>0?(De(t!==void 0),e.map(n=>function(i,r){let o=i.updateTime?Oi(i.updateTime):Oi(r);return o.isEqual(Vt.min())&&(o=Oi(r)),new pH(o,i.transformResults||[])}(n,t))):[]}function MH(e,t){return{documents:[vC(e,t.path)]}}function NH(e,t){const n={structuredQuery:{}},s=t.path;let i;t.collectionGroup!==null?(i=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=vC(e,i);const r=function(h){if(h.length!==0)return EC(ci.create(h,"and"))}(t.filters);r&&(n.structuredQuery.where=r);const o=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Ka(g.field),direction:FH(g.dir)}}(d))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dy(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(t.endAt)),{ut:n,parent:i}}function LH(e){let t=PH(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let i=null;if(s>0){De(s===1);const d=n.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let r=[];n.where&&(r=function(p){const g=wC(p);return g instanceof ci&&YR(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(y){return new Au(Ga(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Hp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(p){const g=!!p.before,_=p.values||[];return new Ff(_,g)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const g=!p.before,_=p.values||[];return new Ff(_,g)}(n.endAt)),nH(t,i,o,r,a,"F",c,h)}function UH(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Mt()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function wC(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ga(n.unaryFilter.field);return cn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Ga(n.unaryFilter.field);return cn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ga(n.unaryFilter.field);return cn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ga(n.unaryFilter.field);return cn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Mt()}}(e):e.fieldFilter!==void 0?function(n){return cn.create(Ga(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Mt()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ci.create(n.compositeFilter.filters.map(s=>wC(s)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Mt()}}(n.compositeFilter.op))}(e):Mt()}function FH(e){return AH[e]}function VH(e){return xH[e]}function BH(e){return SH[e]}function Ka(e){return{fieldPath:e.canonicalString()}}function Ga(e){return Dn.fromServerFormat(e.fieldPath)}function EC(e){return e instanceof cn?function(n){if(n.op==="=="){if(mI(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NAN"}};if(gI(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mI(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NAN"}};if(gI(n.value))return{unaryFilter:{field:Ka(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(n.field),op:VH(n.op),value:n.value}}}(e):e instanceof ci?function(n){const s=n.getFilters().map(i=>EC(i));return s.length===1?s[0]:{compositeFilter:{op:BH(n.op),filters:s}}}(e):Mt()}function $H(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function TC(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t,n,s,i,r=Vt.min(),o=Vt.min(),a=Kn.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new jr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HH{constructor(t){this.ct=t}}function WH(e){const t=LH({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?hy(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(){this._n=new jH}addToCollectionParentIndex(t,n){return this._n.add(n),X.resolve()}getCollectionParents(t,n){return X.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return X.resolve()}deleteFieldIndex(t,n){return X.resolve()}deleteAllFieldIndexes(t){return X.resolve()}createTargetIndexes(t,n){return X.resolve()}getDocumentsMatchingTarget(t,n){return X.resolve(null)}getIndexType(t,n){return X.resolve(0)}getFieldIndexes(t,n){return X.resolve([])}getNextCollectionGroupToUpdate(t){return X.resolve(null)}getMinOffset(t,n){return X.resolve(ro.min())}getMinOffsetFromCollectionGroup(t,n){return X.resolve(ro.min())}updateCollectionGroup(t,n,s){return X.resolve()}updateIndexEntries(t,n){return X.resolve()}}class jH{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n]||new On(Le.comparator),r=!i.has(s);return this.index[n]=i.add(s),r}has(t){const n=t.lastSegment(),s=t.popLast(),i=this.index[n];return i&&i.has(s)}getEntries(t){return(this.index[t]||new On(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new vl(0)}static Ln(){return new vl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{constructor(){this.changes=new Fl(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,$n.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?X.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GH{constructor(t,n,s,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=i}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(s=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(s!==null&&zc(s.mutation,i,Os.empty(),un.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.getLocalViewOfDocuments(t,s,Jt()).next(()=>s))}getLocalViewOfDocuments(t,n,s=Jt()){const i=qo();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,s).next(r=>{let o=Ic();return r.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const s=qo();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,Jt()))}populateOverlays(t,n,s){const i=[];return s.forEach(r=>{n.has(r)||i.push(r)}),this.documentOverlayCache.getOverlays(t,i).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,s,i){let r=mr();const o=Wc(),a=function(){return Wc()}();return n.forEach((c,h)=>{const d=s.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof go)?r=r.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),zc(d.mutation,h,d.mutation.getFieldMask(),un.now())):o.set(h.key,Os.empty())}),this.recalculateAndSaveOverlays(t,r).next(c=>(c.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var p;return a.set(h,new KH(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(t,n){const s=Wc();let i=new je((o,a)=>o-a),r=Jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const h=n.get(c);if(h===null)return;let d=s.get(c)||Os.empty();d=a.applyToLocalView(h,d),s.set(c,d);const p=(i.get(a.batchId)||Jt()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),h=c.key,d=c.value,p=iC();d.forEach(g=>{if(!r.has(g)){const _=dC(n.get(g),s.get(g));_!==null&&p.set(g,_),r=r.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,p))}return X.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,n,s,i){return function(o){return Tt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):ZR(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,i):this.getDocumentsMatchingCollectionQuery(t,n,s,i)}getNextDocuments(t,n,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,i).next(r=>{const o=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,i-r.size):X.resolve(qo());let a=-1,c=r;return o.next(h=>X.forEach(h,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),r.get(d)?X.resolve():this.remoteDocumentCache.getEntry(t,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(t,h,r)).next(()=>this.computeViews(t,c,h,Jt())).next(d=>({batchId:a,changes:sC(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Tt(n)).next(s=>{let i=Ic();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,s,i){const r=n.collectionGroup;let o=Ic();return this.indexManager.getCollectionParents(t,r).next(a=>X.forEach(a,c=>{const h=function(p,g){return new Ul(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(t,h,s,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,s,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,r,i))).next(o=>{r.forEach((c,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,$n.newInvalidDocument(d)))});let a=Ic();return o.forEach((c,h)=>{const d=r.get(c);d!==void 0&&zc(d.mutation,h,Os.empty(),un.now()),zp(n,h)&&(a=a.insert(c,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YH{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return X.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Oi(i.createTime)}}(n)),X.resolve()}getNamedQuery(t,n){return X.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:WH(i.bundledQuery),readTime:Oi(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(){this.overlays=new je(Tt.comparator),this.hr=new Map}getOverlay(t,n){return X.resolve(this.overlays.get(n))}getOverlays(t,n){const s=qo();return X.forEach(n,i=>this.getOverlay(t,i).next(r=>{r!==null&&s.set(i,r)})).next(()=>s)}saveOverlays(t,n,s){return s.forEach((i,r)=>{this.ht(t,n,r)}),X.resolve()}removeOverlaysForBatchId(t,n,s){const i=this.hr.get(s);return i!==void 0&&(i.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(s)),X.resolve()}getOverlaysForCollection(t,n,s){const i=qo(),r=n.length+1,o=new Tt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===r&&c.largestBatchId>s&&i.set(c.getKey(),c)}return X.resolve(i)}getOverlaysForCollectionGroup(t,n,s,i){let r=new je((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>s){let d=r.get(h.largestBatchId);d===null&&(d=qo(),r=r.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const a=qo(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,d)=>a.set(h,d)),!(a.size()>=i)););return X.resolve(a)}ht(t,n,s){const i=this.overlays.get(s.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(s.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new vH(n,s));let r=this.hr.get(n);r===void 0&&(r=Jt(),this.hr.set(n,r)),this.hr.set(n,r.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.Pr=new On(vn.Ir),this.Tr=new On(vn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const s=new vn(t,n);this.Pr=this.Pr.add(s),this.Tr=this.Tr.add(s)}dr(t,n){t.forEach(s=>this.addReference(s,n))}removeReference(t,n){this.Ar(new vn(t,n))}Rr(t,n){t.forEach(s=>this.removeReference(s,n))}Vr(t){const n=new Tt(new Le([])),s=new vn(n,t),i=new vn(n,t+1),r=[];return this.Tr.forEachInRange([s,i],o=>{this.Ar(o),r.push(o.key)}),r}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Tt(new Le([])),s=new vn(n,t),i=new vn(n,t+1);let r=Jt();return this.Tr.forEachInRange([s,i],o=>{r=r.add(o.key)}),r}containsKey(t){const n=new vn(t,0),s=this.Pr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class vn{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Tt.comparator(t.key,n.key)||ce(t.pr,n.pr)}static Er(t,n){return ce(t.pr,n.pr)||Tt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new On(vn.Ir)}checkEmpty(t){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yH(r,n,s,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new vn(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return X.resolve(o)}lookupMutationBatch(t,n){return X.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,i=this.br(s),r=i<0?0:i;return X.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new vn(n,0),i=new vn(n,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([s,i],o=>{const a=this.Sr(o.pr);r.push(a)}),X.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new On(ce);return n.forEach(i=>{const r=new vn(i,0),o=new vn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,o],a=>{s=s.add(a.pr)})}),X.resolve(this.Dr(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,i=s.length+1;let r=s;Tt.isDocumentKey(r)||(r=r.child(""));const o=new vn(new Tt(r),0);let a=new On(ce);return this.wr.forEachWhile(c=>{const h=c.key.path;return!!s.isPrefixOf(h)&&(h.length===i&&(a=a.add(c.pr)),!0)},o),X.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(s=>{const i=this.Sr(s);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){De(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.wr;return X.forEach(n.mutations,i=>{const r=new vn(i.key,n.batchId);return s=s.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=s})}Mn(t){}containsKey(t,n){const s=new vn(n,0),i=this.wr.firstAfterOrEqual(s);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,X.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JH{constructor(t){this.vr=t,this.docs=function(){return new je(Tt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,i=this.docs.get(s),r=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return X.resolve(s?s.document.mutableCopy():$n.newInvalidDocument(n))}getEntries(t,n){let s=mr();return n.forEach(i=>{const r=this.docs.get(i);s=s.insert(i,r?r.document.mutableCopy():$n.newInvalidDocument(i))}),X.resolve(s)}getDocumentsMatchingQuery(t,n,s,i){let r=mr();const o=n.path,a=new Tt(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||U6(L6(d),s)<=0||(i.has(d.key)||zp(n,d))&&(r=r.insert(d.key,d.mutableCopy()))}return X.resolve(r)}getAllFromCollectionGroup(t,n,s,i){Mt()}Fr(t,n){return X.forEach(this.docs,s=>n(s))}newChangeBuffer(t){return new ZH(this)}getSize(t){return X.resolve(this.size)}}class ZH extends qH{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((s,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(s)}),X.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(t){this.persistence=t,this.Mr=new Fl(n=>eb(n),nb),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.Or=0,this.Nr=new cb,this.targetCount=0,this.Lr=vl.Nn()}forEachTarget(t,n){return this.Mr.forEach((s,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(t){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return X.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.Or&&(this.Or=n),X.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new vl(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,X.resolve()}updateTargetData(t,n){return this.qn(n),X.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(t,n,s){let i=0;const r=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),X.waitFor(r).next(()=>i)}getTargetCount(t){return X.resolve(this.targetCount)}getTargetData(t,n){const s=this.Mr.get(n)||null;return X.resolve(s)}addMatchingKeys(t,n,s){return this.Nr.dr(n,s),X.resolve()}removeMatchingKeys(t,n,s){this.Nr.Rr(n,s);const i=this.persistence.referenceDelegate,r=[];return i&&n.forEach(o=>{r.push(i.markPotentiallyOrphaned(t,o))}),X.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),X.resolve()}getMatchingKeysForTargetId(t,n){const s=this.Nr.gr(n);return X.resolve(s)}containsKey(t,n){return X.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(t,n){this.Br={},this.overlays={},this.kr=new Xv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new tW(this),this.indexManager=new zH,this.remoteDocumentCache=function(i){return new JH(i)}(s=>this.referenceDelegate.Kr(s)),this.serializer=new HH(n),this.$r=new YH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QH,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.Br[t.toKey()];return s||(s=new XH(n,this.referenceDelegate),this.Br[t.toKey()]=s),s}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,s){lt("MemoryPersistence","Starting transaction:",t);const i=new nW(this.kr.next());return this.referenceDelegate.Ur(),s(i).next(r=>this.referenceDelegate.Wr(i).next(()=>r)).toPromise().then(r=>(i.raiseOnCommittedEvent(),r))}Gr(t,n){return X.or(Object.values(this.Br).map(s=>()=>s.containsKey(t,n)))}}class nW extends V6{constructor(t){super(),this.currentSequenceNumber=t}}class ub{constructor(t){this.persistence=t,this.zr=new cb,this.jr=null}static Hr(t){return new ub(t)}get Jr(){if(this.jr)return this.jr;throw Mt()}addReference(t,n,s){return this.zr.addReference(s,n),this.Jr.delete(s.toString()),X.resolve()}removeReference(t,n,s){return this.zr.removeReference(s,n),this.Jr.add(s.toString()),X.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),X.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(r=>this.Jr.add(r.toString()))}).next(()=>s.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Jr,s=>{const i=Tt.fromPath(s);return this.Yr(t,i).next(r=>{r||n.removeEntry(i,Vt.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(s=>{s?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return X.or([()=>X.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(t,n,s,i){this.targetId=t,this.fromCache=n,this.qi=s,this.Qi=i}static Ki(t,n){let s=Jt(),i=Jt();for(const r of n.docChanges)switch(r.type){case 0:s=s.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new hb(t,n.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return U4()?8:jo.v(hn())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,s,i){const r={result:null};return this.ji(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Hi(t,n,i,s).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new sW;return this.Ji(t,n,o).next(a=>{if(r.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>r.result)}Yi(t,n,s,i){return s.documentReadCount<this.Wi?(cc()<=se.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),X.resolve()):(cc()<=se.DEBUG&&lt("QueryEngine","Query:",qa(n),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.Gi*i?(cc()<=se.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ki(n))):X.resolve())}ji(t,n){if(bI(n))return X.resolve(null);let s=ki(n);return this.indexManager.getIndexType(t,s).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hy(n,null,"F"),s=ki(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next(r=>{const o=Jt(...r);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,s).next(c=>{const h=this.Zi(n,a);return this.Xi(n,h,o,c.readTime)?this.ji(t,hy(n,null,"F")):this.es(t,h,n,c)}))})))}Hi(t,n,s,i){return bI(n)||i.isEqual(Vt.min())?X.resolve(null):this.zi.getDocuments(t,s).next(r=>{const o=this.Zi(n,r);return this.Xi(n,o,s,i)?X.resolve(null):(cc()<=se.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),qa(n)),this.es(t,o,n,N6(i,-1)).next(a=>a))})}Zi(t,n){let s=new On(eC(t));return n.forEach((i,r)=>{zp(t,r)&&(s=s.add(r))}),s}Xi(t,n,s,i){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,n,s){return cc()<=se.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",qa(n)),this.zi.getDocumentsMatchingQuery(t,n,ro.min(),s)}es(t,n,s,i){return this.zi.getDocumentsMatchingQuery(t,s,i).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(t,n,s,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new je(ce),this.rs=new Fl(r=>eb(r),nb),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(s)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new GH(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function oW(e,t,n,s){return new rW(e,t,n,s)}async function IC(e,t){const n=$t(e);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let i;return n.mutationQueue.getAllMutationBatches(s).next(r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(s))).next(r=>{const o=[],a=[];let c=Jt();for(const h of i){o.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of r){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(s,c).next(h=>({us:h,removedBatchIds:o,addedBatchIds:a}))})})}function aW(e,t){const n=$t(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,h,d){const p=h.batch,g=p.keys();let _=X.resolve();return g.forEach(y=>{_=_.next(()=>d.getEntry(c,y)).next(b=>{const w=h.docVersions.get(y);De(w!==null),b.version.compareTo(w)<0&&(p.applyToRemoteDocument(b,h),b.isValidDocument()&&(b.setReadTime(h.commitVersion),d.addEntry(b)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,p))}(n,s,t,r).next(()=>r.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(a){let c=Jt();for(let h=0;h<a.mutationResults.length;++h)a.mutationResults[h].transformResults.length>0&&(c=c.add(a.batch.mutations[h].key));return c}(t))).next(()=>n.localDocuments.getDocuments(s,i))})}function AC(e){const t=$t(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function lW(e,t){const n=$t(e),s=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;a.push(n.Qr.removeMatchingKeys(r,d.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(r,d.addedDocuments,p)));let _=g.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(p)!==null?_=_.withResumeToken(Kn.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,s)),i=i.insert(p,_),function(b,w,A){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,_,d)&&a.push(n.Qr.updateTargetData(r,_))});let c=mr(),h=Jt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,d))}),a.push(cW(r,o,t.documentUpdates).next(d=>{c=d.cs,h=d.ls})),!s.isEqual(Vt.min())){const d=n.Qr.getLastRemoteSnapshotVersion(r).next(p=>n.Qr.setTargetsMetadata(r,r.currentSequenceNumber,s));a.push(d)}return X.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,h)).next(()=>c)}).then(r=>(n.ns=i,r))}function cW(e,t,n){let s=Jt(),i=Jt();return n.forEach(r=>s=s.add(r)),t.getEntries(e,s).next(r=>{let o=mr();return n.forEach((a,c)=>{const h=r.get(a);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Vt.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):lt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",c.version)}),{cs:o,ls:i}})}function uW(e,t){const n=$t(e);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function hW(e,t){const n=$t(e);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let i;return n.Qr.getTargetData(s,t).next(r=>r?(i=r,X.resolve(i)):n.Qr.allocateTargetId(s).next(o=>(i=new jr(t,o,"TargetPurposeListen",s.currentSequenceNumber),n.Qr.addTargetData(s,i).next(()=>i))))}).then(s=>{const i=n.ns.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(s.targetId,s),n.rs.set(t,s.targetId)),s})}async function my(e,t,n){const s=$t(e),i=s.ns.get(t),r=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",r,o=>s.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!rh(o))throw o;lt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}s.ns=s.ns.remove(t),s.rs.delete(i.target)}function DI(e,t,n){const s=$t(e);let i=Vt.min(),r=Jt();return s.persistence.runTransaction("Execute query","readwrite",o=>function(c,h,d){const p=$t(c),g=p.rs.get(d);return g!==void 0?X.resolve(p.ns.get(g)):p.Qr.getTargetData(h,d)}(s,o,ki(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,s.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{r=c})}).next(()=>s.ts.getDocumentsMatchingQuery(o,t,n?i:Vt.min(),n?r:Jt())).next(a=>(dW(s,iH(t),a),{documents:a,hs:r})))}function dW(e,t,n){let s=e.ss.get(t)||Vt.min();n.forEach((i,r)=>{r.readTime.compareTo(s)>0&&(s=r.readTime)}),e.ss.set(t,s)}class kI{constructor(){this.activeTargetIds=uH()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fW{constructor(){this.no=new kI,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,s){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new kI,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wd=null;function i_(){return wd===null?wd=function(){return 268435456+Math.round(2147483648*Math.random())}():wd++,"0x"+wd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="WebChannelConnection";class _W extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=s+"://"+n.host,this.po=`projects/${i}/databases/${r}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${r}`}get wo(){return!1}So(n,s,i,r,o){const a=i_(),c=this.bo(n,s.toUriEncodedString());lt("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);const h={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(h,r,o),this.Co(n,c,h,i).then(d=>(lt("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw fl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}vo(n,s,i,r,o,a){return this.So(n,s,i,r,o)}Do(n,s,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((r,o)=>n[o]=r),i&&i.headers.forEach((r,o)=>n[o]=r)}bo(n,s){const i=gW[n];return`${this.fo}/v1/${s}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,n,s,i){const r=i_();return new Promise((o,a)=>{const c=new I6;c.setWithCredentials(!0),c.listenOnce(E6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case n_.NO_ERROR:const d=c.getResponseJson();lt(Fn,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(d)),o(d);break;case n_.TIMEOUT:lt(Fn,`RPC '${t}' ${r} timed out`),a(new pt(Y.DEADLINE_EXCEEDED,"Request time out"));break;case n_.HTTP_ERROR:const p=c.getStatus();if(lt(Fn,`RPC '${t}' ${r} failed with status:`,p,"response text:",c.getResponseText()),p>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const y=function(w){const A=w.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(A)>=0?A:Y.UNKNOWN}(_.status);a(new pt(y,_.message))}else a(new pt(Y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new pt(Y.UNAVAILABLE,"Connection failed."));break;default:Mt()}}finally{lt(Fn,`RPC '${t}' ${r} completed.`)}});const h=JSON.stringify(i);lt(Fn,`RPC '${t}' ${r} sending request:`,i),c.send(n,"POST",h,s,15)})}Fo(t,n,s){const i=i_(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=b6(),a=w6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const d=r.join("");lt(Fn,`Creating RPC '${t}' stream ${i}: ${d}`,c);const p=o.createWebChannel(d,c);let g=!1,_=!1;const y=new mW({lo:w=>{_?lt(Fn,`Not sending because RPC '${t}' stream ${i} is closed:`,w):(g||(lt(Fn,`Opening RPC '${t}' stream ${i} transport.`),p.open(),g=!0),lt(Fn,`RPC '${t}' stream ${i} sending:`,w),p.send(w))},ho:()=>p.close()}),b=(w,A,R)=>{w.listen(A,D=>{try{R(D)}catch(O){setTimeout(()=>{throw O},0)}})};return b(p,yd.EventType.OPEN,()=>{_||lt(Fn,`RPC '${t}' stream ${i} transport opened.`)}),b(p,yd.EventType.CLOSE,()=>{_||(_=!0,lt(Fn,`RPC '${t}' stream ${i} transport closed`),y.Vo())}),b(p,yd.EventType.ERROR,w=>{_||(_=!0,fl(Fn,`RPC '${t}' stream ${i} transport errored:`,w),y.Vo(new pt(Y.UNAVAILABLE,"The operation could not be completed")))}),b(p,yd.EventType.MESSAGE,w=>{var A;if(!_){const R=w.data[0];De(!!R);const D=R,O=D.error||((A=D[0])===null||A===void 0?void 0:A.error);if(O){lt(Fn,`RPC '${t}' stream ${i} received error:`,O);const N=O.status;let L=function(tt){const bt=an[tt];if(bt!==void 0)return pC(bt)}(N),V=O.message;L===void 0&&(L=Y.INTERNAL,V="Unknown error status: "+N+" with message "+O.message),_=!0,y.Vo(new pt(L,V)),p.close()}else lt(Fn,`RPC '${t}' stream ${i} received:`,R),y.mo(R)}}),b(a,T6.STAT_EVENT,w=>{w.stat===lI.PROXY?lt(Fn,`RPC '${t}' stream ${i} detected buffering proxy`):w.stat===lI.NOPROXY&&lt(Fn,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}}function r_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(e){return new RH(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(t,n,s=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=n,this.Mo=s,this.xo=i,this.Oo=r,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const n=Math.floor(this.No+this.Qo()),s=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-s);i>0&&lt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(t,n,s,i,r,o,a,c){this.oi=t,this.$o=s,this.Uo=i,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new xC(t,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():n&&n.code===Y.RESOURCE_EXHAUSTED?(Li(n.toString()),Li("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(n)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,i])=>{this.Wo===n&&this.o_(s,i)},s=>{t(()=>{const i=new pt(Y.UNKNOWN,"Fetching auth token failed: "+s.message);return this.__(i)})})}o_(t,n){const s=this.s_(this.Wo);this.stream=this.a_(t,n),this.stream.Po(()=>{s(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{s(()=>this.__(i))}),this.stream.onMessage(i=>{s(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(t){return lt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return n=>{this.oi.enqueueAndForget(()=>this.Wo===t?n():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yW extends SC{constructor(t,n,s,i,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r}a_(t,n){return this.connection.Fo("Listen",t,n)}onMessage(t){this.jo.reset();const n=DH(this.serializer,t),s=function(r){if(!("targetChange"in r))return Vt.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?Vt.min():o.readTime?Oi(o.readTime):Vt.min()}(t);return this.listener.u_(n,s)}c_(t){const n={};n.database=gy(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=cy(c)?{documents:MH(r,c)}:{query:NH(r,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=_C(r,o.resumeToken);const h=dy(r,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(Vt.min())>0){a.readTime=Bf(r,o.snapshotVersion.toTimestamp());const h=dy(r,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,t);const s=UH(this.serializer,t);s&&(n.labels=s),this.t_(n)}l_(t){const n={};n.database=gy(this.serializer),n.removeTarget=t,this.t_(n)}}class vW extends SC{constructor(t,n,s,i,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,i,o),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,n){return this.connection.Fo("Write",t,n)}onMessage(t){if(De(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const n=OH(t.writeResults,t.commitTime),s=Oi(t.commitTime);return this.listener.T_(s,n)}return De(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=gy(this.serializer),this.t_(t)}I_(t){const n={streamToken:this.lastStreamToken,writes:t.map(s=>kH(this.serializer,s))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bW extends class{}{constructor(t,n,s,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new pt(Y.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,n,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.So(t,fy(n,s),i,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new pt(Y.UNKNOWN,r.toString())})}vo(t,n,s,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(t,fy(n,s),i,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pt(Y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class wW{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Li(n),this.g_=!1):lt("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EW{constructor(t,n,s,i,r){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io(o=>{s.enqueueAndForget(async()=>{wa(this)&&(lt("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=$t(c);h.v_.add(4),await lh(h),h.x_.set("Unknown"),h.v_.delete(4),await Yp(h)}(this))})}),this.x_=new wW(s,i)}}async function Yp(e){if(wa(e))for(const t of e.F_)await t(!0)}async function lh(e){for(const t of e.F_)await t(!1)}function RC(e,t){const n=$t(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),gb(n)?pb(n):Vl(n).Jo()&&fb(n,t))}function db(e,t){const n=$t(e),s=Vl(n);n.C_.delete(t),s.Jo()&&CC(n,t),n.C_.size===0&&(s.Jo()?s.Xo():wa(n)&&n.x_.set("Unknown"))}function fb(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Vt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Vl(e).c_(t)}function CC(e,t){e.O_.Oe(t),Vl(e).l_(t)}function pb(e){e.O_=new IH({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Vl(e).start(),e.x_.p_()}function gb(e){return wa(e)&&!Vl(e).Ho()&&e.C_.size>0}function wa(e){return $t(e).v_.size===0}function PC(e){e.O_=void 0}async function TW(e){e.C_.forEach((t,n)=>{fb(e,t)})}async function IW(e,t){PC(e),gb(e)?(e.x_.S_(t),pb(e)):e.x_.set("Unknown")}async function AW(e,t,n){if(e.x_.set("Online"),t instanceof mC&&t.state===2&&t.cause)try{await async function(i,r){const o=r.cause;for(const a of r.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))}(e,t)}catch(s){lt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),s),await $f(e,s)}else if(t instanceof Zd?e.O_.$e(t):t instanceof gC?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Vt.min()))try{const s=await AC(e.localStore);n.compareTo(s)>=0&&await function(r,o){const a=r.O_.it(o);return a.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=r.C_.get(h);d&&r.C_.set(h,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,h)=>{const d=r.C_.get(c);if(!d)return;r.C_.set(c,d.withResumeToken(Kn.EMPTY_BYTE_STRING,d.snapshotVersion)),CC(r,c);const p=new jr(d.target,c,h,d.sequenceNumber);fb(r,p)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(s){lt("RemoteStore","Failed to raise snapshot:",s),await $f(e,s)}}async function $f(e,t,n){if(!rh(t))throw t;e.v_.add(1),await lh(e),e.x_.set("Offline"),n||(n=()=>AC(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lt("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Yp(e)})}function DC(e,t){return t().catch(n=>$f(e,n,t))}async function Qp(e){const t=$t(e),n=ao(t);let s=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;xW(t);)try{const i=await uW(t.localStore,s);if(i===null){t.D_.length===0&&n.Xo();break}s=i.batchId,SW(t,i)}catch(i){await $f(t,i)}kC(t)&&OC(t)}function xW(e){return wa(e)&&e.D_.length<10}function SW(e,t){e.D_.push(t);const n=ao(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function kC(e){return wa(e)&&!ao(e).Ho()&&e.D_.length>0}function OC(e){ao(e).start()}async function RW(e){ao(e).d_()}async function CW(e){const t=ao(e);for(const n of e.D_)t.I_(n.mutations)}async function PW(e,t,n){const s=e.D_.shift(),i=ob.from(s,t,n);await DC(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Qp(e)}async function DW(e,t){t&&ao(e).P_&&await async function(s,i){if(function(o){return wH(o)&&o!==Y.ABORTED}(i.code)){const r=s.D_.shift();ao(s).Zo(),await DC(s,()=>s.remoteSyncer.rejectFailedWrite(r.batchId,i)),await Qp(s)}}(e,t),kC(e)&&OC(e)}async function MI(e,t){const n=$t(e);n.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const s=wa(n);n.v_.add(3),await lh(n),s&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Yp(n)}async function kW(e,t){const n=$t(e);t?(n.v_.delete(2),await Yp(n)):t||(n.v_.add(2),await lh(n),n.x_.set("Unknown"))}function Vl(e){return e.N_||(e.N_=function(n,s,i){const r=$t(n);return r.R_(),new yW(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Po:TW.bind(null,e),To:IW.bind(null,e),u_:AW.bind(null,e)}),e.F_.push(async t=>{t?(e.N_.Zo(),gb(e)?pb(e):e.x_.set("Unknown")):(await e.N_.stop(),PC(e))})),e.N_}function ao(e){return e.L_||(e.L_=function(n,s,i){const r=$t(n);return r.R_(),new vW(s,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,i)}(e.datastore,e.asyncQueue,{Po:RW.bind(null,e),To:DW.bind(null,e),E_:CW.bind(null,e),T_:PW.bind(null,e)}),e.F_.push(async t=>{t?(e.L_.Zo(),await Qp(e)):(await e.L_.stop(),e.D_.length>0&&(lt("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))})),e.L_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(t,n,s,i,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=i,this.removalCallback=r,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,i,r){const o=Date.now()+s,a=new mb(t,n,o,i,r);return a.start(s),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(Y.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _b(e,t){if(Li("AsyncQueue",`${t}: ${e}`),rh(e))return new pt(Y.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t){this.comparator=t?(n,s)=>t(n,s)||Tt.comparator(n.key,s.key):(n,s)=>Tt.comparator(n.key,s.key),this.keyedMap=Ic(),this.sortedSet=new je(this.comparator)}static emptySet(t){return new al(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,s)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof al)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,r=s.getNext().key;if(!i.isEqual(r))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new al;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.B_=new je(Tt.comparator)}track(t){const n=t.doc.key,s=this.B_.get(n);s?t.type!==0&&s.type===3?this.B_=this.B_.insert(n,t):t.type===3&&s.type!==1?this.B_=this.B_.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.B_=this.B_.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.B_=this.B_.remove(n):t.type===1&&s.type===2?this.B_=this.B_.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.B_=this.B_.insert(n,{type:2,doc:t.doc}):Mt():this.B_=this.B_.insert(n,t)}k_(){const t=[];return this.B_.inorderTraversal((n,s)=>{t.push(s)}),t}}class bl{constructor(t,n,s,i,r,o,a,c,h){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,s,i,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bl(t,n,al.emptySet(n),o,s,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Wp(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==s[i].type||!n[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(t=>t.U_())}}class MW{constructor(){this.queries=new Fl(t=>tC(t),Wp),this.onlineState="Unknown",this.W_=new Set}}async function MC(e,t){const n=$t(e);let s=3;const i=t.query;let r=n.queries.get(i);r?!r.K_()&&t.U_()&&(s=2):(r=new OW,s=t.U_()?0:1);try{switch(s){case 0:r.q_=await n.onListen(i,!0);break;case 1:r.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=_b(o,`Initialization of query '${qa(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,r),r.Q_.push(t),t.G_(n.onlineState),r.q_&&t.z_(r.q_)&&yb(n)}async function NC(e,t){const n=$t(e),s=t.query;let i=3;const r=n.queries.get(s);if(r){const o=r.Q_.indexOf(t);o>=0&&(r.Q_.splice(o,1),r.Q_.length===0?i=t.U_()?0:1:!r.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function NW(e,t){const n=$t(e);let s=!1;for(const i of t){const r=i.query,o=n.queries.get(r);if(o){for(const a of o.Q_)a.z_(i)&&(s=!0);o.q_=i}}s&&yb(n)}function LW(e,t,n){const s=$t(e),i=s.queries.get(t);if(i)for(const r of i.Q_)r.onError(n);s.queries.delete(t)}function yb(e){e.W_.forEach(t=>{t.next()})}var _y,LI;(LI=_y||(_y={})).j_="default",LI.Cache="cache";class LC{constructor(t,n,s){this.query=t,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=s||{}}z_(t){if(!this.options.includeMetadataChanges){const s=[];for(const i of t.docChanges)i.type!==3&&s.push(i);t=new bl(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.J_?this.Z_(t)&&(this.H_.next(t),n=!0):this.X_(t,this.onlineState)&&(this.ea(t),n=!0),this.Y_=t,n}onError(t){this.H_.error(t)}G_(t){this.onlineState=t;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,t)&&(this.ea(this.Y_),n=!0),n}X_(t,n){if(!t.fromCache||!this.U_())return!0;const s=n!=="Offline";return(!this.options.ta||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Z_(t){if(t.docChanges.length>0)return!0;const n=this.Y_&&this.Y_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(t){t=bl.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.J_=!0,this.H_.next(t)}U_(){return this.options.source!==_y.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(t){this.key=t}}class FC{constructor(t){this.key=t}}class UW{constructor(t,n){this.query=t,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Jt(),this.mutatedKeys=Jt(),this.ha=eC(t),this.Pa=new al(this.ha)}get Ia(){return this.ua}Ta(t,n){const s=n?n.Ea:new NI,i=n?n.Pa:this.Pa;let r=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,p)=>{const g=i.get(d),_=zp(this.query,p)?p:null,y=!!g&&this.mutatedKeys.has(g.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let w=!1;g&&_?g.data.isEqual(_.data)?y!==b&&(s.track({type:3,doc:_}),w=!0):this.da(g,_)||(s.track({type:2,doc:_}),w=!0,(c&&this.ha(_,c)>0||h&&this.ha(_,h)<0)&&(a=!0)):!g&&_?(s.track({type:0,doc:_}),w=!0):g&&!_&&(s.track({type:1,doc:g}),w=!0,(c||h)&&(a=!0)),w&&(_?(o=o.add(_),r=b?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),s.track({type:1,doc:d})}return{Pa:o,Ea:s,Xi:a,mutatedKeys:r}}da(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,i){const r=this.Pa;this.Pa=t.Pa,this.mutatedKeys=t.mutatedKeys;const o=t.Ea.k_();o.sort((d,p)=>function(_,y){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mt()}};return b(_)-b(y)}(d.type,p.type)||this.ha(d.doc,p.doc)),this.Aa(s),i=i!=null&&i;const a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,h=c!==this.ca;return this.ca=c,o.length!==0||h?{snapshot:new bl(this.query,t.Pa,r,o,t.mutatedKeys,c===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new NI,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(t){return!this.ua.has(t)&&!!this.Pa.has(t)&&!this.Pa.get(t).hasLocalMutations}Aa(t){t&&(t.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=t.current)}Ra(){if(!this.current)return[];const t=this.la;this.la=Jt(),this.Pa.forEach(s=>{this.ma(s.key)&&(this.la=this.la.add(s.key))});const n=[];return t.forEach(s=>{this.la.has(s)||n.push(new FC(s))}),this.la.forEach(s=>{t.has(s)||n.push(new UC(s))}),n}fa(t){this.ua=t.hs,this.la=Jt();const n=this.Ta(t.documents);return this.applyChanges(n,!0)}ga(){return bl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}}class FW{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class VW{constructor(t){this.key=t,this.pa=!1}}class BW{constructor(t,n,s,i,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new Fl(a=>tC(a),Wp),this.Sa=new Map,this.ba=new Set,this.Da=new je(Tt.comparator),this.Ca=new Map,this.va=new cb,this.Fa={},this.Ma=new Map,this.xa=vl.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}}async function $W(e,t,n=!0){const s=zC(e);let i;const r=s.wa.get(t);return r?(s.sharedClientState.addLocalQueryTarget(r.targetId),i=r.view.ga()):i=await VC(s,t,n,!0),i}async function HW(e,t){const n=zC(e);await VC(n,t,!0,!1)}async function VC(e,t,n,s){const i=await hW(e.localStore,ki(t)),r=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(r):"not-current";let a;return s&&(a=await WW(e,t,r,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&RC(e.remoteStore,i),a}async function WW(e,t,n,s,i){e.Na=(p,g,_)=>async function(b,w,A,R){let D=w.view.Ta(A);D.Xi&&(D=await DI(b.localStore,w.query,!1).then(({documents:V})=>w.view.Ta(V,D)));const O=R&&R.targetChanges.get(w.targetId),N=R&&R.targetMismatches.get(w.targetId)!=null,L=w.view.applyChanges(D,b.isPrimaryClient,O,N);return FI(b,w.targetId,L.Va),L.snapshot}(e,p,g,_);const r=await DI(e.localStore,t,!0),o=new UW(t,r.hs),a=o.Ta(r.documents),c=ah.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",i),h=o.applyChanges(a,e.isPrimaryClient,c);FI(e,n,h.Va);const d=new FW(t,n,o);return e.wa.set(t,d),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),h.snapshot}async function zW(e,t,n){const s=$t(e),i=s.wa.get(t),r=s.Sa.get(i.targetId);if(r.length>1)return s.Sa.set(i.targetId,r.filter(o=>!Wp(o,t))),void s.wa.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await my(s.localStore,i.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(i.targetId),n&&db(s.remoteStore,i.targetId),yy(s,i.targetId)}).catch(ih)):(yy(s,i.targetId),await my(s.localStore,i.targetId,!0))}async function jW(e,t){const n=$t(e),s=n.wa.get(t),i=n.Sa.get(s.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),db(n.remoteStore,s.targetId))}async function qW(e,t,n){const s=ZW(e);try{const i=await function(o,a){const c=$t(o),h=un.now(),d=a.reduce((_,y)=>_.add(y.key),Jt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let y=mr(),b=Jt();return c.os.getEntries(_,d).next(w=>{y=w,y.forEach((A,R)=>{R.isValidDocument()||(b=b.add(A))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,y)).next(w=>{p=w;const A=[];for(const R of a){const D=mH(R,p.get(R.key).overlayedDocument);D!=null&&A.push(new go(R.key,D,qR(D.value.mapValue),Gs.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,A,a)}).next(w=>{g=w;const A=w.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(_,w.batchId,A)})}).then(()=>({batchId:g.batchId,changes:sC(p)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let h=o.Fa[o.currentUser.toKey()];h||(h=new je(ce)),h=h.insert(a,c),o.Fa[o.currentUser.toKey()]=h}(s,i.batchId,n),await ch(s,i.changes),await Qp(s.remoteStore)}catch(i){const r=_b(i,"Failed to persist write");n.reject(r)}}async function BC(e,t){const n=$t(e);try{const s=await lW(n.localStore,t);t.targetChanges.forEach((i,r)=>{const o=n.Ca.get(r);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?De(o.pa):i.removedDocuments.size>0&&(De(o.pa),o.pa=!1))}),await ch(n,s,t)}catch(s){await ih(s)}}function UI(e,t,n){const s=$t(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const i=[];s.wa.forEach((r,o)=>{const a=o.view.G_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=$t(o);c.onlineState=a;let h=!1;c.queries.forEach((d,p)=>{for(const g of p.Q_)g.G_(a)&&(h=!0)}),h&&yb(c)}(s.eventManager,t),i.length&&s.ya.u_(i),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function KW(e,t,n){const s=$t(e);s.sharedClientState.updateQueryState(t,"rejected",n);const i=s.Ca.get(t),r=i&&i.key;if(r){let o=new je(Tt.comparator);o=o.insert(r,$n.newNoDocument(r,Vt.min()));const a=Jt().add(r),c=new Kp(Vt.min(),new Map,new je(ce),o,a);await BC(s,c),s.Da=s.Da.remove(r),s.Ca.delete(t),vb(s)}else await my(s.localStore,t,!1).then(()=>yy(s,t,n)).catch(ih)}async function GW(e,t){const n=$t(e),s=t.batch.batchId;try{const i=await aW(n.localStore,t);HC(n,s,null),$C(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ch(n,i)}catch(i){await ih(i)}}async function YW(e,t,n){const s=$t(e);try{const i=await function(o,a){const c=$t(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return c.mutationQueue.lookupMutationBatch(h,a).next(p=>(De(p!==null),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>c.localDocuments.getDocuments(h,d))})}(s.localStore,t);HC(s,t,n),$C(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await ch(s,i)}catch(i){await ih(i)}}function $C(e,t){(e.Ma.get(t)||[]).forEach(n=>{n.resolve()}),e.Ma.delete(t)}function HC(e,t,n){const s=$t(e);let i=s.Fa[s.currentUser.toKey()];if(i){const r=i.get(t);r&&(n?r.reject(n):r.resolve(),i=i.remove(t)),s.Fa[s.currentUser.toKey()]=i}}function yy(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Sa.get(t))e.wa.delete(s),n&&e.ya.La(s,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach(s=>{e.va.containsKey(s)||WC(e,s)})}function WC(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);n!==null&&(db(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),vb(e))}function FI(e,t,n){for(const s of n)s instanceof UC?(e.va.addReference(s.key,t),QW(e,s)):s instanceof FC?(lt("SyncEngine","Document no longer in limbo: "+s.key),e.va.removeReference(s.key,t),e.va.containsKey(s.key)||WC(e,s.key)):Mt()}function QW(e,t){const n=t.key,s=n.path.canonicalString();e.Da.get(n)||e.ba.has(s)||(lt("SyncEngine","New document in limbo: "+n),e.ba.add(s),vb(e))}function vb(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new Tt(Le.fromString(t)),s=e.xa.next();e.Ca.set(s,new VW(n)),e.Da=e.Da.insert(n,s),RC(e.remoteStore,new jr(ki(sb(n.path)),s,"TargetPurposeLimboResolution",Xv._e))}}async function ch(e,t,n){const s=$t(e),i=[],r=[],o=[];s.wa.isEmpty()||(s.wa.forEach((a,c)=>{o.push(s.Na(c,t,n).then(h=>{if((h||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(c.targetId,h!=null&&h.fromCache?"not-current":"current"),h){i.push(h);const d=hb.Ki(c.targetId,h);r.push(d)}}))}),await Promise.all(o),s.ya.u_(i),await async function(c,h){const d=$t(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>X.forEach(h,g=>X.forEach(g.qi,_=>d.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>X.forEach(g.Qi,_=>d.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!rh(p))throw p;lt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const _=d.ns.get(g),y=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(y);d.ns=d.ns.insert(g,b)}}}(s.localStore,r))}async function XW(e,t){const n=$t(e);if(!n.currentUser.isEqual(t)){lt("SyncEngine","User change. New user:",t.toKey());const s=await IC(n.localStore,t);n.currentUser=t,function(r,o){r.Ma.forEach(a=>{a.forEach(c=>{c.reject(new pt(Y.CANCELLED,o))})}),r.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ch(n,s.us)}}function JW(e,t){const n=$t(e),s=n.Ca.get(t);if(s&&s.pa)return Jt().add(s.key);{let i=Jt();const r=n.Sa.get(t);if(!r)return i;for(const o of r){const a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function zC(e){const t=$t(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=JW.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KW.bind(null,t),t.ya.u_=NW.bind(null,t.eventManager),t.ya.La=LW.bind(null,t.eventManager),t}function ZW(e){const t=$t(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=GW.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=YW.bind(null,t),t}class VI{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Gp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return oW(this.persistence,new iW,t.initialUser,this.serializer)}createPersistence(t){return new eW(ub.Hr,this.serializer)}createSharedClientState(t){return new fW}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class tz{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>UI(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=XW.bind(null,this.syncEngine),await kW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new MW}()}createDatastore(t){const n=Gp(t.databaseInfo.databaseId),s=function(r){return new _W(r)}(t.databaseInfo);return function(r,o,a,c){return new bW(r,o,a,c)}(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return function(s,i,r,o,a){return new EW(s,i,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>UI(this.syncEngine,n,0),function(){return OI.D()?new OI:new pW}())}createSyncEngine(t,n){return function(i,r,o,a,c,h,d){const p=new BW(i,r,o,a,c,h);return d&&(p.Oa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(s){const i=$t(s);lt("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await lh(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.qa(this.observer.next,t)}error(t){this.observer.error?this.qa(this.observer.error,t):Li("Uncaught Error in snapshot listener:",t.toString())}Qa(){this.muted=!0}qa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(t,n,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=i,this.user=Bn.UNAUTHENTICATED,this.clientId=WR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async r=>{lt("FirestoreClient","Received user=",r.uid),await this.authCredentialListener(r),this.user=r}),this.appCheckCredentials.start(s,r=>(lt("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new pt(Y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=_b(n,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function o_(e,t){e.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener(async i=>{s.isEqual(i)||(await IC(t.localStore,i),s=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function BI(e,t){e.asyncQueue.verifyOperationInProgress();const n=await sz(e);lt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(s=>MI(t.remoteStore,s)),e.setAppCheckTokenChangeListener((s,i)=>MI(t.remoteStore,i)),e._onlineComponents=t}function nz(e){return e.name==="FirebaseError"?e.code===Y.FAILED_PRECONDITION||e.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function sz(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await o_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!nz(n))throw n;fl("Error using user provided cache. Falling back to memory cache: "+n),await o_(e,new VI)}}else lt("FirestoreClient","Using default OfflineComponentProvider"),await o_(e,new VI);return e._offlineComponents}async function qC(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lt("FirestoreClient","Using user provided OnlineComponentProvider"),await BI(e,e._uninitializedComponentsProvider._online)):(lt("FirestoreClient","Using default OnlineComponentProvider"),await BI(e,new tz))),e._onlineComponents}function iz(e){return qC(e).then(t=>t.syncEngine)}async function KC(e){const t=await qC(e),n=t.eventManager;return n.onListen=$W.bind(null,t.syncEngine),n.onUnlisten=zW.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=HW.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jW.bind(null,t.syncEngine),n}function rz(e,t,n={}){const s=new Di;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const d=new jC({next:g=>{o.enqueueAndForget(()=>NC(r,p));const _=g.docs.has(a);!_&&g.fromCache?h.reject(new pt(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&c&&c.source==="server"?h.reject(new pt(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new LC(sb(a.path),d,{includeMetadataChanges:!0,ta:!0});return MC(r,p)}(await KC(e),e.asyncQueue,t,n,s)),s.promise}function oz(e,t,n={}){const s=new Di;return e.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,h){const d=new jC({next:g=>{o.enqueueAndForget(()=>NC(r,p)),g.fromCache&&c.source==="server"?h.reject(new pt(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),p=new LC(a,d,{includeMetadataChanges:!0,ta:!0});return MC(r,p)}(await KC(e),e.asyncQueue,t,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(e,t,n){if(!n)throw new pt(Y.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function az(e,t,n,s){if(t===!0&&s===!0)throw new pt(Y.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function HI(e){if(!Tt.isDocumentKey(e))throw new pt(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function WI(e){if(Tt.isDocumentKey(e))throw new pt(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Xp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Mt()}function ui(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new pt(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xp(e);throw new pt(Y.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t){var n,s;if(t.host===void 0){if(t.ssl!==void 0)throw new pt(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new pt(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}az("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GC((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new pt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new pt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new pt(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,i){return s.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jp{constructor(t,n,s,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new pt(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new pt(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zI(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new x6;switch(s.type){case"firstParty":return new P6(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pt(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=$I.get(n);s&&(lt("ComponentProvider","Removing Datastore"),$I.delete(n),s.terminate())}(this),Promise.resolve()}}function lz(e,t,n,s={}){var i;const r=(e=ui(e,Jp))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&fl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),s.mockUserToken){let a,c;if(typeof s.mockUserToken=="string")a=s.mockUserToken,c=Bn.MOCK_USER;else{a=eS(s.mockUserToken,(i=e._app)===null||i===void 0?void 0:i.options.projectId);const h=s.mockUserToken.sub||s.mockUserToken.user_id;if(!h)throw new pt(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bn(h)}e._authCredentials=new S6(new HR(a,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Ea(this.firestore,t,this._query)}}class os{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new os(this.firestore,t,this._key)}}class Zr extends Ea{constructor(t,n,s){super(t,n,sb(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new os(this.firestore,null,new Tt(t))}withConverter(t){return new Zr(this.firestore,t,this._path)}}function ue(e,t,...n){if(e=Xe(e),YC("collection","path",t),e instanceof Jp){const s=Le.fromString(t,...n);return WI(s),new Zr(e,null,s)}{if(!(e instanceof os||e instanceof Zr))throw new pt(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Le.fromString(t,...n));return WI(s),new Zr(e.firestore,null,s)}}function ct(e,t,...n){if(e=Xe(e),arguments.length===1&&(t=WR.newId()),YC("doc","path",t),e instanceof Jp){const s=Le.fromString(t,...n);return HI(s),new os(e,null,new Tt(s))}{if(!(e instanceof os||e instanceof Zr))throw new pt(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(Le.fromString(t,...n));return HI(s),new os(e.firestore,e instanceof Zr?e.converter:null,new Tt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new xC(this,"async_queue_retry"),this.cu=()=>{const n=r_();n&&lt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const t=r_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.lu(),this.hu(t)}enterRestrictedMode(t){if(!this.iu){this.iu=!0,this.au=t||!1;const n=r_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(t){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Di;return this.hu(()=>this.iu&&this.au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.ru.push(t),this.Pu()))}async Pu(){if(this.ru.length!==0){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(t){if(!rh(t))throw t;lt("AsyncQueue","Operation failed with retryable error: "+t)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}}hu(t){const n=this.nu.then(()=>(this._u=!0,t().catch(s=>{this.ou=s,this._u=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(s);throw Li("INTERNAL UNHANDLED ERROR: ",i),s}).then(s=>(this._u=!1,s))));return this.nu=n,n}enqueueAfterDelay(t,n,s){this.lu(),this.uu.indexOf(t)>-1&&(n=0);const i=mb.createAndSchedule(this,t,n,s,r=>this.Iu(r));return this.su.push(i),i}lu(){this.ou&&Mt()}verifyOperationInProgress(){}async Tu(){let t;do t=this.nu,await t;while(t!==this.nu)}Eu(t){for(const n of this.su)if(n.timerId===t)return!0;return!1}du(t){return this.Tu().then(()=>{this.su.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.su)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tu()})}Au(t){this.uu.push(t)}Iu(t){const n=this.su.indexOf(t);this.su.splice(n,1)}}class Ta extends Jp{constructor(t,n,s,i){super(t,n,s,i),this.type="firestore",this._queue=function(){return new cz}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||QC(this),this._firestoreClient.terminate()}}function uz(e,t){const n=typeof e=="object"?e:mv(),s=typeof e=="string"?e:t||"(default)",i=wp(n,"firestore").getImmediate({identifier:s});if(!i._initialized){const r=Jx("firestore");r&&lz(i,...r)}return i}function bb(e){return e._firestoreClient||QC(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function QC(e){var t,n,s;const i=e._freezeSettings(),r=function(a,c,h,d){return new z6(a,c,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GC(d.experimentalLongPollingOptions),d.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new ez(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=i.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wl(Kn.fromBase64String(t))}catch(n){throw new pt(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new wl(Kn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new pt(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new pt(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new pt(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ce(this._lat,t._lat)||ce(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz=/^__.*__$/;class dz{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new go(t,this.data,this.fieldMask,n,this.fieldTransforms):new oh(t,this.data,n,this.fieldTransforms)}}class XC{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return new go(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function JC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mt()}}class tg{constructor(t,n,s,i,r,o){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=i,r===void 0&&this.Ru(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(t){return new tg(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:s,gu:!1});return i.pu(t),i}yu(t){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.mu({path:s,gu:!1});return i.Ru(),i}wu(t){return this.mu({path:void 0,gu:!0})}Su(t){return Hf(t,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let t=0;t<this.path.length;t++)this.pu(this.path.get(t))}pu(t){if(t.length===0)throw this.Su("Document fields must not be empty");if(JC(this.Vu)&&hz.test(t))throw this.Su('Document fields cannot begin and end with "__"')}}class fz{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Gp(t)}Cu(t,n,s,i=!1){return new tg({Vu:t,methodName:n,Du:s,path:Dn.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eg(e){const t=e._freezeSettings(),n=Gp(e._databaseId);return new fz(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZC(e,t,n,s,i,r={}){const o=e.Cu(r.merge||r.mergeFields?2:0,t,n,i);Ab("Data must be an object, but it was:",o,s);const a=eP(s,o);let c,h;if(r.merge)c=new Os(o.fieldMask),h=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const g=vy(t,p,n);if(!o.contains(g))throw new pt(Y.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);sP(d,g)||d.push(g)}c=new Os(d),h=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,h=o.fieldTransforms;return new dz(new ms(a),c,h)}class uh extends Bl{_toFieldTransform(t){if(t.Vu!==2)throw t.Vu===1?t.Su(`${this._methodName}() can only appear at the top level of your update data`):t.Su(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof uh}}function tP(e,t,n){return new tg({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Eb extends Bl{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){const n=tP(this,t,!0),s=this.vu.map(r=>Ia(r,n)),i=new _l(s);return new ib(t.path,i)}isEqual(t){return t instanceof Eb&&hl(this.vu,t.vu)}}class Tb extends Bl{constructor(t,n){super(t),this.vu=n}_toFieldTransform(t){const n=tP(this,t,!0),s=this.vu.map(r=>Ia(r,n)),i=new yl(s);return new ib(t.path,i)}isEqual(t){return t instanceof Tb&&hl(this.vu,t.vu)}}class Ib extends Bl{constructor(t,n){super(t),this.Fu=n}_toFieldTransform(t){const n=new xu(t.serializer,aC(t.serializer,this.Fu));return new ib(t.path,n)}isEqual(t){return t instanceof Ib&&this.Fu===t.Fu}}function pz(e,t,n,s){const i=e.Cu(1,t,n);Ab("Data must be an object, but it was:",i,s);const r=[],o=ms.empty();ba(s,(c,h)=>{const d=xb(t,c,n);h=Xe(h);const p=i.yu(d);if(h instanceof uh)r.push(d);else{const g=Ia(h,p);g!=null&&(r.push(d),o.set(d,g))}});const a=new Os(r);return new XC(o,a,i.fieldTransforms)}function gz(e,t,n,s,i,r){const o=e.Cu(1,t,n),a=[vy(t,s,n)],c=[i];if(r.length%2!=0)throw new pt(Y.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<r.length;g+=2)a.push(vy(t,r[g])),c.push(r[g+1]);const h=[],d=ms.empty();for(let g=a.length-1;g>=0;--g)if(!sP(h,a[g])){const _=a[g];let y=c[g];y=Xe(y);const b=o.yu(_);if(y instanceof uh)h.push(_);else{const w=Ia(y,b);w!=null&&(h.push(_),d.set(_,w))}}const p=new Os(h);return new XC(d,p,o.fieldTransforms)}function mz(e,t,n,s=!1){return Ia(n,e.Cu(s?4:3,t))}function Ia(e,t){if(nP(e=Xe(e)))return Ab("Unsupported field value:",t,e),eP(e,t);if(e instanceof Bl)return function(s,i){if(!JC(i.Vu))throw i.Su(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${s._methodName}() is not currently supported inside arrays`);const r=s._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&t.Vu!==4)throw t.Su("Nested arrays are not supported");return function(s,i){const r=[];let o=0;for(const a of s){let c=Ia(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(e,t)}return function(s,i){if((s=Xe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return aC(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const r=un.fromDate(s);return{timestampValue:Bf(i.serializer,r)}}if(s instanceof un){const r=new un(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bf(i.serializer,r)}}if(s instanceof wb)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof wl)return{bytesValue:_C(i.serializer,s._byteString)};if(s instanceof os){const r=i.databaseId,o=s.firestore._databaseId;if(!o.isEqual(r))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:lb(s.firestore._databaseId||i.databaseId,s._key.path)}}throw i.Su(`Unsupported field value: ${Xp(s)}`)}(e,t)}function eP(e,t){const n={};return zR(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ba(e,(s,i)=>{const r=Ia(i,t.fu(s));r!=null&&(n[s]=r)}),{mapValue:{fields:n}}}function nP(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof un||e instanceof wb||e instanceof wl||e instanceof os||e instanceof Bl)}function Ab(e,t,n){if(!nP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const s=Xp(n);throw s==="an object"?t.Su(e+" a custom object"):t.Su(e+" "+s)}}function vy(e,t,n){if((t=Xe(t))instanceof Zp)return t._internalPath;if(typeof t=="string")return xb(e,t);throw Hf("Field path arguments must be of type string or ",e,!1,void 0,n)}const _z=new RegExp("[~\\*/\\[\\]]");function xb(e,t,n){if(t.search(_z)>=0)throw Hf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Zp(...t.split("."))._internalPath}catch{throw Hf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hf(e,t,n,s,i){const r=s&&!s.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${s}`),o&&(c+=` in document ${i}`),c+=")"),new pt(Y.INVALID_ARGUMENT,a+e+c)}function sP(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(t,n,s,i,r){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new os(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new yz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yz extends iP{data(){return super.data()}}function ng(e,t){return typeof t=="string"?xb(e,t):t instanceof Zp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new pt(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sb{}class rP extends Sb{}function ha(e,t,...n){let s=[];t instanceof Sb&&s.push(t),s=s.concat(n),function(r){const o=r.filter(c=>c instanceof Cb).length,a=r.filter(c=>c instanceof sg).length;if(o>1||o>0&&a>0)throw new pt(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const i of s)e=i._apply(e);return e}class sg extends rP{constructor(t,n,s){super(),this._field=t,this._op=n,this._value=s,this.type="where"}static _create(t,n,s){return new sg(t,n,s)}_apply(t){const n=this._parse(t);return oP(t._query,n),new Ea(t.firestore,t.converter,uy(t._query,n))}_parse(t){const n=eg(t.firestore);return function(r,o,a,c,h,d,p){let g;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new pt(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qI(p,d);const _=[];for(const y of p)_.push(jI(c,r,y));g={arrayValue:{values:_}}}else g=jI(c,r,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qI(p,d),g=mz(a,o,p,d==="in"||d==="not-in");return cn.create(h,d,g)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Rb(e,t,n){const s=t,i=ng("where",e);return sg._create(i,s,n)}class Cb extends Sb{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Cb(t,n)}_parse(t){const n=this._queryConstraints.map(s=>s._parse(t)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:ci.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,r){let o=i;const a=r.getFlattenedFilters();for(const c of a)oP(o,c),o=uy(o,c)}(t._query,n),new Ea(t.firestore,t.converter,uy(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pb extends rP{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Pb(t,n)}_apply(t){const n=function(i,r,o){if(i.startAt!==null)throw new pt(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new pt(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(r,o)}(t._query,this._field,this._direction);return new Ea(t.firestore,t.converter,function(i,r){const o=i.explicitOrderBy.concat([r]);return new Ul(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Db(e,t="asc"){const n=t,s=ng("orderBy",e);return Pb._create(s,n)}function jI(e,t,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new pt(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ZR(t)&&n.indexOf("/")!==-1)throw new pt(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=t.path.child(Le.fromString(n));if(!Tt.isDocumentKey(s))throw new pt(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return pI(e,new Tt(s))}if(n instanceof os)return pI(e,n._key);throw new pt(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(n)}.`)}function qI(e,t){if(!Array.isArray(e)||e.length===0)throw new pt(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function oP(e,t){const n=function(i,r){for(const o of i)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new pt(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new pt(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class bz{convertValue(t,n="none"){switch(ua(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ln(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(ca(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Mt()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return ba(t,(i,r)=>{s[i]=this.convertValue(r,n)}),s}convertGeoPoint(t){return new wb(ln(t.latitude),ln(t.longitude))}convertArray(t,n){return(t.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Zv(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Eu(t));default:return null}}convertTimestamp(t){const n=oo(t);return new un(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=Le.fromString(t);De(TC(s));const i=new Tu(s.get(1),s.get(3)),r=new Tt(s.popFirst(5));return i.isEqual(n)||Li(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class lP extends iP{constructor(t,n,s,i,r,o){super(t,n,s,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new tf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(ng("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class tf extends lP{data(t={}){return super.data(t)}}class wz{constructor(t,n,s,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new xc(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(s=>{t.call(n,new tf(this._firestore,this._userDataWriter,s.key,s,new xc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pt(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new tf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new tf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:Ez(a.type),doc:c,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ez(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function he(e){e=ui(e,os);const t=ui(e.firestore,Ta);return rz(bb(t),e._key).then(n=>Tz(t,e,n))}class cP extends bz{constructor(t){super(),this.firestore=t}convertBytes(t){return new wl(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new os(this.firestore,null,n)}}function Ns(e){e=ui(e,Ea);const t=ui(e.firestore,Ta),n=bb(t),s=new cP(t);return vz(e._query),oz(n,e._query).then(i=>new wz(t,s,e,i))}function ni(e,t,n){e=ui(e,os);const s=ui(e.firestore,Ta),i=aP(e.converter,t,n);return ig(s,[ZC(eg(s),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Gs.none())])}function rs(e,t,n,...s){e=ui(e,os);const i=ui(e.firestore,Ta),r=eg(i);let o;return o=typeof(t=Xe(t))=="string"||t instanceof Zp?gz(r,"updateDoc",e._key,t,n,s):pz(r,"updateDoc",e._key,t),ig(i,[o.toMutation(e._key,Gs.exists(!0))])}function to(e){return ig(ui(e.firestore,Ta),[new rb(e._key,Gs.none())])}function a_(e,t){const n=ui(e.firestore,Ta),s=ct(e),i=aP(e.converter,t);return ig(n,[ZC(eg(e.firestore),"addDoc",s._key,i,e.converter!==null,{}).toMutation(s._key,Gs.exists(!1))]).then(()=>s)}function ig(e,t){return function(s,i){const r=new Di;return s.asyncQueue.enqueueAndForget(async()=>qW(await iz(s),i,r)),r.promise}(bb(e),t)}function Tz(e,t,n){const s=n.docs.get(t._key),i=new cP(e);return new lP(e,i,t._key,s,new xc(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return new uh("deleteField")}function by(...e){return new Eb("arrayUnion",e)}function Wf(...e){return new Tb("arrayRemove",e)}function Cs(e){return new Ib("increment",e)}(function(t,n=!0){(function(i){Ll=i})(ya),ra(new io("firestore",(s,{instanceIdentifier:i,options:r})=>{const o=s.getProvider("app").getImmediate(),a=new Ta(new R6(s.getProvider("auth-internal")),new k6(s.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pt(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tu(h.options.projectId,d)}(o,i),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Ri(cI,"4.5.0",t),Ri(cI,"4.5.0","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="firebasestorage.googleapis.com",hP="storageBucket",Iz=2*60*1e3,Az=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends Bi{constructor(t,n,s=0){super(l_(t),`Firebase Storage: ${n} (${l_(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return l_(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ze;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ze||(Ze={}));function l_(e){return"storage/"+e}function kb(){const e="An unknown error occurred, please check the error payload for server response.";return new tn(Ze.UNKNOWN,e)}function xz(e){return new tn(Ze.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Sz(e){return new tn(Ze.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Rz(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(Ze.UNAUTHENTICATED,e)}function Cz(){return new tn(Ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Pz(e){return new tn(Ze.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Dz(){return new tn(Ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kz(){return new tn(Ze.CANCELED,"User canceled the upload/download.")}function Oz(e){return new tn(Ze.INVALID_URL,"Invalid URL '"+e+"'.")}function Mz(e){return new tn(Ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Nz(){return new tn(Ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hP+"' property when initializing the app?")}function Lz(){return new tn(Ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uz(){return new tn(Ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Fz(e){return new tn(Ze.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wy(e){return new tn(Ze.INVALID_ARGUMENT,e)}function dP(){return new tn(Ze.APP_DELETED,"The Firebase app was deleted.")}function Vz(e){return new tn(Ze.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jc(e,t){return new tn(Ze.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function uc(e){throw new tn(Ze.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let s;try{s=Ms.makeFromUrl(t,n)}catch{return new Ms(t,"")}if(s.path==="")return s;throw Mz(t)}static makeFromUrl(t,n){let s=null;const i="([A-Za-z0-9.\\-_]+)";function r(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function h(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${d}/b/${i}/o${g}`,"i"),y={bucket:1,path:3},b=n===uP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,w="([^?#]*)",A=new RegExp(`^https?://${b}/${i}/${w}`,"i"),D=[{regex:a,indices:c,postModify:r},{regex:_,indices:y,postModify:h},{regex:A,indices:{bucket:1,path:2},postModify:h}];for(let O=0;O<D.length;O++){const N=D[O],L=N.regex.exec(t);if(L){const V=L[N.indices.bucket];let B=L[N.indices.path];B||(B=""),s=new Ms(V,B),N.postModify(s);break}}if(s==null)throw Oz(t);return s}}class Bz{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(e,t,n){let s=1,i=null,r=null,o=!1,a=0;function c(){return a===2}let h=!1;function d(...w){h||(h=!0,t.apply(null,w))}function p(w){i=setTimeout(()=>{i=null,e(_,c())},w)}function g(){r&&clearTimeout(r)}function _(w,...A){if(h){g();return}if(w){g(),d.call(null,w,...A);return}if(c()||o){g(),d.call(null,w,...A);return}s<64&&(s*=2);let D;a===1?(a=2,D=0):D=(s+Math.random())*1e3,p(D)}let y=!1;function b(w){y||(y=!0,g(),!h&&(i!==null?(w||(a=2),clearTimeout(i),p(0)):w||(a=1)))}return p(0),r=setTimeout(()=>{o=!0,b(!0)},n),b}function Hz(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wz(e){return e!==void 0}function zz(e){return typeof e=="object"&&!Array.isArray(e)}function Ob(e){return typeof e=="string"||e instanceof String}function GI(e){return Mb()&&e instanceof Blob}function Mb(){return typeof Blob<"u"}function YI(e,t,n,s){if(s<t)throw wy(`Invalid value for '${e}'. Expected ${t} or greater.`);if(s>n)throw wy(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(e,t,n){let s=t;return n==null&&(s=`https://${t}`),`${n}://${s}/v0${e}`}function fP(e){const t=encodeURIComponent;let n="?";for(const s in e)if(e.hasOwnProperty(s)){const i=t(s)+"="+t(e[s]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jo;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Jo||(Jo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jz(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||i||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(t,n,s,i,r,o,a,c,h,d,p,g=!0){this.url_=t,this.method_=n,this.headers_=s,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,y)=>{this.resolve_=_,this.reject_=y,this.start_()})}start_(){const t=(s,i)=>{if(i){s(!1,new Ed(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const c=a.loaded,h=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Jo.NO_ERROR,c=r.getStatus();if(!a||jz(c,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===Jo.ABORT;s(!1,new Ed(!1,null,d));return}const h=this.successCodes_.indexOf(c)!==-1;s(!0,new Ed(h,r))})},n=(s,i)=>{const r=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());Wz(c)?r(c):r()}catch(c){o(c)}else if(a!==null){const c=kb();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){const c=this.appDelete_?dP():kz();o(c)}else{const c=Dz();o(c)}};this.canceled_?n(!1,new Ed(!1,null,!0)):this.backoffId_=$z(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Hz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ed{constructor(t,n,s){this.wasSuccessCode=t,this.connection=n,this.canceled=!!s}}function Kz(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Gz(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Yz(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Qz(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Xz(e,t,n,s,i,r,o=!0){const a=fP(e.urlParams),c=e.url+a,h=Object.assign({},e.headers);return Yz(h,t),Kz(h,n),Gz(h,r),Qz(h,s),new qz(c,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zz(...e){const t=Jz();if(t!==void 0){const n=new t;for(let s=0;s<e.length;s++)n.append(e[s]);return n.getBlob()}else{if(Mb())return new Blob(e);throw new tn(Ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function tj(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(e){if(typeof atob>"u")throw Fz("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class c_{constructor(t,n){this.data=t,this.contentType=n||null}}function nj(e,t){switch(e){case Ai.RAW:return new c_(pP(t));case Ai.BASE64:case Ai.BASE64URL:return new c_(gP(e,t));case Ai.DATA_URL:return new c_(ij(t),rj(t))}throw kb()}function pP(e){const t=[];for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const r=s,o=e.charCodeAt(++n);s=65536|(r&1023)<<10|o&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function sj(e){let t;try{t=decodeURIComponent(e)}catch{throw jc(Ai.DATA_URL,"Malformed data URL.")}return pP(t)}function gP(e,t){switch(e){case Ai.BASE64:{const i=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(i||r)throw jc(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const i=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(i||r)throw jc(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ej(t)}catch(i){throw i.message.includes("polyfill")?i:jc(e,"Invalid character found")}const s=new Uint8Array(n.length);for(let i=0;i<n.length;i++)s[i]=n.charCodeAt(i);return s}class mP{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw jc(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=oj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function ij(e){const t=new mP(e);return t.base64?gP(Ai.BASE64,t.rest):sj(t.rest)}function rj(e){return new mP(e).contentType}function oj(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,n){let s=0,i="";GI(t)?(this.data_=t,s=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(GI(this.data_)){const s=this.data_,i=tj(s,t,n);return i===null?null:new zr(i)}else{const s=new Uint8Array(this.data_.buffer,t,n-t);return new zr(s,!0)}}static getBlob(...t){if(Mb()){const n=t.map(s=>s instanceof zr?s.data_:s);return new zr(Zz.apply(null,n))}else{const n=t.map(o=>Ob(o)?nj(Ai.RAW,o).data:o.data_);let s=0;n.forEach(o=>{s+=o.byteLength});const i=new Uint8Array(s);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[r++]=o[a]}),new zr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(e){let t;try{t=JSON.parse(e)}catch{return null}return zz(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aj(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function lj(e,t){const n=t.split("/").filter(s=>s.length>0).join("/");return e.length===0?n:e+"/"+n}function yP(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cj(e,t){return t}class ns{constructor(t,n,s,i){this.server=t,this.local=n||t,this.writable=!!s,this.xform=i||cj}}let Td=null;function uj(e){return!Ob(e)||e.length<2?e:yP(e)}function vP(){if(Td)return Td;const e=[];e.push(new ns("bucket")),e.push(new ns("generation")),e.push(new ns("metageneration")),e.push(new ns("name","fullPath",!0));function t(r,o){return uj(o)}const n=new ns("name");n.xform=t,e.push(n);function s(r,o){return o!==void 0?Number(o):o}const i=new ns("size");return i.xform=s,e.push(i),e.push(new ns("timeCreated")),e.push(new ns("updated")),e.push(new ns("md5Hash",null,!0)),e.push(new ns("cacheControl",null,!0)),e.push(new ns("contentDisposition",null,!0)),e.push(new ns("contentEncoding",null,!0)),e.push(new ns("contentLanguage",null,!0)),e.push(new ns("contentType",null,!0)),e.push(new ns("metadata","customMetadata",!0)),Td=e,Td}function hj(e,t){function n(){const s=e.bucket,i=e.fullPath,r=new Ms(s,i);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:n})}function dj(e,t,n){const s={};s.type="file";const i=n.length;for(let r=0;r<i;r++){const o=n[r];s[o.local]=o.xform(s,t[o.server])}return hj(s,e),s}function bP(e,t,n){const s=_P(t);return s===null?null:dj(e,s,n)}function fj(e,t,n,s){const i=_P(t);if(i===null||!Ob(i.downloadTokens))return null;const r=i.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(h=>{const d=e.bucket,p=e.fullPath,g="/b/"+o(d)+"/o/"+o(p),_=Nb(g,n,s),y=fP({alt:"media",token:h});return _+y})[0]}function pj(e,t){const n={},s=t.length;for(let i=0;i<s;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class wP{constructor(t,n,s,i){this.url=t,this.method=n,this.handler=s,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(e){if(!e)throw kb()}function gj(e,t){function n(s,i){const r=bP(e,i,t);return EP(r!==null),r}return n}function mj(e,t){function n(s,i){const r=bP(e,i,t);return EP(r!==null),fj(r,i,e.host,e._protocol)}return n}function TP(e){function t(n,s){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Cz():i=Rz():n.getStatus()===402?i=Sz(e.bucket):n.getStatus()===403?i=Pz(e.path):i=s,i.status=n.getStatus(),i.serverResponse=s.serverResponse,i}return t}function _j(e){const t=TP(e);function n(s,i){let r=t(s,i);return s.getStatus()===404&&(r=xz(e.path)),r.serverResponse=i.serverResponse,r}return n}function yj(e,t,n){const s=t.fullServerUrl(),i=Nb(s,e.host,e._protocol),r="GET",o=e.maxOperationRetryTime,a=new wP(i,r,mj(e,n),o);return a.errorHandler=_j(t),a}function vj(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function bj(e,t,n){const s=Object.assign({},n);return s.fullPath=e.path,s.size=t.size(),s.contentType||(s.contentType=vj(null,t)),s}function wj(e,t,n,s,i){const r=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let D="";for(let O=0;O<2;O++)D=D+Math.random().toString().slice(2);return D}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const h=bj(t,s,i),d=pj(h,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,g=`\r
--`+c+"--",_=zr.getBlob(p,s,g);if(_===null)throw Lz();const y={name:h.fullPath},b=Nb(r,e.host,e._protocol),w="POST",A=e.maxUploadRetryTime,R=new wP(b,w,gj(e,n),A);return R.urlParams=y,R.headers=o,R.body=_.uploadData(),R.errorHandler=TP(t),R}class Ej{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jo.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jo.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jo.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,s,i){if(this.sent_)throw uc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Tj extends Ej{initXhr(){this.xhr_.responseType="text"}}function IP(){return new Tj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n){this._service=t,n instanceof Ms?this._location=n:this._location=Ms.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new da(t,n)}get root(){const t=new Ms(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yP(this._location.path)}get storage(){return this._service}get parent(){const t=aj(this._location.path);if(t===null)return null;const n=new Ms(this._location.bucket,t);return new da(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Vz(t)}}function Ij(e,t,n){e._throwIfRoot("uploadBytes");const s=wj(e.storage,e._location,vP(),new zr(t,!0),n);return e.storage.makeRequestWithTokens(s,IP).then(i=>({metadata:i,ref:e}))}function Aj(e){e._throwIfRoot("getDownloadURL");const t=yj(e.storage,e._location,vP());return e.storage.makeRequestWithTokens(t,IP).then(n=>{if(n===null)throw Uz();return n})}function xj(e,t){const n=lj(e._location.path,t),s=new Ms(e._location.bucket,n);return new da(e.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(e){return/^[A-Za-z]+:\/\//.test(e)}function Rj(e,t){return new da(e,t)}function AP(e,t){if(e instanceof Lb){const n=e;if(n._bucket==null)throw Nz();const s=new da(n,n._bucket);return t!=null?AP(s,t):s}else return t!==void 0?xj(e,t):e}function Cj(e,t){if(t&&Sj(t)){if(e instanceof Lb)return Rj(e,t);throw wy("To use ref(service, url), the first argument must be a Storage instance.")}else return AP(e,t)}function QI(e,t){const n=t==null?void 0:t[hP];return n==null?null:Ms.makeFromBucketSpec(n,e)}function Pj(e,t,n,s={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=s;i&&(e._overrideAuthToken=typeof i=="string"?i:eS(i,e.app.options.projectId))}class Lb{constructor(t,n,s,i,r){this.app=t,this._authProvider=n,this._appCheckProvider=s,this._url=i,this._firebaseVersion=r,this._bucket=null,this._host=uP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Iz,this._maxUploadRetryTime=Az,this._requests=new Set,i!=null?this._bucket=Ms.makeFromBucketSpec(i,this._host):this._bucket=QI(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ms.makeFromBucketSpec(this._url,t):this._bucket=QI(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){YI("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){YI("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new da(this,t)}_makeRequest(t,n,s,i,r=!0){if(this._deleted)return new Bz(dP());{const o=Xz(t,this._appId,s,i,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[s,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,s,i).getPromise()}}const XI="@firebase/storage",JI="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="storage";function SP(e,t,n){return e=Xe(e),Ij(e,t,n)}function RP(e){return e=Xe(e),Aj(e)}function CP(e,t){return e=Xe(e),Cj(e,t)}function Ub(e=mv(),t){e=Xe(e);const s=wp(e,xP).getImmediate({identifier:t}),i=Jx("storage");return i&&Dj(s,...i),s}function Dj(e,t,n,s={}){Pj(e,t,n,s)}function kj(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Lb(n,s,i,t,ya)}function Oj(){ra(new io(xP,kj,"PUBLIC").setMultipleInstances(!0)),Ri(XI,JI,""),Ri(XI,JI,"esm2017")}Oj();const Mj={apiKey:"AIzaSyBsztvNrVVoe7ncJRls1urDDozQbUcEXgA",authDomain:"trip-tally-c943b.firebaseapp.com",projectId:"trip-tally-c943b",storageBucket:"trip-tally-c943b.appspot.com",messagingSenderId:"517220520191",appId:"1:517220520191:web:fc191df9a29f73733dbcca"},Fb=rS(Mj),fa=Xn(Fb),mt=uz(Fb);Ub(Fb);const PP="/assets/triptallylogo-Cxp7mKvQ.png",en=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},Nj={name:"NavBar"},Lj=e=>(Yn("data-v-05e55149"),e=e(),Qn(),e),Uj={class:"navbar"},Fj=Lj(()=>I("img",{src:PP,class:"tt_logo",alt:"TripTally"},null,-1));function Vj(e,t,n,s,i,r){const o=ze("router-link");return W(),j("nav",Uj,[Fj,I("div",null,[Et(o,{to:"/login",class:"nav-link-login"},{default:vs(()=>[bs("Log In")]),_:1}),Et(o,{to:"/signup",class:"nav-link-signup"},{default:vs(()=>[bs("Sign Up")]),_:1})])])}const DP=en(Nj,[["render",Vj],["__scopeId","data-v-05e55149"]]);function Bj(){const t=Xn().currentUser;return console.log("getCurrentUser() returning:",t),t}function kP(){const e=Xn();return r3(e).then(()=>{console.log("User is logged out")})}function $j(e){return{all:e=e||new Map,on:function(t,n){var s=e.get(t);s?s.push(n):e.set(t,[n])},off:function(t,n){var s=e.get(t);s&&(n?s.splice(s.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var s=e.get(t);s&&s.slice().map(function(i){i(n)}),(s=e.get("*"))&&s.slice().map(function(i){i(t,n)})}}}const OP=$j(),Hj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAeCAYAAABAFGxuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAELSURBVHgB7dbtDYIwEAbgwzgAIzCCG4gbuAErsAE6ASM4giMQJ3CEsoFs8HoX+OFHQUppqQlPcn9oAi/t5YBoJgBiCg2HSrkeXCWFgsPkeKe4ElqS7BD0JNyOfJMd4arwW06+yE50OzJWQa7xQ7KuyU1d4arv5M1hR80ajm8Wc10wD8V1JFtom/yO+U3vO7RDU8Ed82GM76HpipxGMjZUCb/UYDi0TV5hObkuVAK3/TRW8Roqw7Sh6YoM4ziC/nxl1vj4ham5DprrzTaKovrzKodtyBPd88WGArUlO+eBtT1XShNZBeNjOPWtcTvIWkoTBXuUazBTazBTazBTfzf55Vt5Izv1iHvUfQtPA5fL8xz5tNoAAAAASUVORK5CYII=",Wj={name:"NavigationBar",data(){return{user:!1,Username:"No Authenticated User",FirstName:"",LastName:"",isDropdownOpen:!1,showLogoutPopup:!1}},created(){OP.on("usernameUpdated",e=>{this.Username=e})},components:{NavBar:DP},methods:{async fetchUserData(){const e=fa.currentUser;if(e){const t=ct(mt,"Users",e.uid),n=await he(t);if(n.exists()){const s=n.data();this.Username=s.Username,this.FirstName=s.FirstName,this.LastName=s.LastName}}},toggleDropdown(){this.isDropdownOpen=!0},closeDropdown(){this.isDropdownOpen=!1},generateInitials(e,t){return e[0]+t[0]},logout(e){e.preventDefault(),kP().then(()=>{console.log("User is logged out!"),this.$router.push("/login")})}},mounted(){const e=Xn();Qs(e,async t=>{t&&(this.user=t,await this.fetchUserData())})}},rg=e=>(Yn("data-v-30f9d6bb"),e=e(),Qn(),e),zj={key:0,class:"navbar"},jj=rg(()=>I("img",{src:PP,class:"tt_logo",alt:"TripTally"},null,-1)),qj=rg(()=>I("img",{src:Hj,class:"home_logo",alt:"Home"},null,-1)),Kj={class:"username"},Gj={key:0,class:"profile"},Yj={class:"profile-placeholder"},Qj=rg(()=>I("i",{class:"fa fa-caret-down"},null,-1)),Xj={key:1,class:"dropdown-menu"},Jj={key:2,class:"logout-popup"},Zj={class:"logout-popup-content"},tq=rg(()=>I("p",{class:"logoutquestion"},"Are you sure you want to log out?",-1)),eq={key:1};function nq(e,t,n,s,i,r){const o=ze("router-link"),a=ze("NavBar");return i.user?(W(),j("div",zj,[Et(o,{to:"/homepage"},{default:vs(()=>[jj]),_:1}),I("div",{class:"navbar-item",onMouseover:t[3]||(t[3]=c=>i.isDropdownOpen=!0),onMouseleave:t[4]||(t[4]=c=>i.isDropdownOpen=!1)},[Et(o,{to:"/homepage"},{default:vs(()=>[qj]),_:1}),I("div",Kj,ot(i.Username),1),i.Username?(W(),j("div",Gj,[I("div",Yj,ot(r.generateInitials(i.FirstName,i.LastName)),1)])):Xt("",!0),Qj,i.isDropdownOpen?(W(),j("div",Xj,[Et(o,{to:"/profilepage",class:"dropdown-item"},{default:vs(()=>[bs("Profile")]),_:1}),I("div",{class:"dropdown-item",onClick:t[0]||(t[0]=c=>i.showLogoutPopup=!0)},"Log out")])):Xt("",!0),i.showLogoutPopup?(W(),j("div",Jj,[I("div",Zj,[tq,I("button",{class:"logoutbutton",onClick:t[1]||(t[1]=(...c)=>r.logout&&r.logout(...c))},"Log out"),I("button",{class:"cancelbutton",onClick:t[2]||(t[2]=c=>i.showLogoutPopup=!1)},"Cancel")])])):Xt("",!0)],32)])):(W(),j("div",eq,[Et(a)]))}const sq=en(Wj,[["render",nq],["__scopeId","data-v-30f9d6bb"]]),iq={name:"App",components:{NavBar:DP,TopNavBar:sq},data(){return{user:null,authChecked:!1}},computed:{shouldShowNavBar(){const e=["LoginPage","ForgotPassword","SignupPage","LandingPage"].includes(this.$route.name);return console.log(`Route name: ${this.$route.name}, Should show NavBar: ${e}`),e}},mounted(){const e=Xn();Qs(e,t=>{this.user=t,this.authChecked=!0})}},rq={id:"app"};function oq(e,t,n,s,i,r){const o=ze("NavBar"),a=ze("TopNavBar"),c=ze("router-view");return W(),j("div",rq,[r.shouldShowNavBar?(W(),na(o,{key:0})):i.user?(W(),na(a,{key:1})):Xt("",!0),Et(c)])}const aq=en(iq,[["render",oq]]);/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Ya=typeof document<"u";function lq(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ye=Object.assign;function u_(e,t){const n={};for(const s in t){const i=t[s];n[s]=hi(i)?i.map(e):e(i)}return n}const qc=()=>{},hi=Array.isArray,MP=/#/g,cq=/&/g,uq=/\//g,hq=/=/g,dq=/\?/g,NP=/\+/g,fq=/%5B/g,pq=/%5D/g,LP=/%5E/g,gq=/%60/g,UP=/%7B/g,mq=/%7C/g,FP=/%7D/g,_q=/%20/g;function Vb(e){return encodeURI(""+e).replace(mq,"|").replace(fq,"[").replace(pq,"]")}function yq(e){return Vb(e).replace(UP,"{").replace(FP,"}").replace(LP,"^")}function Ey(e){return Vb(e).replace(NP,"%2B").replace(_q,"+").replace(MP,"%23").replace(cq,"%26").replace(gq,"`").replace(UP,"{").replace(FP,"}").replace(LP,"^")}function vq(e){return Ey(e).replace(hq,"%3D")}function bq(e){return Vb(e).replace(MP,"%23").replace(dq,"%3F")}function wq(e){return e==null?"":bq(e).replace(uq,"%2F")}function Su(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Eq=/\/$/,Tq=e=>e.replace(Eq,"");function h_(e,t,n="/"){let s,i={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),i=e(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=Sq(s??t,n),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:Su(o)}}function Iq(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ZI(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Aq(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&El(t.matched[s],n.matched[i])&&VP(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function El(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function VP(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!xq(e[n],t[n]))return!1;return!0}function xq(e,t){return hi(e)?tA(e,t):hi(t)?tA(t,e):e===t}function tA(e,t){return hi(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Sq(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+s.slice(o).join("/")}var Ru;(function(e){e.pop="pop",e.push="push"})(Ru||(Ru={}));var Kc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Kc||(Kc={}));function Rq(e){if(!e)if(Ya){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Tq(e)}const Cq=/^[^#]+#/;function Pq(e,t){return e.replace(Cq,"#")+t}function Dq(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const og=()=>({left:window.scrollX,top:window.scrollY});function kq(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Dq(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function eA(e,t){return(history.state?history.state.position-t:-1)+e}const Ty=new Map;function Oq(e,t){Ty.set(e,t)}function Mq(e){const t=Ty.get(e);return Ty.delete(e),t}let Nq=()=>location.protocol+"//"+location.host;function BP(e,t){const{pathname:n,search:s,hash:i}=t,r=e.indexOf("#");if(r>-1){let a=i.includes(e.slice(r))?e.slice(r).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),ZI(c,"")}return ZI(n,e)+s+i}function Lq(e,t,n,s){let i=[],r=[],o=null;const a=({state:g})=>{const _=BP(e,location),y=n.value,b=t.value;let w=0;if(g){if(n.value=_,t.value=g,o&&o===y){o=null;return}w=b?g.position-b.position:0}else s(_);i.forEach(A=>{A(n.value,y,{delta:w,type:Ru.pop,direction:w?w>0?Kc.forward:Kc.back:Kc.unknown})})};function c(){o=n.value}function h(g){i.push(g);const _=()=>{const y=i.indexOf(g);y>-1&&i.splice(y,1)};return r.push(_),_}function d(){const{history:g}=window;g.state&&g.replaceState(ye({},g.state,{scroll:og()}),"")}function p(){for(const g of r)g();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function nA(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?og():null}}function Uq(e){const{history:t,location:n}=window,s={value:BP(e,n)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,d){const p=e.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:Nq()+e+c;try{t[d?"replaceState":"pushState"](h,"",g),i.value=h}catch(_){console.error(_),n[d?"replace":"assign"](g)}}function o(c,h){const d=ye({},t.state,nA(i.value.back,c,i.value.forward,!0),h,{position:i.value.position});r(c,d,!0),s.value=c}function a(c,h){const d=ye({},i.value,t.state,{forward:c,scroll:og()});r(d.current,d,!0);const p=ye({},nA(s.value,c,null),{position:d.position+1},h);r(c,p,!1),s.value=c}return{location:s,state:i,push:a,replace:o}}function Fq(e){e=Rq(e);const t=Uq(e),n=Lq(e,t.state,t.location,t.replace);function s(r,o=!0){o||n.pauseListeners(),history.go(r)}const i=ye({location:"",base:e,go:s,createHref:Pq.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Vq(e){return typeof e=="string"||e&&typeof e=="object"}function $P(e){return typeof e=="string"||typeof e=="symbol"}const Or={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},HP=Symbol("");var sA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(sA||(sA={}));function Tl(e,t){return ye(new Error,{type:e,[HP]:!0},t)}function Zi(e,t){return e instanceof Error&&HP in e&&(t==null||!!(e.type&t))}const iA="[^/]+?",Bq={sensitive:!1,strict:!1,start:!0,end:!0},$q=/[.+*?^${}()[\]/\\]/g;function Hq(e,t){const n=ye({},Bq,t),s=[];let i=n.start?"^":"";const r=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let p=0;p<h.length;p++){const g=h[p];let _=40+(n.sensitive?.25:0);if(g.type===0)p||(i+="/"),i+=g.value.replace($q,"\\$&"),_+=40;else if(g.type===1){const{value:y,repeatable:b,optional:w,regexp:A}=g;r.push({name:y,repeatable:b,optional:w});const R=A||iA;if(R!==iA){_+=10;try{new RegExp(`(${R})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${y}" (${R}): `+O.message)}}let D=b?`((?:${R})(?:/(?:${R}))*)`:`(${R})`;p||(D=w&&h.length<2?`(?:/${D})`:"/"+D),w&&(D+="?"),i+=D,_+=20,w&&(_+=-8),b&&(_+=-20),R===".*"&&(_+=-50)}d.push(_)}s.push(d)}if(n.strict&&n.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(h){const d=h.match(o),p={};if(!d)return null;for(let g=1;g<d.length;g++){const _=d[g]||"",y=r[g-1];p[y.name]=_&&y.repeatable?_.split("/"):_}return p}function c(h){let d="",p=!1;for(const g of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const _ of g)if(_.type===0)d+=_.value;else if(_.type===1){const{value:y,repeatable:b,optional:w}=_,A=y in h?h[y]:"";if(hi(A)&&!b)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const R=hi(A)?A.join("/"):A;if(!R)if(w)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${y}"`);d+=R}}return d||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function Wq(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function zq(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const r=Wq(s[n],i[n]);if(r)return r;n++}if(Math.abs(i.length-s.length)===1){if(rA(s))return 1;if(rA(i))return-1}return i.length-s.length}function rA(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const jq={type:0,value:""},qq=/[a-zA-Z0-9_]/;function Kq(e){if(!e)return[[]];if(e==="/")return[[jq]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(_){throw new Error(`ERR (${n})/"${h}": ${_}`)}let n=0,s=n;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,c,h="",d="";function p(){h&&(n===0?r.push({type:0,value:h}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;a<e.length;){if(c=e[a++],c==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:c==="/"?(h&&p(),o()):c===":"?(p(),n=1):g();break;case 4:g(),n=s;break;case 1:c==="("?n=2:qq.test(c)?g():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),o(),i}function Gq(e,t,n){const s=Hq(Kq(e.path),n),i=ye(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Yq(e,t){const n=[],s=new Map;t=lA({strict:!1,end:!0,sensitive:!1},t);function i(d){return s.get(d)}function r(d,p,g){const _=!g,y=Qq(d);y.aliasOf=g&&g.record;const b=lA(t,d),w=[y];if("alias"in d){const D=typeof d.alias=="string"?[d.alias]:d.alias;for(const O of D)w.push(ye({},y,{components:g?g.record.components:y.components,path:O,aliasOf:g?g.record:y}))}let A,R;for(const D of w){const{path:O}=D;if(p&&O[0]!=="/"){const N=p.record.path,L=N[N.length-1]==="/"?"":"/";D.path=p.record.path+(O&&L+O)}if(A=Gq(D,p,b),g?g.alias.push(A):(R=R||A,R!==A&&R.alias.push(A),_&&d.name&&!aA(A)&&o(d.name)),y.children){const N=y.children;for(let L=0;L<N.length;L++)r(N[L],A,g&&g.children[L])}g=g||A,(A.record.components&&Object.keys(A.record.components).length||A.record.name||A.record.redirect)&&c(A)}return R?()=>{o(R)}:qc}function o(d){if($P(d)){const p=s.get(d);p&&(s.delete(d),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(d);p>-1&&(n.splice(p,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return n}function c(d){let p=0;for(;p<n.length&&zq(d,n[p])>=0&&(d.record.path!==n[p].record.path||!WP(d,n[p]));)p++;n.splice(p,0,d),d.record.name&&!aA(d)&&s.set(d.record.name,d)}function h(d,p){let g,_={},y,b;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw Tl(1,{location:d});b=g.record.name,_=ye(oA(p.params,g.keys.filter(R=>!R.optional).concat(g.parent?g.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),d.params&&oA(d.params,g.keys.map(R=>R.name))),y=g.stringify(_)}else if(d.path!=null)y=d.path,g=n.find(R=>R.re.test(y)),g&&(_=g.parse(y),b=g.record.name);else{if(g=p.name?s.get(p.name):n.find(R=>R.re.test(p.path)),!g)throw Tl(1,{location:d,currentLocation:p});b=g.record.name,_=ye({},p.params,d.params),y=g.stringify(_)}const w=[];let A=g;for(;A;)w.unshift(A.record),A=A.parent;return{name:b,path:y,params:_,matched:w,meta:Jq(w)}}return e.forEach(d=>r(d)),{addRoute:r,resolve:h,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function oA(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function Qq(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Xq(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Xq(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function aA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Jq(e){return e.reduce((t,n)=>ye(t,n.meta),{})}function lA(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}function WP(e,t){return t.children.some(n=>n===e||WP(e,n))}function Zq(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(NP," "),o=r.indexOf("="),a=Su(o<0?r:r.slice(0,o)),c=o<0?null:Su(r.slice(o+1));if(a in t){let h=t[a];hi(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function cA(e){let t="";for(let n in e){const s=e[n];if(n=vq(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(hi(s)?s.map(r=>r&&Ey(r)):[s&&Ey(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function t8(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=hi(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const e8=Symbol(""),uA=Symbol(""),ag=Symbol(""),zP=Symbol(""),Iy=Symbol("");function hc(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Vr(e,t,n,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const h=g=>{g===!1?c(Tl(4,{from:n,to:t})):g instanceof Error?c(g):Vq(g)?c(Tl(2,{from:t,to:g})):(o&&s.enterCallbacks[i]===o&&typeof g=="function"&&o.push(g),a())},d=r(()=>e.call(s&&s.instances[i],t,n,h));let p=Promise.resolve(d);e.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function d_(e,t,n,s,i=r=>r()){const r=[];for(const o of e)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(n8(c)){const d=(c.__vccOpts||c)[t];d&&r.push(Vr(d,n,s,o,a,i))}else{let h=c();r.push(()=>h.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const p=lq(d)?d.default:d;o.components[a]=p;const _=(p.__vccOpts||p)[t];return _&&Vr(_,n,s,o,a,i)()}))}}return r}function n8(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function hA(e){const t=Si(ag),n=Si(zP),s=Se(()=>t.resolve(Ei(e.to))),i=Se(()=>{const{matched:c}=s.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(El.bind(null,d));if(g>-1)return g;const _=dA(c[h-2]);return h>1&&dA(d)===_&&p[p.length-1].path!==_?p.findIndex(El.bind(null,c[h-2])):g}),r=Se(()=>i.value>-1&&o8(n.params,s.value.params)),o=Se(()=>i.value>-1&&i.value===n.matched.length-1&&VP(n.params,s.value.params));function a(c={}){return r8(c)?t[Ei(e.replace)?"replace":"push"](Ei(e.to)).catch(qc):Promise.resolve()}return{route:s,href:Se(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}const s8=uo({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:hA,setup(e,{slots:t}){const n=Vi(hA(e)),{options:s}=Si(ag),i=Se(()=>({[fA(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[fA(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&t.default(n);return e.custom?r:ir("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}}),i8=s8;function r8(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function o8(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!hi(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function dA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const fA=(e,t,n)=>e??t??n,a8=uo({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=Si(Iy),i=Se(()=>e.route||s.value),r=Si(uA,0),o=Se(()=>{let h=Ei(r);const{matched:d}=i.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),a=Se(()=>i.value.matched[o.value]);Wd(uA,Se(()=>o.value+1)),Wd(e8,a),Wd(Iy,i);const c=We();return Mc(()=>[c.value,a.value,e.name],([h,d,p],[g,_,y])=>{d&&(d.instances[p]=h,_&&_!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=_.leaveGuards),d.updateGuards.size||(d.updateGuards=_.updateGuards))),h&&d&&(!_||!El(d,_)||!g)&&(d.enterCallbacks[p]||[]).forEach(b=>b(h))},{flush:"post"}),()=>{const h=i.value,d=e.name,p=a.value,g=p&&p.components[d];if(!g)return pA(n.default,{Component:g,route:h});const _=p.props[d],y=_?_===!0?h.params:typeof _=="function"?_(h):_:null,w=ir(g,ye({},y,t,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return pA(n.default,{Component:w,route:h})||w}}});function pA(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const l8=a8;function c8(e){const t=Yq(e.routes,e),n=e.parseQuery||Zq,s=e.stringifyQuery||cA,i=e.history,r=hc(),o=hc(),a=hc(),c=av(Or);let h=Or;Ya&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=u_.bind(null,G=>""+G),p=u_.bind(null,wq),g=u_.bind(null,Su);function _(G,dt){let rt,_t;return $P(G)?(rt=t.getRecordMatcher(G),_t=dt):_t=G,t.addRoute(_t,rt)}function y(G){const dt=t.getRecordMatcher(G);dt&&t.removeRoute(dt)}function b(){return t.getRoutes().map(G=>G.record)}function w(G){return!!t.getRecordMatcher(G)}function A(G,dt){if(dt=ye({},dt||c.value),typeof G=="string"){const C=h_(n,G,dt.path),U=t.resolve({path:C.path},dt),Q=i.createHref(C.fullPath);return ye(C,U,{params:g(U.params),hash:Su(C.hash),redirectedFrom:void 0,href:Q})}let rt;if(G.path!=null)rt=ye({},G,{path:h_(n,G.path,dt.path).path});else{const C=ye({},G.params);for(const U in C)C[U]==null&&delete C[U];rt=ye({},G,{params:p(C)}),dt.params=p(dt.params)}const _t=t.resolve(rt,dt),te=G.hash||"";_t.params=d(g(_t.params));const me=Iq(s,ye({},G,{hash:yq(te),path:_t.path})),x=i.createHref(me);return ye({fullPath:me,hash:te,query:s===cA?t8(G.query):G.query||{}},_t,{redirectedFrom:void 0,href:x})}function R(G){return typeof G=="string"?h_(n,G,c.value.path):ye({},G)}function D(G,dt){if(h!==G)return Tl(8,{from:dt,to:G})}function O(G){return V(G)}function N(G){return O(ye(R(G),{replace:!0}))}function L(G){const dt=G.matched[G.matched.length-1];if(dt&&dt.redirect){const{redirect:rt}=dt;let _t=typeof rt=="function"?rt(G):rt;return typeof _t=="string"&&(_t=_t.includes("?")||_t.includes("#")?_t=R(_t):{path:_t},_t.params={}),ye({query:G.query,hash:G.hash,params:_t.path!=null?{}:G.params},_t)}}function V(G,dt){const rt=h=A(G),_t=c.value,te=G.state,me=G.force,x=G.replace===!0,C=L(rt);if(C)return V(ye(R(C),{state:typeof C=="object"?ye({},te,C.state):te,force:me,replace:x}),dt||rt);const U=rt;U.redirectedFrom=dt;let Q;return!me&&Aq(s,_t,rt)&&(Q=Tl(16,{to:U,from:_t}),Re(_t,_t,!0,!1)),(Q?Promise.resolve(Q):bt(U,_t)).catch($=>Zi($)?Zi($,2)?$:on($):xt($,U,_t)).then($=>{if($){if(Zi($,2))return V(ye({replace:x},R($.to),{state:typeof $.to=="object"?ye({},te,$.to.state):te,force:me}),dt||U)}else $=kt(U,_t,!0,x,te);return At(U,_t,$),$})}function B(G,dt){const rt=D(G,dt);return rt?Promise.reject(rt):Promise.resolve()}function tt(G){const dt=Nn.values().next().value;return dt&&typeof dt.runWithContext=="function"?dt.runWithContext(G):G()}function bt(G,dt){let rt;const[_t,te,me]=u8(G,dt);rt=d_(_t.reverse(),"beforeRouteLeave",G,dt);for(const C of _t)C.leaveGuards.forEach(U=>{rt.push(Vr(U,G,dt))});const x=B.bind(null,G,dt);return rt.push(x),ge(rt).then(()=>{rt=[];for(const C of r.list())rt.push(Vr(C,G,dt));return rt.push(x),ge(rt)}).then(()=>{rt=d_(te,"beforeRouteUpdate",G,dt);for(const C of te)C.updateGuards.forEach(U=>{rt.push(Vr(U,G,dt))});return rt.push(x),ge(rt)}).then(()=>{rt=[];for(const C of me)if(C.beforeEnter)if(hi(C.beforeEnter))for(const U of C.beforeEnter)rt.push(Vr(U,G,dt));else rt.push(Vr(C.beforeEnter,G,dt));return rt.push(x),ge(rt)}).then(()=>(G.matched.forEach(C=>C.enterCallbacks={}),rt=d_(me,"beforeRouteEnter",G,dt,tt),rt.push(x),ge(rt))).then(()=>{rt=[];for(const C of o.list())rt.push(Vr(C,G,dt));return rt.push(x),ge(rt)}).catch(C=>Zi(C,8)?C:Promise.reject(C))}function At(G,dt,rt){a.list().forEach(_t=>tt(()=>_t(G,dt,rt)))}function kt(G,dt,rt,_t,te){const me=D(G,dt);if(me)return me;const x=dt===Or,C=Ya?history.state:{};rt&&(_t||x?i.replace(G.fullPath,ye({scroll:x&&C&&C.scroll},te)):i.push(G.fullPath,te)),c.value=G,Re(G,dt,rt,x),on()}let de;function qe(){de||(de=i.listen((G,dt,rt)=>{if(!Tn.listening)return;const _t=A(G),te=L(_t);if(te){V(ye(te,{replace:!0}),_t).catch(qc);return}h=_t;const me=c.value;Ya&&Oq(eA(me.fullPath,rt.delta),og()),bt(_t,me).catch(x=>Zi(x,12)?x:Zi(x,2)?(V(x.to,_t).then(C=>{Zi(C,20)&&!rt.delta&&rt.type===Ru.pop&&i.go(-1,!1)}).catch(qc),Promise.reject()):(rt.delta&&i.go(-rt.delta,!1),xt(x,_t,me))).then(x=>{x=x||kt(_t,me,!1),x&&(rt.delta&&!Zi(x,8)?i.go(-rt.delta,!1):rt.type===Ru.pop&&Zi(x,20)&&i.go(-1,!1)),At(_t,me,x)}).catch(qc)}))}let Gt=hc(),Nt=hc(),wt;function xt(G,dt,rt){on(G);const _t=Nt.list();return _t.length?_t.forEach(te=>te(G,dt,rt)):console.error(G),Promise.reject(G)}function Ee(){return wt&&c.value!==Or?Promise.resolve():new Promise((G,dt)=>{Gt.add([G,dt])})}function on(G){return wt||(wt=!G,qe(),Gt.list().forEach(([dt,rt])=>G?rt(G):dt()),Gt.reset()),G}function Re(G,dt,rt,_t){const{scrollBehavior:te}=e;if(!Ya||!te)return Promise.resolve();const me=!rt&&Mq(eA(G.fullPath,0))||(_t||!rt)&&history.state&&history.state.scroll||null;return kl().then(()=>te(G,dt,me)).then(x=>x&&kq(x)).catch(x=>xt(x,G,dt))}const $e=G=>i.go(G);let ls;const Nn=new Set,Tn={currentRoute:c,listening:!0,addRoute:_,removeRoute:y,hasRoute:w,getRoutes:b,resolve:A,options:e,push:O,replace:N,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:Nt.add,isReady:Ee,install(G){const dt=this;G.component("RouterLink",i8),G.component("RouterView",l8),G.config.globalProperties.$router=dt,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>Ei(c)}),Ya&&!ls&&c.value===Or&&(ls=!0,O(i.location).catch(te=>{}));const rt={};for(const te in Or)Object.defineProperty(rt,te,{get:()=>c.value[te],enumerable:!0});G.provide(ag,dt),G.provide(zP,mx(rt)),G.provide(Iy,c);const _t=G.unmount;Nn.add(G),G.unmount=function(){Nn.delete(G),Nn.size<1&&(h=Or,de&&de(),de=null,c.value=Or,ls=!1,wt=!1),_t()}}};function ge(G){return G.reduce((dt,rt)=>dt.then(()=>tt(rt)),Promise.resolve())}return Tn}function u8(e,t){const n=[],s=[],i=[],r=Math.max(t.matched.length,e.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(e.matched.find(h=>El(h,a))?s.push(a):n.push(a));const c=e.matched[o];c&&(t.matched.find(h=>El(h,c))||i.push(c))}return[n,s,i]}function h8(){return Si(ag)}const d8={name:"LoginPage",data(){return{email:"",password:"",error:""}},methods:{async login(){const e=Xn();try{await n3(e,this.email,this.password),console.log("Login successful"),this.$router.push({path:"/homepage"})}catch(t){console.error("Login failed:",t),this.error=t.message,alert("Login failed. Please check your email and password.")}}}},jP=e=>(Yn("data-v-6831136f"),e=e(),Qn(),e),f8={class:"container"},p8={class:"login-card"},g8=jP(()=>I("h1",null,"Log In",-1)),m8=jP(()=>I("br",null,null,-1));function _8(e,t,n,s,i,r){const o=ze("router-link");return W(),j("div",f8,[I("div",p8,[g8,I("form",{onSubmit:t[3]||(t[3]=Wu((...a)=>r.login&&r.login(...a),["prevent"]))},[Ae(I("input",{type:"email",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=a=>i.email=a)},null,512),[[gn,i.email]]),Ae(I("input",{type:"password",placeholder:"Password","onUpdate:modelValue":t[1]||(t[1]=a=>i.password=a)},null,512),[[gn,i.password]]),m8,Et(o,{to:"/forgot-password",class:"forgot-password-link"},{default:vs(()=>[bs("Forgot Password?")]),_:1}),I("button",{type:"button",onClick:t[2]||(t[2]=(...a)=>r.login&&r.login(...a))},"Let's Tally!")],32)])])}const y8=en(d8,[["render",_8],["__scopeId","data-v-6831136f"]]),v8={name:"ForgotPassword",data(){return{email:""}},methods:{submitPasswordReset(){t3(fa,this.email).then(()=>{alert("A password reset email has been sent. Please check your inbox."),this.email=""}).catch(e=>{console.error("Error sending password reset email:",e),alert(`Failed to send password reset email. Please try again. Error: ${e.message}`)})}}},b8={class:"pw-card"},w8=I("h1",null,"Password Reset",-1),E8=I("text",null,"Enter the email address associated with your account and click the button below to receive an email to reset this accounts password.",-1),T8=I("br",null,null,-1),I8=I("button",{type:"submit"},"Reset My Password",-1);function A8(e,t,n,s,i,r){const o=ze("router-link");return W(),j("div",b8,[w8,E8,I("form",{onSubmit:t[1]||(t[1]=Wu((...a)=>r.submitPasswordReset&&r.submitPasswordReset(...a),["prevent"]))},[Ae(I("input",{type:"email",placeholder:"Enter Email","onUpdate:modelValue":t[0]||(t[0]=a=>i.email=a)},null,512),[[gn,i.email]]),T8,I8,Et(o,{to:"/login",class:"go-login-link"},{default:vs(()=>[bs(" Back to Login.")]),_:1})],32)])}const x8=en(v8,[["render",A8]]);var dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zf={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */zf.exports;(function(e,t){(function(){var n,s="4.17.21",i=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",p=1,g=2,_=4,y=1,b=2,w=1,A=2,R=4,D=8,O=16,N=32,L=64,V=128,B=256,tt=512,bt=30,At="...",kt=800,de=16,qe=1,Gt=2,Nt=3,wt=1/0,xt=9007199254740991,Ee=17976931348623157e292,on=NaN,Re=4294967295,$e=Re-1,ls=Re>>>1,Nn=[["ary",V],["bind",w],["bindKey",A],["curry",D],["curryRight",O],["flip",tt],["partial",N],["partialRight",L],["rearg",B]],Tn="[object Arguments]",ge="[object Array]",G="[object AsyncFunction]",dt="[object Boolean]",rt="[object Date]",_t="[object DOMException]",te="[object Error]",me="[object Function]",x="[object GeneratorFunction]",C="[object Map]",U="[object Number]",Q="[object Null]",$="[object Object]",st="[object Promise]",ht="[object Proxy]",et="[object RegExp]",nt="[object Set]",Z="[object String]",ft="[object Symbol]",It="[object Undefined]",yt="[object WeakMap]",Ot="[object WeakSet]",Ht="[object ArrayBuffer]",ee="[object DataView]",Te="[object Float32Array]",Ke="[object Float64Array]",Jn="[object Int8Array]",di="[object Int16Array]",xa="[object Int32Array]",Wi="[object Uint8Array]",Sa="[object Uint8ClampedArray]",In="[object Uint16Array]",cs="[object Uint32Array]",yh=/\b__p \+= '';/g,Ck=/\b(__p \+=) '' \+/g,Pk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,f0=/&(?:amp|lt|gt|quot|#39);/g,p0=/[&<>"']/g,Dk=RegExp(f0.source),kk=RegExp(p0.source),Ok=/<%-([\s\S]+?)%>/g,Mk=/<%([\s\S]+?)%>/g,g0=/<%=([\s\S]+?)%>/g,Nk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lk=/^\w*$/,Uk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eg=/[\\^$.*+?()[\]{}|]/g,Fk=RegExp(Eg.source),Tg=/^\s+/,Vk=/\s/,Bk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$k=/\{\n\/\* \[wrapped with (.+)\] \*/,Hk=/,? & /,Wk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zk=/[()=,{}\[\]\/\s]/,jk=/\\(\\)?/g,qk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,m0=/\w*$/,Kk=/^[-+]0x[0-9a-f]+$/i,Gk=/^0b[01]+$/i,Yk=/^\[object .+?Constructor\]$/,Qk=/^0o[0-7]+$/i,Xk=/^(?:0|[1-9]\d*)$/,Jk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vh=/($^)/,Zk=/['\n\r\u2028\u2029\\]/g,bh="\\ud800-\\udfff",tO="\\u0300-\\u036f",eO="\\ufe20-\\ufe2f",nO="\\u20d0-\\u20ff",_0=tO+eO+nO,y0="\\u2700-\\u27bf",v0="a-z\\xdf-\\xf6\\xf8-\\xff",sO="\\xac\\xb1\\xd7\\xf7",iO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rO="\\u2000-\\u206f",oO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",b0="A-Z\\xc0-\\xd6\\xd8-\\xde",w0="\\ufe0e\\ufe0f",E0=sO+iO+rO+oO,Ig="[']",aO="["+bh+"]",T0="["+E0+"]",wh="["+_0+"]",I0="\\d+",lO="["+y0+"]",A0="["+v0+"]",x0="[^"+bh+E0+I0+y0+v0+b0+"]",Ag="\\ud83c[\\udffb-\\udfff]",cO="(?:"+wh+"|"+Ag+")",S0="[^"+bh+"]",xg="(?:\\ud83c[\\udde6-\\uddff]){2}",Sg="[\\ud800-\\udbff][\\udc00-\\udfff]",Ra="["+b0+"]",R0="\\u200d",C0="(?:"+A0+"|"+x0+")",uO="(?:"+Ra+"|"+x0+")",P0="(?:"+Ig+"(?:d|ll|m|re|s|t|ve))?",D0="(?:"+Ig+"(?:D|LL|M|RE|S|T|VE))?",k0=cO+"?",O0="["+w0+"]?",hO="(?:"+R0+"(?:"+[S0,xg,Sg].join("|")+")"+O0+k0+")*",dO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",M0=O0+k0+hO,pO="(?:"+[lO,xg,Sg].join("|")+")"+M0,gO="(?:"+[S0+wh+"?",wh,xg,Sg,aO].join("|")+")",mO=RegExp(Ig,"g"),_O=RegExp(wh,"g"),Rg=RegExp(Ag+"(?="+Ag+")|"+gO+M0,"g"),yO=RegExp([Ra+"?"+A0+"+"+P0+"(?="+[T0,Ra,"$"].join("|")+")",uO+"+"+D0+"(?="+[T0,Ra+C0,"$"].join("|")+")",Ra+"?"+C0+"+"+P0,Ra+"+"+D0,fO,dO,I0,pO].join("|"),"g"),vO=RegExp("["+R0+bh+_0+w0+"]"),bO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],EO=-1,Oe={};Oe[Te]=Oe[Ke]=Oe[Jn]=Oe[di]=Oe[xa]=Oe[Wi]=Oe[Sa]=Oe[In]=Oe[cs]=!0,Oe[Tn]=Oe[ge]=Oe[Ht]=Oe[dt]=Oe[ee]=Oe[rt]=Oe[te]=Oe[me]=Oe[C]=Oe[U]=Oe[$]=Oe[et]=Oe[nt]=Oe[Z]=Oe[yt]=!1;var Ce={};Ce[Tn]=Ce[ge]=Ce[Ht]=Ce[ee]=Ce[dt]=Ce[rt]=Ce[Te]=Ce[Ke]=Ce[Jn]=Ce[di]=Ce[xa]=Ce[C]=Ce[U]=Ce[$]=Ce[et]=Ce[nt]=Ce[Z]=Ce[ft]=Ce[Wi]=Ce[Sa]=Ce[In]=Ce[cs]=!0,Ce[te]=Ce[me]=Ce[yt]=!1;var TO={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},IO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},AO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},xO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},SO=parseFloat,RO=parseInt,N0=typeof dc=="object"&&dc&&dc.Object===Object&&dc,CO=typeof self=="object"&&self&&self.Object===Object&&self,An=N0||CO||Function("return this")(),Cg=t&&!t.nodeType&&t,wo=Cg&&!0&&e&&!e.nodeType&&e,L0=wo&&wo.exports===Cg,Pg=L0&&N0.process,Us=function(){try{var k=wo&&wo.require&&wo.require("util").types;return k||Pg&&Pg.binding&&Pg.binding("util")}catch{}}(),U0=Us&&Us.isArrayBuffer,F0=Us&&Us.isDate,V0=Us&&Us.isMap,B0=Us&&Us.isRegExp,$0=Us&&Us.isSet,H0=Us&&Us.isTypedArray;function Ts(k,H,F){switch(F.length){case 0:return k.call(H);case 1:return k.call(H,F[0]);case 2:return k.call(H,F[0],F[1]);case 3:return k.call(H,F[0],F[1],F[2])}return k.apply(H,F)}function PO(k,H,F,gt){for(var Ft=-1,le=k==null?0:k.length;++Ft<le;){var fn=k[Ft];H(gt,fn,F(fn),k)}return gt}function Fs(k,H){for(var F=-1,gt=k==null?0:k.length;++F<gt&&H(k[F],F,k)!==!1;);return k}function DO(k,H){for(var F=k==null?0:k.length;F--&&H(k[F],F,k)!==!1;);return k}function W0(k,H){for(var F=-1,gt=k==null?0:k.length;++F<gt;)if(!H(k[F],F,k))return!1;return!0}function Er(k,H){for(var F=-1,gt=k==null?0:k.length,Ft=0,le=[];++F<gt;){var fn=k[F];H(fn,F,k)&&(le[Ft++]=fn)}return le}function Eh(k,H){var F=k==null?0:k.length;return!!F&&Ca(k,H,0)>-1}function Dg(k,H,F){for(var gt=-1,Ft=k==null?0:k.length;++gt<Ft;)if(F(H,k[gt]))return!0;return!1}function Be(k,H){for(var F=-1,gt=k==null?0:k.length,Ft=Array(gt);++F<gt;)Ft[F]=H(k[F],F,k);return Ft}function Tr(k,H){for(var F=-1,gt=H.length,Ft=k.length;++F<gt;)k[Ft+F]=H[F];return k}function kg(k,H,F,gt){var Ft=-1,le=k==null?0:k.length;for(gt&&le&&(F=k[++Ft]);++Ft<le;)F=H(F,k[Ft],Ft,k);return F}function kO(k,H,F,gt){var Ft=k==null?0:k.length;for(gt&&Ft&&(F=k[--Ft]);Ft--;)F=H(F,k[Ft],Ft,k);return F}function Og(k,H){for(var F=-1,gt=k==null?0:k.length;++F<gt;)if(H(k[F],F,k))return!0;return!1}var OO=Mg("length");function MO(k){return k.split("")}function NO(k){return k.match(Wk)||[]}function z0(k,H,F){var gt;return F(k,function(Ft,le,fn){if(H(Ft,le,fn))return gt=le,!1}),gt}function Th(k,H,F,gt){for(var Ft=k.length,le=F+(gt?1:-1);gt?le--:++le<Ft;)if(H(k[le],le,k))return le;return-1}function Ca(k,H,F){return H===H?KO(k,H,F):Th(k,j0,F)}function LO(k,H,F,gt){for(var Ft=F-1,le=k.length;++Ft<le;)if(gt(k[Ft],H))return Ft;return-1}function j0(k){return k!==k}function q0(k,H){var F=k==null?0:k.length;return F?Lg(k,H)/F:on}function Mg(k){return function(H){return H==null?n:H[k]}}function Ng(k){return function(H){return k==null?n:k[H]}}function K0(k,H,F,gt,Ft){return Ft(k,function(le,fn,Ie){F=gt?(gt=!1,le):H(F,le,fn,Ie)}),F}function UO(k,H){var F=k.length;for(k.sort(H);F--;)k[F]=k[F].value;return k}function Lg(k,H){for(var F,gt=-1,Ft=k.length;++gt<Ft;){var le=H(k[gt]);le!==n&&(F=F===n?le:F+le)}return F}function Ug(k,H){for(var F=-1,gt=Array(k);++F<k;)gt[F]=H(F);return gt}function FO(k,H){return Be(H,function(F){return[F,k[F]]})}function G0(k){return k&&k.slice(0,J0(k)+1).replace(Tg,"")}function Is(k){return function(H){return k(H)}}function Fg(k,H){return Be(H,function(F){return k[F]})}function zl(k,H){return k.has(H)}function Y0(k,H){for(var F=-1,gt=k.length;++F<gt&&Ca(H,k[F],0)>-1;);return F}function Q0(k,H){for(var F=k.length;F--&&Ca(H,k[F],0)>-1;);return F}function VO(k,H){for(var F=k.length,gt=0;F--;)k[F]===H&&++gt;return gt}var BO=Ng(TO),$O=Ng(IO);function HO(k){return"\\"+xO[k]}function WO(k,H){return k==null?n:k[H]}function Pa(k){return vO.test(k)}function zO(k){return bO.test(k)}function jO(k){for(var H,F=[];!(H=k.next()).done;)F.push(H.value);return F}function Vg(k){var H=-1,F=Array(k.size);return k.forEach(function(gt,Ft){F[++H]=[Ft,gt]}),F}function X0(k,H){return function(F){return k(H(F))}}function Ir(k,H){for(var F=-1,gt=k.length,Ft=0,le=[];++F<gt;){var fn=k[F];(fn===H||fn===d)&&(k[F]=d,le[Ft++]=F)}return le}function Ih(k){var H=-1,F=Array(k.size);return k.forEach(function(gt){F[++H]=gt}),F}function qO(k){var H=-1,F=Array(k.size);return k.forEach(function(gt){F[++H]=[gt,gt]}),F}function KO(k,H,F){for(var gt=F-1,Ft=k.length;++gt<Ft;)if(k[gt]===H)return gt;return-1}function GO(k,H,F){for(var gt=F+1;gt--;)if(k[gt]===H)return gt;return gt}function Da(k){return Pa(k)?QO(k):OO(k)}function Xs(k){return Pa(k)?XO(k):MO(k)}function J0(k){for(var H=k.length;H--&&Vk.test(k.charAt(H)););return H}var YO=Ng(AO);function QO(k){for(var H=Rg.lastIndex=0;Rg.test(k);)++H;return H}function XO(k){return k.match(Rg)||[]}function JO(k){return k.match(yO)||[]}var ZO=function k(H){H=H==null?An:ka.defaults(An.Object(),H,ka.pick(An,wO));var F=H.Array,gt=H.Date,Ft=H.Error,le=H.Function,fn=H.Math,Ie=H.Object,Bg=H.RegExp,tM=H.String,Vs=H.TypeError,Ah=F.prototype,eM=le.prototype,Oa=Ie.prototype,xh=H["__core-js_shared__"],Sh=eM.toString,_e=Oa.hasOwnProperty,nM=0,Z0=function(){var l=/[^.]+$/.exec(xh&&xh.keys&&xh.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Rh=Oa.toString,sM=Sh.call(Ie),iM=An._,rM=Bg("^"+Sh.call(_e).replace(Eg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ch=L0?H.Buffer:n,Ar=H.Symbol,Ph=H.Uint8Array,tw=Ch?Ch.allocUnsafe:n,Dh=X0(Ie.getPrototypeOf,Ie),ew=Ie.create,nw=Oa.propertyIsEnumerable,kh=Ah.splice,sw=Ar?Ar.isConcatSpreadable:n,jl=Ar?Ar.iterator:n,Eo=Ar?Ar.toStringTag:n,Oh=function(){try{var l=So(Ie,"defineProperty");return l({},"",{}),l}catch{}}(),oM=H.clearTimeout!==An.clearTimeout&&H.clearTimeout,aM=gt&&gt.now!==An.Date.now&&gt.now,lM=H.setTimeout!==An.setTimeout&&H.setTimeout,Mh=fn.ceil,Nh=fn.floor,$g=Ie.getOwnPropertySymbols,cM=Ch?Ch.isBuffer:n,iw=H.isFinite,uM=Ah.join,hM=X0(Ie.keys,Ie),pn=fn.max,Ln=fn.min,dM=gt.now,fM=H.parseInt,rw=fn.random,pM=Ah.reverse,Hg=So(H,"DataView"),ql=So(H,"Map"),Wg=So(H,"Promise"),Ma=So(H,"Set"),Kl=So(H,"WeakMap"),Gl=So(Ie,"create"),Lh=Kl&&new Kl,Na={},gM=Ro(Hg),mM=Ro(ql),_M=Ro(Wg),yM=Ro(Ma),vM=Ro(Kl),Uh=Ar?Ar.prototype:n,Yl=Uh?Uh.valueOf:n,ow=Uh?Uh.toString:n;function E(l){if(Ge(l)&&!Bt(l)&&!(l instanceof Qt)){if(l instanceof Bs)return l;if(_e.call(l,"__wrapped__"))return aE(l)}return new Bs(l)}var La=function(){function l(){}return function(u){if(!He(u))return{};if(ew)return ew(u);l.prototype=u;var f=new l;return l.prototype=n,f}}();function Fh(){}function Bs(l,u){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=n}E.templateSettings={escape:Ok,evaluate:Mk,interpolate:g0,variable:"",imports:{_:E}},E.prototype=Fh.prototype,E.prototype.constructor=E,Bs.prototype=La(Fh.prototype),Bs.prototype.constructor=Bs;function Qt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function bM(){var l=new Qt(this.__wrapped__);return l.__actions__=us(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=us(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=us(this.__views__),l}function wM(){if(this.__filtered__){var l=new Qt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function EM(){var l=this.__wrapped__.value(),u=this.__dir__,f=Bt(l),m=u<0,v=f?l.length:0,T=MN(0,v,this.__views__),S=T.start,P=T.end,M=P-S,z=m?P:S-1,q=this.__iteratees__,J=q.length,at=0,vt=Ln(M,this.__takeCount__);if(!f||!m&&v==M&&vt==M)return Pw(l,this.__actions__);var Rt=[];t:for(;M--&&at<vt;){z+=u;for(var qt=-1,Ct=l[z];++qt<J;){var Yt=q[qt],ne=Yt.iteratee,Ss=Yt.type,es=ne(Ct);if(Ss==Gt)Ct=es;else if(!es){if(Ss==qe)continue t;break t}}Rt[at++]=Ct}return Rt}Qt.prototype=La(Fh.prototype),Qt.prototype.constructor=Qt;function To(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var m=l[u];this.set(m[0],m[1])}}function TM(){this.__data__=Gl?Gl(null):{},this.size=0}function IM(l){var u=this.has(l)&&delete this.__data__[l];return this.size-=u?1:0,u}function AM(l){var u=this.__data__;if(Gl){var f=u[l];return f===c?n:f}return _e.call(u,l)?u[l]:n}function xM(l){var u=this.__data__;return Gl?u[l]!==n:_e.call(u,l)}function SM(l,u){var f=this.__data__;return this.size+=this.has(l)?0:1,f[l]=Gl&&u===n?c:u,this}To.prototype.clear=TM,To.prototype.delete=IM,To.prototype.get=AM,To.prototype.has=xM,To.prototype.set=SM;function zi(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var m=l[u];this.set(m[0],m[1])}}function RM(){this.__data__=[],this.size=0}function CM(l){var u=this.__data__,f=Vh(u,l);if(f<0)return!1;var m=u.length-1;return f==m?u.pop():kh.call(u,f,1),--this.size,!0}function PM(l){var u=this.__data__,f=Vh(u,l);return f<0?n:u[f][1]}function DM(l){return Vh(this.__data__,l)>-1}function kM(l,u){var f=this.__data__,m=Vh(f,l);return m<0?(++this.size,f.push([l,u])):f[m][1]=u,this}zi.prototype.clear=RM,zi.prototype.delete=CM,zi.prototype.get=PM,zi.prototype.has=DM,zi.prototype.set=kM;function ji(l){var u=-1,f=l==null?0:l.length;for(this.clear();++u<f;){var m=l[u];this.set(m[0],m[1])}}function OM(){this.size=0,this.__data__={hash:new To,map:new(ql||zi),string:new To}}function MM(l){var u=Xh(this,l).delete(l);return this.size-=u?1:0,u}function NM(l){return Xh(this,l).get(l)}function LM(l){return Xh(this,l).has(l)}function UM(l,u){var f=Xh(this,l),m=f.size;return f.set(l,u),this.size+=f.size==m?0:1,this}ji.prototype.clear=OM,ji.prototype.delete=MM,ji.prototype.get=NM,ji.prototype.has=LM,ji.prototype.set=UM;function Io(l){var u=-1,f=l==null?0:l.length;for(this.__data__=new ji;++u<f;)this.add(l[u])}function FM(l){return this.__data__.set(l,c),this}function VM(l){return this.__data__.has(l)}Io.prototype.add=Io.prototype.push=FM,Io.prototype.has=VM;function Js(l){var u=this.__data__=new zi(l);this.size=u.size}function BM(){this.__data__=new zi,this.size=0}function $M(l){var u=this.__data__,f=u.delete(l);return this.size=u.size,f}function HM(l){return this.__data__.get(l)}function WM(l){return this.__data__.has(l)}function zM(l,u){var f=this.__data__;if(f instanceof zi){var m=f.__data__;if(!ql||m.length<i-1)return m.push([l,u]),this.size=++f.size,this;f=this.__data__=new ji(m)}return f.set(l,u),this.size=f.size,this}Js.prototype.clear=BM,Js.prototype.delete=$M,Js.prototype.get=HM,Js.prototype.has=WM,Js.prototype.set=zM;function aw(l,u){var f=Bt(l),m=!f&&Co(l),v=!f&&!m&&Pr(l),T=!f&&!m&&!v&&Ba(l),S=f||m||v||T,P=S?Ug(l.length,tM):[],M=P.length;for(var z in l)(u||_e.call(l,z))&&!(S&&(z=="length"||v&&(z=="offset"||z=="parent")||T&&(z=="buffer"||z=="byteLength"||z=="byteOffset")||Yi(z,M)))&&P.push(z);return P}function lw(l){var u=l.length;return u?l[tm(0,u-1)]:n}function jM(l,u){return Jh(us(l),Ao(u,0,l.length))}function qM(l){return Jh(us(l))}function zg(l,u,f){(f!==n&&!Zs(l[u],f)||f===n&&!(u in l))&&qi(l,u,f)}function Ql(l,u,f){var m=l[u];(!(_e.call(l,u)&&Zs(m,f))||f===n&&!(u in l))&&qi(l,u,f)}function Vh(l,u){for(var f=l.length;f--;)if(Zs(l[f][0],u))return f;return-1}function KM(l,u,f,m){return xr(l,function(v,T,S){u(m,v,f(v),S)}),m}function cw(l,u){return l&&pi(u,yn(u),l)}function GM(l,u){return l&&pi(u,ds(u),l)}function qi(l,u,f){u=="__proto__"&&Oh?Oh(l,u,{configurable:!0,enumerable:!0,value:f,writable:!0}):l[u]=f}function jg(l,u){for(var f=-1,m=u.length,v=F(m),T=l==null;++f<m;)v[f]=T?n:Am(l,u[f]);return v}function Ao(l,u,f){return l===l&&(f!==n&&(l=l<=f?l:f),u!==n&&(l=l>=u?l:u)),l}function $s(l,u,f,m,v,T){var S,P=u&p,M=u&g,z=u&_;if(f&&(S=v?f(l,m,v,T):f(l)),S!==n)return S;if(!He(l))return l;var q=Bt(l);if(q){if(S=LN(l),!P)return us(l,S)}else{var J=Un(l),at=J==me||J==x;if(Pr(l))return Ow(l,P);if(J==$||J==Tn||at&&!v){if(S=M||at?{}:Jw(l),!P)return M?AN(l,GM(S,l)):IN(l,cw(S,l))}else{if(!Ce[J])return v?l:{};S=UN(l,J,P)}}T||(T=new Js);var vt=T.get(l);if(vt)return vt;T.set(l,S),SE(l)?l.forEach(function(Ct){S.add($s(Ct,u,f,Ct,l,T))}):AE(l)&&l.forEach(function(Ct,Yt){S.set(Yt,$s(Ct,u,f,Yt,l,T))});var Rt=z?M?hm:um:M?ds:yn,qt=q?n:Rt(l);return Fs(qt||l,function(Ct,Yt){qt&&(Yt=Ct,Ct=l[Yt]),Ql(S,Yt,$s(Ct,u,f,Yt,l,T))}),S}function YM(l){var u=yn(l);return function(f){return uw(f,l,u)}}function uw(l,u,f){var m=f.length;if(l==null)return!m;for(l=Ie(l);m--;){var v=f[m],T=u[v],S=l[v];if(S===n&&!(v in l)||!T(S))return!1}return!0}function hw(l,u,f){if(typeof l!="function")throw new Vs(o);return sc(function(){l.apply(n,f)},u)}function Xl(l,u,f,m){var v=-1,T=Eh,S=!0,P=l.length,M=[],z=u.length;if(!P)return M;f&&(u=Be(u,Is(f))),m?(T=Dg,S=!1):u.length>=i&&(T=zl,S=!1,u=new Io(u));t:for(;++v<P;){var q=l[v],J=f==null?q:f(q);if(q=m||q!==0?q:0,S&&J===J){for(var at=z;at--;)if(u[at]===J)continue t;M.push(q)}else T(u,J,m)||M.push(q)}return M}var xr=Fw(fi),dw=Fw(Kg,!0);function QM(l,u){var f=!0;return xr(l,function(m,v,T){return f=!!u(m,v,T),f}),f}function Bh(l,u,f){for(var m=-1,v=l.length;++m<v;){var T=l[m],S=u(T);if(S!=null&&(P===n?S===S&&!xs(S):f(S,P)))var P=S,M=T}return M}function XM(l,u,f,m){var v=l.length;for(f=jt(f),f<0&&(f=-f>v?0:v+f),m=m===n||m>v?v:jt(m),m<0&&(m+=v),m=f>m?0:CE(m);f<m;)l[f++]=u;return l}function fw(l,u){var f=[];return xr(l,function(m,v,T){u(m,v,T)&&f.push(m)}),f}function xn(l,u,f,m,v){var T=-1,S=l.length;for(f||(f=VN),v||(v=[]);++T<S;){var P=l[T];u>0&&f(P)?u>1?xn(P,u-1,f,m,v):Tr(v,P):m||(v[v.length]=P)}return v}var qg=Vw(),pw=Vw(!0);function fi(l,u){return l&&qg(l,u,yn)}function Kg(l,u){return l&&pw(l,u,yn)}function $h(l,u){return Er(u,function(f){return Qi(l[f])})}function xo(l,u){u=Rr(u,l);for(var f=0,m=u.length;l!=null&&f<m;)l=l[gi(u[f++])];return f&&f==m?l:n}function gw(l,u,f){var m=u(l);return Bt(l)?m:Tr(m,f(l))}function Zn(l){return l==null?l===n?It:Q:Eo&&Eo in Ie(l)?ON(l):qN(l)}function Gg(l,u){return l>u}function JM(l,u){return l!=null&&_e.call(l,u)}function ZM(l,u){return l!=null&&u in Ie(l)}function tN(l,u,f){return l>=Ln(u,f)&&l<pn(u,f)}function Yg(l,u,f){for(var m=f?Dg:Eh,v=l[0].length,T=l.length,S=T,P=F(T),M=1/0,z=[];S--;){var q=l[S];S&&u&&(q=Be(q,Is(u))),M=Ln(q.length,M),P[S]=!f&&(u||v>=120&&q.length>=120)?new Io(S&&q):n}q=l[0];var J=-1,at=P[0];t:for(;++J<v&&z.length<M;){var vt=q[J],Rt=u?u(vt):vt;if(vt=f||vt!==0?vt:0,!(at?zl(at,Rt):m(z,Rt,f))){for(S=T;--S;){var qt=P[S];if(!(qt?zl(qt,Rt):m(l[S],Rt,f)))continue t}at&&at.push(Rt),z.push(vt)}}return z}function eN(l,u,f,m){return fi(l,function(v,T,S){u(m,f(v),T,S)}),m}function Jl(l,u,f){u=Rr(u,l),l=nE(l,u);var m=l==null?l:l[gi(Ws(u))];return m==null?n:Ts(m,l,f)}function mw(l){return Ge(l)&&Zn(l)==Tn}function nN(l){return Ge(l)&&Zn(l)==Ht}function sN(l){return Ge(l)&&Zn(l)==rt}function Zl(l,u,f,m,v){return l===u?!0:l==null||u==null||!Ge(l)&&!Ge(u)?l!==l&&u!==u:iN(l,u,f,m,Zl,v)}function iN(l,u,f,m,v,T){var S=Bt(l),P=Bt(u),M=S?ge:Un(l),z=P?ge:Un(u);M=M==Tn?$:M,z=z==Tn?$:z;var q=M==$,J=z==$,at=M==z;if(at&&Pr(l)){if(!Pr(u))return!1;S=!0,q=!1}if(at&&!q)return T||(T=new Js),S||Ba(l)?Yw(l,u,f,m,v,T):DN(l,u,M,f,m,v,T);if(!(f&y)){var vt=q&&_e.call(l,"__wrapped__"),Rt=J&&_e.call(u,"__wrapped__");if(vt||Rt){var qt=vt?l.value():l,Ct=Rt?u.value():u;return T||(T=new Js),v(qt,Ct,f,m,T)}}return at?(T||(T=new Js),kN(l,u,f,m,v,T)):!1}function rN(l){return Ge(l)&&Un(l)==C}function Qg(l,u,f,m){var v=f.length,T=v,S=!m;if(l==null)return!T;for(l=Ie(l);v--;){var P=f[v];if(S&&P[2]?P[1]!==l[P[0]]:!(P[0]in l))return!1}for(;++v<T;){P=f[v];var M=P[0],z=l[M],q=P[1];if(S&&P[2]){if(z===n&&!(M in l))return!1}else{var J=new Js;if(m)var at=m(z,q,M,l,u,J);if(!(at===n?Zl(q,z,y|b,m,J):at))return!1}}return!0}function _w(l){if(!He(l)||$N(l))return!1;var u=Qi(l)?rM:Yk;return u.test(Ro(l))}function oN(l){return Ge(l)&&Zn(l)==et}function aN(l){return Ge(l)&&Un(l)==nt}function lN(l){return Ge(l)&&id(l.length)&&!!Oe[Zn(l)]}function yw(l){return typeof l=="function"?l:l==null?fs:typeof l=="object"?Bt(l)?ww(l[0],l[1]):bw(l):BE(l)}function Xg(l){if(!nc(l))return hM(l);var u=[];for(var f in Ie(l))_e.call(l,f)&&f!="constructor"&&u.push(f);return u}function cN(l){if(!He(l))return jN(l);var u=nc(l),f=[];for(var m in l)m=="constructor"&&(u||!_e.call(l,m))||f.push(m);return f}function Jg(l,u){return l<u}function vw(l,u){var f=-1,m=hs(l)?F(l.length):[];return xr(l,function(v,T,S){m[++f]=u(v,T,S)}),m}function bw(l){var u=fm(l);return u.length==1&&u[0][2]?tE(u[0][0],u[0][1]):function(f){return f===l||Qg(f,l,u)}}function ww(l,u){return gm(l)&&Zw(u)?tE(gi(l),u):function(f){var m=Am(f,l);return m===n&&m===u?xm(f,l):Zl(u,m,y|b)}}function Hh(l,u,f,m,v){l!==u&&qg(u,function(T,S){if(v||(v=new Js),He(T))uN(l,u,S,f,Hh,m,v);else{var P=m?m(_m(l,S),T,S+"",l,u,v):n;P===n&&(P=T),zg(l,S,P)}},ds)}function uN(l,u,f,m,v,T,S){var P=_m(l,f),M=_m(u,f),z=S.get(M);if(z){zg(l,f,z);return}var q=T?T(P,M,f+"",l,u,S):n,J=q===n;if(J){var at=Bt(M),vt=!at&&Pr(M),Rt=!at&&!vt&&Ba(M);q=M,at||vt||Rt?Bt(P)?q=P:nn(P)?q=us(P):vt?(J=!1,q=Ow(M,!0)):Rt?(J=!1,q=Mw(M,!0)):q=[]:ic(M)||Co(M)?(q=P,Co(P)?q=PE(P):(!He(P)||Qi(P))&&(q=Jw(M))):J=!1}J&&(S.set(M,q),v(q,M,m,T,S),S.delete(M)),zg(l,f,q)}function Ew(l,u){var f=l.length;if(f)return u+=u<0?f:0,Yi(u,f)?l[u]:n}function Tw(l,u,f){u.length?u=Be(u,function(T){return Bt(T)?function(S){return xo(S,T.length===1?T[0]:T)}:T}):u=[fs];var m=-1;u=Be(u,Is(St()));var v=vw(l,function(T,S,P){var M=Be(u,function(z){return z(T)});return{criteria:M,index:++m,value:T}});return UO(v,function(T,S){return TN(T,S,f)})}function hN(l,u){return Iw(l,u,function(f,m){return xm(l,m)})}function Iw(l,u,f){for(var m=-1,v=u.length,T={};++m<v;){var S=u[m],P=xo(l,S);f(P,S)&&tc(T,Rr(S,l),P)}return T}function dN(l){return function(u){return xo(u,l)}}function Zg(l,u,f,m){var v=m?LO:Ca,T=-1,S=u.length,P=l;for(l===u&&(u=us(u)),f&&(P=Be(l,Is(f)));++T<S;)for(var M=0,z=u[T],q=f?f(z):z;(M=v(P,q,M,m))>-1;)P!==l&&kh.call(P,M,1),kh.call(l,M,1);return l}function Aw(l,u){for(var f=l?u.length:0,m=f-1;f--;){var v=u[f];if(f==m||v!==T){var T=v;Yi(v)?kh.call(l,v,1):sm(l,v)}}return l}function tm(l,u){return l+Nh(rw()*(u-l+1))}function fN(l,u,f,m){for(var v=-1,T=pn(Mh((u-l)/(f||1)),0),S=F(T);T--;)S[m?T:++v]=l,l+=f;return S}function em(l,u){var f="";if(!l||u<1||u>xt)return f;do u%2&&(f+=l),u=Nh(u/2),u&&(l+=l);while(u);return f}function Kt(l,u){return ym(eE(l,u,fs),l+"")}function pN(l){return lw($a(l))}function gN(l,u){var f=$a(l);return Jh(f,Ao(u,0,f.length))}function tc(l,u,f,m){if(!He(l))return l;u=Rr(u,l);for(var v=-1,T=u.length,S=T-1,P=l;P!=null&&++v<T;){var M=gi(u[v]),z=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return l;if(v!=S){var q=P[M];z=m?m(q,M,P):n,z===n&&(z=He(q)?q:Yi(u[v+1])?[]:{})}Ql(P,M,z),P=P[M]}return l}var xw=Lh?function(l,u){return Lh.set(l,u),l}:fs,mN=Oh?function(l,u){return Oh(l,"toString",{configurable:!0,enumerable:!1,value:Rm(u),writable:!0})}:fs;function _N(l){return Jh($a(l))}function Hs(l,u,f){var m=-1,v=l.length;u<0&&(u=-u>v?0:v+u),f=f>v?v:f,f<0&&(f+=v),v=u>f?0:f-u>>>0,u>>>=0;for(var T=F(v);++m<v;)T[m]=l[m+u];return T}function yN(l,u){var f;return xr(l,function(m,v,T){return f=u(m,v,T),!f}),!!f}function Wh(l,u,f){var m=0,v=l==null?m:l.length;if(typeof u=="number"&&u===u&&v<=ls){for(;m<v;){var T=m+v>>>1,S=l[T];S!==null&&!xs(S)&&(f?S<=u:S<u)?m=T+1:v=T}return v}return nm(l,u,fs,f)}function nm(l,u,f,m){var v=0,T=l==null?0:l.length;if(T===0)return 0;u=f(u);for(var S=u!==u,P=u===null,M=xs(u),z=u===n;v<T;){var q=Nh((v+T)/2),J=f(l[q]),at=J!==n,vt=J===null,Rt=J===J,qt=xs(J);if(S)var Ct=m||Rt;else z?Ct=Rt&&(m||at):P?Ct=Rt&&at&&(m||!vt):M?Ct=Rt&&at&&!vt&&(m||!qt):vt||qt?Ct=!1:Ct=m?J<=u:J<u;Ct?v=q+1:T=q}return Ln(T,$e)}function Sw(l,u){for(var f=-1,m=l.length,v=0,T=[];++f<m;){var S=l[f],P=u?u(S):S;if(!f||!Zs(P,M)){var M=P;T[v++]=S===0?0:S}}return T}function Rw(l){return typeof l=="number"?l:xs(l)?on:+l}function As(l){if(typeof l=="string")return l;if(Bt(l))return Be(l,As)+"";if(xs(l))return ow?ow.call(l):"";var u=l+"";return u=="0"&&1/l==-wt?"-0":u}function Sr(l,u,f){var m=-1,v=Eh,T=l.length,S=!0,P=[],M=P;if(f)S=!1,v=Dg;else if(T>=i){var z=u?null:CN(l);if(z)return Ih(z);S=!1,v=zl,M=new Io}else M=u?[]:P;t:for(;++m<T;){var q=l[m],J=u?u(q):q;if(q=f||q!==0?q:0,S&&J===J){for(var at=M.length;at--;)if(M[at]===J)continue t;u&&M.push(J),P.push(q)}else v(M,J,f)||(M!==P&&M.push(J),P.push(q))}return P}function sm(l,u){return u=Rr(u,l),l=nE(l,u),l==null||delete l[gi(Ws(u))]}function Cw(l,u,f,m){return tc(l,u,f(xo(l,u)),m)}function zh(l,u,f,m){for(var v=l.length,T=m?v:-1;(m?T--:++T<v)&&u(l[T],T,l););return f?Hs(l,m?0:T,m?T+1:v):Hs(l,m?T+1:0,m?v:T)}function Pw(l,u){var f=l;return f instanceof Qt&&(f=f.value()),kg(u,function(m,v){return v.func.apply(v.thisArg,Tr([m],v.args))},f)}function im(l,u,f){var m=l.length;if(m<2)return m?Sr(l[0]):[];for(var v=-1,T=F(m);++v<m;)for(var S=l[v],P=-1;++P<m;)P!=v&&(T[v]=Xl(T[v]||S,l[P],u,f));return Sr(xn(T,1),u,f)}function Dw(l,u,f){for(var m=-1,v=l.length,T=u.length,S={};++m<v;){var P=m<T?u[m]:n;f(S,l[m],P)}return S}function rm(l){return nn(l)?l:[]}function om(l){return typeof l=="function"?l:fs}function Rr(l,u){return Bt(l)?l:gm(l,u)?[l]:oE(fe(l))}var vN=Kt;function Cr(l,u,f){var m=l.length;return f=f===n?m:f,!u&&f>=m?l:Hs(l,u,f)}var kw=oM||function(l){return An.clearTimeout(l)};function Ow(l,u){if(u)return l.slice();var f=l.length,m=tw?tw(f):new l.constructor(f);return l.copy(m),m}function am(l){var u=new l.constructor(l.byteLength);return new Ph(u).set(new Ph(l)),u}function bN(l,u){var f=u?am(l.buffer):l.buffer;return new l.constructor(f,l.byteOffset,l.byteLength)}function wN(l){var u=new l.constructor(l.source,m0.exec(l));return u.lastIndex=l.lastIndex,u}function EN(l){return Yl?Ie(Yl.call(l)):{}}function Mw(l,u){var f=u?am(l.buffer):l.buffer;return new l.constructor(f,l.byteOffset,l.length)}function Nw(l,u){if(l!==u){var f=l!==n,m=l===null,v=l===l,T=xs(l),S=u!==n,P=u===null,M=u===u,z=xs(u);if(!P&&!z&&!T&&l>u||T&&S&&M&&!P&&!z||m&&S&&M||!f&&M||!v)return 1;if(!m&&!T&&!z&&l<u||z&&f&&v&&!m&&!T||P&&f&&v||!S&&v||!M)return-1}return 0}function TN(l,u,f){for(var m=-1,v=l.criteria,T=u.criteria,S=v.length,P=f.length;++m<S;){var M=Nw(v[m],T[m]);if(M){if(m>=P)return M;var z=f[m];return M*(z=="desc"?-1:1)}}return l.index-u.index}function Lw(l,u,f,m){for(var v=-1,T=l.length,S=f.length,P=-1,M=u.length,z=pn(T-S,0),q=F(M+z),J=!m;++P<M;)q[P]=u[P];for(;++v<S;)(J||v<T)&&(q[f[v]]=l[v]);for(;z--;)q[P++]=l[v++];return q}function Uw(l,u,f,m){for(var v=-1,T=l.length,S=-1,P=f.length,M=-1,z=u.length,q=pn(T-P,0),J=F(q+z),at=!m;++v<q;)J[v]=l[v];for(var vt=v;++M<z;)J[vt+M]=u[M];for(;++S<P;)(at||v<T)&&(J[vt+f[S]]=l[v++]);return J}function us(l,u){var f=-1,m=l.length;for(u||(u=F(m));++f<m;)u[f]=l[f];return u}function pi(l,u,f,m){var v=!f;f||(f={});for(var T=-1,S=u.length;++T<S;){var P=u[T],M=m?m(f[P],l[P],P,f,l):n;M===n&&(M=l[P]),v?qi(f,P,M):Ql(f,P,M)}return f}function IN(l,u){return pi(l,pm(l),u)}function AN(l,u){return pi(l,Qw(l),u)}function jh(l,u){return function(f,m){var v=Bt(f)?PO:KM,T=u?u():{};return v(f,l,St(m,2),T)}}function Ua(l){return Kt(function(u,f){var m=-1,v=f.length,T=v>1?f[v-1]:n,S=v>2?f[2]:n;for(T=l.length>3&&typeof T=="function"?(v--,T):n,S&&ts(f[0],f[1],S)&&(T=v<3?n:T,v=1),u=Ie(u);++m<v;){var P=f[m];P&&l(u,P,m,T)}return u})}function Fw(l,u){return function(f,m){if(f==null)return f;if(!hs(f))return l(f,m);for(var v=f.length,T=u?v:-1,S=Ie(f);(u?T--:++T<v)&&m(S[T],T,S)!==!1;);return f}}function Vw(l){return function(u,f,m){for(var v=-1,T=Ie(u),S=m(u),P=S.length;P--;){var M=S[l?P:++v];if(f(T[M],M,T)===!1)break}return u}}function xN(l,u,f){var m=u&w,v=ec(l);function T(){var S=this&&this!==An&&this instanceof T?v:l;return S.apply(m?f:this,arguments)}return T}function Bw(l){return function(u){u=fe(u);var f=Pa(u)?Xs(u):n,m=f?f[0]:u.charAt(0),v=f?Cr(f,1).join(""):u.slice(1);return m[l]()+v}}function Fa(l){return function(u){return kg(FE(UE(u).replace(mO,"")),l,"")}}function ec(l){return function(){var u=arguments;switch(u.length){case 0:return new l;case 1:return new l(u[0]);case 2:return new l(u[0],u[1]);case 3:return new l(u[0],u[1],u[2]);case 4:return new l(u[0],u[1],u[2],u[3]);case 5:return new l(u[0],u[1],u[2],u[3],u[4]);case 6:return new l(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new l(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var f=La(l.prototype),m=l.apply(f,u);return He(m)?m:f}}function SN(l,u,f){var m=ec(l);function v(){for(var T=arguments.length,S=F(T),P=T,M=Va(v);P--;)S[P]=arguments[P];var z=T<3&&S[0]!==M&&S[T-1]!==M?[]:Ir(S,M);if(T-=z.length,T<f)return jw(l,u,qh,v.placeholder,n,S,z,n,n,f-T);var q=this&&this!==An&&this instanceof v?m:l;return Ts(q,this,S)}return v}function $w(l){return function(u,f,m){var v=Ie(u);if(!hs(u)){var T=St(f,3);u=yn(u),f=function(P){return T(v[P],P,v)}}var S=l(u,f,m);return S>-1?v[T?u[S]:S]:n}}function Hw(l){return Gi(function(u){var f=u.length,m=f,v=Bs.prototype.thru;for(l&&u.reverse();m--;){var T=u[m];if(typeof T!="function")throw new Vs(o);if(v&&!S&&Qh(T)=="wrapper")var S=new Bs([],!0)}for(m=S?m:f;++m<f;){T=u[m];var P=Qh(T),M=P=="wrapper"?dm(T):n;M&&mm(M[0])&&M[1]==(V|D|N|B)&&!M[4].length&&M[9]==1?S=S[Qh(M[0])].apply(S,M[3]):S=T.length==1&&mm(T)?S[P]():S.thru(T)}return function(){var z=arguments,q=z[0];if(S&&z.length==1&&Bt(q))return S.plant(q).value();for(var J=0,at=f?u[J].apply(this,z):q;++J<f;)at=u[J].call(this,at);return at}})}function qh(l,u,f,m,v,T,S,P,M,z){var q=u&V,J=u&w,at=u&A,vt=u&(D|O),Rt=u&tt,qt=at?n:ec(l);function Ct(){for(var Yt=arguments.length,ne=F(Yt),Ss=Yt;Ss--;)ne[Ss]=arguments[Ss];if(vt)var es=Va(Ct),Rs=VO(ne,es);if(m&&(ne=Lw(ne,m,v,vt)),T&&(ne=Uw(ne,T,S,vt)),Yt-=Rs,vt&&Yt<z){var sn=Ir(ne,es);return jw(l,u,qh,Ct.placeholder,f,ne,sn,P,M,z-Yt)}var ti=J?f:this,Ji=at?ti[l]:l;return Yt=ne.length,P?ne=KN(ne,P):Rt&&Yt>1&&ne.reverse(),q&&M<Yt&&(ne.length=M),this&&this!==An&&this instanceof Ct&&(Ji=qt||ec(Ji)),Ji.apply(ti,ne)}return Ct}function Ww(l,u){return function(f,m){return eN(f,l,u(m),{})}}function Kh(l,u){return function(f,m){var v;if(f===n&&m===n)return u;if(f!==n&&(v=f),m!==n){if(v===n)return m;typeof f=="string"||typeof m=="string"?(f=As(f),m=As(m)):(f=Rw(f),m=Rw(m)),v=l(f,m)}return v}}function lm(l){return Gi(function(u){return u=Be(u,Is(St())),Kt(function(f){var m=this;return l(u,function(v){return Ts(v,m,f)})})})}function Gh(l,u){u=u===n?" ":As(u);var f=u.length;if(f<2)return f?em(u,l):u;var m=em(u,Mh(l/Da(u)));return Pa(u)?Cr(Xs(m),0,l).join(""):m.slice(0,l)}function RN(l,u,f,m){var v=u&w,T=ec(l);function S(){for(var P=-1,M=arguments.length,z=-1,q=m.length,J=F(q+M),at=this&&this!==An&&this instanceof S?T:l;++z<q;)J[z]=m[z];for(;M--;)J[z++]=arguments[++P];return Ts(at,v?f:this,J)}return S}function zw(l){return function(u,f,m){return m&&typeof m!="number"&&ts(u,f,m)&&(f=m=n),u=Xi(u),f===n?(f=u,u=0):f=Xi(f),m=m===n?u<f?1:-1:Xi(m),fN(u,f,m,l)}}function Yh(l){return function(u,f){return typeof u=="string"&&typeof f=="string"||(u=zs(u),f=zs(f)),l(u,f)}}function jw(l,u,f,m,v,T,S,P,M,z){var q=u&D,J=q?S:n,at=q?n:S,vt=q?T:n,Rt=q?n:T;u|=q?N:L,u&=~(q?L:N),u&R||(u&=~(w|A));var qt=[l,u,v,vt,J,Rt,at,P,M,z],Ct=f.apply(n,qt);return mm(l)&&sE(Ct,qt),Ct.placeholder=m,iE(Ct,l,u)}function cm(l){var u=fn[l];return function(f,m){if(f=zs(f),m=m==null?0:Ln(jt(m),292),m&&iw(f)){var v=(fe(f)+"e").split("e"),T=u(v[0]+"e"+(+v[1]+m));return v=(fe(T)+"e").split("e"),+(v[0]+"e"+(+v[1]-m))}return u(f)}}var CN=Ma&&1/Ih(new Ma([,-0]))[1]==wt?function(l){return new Ma(l)}:Dm;function qw(l){return function(u){var f=Un(u);return f==C?Vg(u):f==nt?qO(u):FO(u,l(u))}}function Ki(l,u,f,m,v,T,S,P){var M=u&A;if(!M&&typeof l!="function")throw new Vs(o);var z=m?m.length:0;if(z||(u&=~(N|L),m=v=n),S=S===n?S:pn(jt(S),0),P=P===n?P:jt(P),z-=v?v.length:0,u&L){var q=m,J=v;m=v=n}var at=M?n:dm(l),vt=[l,u,f,m,v,q,J,T,S,P];if(at&&zN(vt,at),l=vt[0],u=vt[1],f=vt[2],m=vt[3],v=vt[4],P=vt[9]=vt[9]===n?M?0:l.length:pn(vt[9]-z,0),!P&&u&(D|O)&&(u&=~(D|O)),!u||u==w)var Rt=xN(l,u,f);else u==D||u==O?Rt=SN(l,u,P):(u==N||u==(w|N))&&!v.length?Rt=RN(l,u,f,m):Rt=qh.apply(n,vt);var qt=at?xw:sE;return iE(qt(Rt,vt),l,u)}function Kw(l,u,f,m){return l===n||Zs(l,Oa[f])&&!_e.call(m,f)?u:l}function Gw(l,u,f,m,v,T){return He(l)&&He(u)&&(T.set(u,l),Hh(l,u,n,Gw,T),T.delete(u)),l}function PN(l){return ic(l)?n:l}function Yw(l,u,f,m,v,T){var S=f&y,P=l.length,M=u.length;if(P!=M&&!(S&&M>P))return!1;var z=T.get(l),q=T.get(u);if(z&&q)return z==u&&q==l;var J=-1,at=!0,vt=f&b?new Io:n;for(T.set(l,u),T.set(u,l);++J<P;){var Rt=l[J],qt=u[J];if(m)var Ct=S?m(qt,Rt,J,u,l,T):m(Rt,qt,J,l,u,T);if(Ct!==n){if(Ct)continue;at=!1;break}if(vt){if(!Og(u,function(Yt,ne){if(!zl(vt,ne)&&(Rt===Yt||v(Rt,Yt,f,m,T)))return vt.push(ne)})){at=!1;break}}else if(!(Rt===qt||v(Rt,qt,f,m,T))){at=!1;break}}return T.delete(l),T.delete(u),at}function DN(l,u,f,m,v,T,S){switch(f){case ee:if(l.byteLength!=u.byteLength||l.byteOffset!=u.byteOffset)return!1;l=l.buffer,u=u.buffer;case Ht:return!(l.byteLength!=u.byteLength||!T(new Ph(l),new Ph(u)));case dt:case rt:case U:return Zs(+l,+u);case te:return l.name==u.name&&l.message==u.message;case et:case Z:return l==u+"";case C:var P=Vg;case nt:var M=m&y;if(P||(P=Ih),l.size!=u.size&&!M)return!1;var z=S.get(l);if(z)return z==u;m|=b,S.set(l,u);var q=Yw(P(l),P(u),m,v,T,S);return S.delete(l),q;case ft:if(Yl)return Yl.call(l)==Yl.call(u)}return!1}function kN(l,u,f,m,v,T){var S=f&y,P=um(l),M=P.length,z=um(u),q=z.length;if(M!=q&&!S)return!1;for(var J=M;J--;){var at=P[J];if(!(S?at in u:_e.call(u,at)))return!1}var vt=T.get(l),Rt=T.get(u);if(vt&&Rt)return vt==u&&Rt==l;var qt=!0;T.set(l,u),T.set(u,l);for(var Ct=S;++J<M;){at=P[J];var Yt=l[at],ne=u[at];if(m)var Ss=S?m(ne,Yt,at,u,l,T):m(Yt,ne,at,l,u,T);if(!(Ss===n?Yt===ne||v(Yt,ne,f,m,T):Ss)){qt=!1;break}Ct||(Ct=at=="constructor")}if(qt&&!Ct){var es=l.constructor,Rs=u.constructor;es!=Rs&&"constructor"in l&&"constructor"in u&&!(typeof es=="function"&&es instanceof es&&typeof Rs=="function"&&Rs instanceof Rs)&&(qt=!1)}return T.delete(l),T.delete(u),qt}function Gi(l){return ym(eE(l,n,uE),l+"")}function um(l){return gw(l,yn,pm)}function hm(l){return gw(l,ds,Qw)}var dm=Lh?function(l){return Lh.get(l)}:Dm;function Qh(l){for(var u=l.name+"",f=Na[u],m=_e.call(Na,u)?f.length:0;m--;){var v=f[m],T=v.func;if(T==null||T==l)return v.name}return u}function Va(l){var u=_e.call(E,"placeholder")?E:l;return u.placeholder}function St(){var l=E.iteratee||Cm;return l=l===Cm?yw:l,arguments.length?l(arguments[0],arguments[1]):l}function Xh(l,u){var f=l.__data__;return BN(u)?f[typeof u=="string"?"string":"hash"]:f.map}function fm(l){for(var u=yn(l),f=u.length;f--;){var m=u[f],v=l[m];u[f]=[m,v,Zw(v)]}return u}function So(l,u){var f=WO(l,u);return _w(f)?f:n}function ON(l){var u=_e.call(l,Eo),f=l[Eo];try{l[Eo]=n;var m=!0}catch{}var v=Rh.call(l);return m&&(u?l[Eo]=f:delete l[Eo]),v}var pm=$g?function(l){return l==null?[]:(l=Ie(l),Er($g(l),function(u){return nw.call(l,u)}))}:km,Qw=$g?function(l){for(var u=[];l;)Tr(u,pm(l)),l=Dh(l);return u}:km,Un=Zn;(Hg&&Un(new Hg(new ArrayBuffer(1)))!=ee||ql&&Un(new ql)!=C||Wg&&Un(Wg.resolve())!=st||Ma&&Un(new Ma)!=nt||Kl&&Un(new Kl)!=yt)&&(Un=function(l){var u=Zn(l),f=u==$?l.constructor:n,m=f?Ro(f):"";if(m)switch(m){case gM:return ee;case mM:return C;case _M:return st;case yM:return nt;case vM:return yt}return u});function MN(l,u,f){for(var m=-1,v=f.length;++m<v;){var T=f[m],S=T.size;switch(T.type){case"drop":l+=S;break;case"dropRight":u-=S;break;case"take":u=Ln(u,l+S);break;case"takeRight":l=pn(l,u-S);break}}return{start:l,end:u}}function NN(l){var u=l.match($k);return u?u[1].split(Hk):[]}function Xw(l,u,f){u=Rr(u,l);for(var m=-1,v=u.length,T=!1;++m<v;){var S=gi(u[m]);if(!(T=l!=null&&f(l,S)))break;l=l[S]}return T||++m!=v?T:(v=l==null?0:l.length,!!v&&id(v)&&Yi(S,v)&&(Bt(l)||Co(l)))}function LN(l){var u=l.length,f=new l.constructor(u);return u&&typeof l[0]=="string"&&_e.call(l,"index")&&(f.index=l.index,f.input=l.input),f}function Jw(l){return typeof l.constructor=="function"&&!nc(l)?La(Dh(l)):{}}function UN(l,u,f){var m=l.constructor;switch(u){case Ht:return am(l);case dt:case rt:return new m(+l);case ee:return bN(l,f);case Te:case Ke:case Jn:case di:case xa:case Wi:case Sa:case In:case cs:return Mw(l,f);case C:return new m;case U:case Z:return new m(l);case et:return wN(l);case nt:return new m;case ft:return EN(l)}}function FN(l,u){var f=u.length;if(!f)return l;var m=f-1;return u[m]=(f>1?"& ":"")+u[m],u=u.join(f>2?", ":" "),l.replace(Bk,`{
/* [wrapped with `+u+`] */
`)}function VN(l){return Bt(l)||Co(l)||!!(sw&&l&&l[sw])}function Yi(l,u){var f=typeof l;return u=u??xt,!!u&&(f=="number"||f!="symbol"&&Xk.test(l))&&l>-1&&l%1==0&&l<u}function ts(l,u,f){if(!He(f))return!1;var m=typeof u;return(m=="number"?hs(f)&&Yi(u,f.length):m=="string"&&u in f)?Zs(f[u],l):!1}function gm(l,u){if(Bt(l))return!1;var f=typeof l;return f=="number"||f=="symbol"||f=="boolean"||l==null||xs(l)?!0:Lk.test(l)||!Nk.test(l)||u!=null&&l in Ie(u)}function BN(l){var u=typeof l;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?l!=="__proto__":l===null}function mm(l){var u=Qh(l),f=E[u];if(typeof f!="function"||!(u in Qt.prototype))return!1;if(l===f)return!0;var m=dm(f);return!!m&&l===m[0]}function $N(l){return!!Z0&&Z0 in l}var HN=xh?Qi:Om;function nc(l){var u=l&&l.constructor,f=typeof u=="function"&&u.prototype||Oa;return l===f}function Zw(l){return l===l&&!He(l)}function tE(l,u){return function(f){return f==null?!1:f[l]===u&&(u!==n||l in Ie(f))}}function WN(l){var u=nd(l,function(m){return f.size===h&&f.clear(),m}),f=u.cache;return u}function zN(l,u){var f=l[1],m=u[1],v=f|m,T=v<(w|A|V),S=m==V&&f==D||m==V&&f==B&&l[7].length<=u[8]||m==(V|B)&&u[7].length<=u[8]&&f==D;if(!(T||S))return l;m&w&&(l[2]=u[2],v|=f&w?0:R);var P=u[3];if(P){var M=l[3];l[3]=M?Lw(M,P,u[4]):P,l[4]=M?Ir(l[3],d):u[4]}return P=u[5],P&&(M=l[5],l[5]=M?Uw(M,P,u[6]):P,l[6]=M?Ir(l[5],d):u[6]),P=u[7],P&&(l[7]=P),m&V&&(l[8]=l[8]==null?u[8]:Ln(l[8],u[8])),l[9]==null&&(l[9]=u[9]),l[0]=u[0],l[1]=v,l}function jN(l){var u=[];if(l!=null)for(var f in Ie(l))u.push(f);return u}function qN(l){return Rh.call(l)}function eE(l,u,f){return u=pn(u===n?l.length-1:u,0),function(){for(var m=arguments,v=-1,T=pn(m.length-u,0),S=F(T);++v<T;)S[v]=m[u+v];v=-1;for(var P=F(u+1);++v<u;)P[v]=m[v];return P[u]=f(S),Ts(l,this,P)}}function nE(l,u){return u.length<2?l:xo(l,Hs(u,0,-1))}function KN(l,u){for(var f=l.length,m=Ln(u.length,f),v=us(l);m--;){var T=u[m];l[m]=Yi(T,f)?v[T]:n}return l}function _m(l,u){if(!(u==="constructor"&&typeof l[u]=="function")&&u!="__proto__")return l[u]}var sE=rE(xw),sc=lM||function(l,u){return An.setTimeout(l,u)},ym=rE(mN);function iE(l,u,f){var m=u+"";return ym(l,FN(m,GN(NN(m),f)))}function rE(l){var u=0,f=0;return function(){var m=dM(),v=de-(m-f);if(f=m,v>0){if(++u>=kt)return arguments[0]}else u=0;return l.apply(n,arguments)}}function Jh(l,u){var f=-1,m=l.length,v=m-1;for(u=u===n?m:u;++f<u;){var T=tm(f,v),S=l[T];l[T]=l[f],l[f]=S}return l.length=u,l}var oE=WN(function(l){var u=[];return l.charCodeAt(0)===46&&u.push(""),l.replace(Uk,function(f,m,v,T){u.push(v?T.replace(jk,"$1"):m||f)}),u});function gi(l){if(typeof l=="string"||xs(l))return l;var u=l+"";return u=="0"&&1/l==-wt?"-0":u}function Ro(l){if(l!=null){try{return Sh.call(l)}catch{}try{return l+""}catch{}}return""}function GN(l,u){return Fs(Nn,function(f){var m="_."+f[0];u&f[1]&&!Eh(l,m)&&l.push(m)}),l.sort()}function aE(l){if(l instanceof Qt)return l.clone();var u=new Bs(l.__wrapped__,l.__chain__);return u.__actions__=us(l.__actions__),u.__index__=l.__index__,u.__values__=l.__values__,u}function YN(l,u,f){(f?ts(l,u,f):u===n)?u=1:u=pn(jt(u),0);var m=l==null?0:l.length;if(!m||u<1)return[];for(var v=0,T=0,S=F(Mh(m/u));v<m;)S[T++]=Hs(l,v,v+=u);return S}function QN(l){for(var u=-1,f=l==null?0:l.length,m=0,v=[];++u<f;){var T=l[u];T&&(v[m++]=T)}return v}function XN(){var l=arguments.length;if(!l)return[];for(var u=F(l-1),f=arguments[0],m=l;m--;)u[m-1]=arguments[m];return Tr(Bt(f)?us(f):[f],xn(u,1))}var JN=Kt(function(l,u){return nn(l)?Xl(l,xn(u,1,nn,!0)):[]}),ZN=Kt(function(l,u){var f=Ws(u);return nn(f)&&(f=n),nn(l)?Xl(l,xn(u,1,nn,!0),St(f,2)):[]}),tL=Kt(function(l,u){var f=Ws(u);return nn(f)&&(f=n),nn(l)?Xl(l,xn(u,1,nn,!0),n,f):[]});function eL(l,u,f){var m=l==null?0:l.length;return m?(u=f||u===n?1:jt(u),Hs(l,u<0?0:u,m)):[]}function nL(l,u,f){var m=l==null?0:l.length;return m?(u=f||u===n?1:jt(u),u=m-u,Hs(l,0,u<0?0:u)):[]}function sL(l,u){return l&&l.length?zh(l,St(u,3),!0,!0):[]}function iL(l,u){return l&&l.length?zh(l,St(u,3),!0):[]}function rL(l,u,f,m){var v=l==null?0:l.length;return v?(f&&typeof f!="number"&&ts(l,u,f)&&(f=0,m=v),XM(l,u,f,m)):[]}function lE(l,u,f){var m=l==null?0:l.length;if(!m)return-1;var v=f==null?0:jt(f);return v<0&&(v=pn(m+v,0)),Th(l,St(u,3),v)}function cE(l,u,f){var m=l==null?0:l.length;if(!m)return-1;var v=m-1;return f!==n&&(v=jt(f),v=f<0?pn(m+v,0):Ln(v,m-1)),Th(l,St(u,3),v,!0)}function uE(l){var u=l==null?0:l.length;return u?xn(l,1):[]}function oL(l){var u=l==null?0:l.length;return u?xn(l,wt):[]}function aL(l,u){var f=l==null?0:l.length;return f?(u=u===n?1:jt(u),xn(l,u)):[]}function lL(l){for(var u=-1,f=l==null?0:l.length,m={};++u<f;){var v=l[u];m[v[0]]=v[1]}return m}function hE(l){return l&&l.length?l[0]:n}function cL(l,u,f){var m=l==null?0:l.length;if(!m)return-1;var v=f==null?0:jt(f);return v<0&&(v=pn(m+v,0)),Ca(l,u,v)}function uL(l){var u=l==null?0:l.length;return u?Hs(l,0,-1):[]}var hL=Kt(function(l){var u=Be(l,rm);return u.length&&u[0]===l[0]?Yg(u):[]}),dL=Kt(function(l){var u=Ws(l),f=Be(l,rm);return u===Ws(f)?u=n:f.pop(),f.length&&f[0]===l[0]?Yg(f,St(u,2)):[]}),fL=Kt(function(l){var u=Ws(l),f=Be(l,rm);return u=typeof u=="function"?u:n,u&&f.pop(),f.length&&f[0]===l[0]?Yg(f,n,u):[]});function pL(l,u){return l==null?"":uM.call(l,u)}function Ws(l){var u=l==null?0:l.length;return u?l[u-1]:n}function gL(l,u,f){var m=l==null?0:l.length;if(!m)return-1;var v=m;return f!==n&&(v=jt(f),v=v<0?pn(m+v,0):Ln(v,m-1)),u===u?GO(l,u,v):Th(l,j0,v,!0)}function mL(l,u){return l&&l.length?Ew(l,jt(u)):n}var _L=Kt(dE);function dE(l,u){return l&&l.length&&u&&u.length?Zg(l,u):l}function yL(l,u,f){return l&&l.length&&u&&u.length?Zg(l,u,St(f,2)):l}function vL(l,u,f){return l&&l.length&&u&&u.length?Zg(l,u,n,f):l}var bL=Gi(function(l,u){var f=l==null?0:l.length,m=jg(l,u);return Aw(l,Be(u,function(v){return Yi(v,f)?+v:v}).sort(Nw)),m});function wL(l,u){var f=[];if(!(l&&l.length))return f;var m=-1,v=[],T=l.length;for(u=St(u,3);++m<T;){var S=l[m];u(S,m,l)&&(f.push(S),v.push(m))}return Aw(l,v),f}function vm(l){return l==null?l:pM.call(l)}function EL(l,u,f){var m=l==null?0:l.length;return m?(f&&typeof f!="number"&&ts(l,u,f)?(u=0,f=m):(u=u==null?0:jt(u),f=f===n?m:jt(f)),Hs(l,u,f)):[]}function TL(l,u){return Wh(l,u)}function IL(l,u,f){return nm(l,u,St(f,2))}function AL(l,u){var f=l==null?0:l.length;if(f){var m=Wh(l,u);if(m<f&&Zs(l[m],u))return m}return-1}function xL(l,u){return Wh(l,u,!0)}function SL(l,u,f){return nm(l,u,St(f,2),!0)}function RL(l,u){var f=l==null?0:l.length;if(f){var m=Wh(l,u,!0)-1;if(Zs(l[m],u))return m}return-1}function CL(l){return l&&l.length?Sw(l):[]}function PL(l,u){return l&&l.length?Sw(l,St(u,2)):[]}function DL(l){var u=l==null?0:l.length;return u?Hs(l,1,u):[]}function kL(l,u,f){return l&&l.length?(u=f||u===n?1:jt(u),Hs(l,0,u<0?0:u)):[]}function OL(l,u,f){var m=l==null?0:l.length;return m?(u=f||u===n?1:jt(u),u=m-u,Hs(l,u<0?0:u,m)):[]}function ML(l,u){return l&&l.length?zh(l,St(u,3),!1,!0):[]}function NL(l,u){return l&&l.length?zh(l,St(u,3)):[]}var LL=Kt(function(l){return Sr(xn(l,1,nn,!0))}),UL=Kt(function(l){var u=Ws(l);return nn(u)&&(u=n),Sr(xn(l,1,nn,!0),St(u,2))}),FL=Kt(function(l){var u=Ws(l);return u=typeof u=="function"?u:n,Sr(xn(l,1,nn,!0),n,u)});function VL(l){return l&&l.length?Sr(l):[]}function BL(l,u){return l&&l.length?Sr(l,St(u,2)):[]}function $L(l,u){return u=typeof u=="function"?u:n,l&&l.length?Sr(l,n,u):[]}function bm(l){if(!(l&&l.length))return[];var u=0;return l=Er(l,function(f){if(nn(f))return u=pn(f.length,u),!0}),Ug(u,function(f){return Be(l,Mg(f))})}function fE(l,u){if(!(l&&l.length))return[];var f=bm(l);return u==null?f:Be(f,function(m){return Ts(u,n,m)})}var HL=Kt(function(l,u){return nn(l)?Xl(l,u):[]}),WL=Kt(function(l){return im(Er(l,nn))}),zL=Kt(function(l){var u=Ws(l);return nn(u)&&(u=n),im(Er(l,nn),St(u,2))}),jL=Kt(function(l){var u=Ws(l);return u=typeof u=="function"?u:n,im(Er(l,nn),n,u)}),qL=Kt(bm);function KL(l,u){return Dw(l||[],u||[],Ql)}function GL(l,u){return Dw(l||[],u||[],tc)}var YL=Kt(function(l){var u=l.length,f=u>1?l[u-1]:n;return f=typeof f=="function"?(l.pop(),f):n,fE(l,f)});function pE(l){var u=E(l);return u.__chain__=!0,u}function QL(l,u){return u(l),l}function Zh(l,u){return u(l)}var XL=Gi(function(l){var u=l.length,f=u?l[0]:0,m=this.__wrapped__,v=function(T){return jg(T,l)};return u>1||this.__actions__.length||!(m instanceof Qt)||!Yi(f)?this.thru(v):(m=m.slice(f,+f+(u?1:0)),m.__actions__.push({func:Zh,args:[v],thisArg:n}),new Bs(m,this.__chain__).thru(function(T){return u&&!T.length&&T.push(n),T}))});function JL(){return pE(this)}function ZL(){return new Bs(this.value(),this.__chain__)}function t2(){this.__values__===n&&(this.__values__=RE(this.value()));var l=this.__index__>=this.__values__.length,u=l?n:this.__values__[this.__index__++];return{done:l,value:u}}function e2(){return this}function n2(l){for(var u,f=this;f instanceof Fh;){var m=aE(f);m.__index__=0,m.__values__=n,u?v.__wrapped__=m:u=m;var v=m;f=f.__wrapped__}return v.__wrapped__=l,u}function s2(){var l=this.__wrapped__;if(l instanceof Qt){var u=l;return this.__actions__.length&&(u=new Qt(this)),u=u.reverse(),u.__actions__.push({func:Zh,args:[vm],thisArg:n}),new Bs(u,this.__chain__)}return this.thru(vm)}function i2(){return Pw(this.__wrapped__,this.__actions__)}var r2=jh(function(l,u,f){_e.call(l,f)?++l[f]:qi(l,f,1)});function o2(l,u,f){var m=Bt(l)?W0:QM;return f&&ts(l,u,f)&&(u=n),m(l,St(u,3))}function a2(l,u){var f=Bt(l)?Er:fw;return f(l,St(u,3))}var l2=$w(lE),c2=$w(cE);function u2(l,u){return xn(td(l,u),1)}function h2(l,u){return xn(td(l,u),wt)}function d2(l,u,f){return f=f===n?1:jt(f),xn(td(l,u),f)}function gE(l,u){var f=Bt(l)?Fs:xr;return f(l,St(u,3))}function mE(l,u){var f=Bt(l)?DO:dw;return f(l,St(u,3))}var f2=jh(function(l,u,f){_e.call(l,f)?l[f].push(u):qi(l,f,[u])});function p2(l,u,f,m){l=hs(l)?l:$a(l),f=f&&!m?jt(f):0;var v=l.length;return f<0&&(f=pn(v+f,0)),rd(l)?f<=v&&l.indexOf(u,f)>-1:!!v&&Ca(l,u,f)>-1}var g2=Kt(function(l,u,f){var m=-1,v=typeof u=="function",T=hs(l)?F(l.length):[];return xr(l,function(S){T[++m]=v?Ts(u,S,f):Jl(S,u,f)}),T}),m2=jh(function(l,u,f){qi(l,f,u)});function td(l,u){var f=Bt(l)?Be:vw;return f(l,St(u,3))}function _2(l,u,f,m){return l==null?[]:(Bt(u)||(u=u==null?[]:[u]),f=m?n:f,Bt(f)||(f=f==null?[]:[f]),Tw(l,u,f))}var y2=jh(function(l,u,f){l[f?0:1].push(u)},function(){return[[],[]]});function v2(l,u,f){var m=Bt(l)?kg:K0,v=arguments.length<3;return m(l,St(u,4),f,v,xr)}function b2(l,u,f){var m=Bt(l)?kO:K0,v=arguments.length<3;return m(l,St(u,4),f,v,dw)}function w2(l,u){var f=Bt(l)?Er:fw;return f(l,sd(St(u,3)))}function E2(l){var u=Bt(l)?lw:pN;return u(l)}function T2(l,u,f){(f?ts(l,u,f):u===n)?u=1:u=jt(u);var m=Bt(l)?jM:gN;return m(l,u)}function I2(l){var u=Bt(l)?qM:_N;return u(l)}function A2(l){if(l==null)return 0;if(hs(l))return rd(l)?Da(l):l.length;var u=Un(l);return u==C||u==nt?l.size:Xg(l).length}function x2(l,u,f){var m=Bt(l)?Og:yN;return f&&ts(l,u,f)&&(u=n),m(l,St(u,3))}var S2=Kt(function(l,u){if(l==null)return[];var f=u.length;return f>1&&ts(l,u[0],u[1])?u=[]:f>2&&ts(u[0],u[1],u[2])&&(u=[u[0]]),Tw(l,xn(u,1),[])}),ed=aM||function(){return An.Date.now()};function R2(l,u){if(typeof u!="function")throw new Vs(o);return l=jt(l),function(){if(--l<1)return u.apply(this,arguments)}}function _E(l,u,f){return u=f?n:u,u=l&&u==null?l.length:u,Ki(l,V,n,n,n,n,u)}function yE(l,u){var f;if(typeof u!="function")throw new Vs(o);return l=jt(l),function(){return--l>0&&(f=u.apply(this,arguments)),l<=1&&(u=n),f}}var wm=Kt(function(l,u,f){var m=w;if(f.length){var v=Ir(f,Va(wm));m|=N}return Ki(l,m,u,f,v)}),vE=Kt(function(l,u,f){var m=w|A;if(f.length){var v=Ir(f,Va(vE));m|=N}return Ki(u,m,l,f,v)});function bE(l,u,f){u=f?n:u;var m=Ki(l,D,n,n,n,n,n,u);return m.placeholder=bE.placeholder,m}function wE(l,u,f){u=f?n:u;var m=Ki(l,O,n,n,n,n,n,u);return m.placeholder=wE.placeholder,m}function EE(l,u,f){var m,v,T,S,P,M,z=0,q=!1,J=!1,at=!0;if(typeof l!="function")throw new Vs(o);u=zs(u)||0,He(f)&&(q=!!f.leading,J="maxWait"in f,T=J?pn(zs(f.maxWait)||0,u):T,at="trailing"in f?!!f.trailing:at);function vt(sn){var ti=m,Ji=v;return m=v=n,z=sn,S=l.apply(Ji,ti),S}function Rt(sn){return z=sn,P=sc(Yt,u),q?vt(sn):S}function qt(sn){var ti=sn-M,Ji=sn-z,$E=u-ti;return J?Ln($E,T-Ji):$E}function Ct(sn){var ti=sn-M,Ji=sn-z;return M===n||ti>=u||ti<0||J&&Ji>=T}function Yt(){var sn=ed();if(Ct(sn))return ne(sn);P=sc(Yt,qt(sn))}function ne(sn){return P=n,at&&m?vt(sn):(m=v=n,S)}function Ss(){P!==n&&kw(P),z=0,m=M=v=P=n}function es(){return P===n?S:ne(ed())}function Rs(){var sn=ed(),ti=Ct(sn);if(m=arguments,v=this,M=sn,ti){if(P===n)return Rt(M);if(J)return kw(P),P=sc(Yt,u),vt(M)}return P===n&&(P=sc(Yt,u)),S}return Rs.cancel=Ss,Rs.flush=es,Rs}var C2=Kt(function(l,u){return hw(l,1,u)}),P2=Kt(function(l,u,f){return hw(l,zs(u)||0,f)});function D2(l){return Ki(l,tt)}function nd(l,u){if(typeof l!="function"||u!=null&&typeof u!="function")throw new Vs(o);var f=function(){var m=arguments,v=u?u.apply(this,m):m[0],T=f.cache;if(T.has(v))return T.get(v);var S=l.apply(this,m);return f.cache=T.set(v,S)||T,S};return f.cache=new(nd.Cache||ji),f}nd.Cache=ji;function sd(l){if(typeof l!="function")throw new Vs(o);return function(){var u=arguments;switch(u.length){case 0:return!l.call(this);case 1:return!l.call(this,u[0]);case 2:return!l.call(this,u[0],u[1]);case 3:return!l.call(this,u[0],u[1],u[2])}return!l.apply(this,u)}}function k2(l){return yE(2,l)}var O2=vN(function(l,u){u=u.length==1&&Bt(u[0])?Be(u[0],Is(St())):Be(xn(u,1),Is(St()));var f=u.length;return Kt(function(m){for(var v=-1,T=Ln(m.length,f);++v<T;)m[v]=u[v].call(this,m[v]);return Ts(l,this,m)})}),Em=Kt(function(l,u){var f=Ir(u,Va(Em));return Ki(l,N,n,u,f)}),TE=Kt(function(l,u){var f=Ir(u,Va(TE));return Ki(l,L,n,u,f)}),M2=Gi(function(l,u){return Ki(l,B,n,n,n,u)});function N2(l,u){if(typeof l!="function")throw new Vs(o);return u=u===n?u:jt(u),Kt(l,u)}function L2(l,u){if(typeof l!="function")throw new Vs(o);return u=u==null?0:pn(jt(u),0),Kt(function(f){var m=f[u],v=Cr(f,0,u);return m&&Tr(v,m),Ts(l,this,v)})}function U2(l,u,f){var m=!0,v=!0;if(typeof l!="function")throw new Vs(o);return He(f)&&(m="leading"in f?!!f.leading:m,v="trailing"in f?!!f.trailing:v),EE(l,u,{leading:m,maxWait:u,trailing:v})}function F2(l){return _E(l,1)}function V2(l,u){return Em(om(u),l)}function B2(){if(!arguments.length)return[];var l=arguments[0];return Bt(l)?l:[l]}function $2(l){return $s(l,_)}function H2(l,u){return u=typeof u=="function"?u:n,$s(l,_,u)}function W2(l){return $s(l,p|_)}function z2(l,u){return u=typeof u=="function"?u:n,$s(l,p|_,u)}function j2(l,u){return u==null||uw(l,u,yn(u))}function Zs(l,u){return l===u||l!==l&&u!==u}var q2=Yh(Gg),K2=Yh(function(l,u){return l>=u}),Co=mw(function(){return arguments}())?mw:function(l){return Ge(l)&&_e.call(l,"callee")&&!nw.call(l,"callee")},Bt=F.isArray,G2=U0?Is(U0):nN;function hs(l){return l!=null&&id(l.length)&&!Qi(l)}function nn(l){return Ge(l)&&hs(l)}function Y2(l){return l===!0||l===!1||Ge(l)&&Zn(l)==dt}var Pr=cM||Om,Q2=F0?Is(F0):sN;function X2(l){return Ge(l)&&l.nodeType===1&&!ic(l)}function J2(l){if(l==null)return!0;if(hs(l)&&(Bt(l)||typeof l=="string"||typeof l.splice=="function"||Pr(l)||Ba(l)||Co(l)))return!l.length;var u=Un(l);if(u==C||u==nt)return!l.size;if(nc(l))return!Xg(l).length;for(var f in l)if(_e.call(l,f))return!1;return!0}function Z2(l,u){return Zl(l,u)}function tU(l,u,f){f=typeof f=="function"?f:n;var m=f?f(l,u):n;return m===n?Zl(l,u,n,f):!!m}function Tm(l){if(!Ge(l))return!1;var u=Zn(l);return u==te||u==_t||typeof l.message=="string"&&typeof l.name=="string"&&!ic(l)}function eU(l){return typeof l=="number"&&iw(l)}function Qi(l){if(!He(l))return!1;var u=Zn(l);return u==me||u==x||u==G||u==ht}function IE(l){return typeof l=="number"&&l==jt(l)}function id(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=xt}function He(l){var u=typeof l;return l!=null&&(u=="object"||u=="function")}function Ge(l){return l!=null&&typeof l=="object"}var AE=V0?Is(V0):rN;function nU(l,u){return l===u||Qg(l,u,fm(u))}function sU(l,u,f){return f=typeof f=="function"?f:n,Qg(l,u,fm(u),f)}function iU(l){return xE(l)&&l!=+l}function rU(l){if(HN(l))throw new Ft(r);return _w(l)}function oU(l){return l===null}function aU(l){return l==null}function xE(l){return typeof l=="number"||Ge(l)&&Zn(l)==U}function ic(l){if(!Ge(l)||Zn(l)!=$)return!1;var u=Dh(l);if(u===null)return!0;var f=_e.call(u,"constructor")&&u.constructor;return typeof f=="function"&&f instanceof f&&Sh.call(f)==sM}var Im=B0?Is(B0):oN;function lU(l){return IE(l)&&l>=-xt&&l<=xt}var SE=$0?Is($0):aN;function rd(l){return typeof l=="string"||!Bt(l)&&Ge(l)&&Zn(l)==Z}function xs(l){return typeof l=="symbol"||Ge(l)&&Zn(l)==ft}var Ba=H0?Is(H0):lN;function cU(l){return l===n}function uU(l){return Ge(l)&&Un(l)==yt}function hU(l){return Ge(l)&&Zn(l)==Ot}var dU=Yh(Jg),fU=Yh(function(l,u){return l<=u});function RE(l){if(!l)return[];if(hs(l))return rd(l)?Xs(l):us(l);if(jl&&l[jl])return jO(l[jl]());var u=Un(l),f=u==C?Vg:u==nt?Ih:$a;return f(l)}function Xi(l){if(!l)return l===0?l:0;if(l=zs(l),l===wt||l===-wt){var u=l<0?-1:1;return u*Ee}return l===l?l:0}function jt(l){var u=Xi(l),f=u%1;return u===u?f?u-f:u:0}function CE(l){return l?Ao(jt(l),0,Re):0}function zs(l){if(typeof l=="number")return l;if(xs(l))return on;if(He(l)){var u=typeof l.valueOf=="function"?l.valueOf():l;l=He(u)?u+"":u}if(typeof l!="string")return l===0?l:+l;l=G0(l);var f=Gk.test(l);return f||Qk.test(l)?RO(l.slice(2),f?2:8):Kk.test(l)?on:+l}function PE(l){return pi(l,ds(l))}function pU(l){return l?Ao(jt(l),-xt,xt):l===0?l:0}function fe(l){return l==null?"":As(l)}var gU=Ua(function(l,u){if(nc(u)||hs(u)){pi(u,yn(u),l);return}for(var f in u)_e.call(u,f)&&Ql(l,f,u[f])}),DE=Ua(function(l,u){pi(u,ds(u),l)}),od=Ua(function(l,u,f,m){pi(u,ds(u),l,m)}),mU=Ua(function(l,u,f,m){pi(u,yn(u),l,m)}),_U=Gi(jg);function yU(l,u){var f=La(l);return u==null?f:cw(f,u)}var vU=Kt(function(l,u){l=Ie(l);var f=-1,m=u.length,v=m>2?u[2]:n;for(v&&ts(u[0],u[1],v)&&(m=1);++f<m;)for(var T=u[f],S=ds(T),P=-1,M=S.length;++P<M;){var z=S[P],q=l[z];(q===n||Zs(q,Oa[z])&&!_e.call(l,z))&&(l[z]=T[z])}return l}),bU=Kt(function(l){return l.push(n,Gw),Ts(kE,n,l)});function wU(l,u){return z0(l,St(u,3),fi)}function EU(l,u){return z0(l,St(u,3),Kg)}function TU(l,u){return l==null?l:qg(l,St(u,3),ds)}function IU(l,u){return l==null?l:pw(l,St(u,3),ds)}function AU(l,u){return l&&fi(l,St(u,3))}function xU(l,u){return l&&Kg(l,St(u,3))}function SU(l){return l==null?[]:$h(l,yn(l))}function RU(l){return l==null?[]:$h(l,ds(l))}function Am(l,u,f){var m=l==null?n:xo(l,u);return m===n?f:m}function CU(l,u){return l!=null&&Xw(l,u,JM)}function xm(l,u){return l!=null&&Xw(l,u,ZM)}var PU=Ww(function(l,u,f){u!=null&&typeof u.toString!="function"&&(u=Rh.call(u)),l[u]=f},Rm(fs)),DU=Ww(function(l,u,f){u!=null&&typeof u.toString!="function"&&(u=Rh.call(u)),_e.call(l,u)?l[u].push(f):l[u]=[f]},St),kU=Kt(Jl);function yn(l){return hs(l)?aw(l):Xg(l)}function ds(l){return hs(l)?aw(l,!0):cN(l)}function OU(l,u){var f={};return u=St(u,3),fi(l,function(m,v,T){qi(f,u(m,v,T),m)}),f}function MU(l,u){var f={};return u=St(u,3),fi(l,function(m,v,T){qi(f,v,u(m,v,T))}),f}var NU=Ua(function(l,u,f){Hh(l,u,f)}),kE=Ua(function(l,u,f,m){Hh(l,u,f,m)}),LU=Gi(function(l,u){var f={};if(l==null)return f;var m=!1;u=Be(u,function(T){return T=Rr(T,l),m||(m=T.length>1),T}),pi(l,hm(l),f),m&&(f=$s(f,p|g|_,PN));for(var v=u.length;v--;)sm(f,u[v]);return f});function UU(l,u){return OE(l,sd(St(u)))}var FU=Gi(function(l,u){return l==null?{}:hN(l,u)});function OE(l,u){if(l==null)return{};var f=Be(hm(l),function(m){return[m]});return u=St(u),Iw(l,f,function(m,v){return u(m,v[0])})}function VU(l,u,f){u=Rr(u,l);var m=-1,v=u.length;for(v||(v=1,l=n);++m<v;){var T=l==null?n:l[gi(u[m])];T===n&&(m=v,T=f),l=Qi(T)?T.call(l):T}return l}function BU(l,u,f){return l==null?l:tc(l,u,f)}function $U(l,u,f,m){return m=typeof m=="function"?m:n,l==null?l:tc(l,u,f,m)}var ME=qw(yn),NE=qw(ds);function HU(l,u,f){var m=Bt(l),v=m||Pr(l)||Ba(l);if(u=St(u,4),f==null){var T=l&&l.constructor;v?f=m?new T:[]:He(l)?f=Qi(T)?La(Dh(l)):{}:f={}}return(v?Fs:fi)(l,function(S,P,M){return u(f,S,P,M)}),f}function WU(l,u){return l==null?!0:sm(l,u)}function zU(l,u,f){return l==null?l:Cw(l,u,om(f))}function jU(l,u,f,m){return m=typeof m=="function"?m:n,l==null?l:Cw(l,u,om(f),m)}function $a(l){return l==null?[]:Fg(l,yn(l))}function qU(l){return l==null?[]:Fg(l,ds(l))}function KU(l,u,f){return f===n&&(f=u,u=n),f!==n&&(f=zs(f),f=f===f?f:0),u!==n&&(u=zs(u),u=u===u?u:0),Ao(zs(l),u,f)}function GU(l,u,f){return u=Xi(u),f===n?(f=u,u=0):f=Xi(f),l=zs(l),tN(l,u,f)}function YU(l,u,f){if(f&&typeof f!="boolean"&&ts(l,u,f)&&(u=f=n),f===n&&(typeof u=="boolean"?(f=u,u=n):typeof l=="boolean"&&(f=l,l=n)),l===n&&u===n?(l=0,u=1):(l=Xi(l),u===n?(u=l,l=0):u=Xi(u)),l>u){var m=l;l=u,u=m}if(f||l%1||u%1){var v=rw();return Ln(l+v*(u-l+SO("1e-"+((v+"").length-1))),u)}return tm(l,u)}var QU=Fa(function(l,u,f){return u=u.toLowerCase(),l+(f?LE(u):u)});function LE(l){return Sm(fe(l).toLowerCase())}function UE(l){return l=fe(l),l&&l.replace(Jk,BO).replace(_O,"")}function XU(l,u,f){l=fe(l),u=As(u);var m=l.length;f=f===n?m:Ao(jt(f),0,m);var v=f;return f-=u.length,f>=0&&l.slice(f,v)==u}function JU(l){return l=fe(l),l&&kk.test(l)?l.replace(p0,$O):l}function ZU(l){return l=fe(l),l&&Fk.test(l)?l.replace(Eg,"\\$&"):l}var tF=Fa(function(l,u,f){return l+(f?"-":"")+u.toLowerCase()}),eF=Fa(function(l,u,f){return l+(f?" ":"")+u.toLowerCase()}),nF=Bw("toLowerCase");function sF(l,u,f){l=fe(l),u=jt(u);var m=u?Da(l):0;if(!u||m>=u)return l;var v=(u-m)/2;return Gh(Nh(v),f)+l+Gh(Mh(v),f)}function iF(l,u,f){l=fe(l),u=jt(u);var m=u?Da(l):0;return u&&m<u?l+Gh(u-m,f):l}function rF(l,u,f){l=fe(l),u=jt(u);var m=u?Da(l):0;return u&&m<u?Gh(u-m,f)+l:l}function oF(l,u,f){return f||u==null?u=0:u&&(u=+u),fM(fe(l).replace(Tg,""),u||0)}function aF(l,u,f){return(f?ts(l,u,f):u===n)?u=1:u=jt(u),em(fe(l),u)}function lF(){var l=arguments,u=fe(l[0]);return l.length<3?u:u.replace(l[1],l[2])}var cF=Fa(function(l,u,f){return l+(f?"_":"")+u.toLowerCase()});function uF(l,u,f){return f&&typeof f!="number"&&ts(l,u,f)&&(u=f=n),f=f===n?Re:f>>>0,f?(l=fe(l),l&&(typeof u=="string"||u!=null&&!Im(u))&&(u=As(u),!u&&Pa(l))?Cr(Xs(l),0,f):l.split(u,f)):[]}var hF=Fa(function(l,u,f){return l+(f?" ":"")+Sm(u)});function dF(l,u,f){return l=fe(l),f=f==null?0:Ao(jt(f),0,l.length),u=As(u),l.slice(f,f+u.length)==u}function fF(l,u,f){var m=E.templateSettings;f&&ts(l,u,f)&&(u=n),l=fe(l),u=od({},u,m,Kw);var v=od({},u.imports,m.imports,Kw),T=yn(v),S=Fg(v,T),P,M,z=0,q=u.interpolate||vh,J="__p += '",at=Bg((u.escape||vh).source+"|"+q.source+"|"+(q===g0?qk:vh).source+"|"+(u.evaluate||vh).source+"|$","g"),vt="//# sourceURL="+(_e.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++EO+"]")+`
`;l.replace(at,function(Ct,Yt,ne,Ss,es,Rs){return ne||(ne=Ss),J+=l.slice(z,Rs).replace(Zk,HO),Yt&&(P=!0,J+=`' +
__e(`+Yt+`) +
'`),es&&(M=!0,J+=`';
`+es+`;
__p += '`),ne&&(J+=`' +
((__t = (`+ne+`)) == null ? '' : __t) +
'`),z=Rs+Ct.length,Ct}),J+=`';
`;var Rt=_e.call(u,"variable")&&u.variable;if(!Rt)J=`with (obj) {
`+J+`
}
`;else if(zk.test(Rt))throw new Ft(a);J=(M?J.replace(yh,""):J).replace(Ck,"$1").replace(Pk,"$1;"),J="function("+(Rt||"obj")+`) {
`+(Rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var qt=VE(function(){return le(T,vt+"return "+J).apply(n,S)});if(qt.source=J,Tm(qt))throw qt;return qt}function pF(l){return fe(l).toLowerCase()}function gF(l){return fe(l).toUpperCase()}function mF(l,u,f){if(l=fe(l),l&&(f||u===n))return G0(l);if(!l||!(u=As(u)))return l;var m=Xs(l),v=Xs(u),T=Y0(m,v),S=Q0(m,v)+1;return Cr(m,T,S).join("")}function _F(l,u,f){if(l=fe(l),l&&(f||u===n))return l.slice(0,J0(l)+1);if(!l||!(u=As(u)))return l;var m=Xs(l),v=Q0(m,Xs(u))+1;return Cr(m,0,v).join("")}function yF(l,u,f){if(l=fe(l),l&&(f||u===n))return l.replace(Tg,"");if(!l||!(u=As(u)))return l;var m=Xs(l),v=Y0(m,Xs(u));return Cr(m,v).join("")}function vF(l,u){var f=bt,m=At;if(He(u)){var v="separator"in u?u.separator:v;f="length"in u?jt(u.length):f,m="omission"in u?As(u.omission):m}l=fe(l);var T=l.length;if(Pa(l)){var S=Xs(l);T=S.length}if(f>=T)return l;var P=f-Da(m);if(P<1)return m;var M=S?Cr(S,0,P).join(""):l.slice(0,P);if(v===n)return M+m;if(S&&(P+=M.length-P),Im(v)){if(l.slice(P).search(v)){var z,q=M;for(v.global||(v=Bg(v.source,fe(m0.exec(v))+"g")),v.lastIndex=0;z=v.exec(q);)var J=z.index;M=M.slice(0,J===n?P:J)}}else if(l.indexOf(As(v),P)!=P){var at=M.lastIndexOf(v);at>-1&&(M=M.slice(0,at))}return M+m}function bF(l){return l=fe(l),l&&Dk.test(l)?l.replace(f0,YO):l}var wF=Fa(function(l,u,f){return l+(f?" ":"")+u.toUpperCase()}),Sm=Bw("toUpperCase");function FE(l,u,f){return l=fe(l),u=f?n:u,u===n?zO(l)?JO(l):NO(l):l.match(u)||[]}var VE=Kt(function(l,u){try{return Ts(l,n,u)}catch(f){return Tm(f)?f:new Ft(f)}}),EF=Gi(function(l,u){return Fs(u,function(f){f=gi(f),qi(l,f,wm(l[f],l))}),l});function TF(l){var u=l==null?0:l.length,f=St();return l=u?Be(l,function(m){if(typeof m[1]!="function")throw new Vs(o);return[f(m[0]),m[1]]}):[],Kt(function(m){for(var v=-1;++v<u;){var T=l[v];if(Ts(T[0],this,m))return Ts(T[1],this,m)}})}function IF(l){return YM($s(l,p))}function Rm(l){return function(){return l}}function AF(l,u){return l==null||l!==l?u:l}var xF=Hw(),SF=Hw(!0);function fs(l){return l}function Cm(l){return yw(typeof l=="function"?l:$s(l,p))}function RF(l){return bw($s(l,p))}function CF(l,u){return ww(l,$s(u,p))}var PF=Kt(function(l,u){return function(f){return Jl(f,l,u)}}),DF=Kt(function(l,u){return function(f){return Jl(l,f,u)}});function Pm(l,u,f){var m=yn(u),v=$h(u,m);f==null&&!(He(u)&&(v.length||!m.length))&&(f=u,u=l,l=this,v=$h(u,yn(u)));var T=!(He(f)&&"chain"in f)||!!f.chain,S=Qi(l);return Fs(v,function(P){var M=u[P];l[P]=M,S&&(l.prototype[P]=function(){var z=this.__chain__;if(T||z){var q=l(this.__wrapped__),J=q.__actions__=us(this.__actions__);return J.push({func:M,args:arguments,thisArg:l}),q.__chain__=z,q}return M.apply(l,Tr([this.value()],arguments))})}),l}function kF(){return An._===this&&(An._=iM),this}function Dm(){}function OF(l){return l=jt(l),Kt(function(u){return Ew(u,l)})}var MF=lm(Be),NF=lm(W0),LF=lm(Og);function BE(l){return gm(l)?Mg(gi(l)):dN(l)}function UF(l){return function(u){return l==null?n:xo(l,u)}}var FF=zw(),VF=zw(!0);function km(){return[]}function Om(){return!1}function BF(){return{}}function $F(){return""}function HF(){return!0}function WF(l,u){if(l=jt(l),l<1||l>xt)return[];var f=Re,m=Ln(l,Re);u=St(u),l-=Re;for(var v=Ug(m,u);++f<l;)u(f);return v}function zF(l){return Bt(l)?Be(l,gi):xs(l)?[l]:us(oE(fe(l)))}function jF(l){var u=++nM;return fe(l)+u}var qF=Kh(function(l,u){return l+u},0),KF=cm("ceil"),GF=Kh(function(l,u){return l/u},1),YF=cm("floor");function QF(l){return l&&l.length?Bh(l,fs,Gg):n}function XF(l,u){return l&&l.length?Bh(l,St(u,2),Gg):n}function JF(l){return q0(l,fs)}function ZF(l,u){return q0(l,St(u,2))}function tV(l){return l&&l.length?Bh(l,fs,Jg):n}function eV(l,u){return l&&l.length?Bh(l,St(u,2),Jg):n}var nV=Kh(function(l,u){return l*u},1),sV=cm("round"),iV=Kh(function(l,u){return l-u},0);function rV(l){return l&&l.length?Lg(l,fs):0}function oV(l,u){return l&&l.length?Lg(l,St(u,2)):0}return E.after=R2,E.ary=_E,E.assign=gU,E.assignIn=DE,E.assignInWith=od,E.assignWith=mU,E.at=_U,E.before=yE,E.bind=wm,E.bindAll=EF,E.bindKey=vE,E.castArray=B2,E.chain=pE,E.chunk=YN,E.compact=QN,E.concat=XN,E.cond=TF,E.conforms=IF,E.constant=Rm,E.countBy=r2,E.create=yU,E.curry=bE,E.curryRight=wE,E.debounce=EE,E.defaults=vU,E.defaultsDeep=bU,E.defer=C2,E.delay=P2,E.difference=JN,E.differenceBy=ZN,E.differenceWith=tL,E.drop=eL,E.dropRight=nL,E.dropRightWhile=sL,E.dropWhile=iL,E.fill=rL,E.filter=a2,E.flatMap=u2,E.flatMapDeep=h2,E.flatMapDepth=d2,E.flatten=uE,E.flattenDeep=oL,E.flattenDepth=aL,E.flip=D2,E.flow=xF,E.flowRight=SF,E.fromPairs=lL,E.functions=SU,E.functionsIn=RU,E.groupBy=f2,E.initial=uL,E.intersection=hL,E.intersectionBy=dL,E.intersectionWith=fL,E.invert=PU,E.invertBy=DU,E.invokeMap=g2,E.iteratee=Cm,E.keyBy=m2,E.keys=yn,E.keysIn=ds,E.map=td,E.mapKeys=OU,E.mapValues=MU,E.matches=RF,E.matchesProperty=CF,E.memoize=nd,E.merge=NU,E.mergeWith=kE,E.method=PF,E.methodOf=DF,E.mixin=Pm,E.negate=sd,E.nthArg=OF,E.omit=LU,E.omitBy=UU,E.once=k2,E.orderBy=_2,E.over=MF,E.overArgs=O2,E.overEvery=NF,E.overSome=LF,E.partial=Em,E.partialRight=TE,E.partition=y2,E.pick=FU,E.pickBy=OE,E.property=BE,E.propertyOf=UF,E.pull=_L,E.pullAll=dE,E.pullAllBy=yL,E.pullAllWith=vL,E.pullAt=bL,E.range=FF,E.rangeRight=VF,E.rearg=M2,E.reject=w2,E.remove=wL,E.rest=N2,E.reverse=vm,E.sampleSize=T2,E.set=BU,E.setWith=$U,E.shuffle=I2,E.slice=EL,E.sortBy=S2,E.sortedUniq=CL,E.sortedUniqBy=PL,E.split=uF,E.spread=L2,E.tail=DL,E.take=kL,E.takeRight=OL,E.takeRightWhile=ML,E.takeWhile=NL,E.tap=QL,E.throttle=U2,E.thru=Zh,E.toArray=RE,E.toPairs=ME,E.toPairsIn=NE,E.toPath=zF,E.toPlainObject=PE,E.transform=HU,E.unary=F2,E.union=LL,E.unionBy=UL,E.unionWith=FL,E.uniq=VL,E.uniqBy=BL,E.uniqWith=$L,E.unset=WU,E.unzip=bm,E.unzipWith=fE,E.update=zU,E.updateWith=jU,E.values=$a,E.valuesIn=qU,E.without=HL,E.words=FE,E.wrap=V2,E.xor=WL,E.xorBy=zL,E.xorWith=jL,E.zip=qL,E.zipObject=KL,E.zipObjectDeep=GL,E.zipWith=YL,E.entries=ME,E.entriesIn=NE,E.extend=DE,E.extendWith=od,Pm(E,E),E.add=qF,E.attempt=VE,E.camelCase=QU,E.capitalize=LE,E.ceil=KF,E.clamp=KU,E.clone=$2,E.cloneDeep=W2,E.cloneDeepWith=z2,E.cloneWith=H2,E.conformsTo=j2,E.deburr=UE,E.defaultTo=AF,E.divide=GF,E.endsWith=XU,E.eq=Zs,E.escape=JU,E.escapeRegExp=ZU,E.every=o2,E.find=l2,E.findIndex=lE,E.findKey=wU,E.findLast=c2,E.findLastIndex=cE,E.findLastKey=EU,E.floor=YF,E.forEach=gE,E.forEachRight=mE,E.forIn=TU,E.forInRight=IU,E.forOwn=AU,E.forOwnRight=xU,E.get=Am,E.gt=q2,E.gte=K2,E.has=CU,E.hasIn=xm,E.head=hE,E.identity=fs,E.includes=p2,E.indexOf=cL,E.inRange=GU,E.invoke=kU,E.isArguments=Co,E.isArray=Bt,E.isArrayBuffer=G2,E.isArrayLike=hs,E.isArrayLikeObject=nn,E.isBoolean=Y2,E.isBuffer=Pr,E.isDate=Q2,E.isElement=X2,E.isEmpty=J2,E.isEqual=Z2,E.isEqualWith=tU,E.isError=Tm,E.isFinite=eU,E.isFunction=Qi,E.isInteger=IE,E.isLength=id,E.isMap=AE,E.isMatch=nU,E.isMatchWith=sU,E.isNaN=iU,E.isNative=rU,E.isNil=aU,E.isNull=oU,E.isNumber=xE,E.isObject=He,E.isObjectLike=Ge,E.isPlainObject=ic,E.isRegExp=Im,E.isSafeInteger=lU,E.isSet=SE,E.isString=rd,E.isSymbol=xs,E.isTypedArray=Ba,E.isUndefined=cU,E.isWeakMap=uU,E.isWeakSet=hU,E.join=pL,E.kebabCase=tF,E.last=Ws,E.lastIndexOf=gL,E.lowerCase=eF,E.lowerFirst=nF,E.lt=dU,E.lte=fU,E.max=QF,E.maxBy=XF,E.mean=JF,E.meanBy=ZF,E.min=tV,E.minBy=eV,E.stubArray=km,E.stubFalse=Om,E.stubObject=BF,E.stubString=$F,E.stubTrue=HF,E.multiply=nV,E.nth=mL,E.noConflict=kF,E.noop=Dm,E.now=ed,E.pad=sF,E.padEnd=iF,E.padStart=rF,E.parseInt=oF,E.random=YU,E.reduce=v2,E.reduceRight=b2,E.repeat=aF,E.replace=lF,E.result=VU,E.round=sV,E.runInContext=k,E.sample=E2,E.size=A2,E.snakeCase=cF,E.some=x2,E.sortedIndex=TL,E.sortedIndexBy=IL,E.sortedIndexOf=AL,E.sortedLastIndex=xL,E.sortedLastIndexBy=SL,E.sortedLastIndexOf=RL,E.startCase=hF,E.startsWith=dF,E.subtract=iV,E.sum=rV,E.sumBy=oV,E.template=fF,E.times=WF,E.toFinite=Xi,E.toInteger=jt,E.toLength=CE,E.toLower=pF,E.toNumber=zs,E.toSafeInteger=pU,E.toString=fe,E.toUpper=gF,E.trim=mF,E.trimEnd=_F,E.trimStart=yF,E.truncate=vF,E.unescape=bF,E.uniqueId=jF,E.upperCase=wF,E.upperFirst=Sm,E.each=gE,E.eachRight=mE,E.first=hE,Pm(E,function(){var l={};return fi(E,function(u,f){_e.call(E.prototype,f)||(l[f]=u)}),l}(),{chain:!1}),E.VERSION=s,Fs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){E[l].placeholder=E}),Fs(["drop","take"],function(l,u){Qt.prototype[l]=function(f){f=f===n?1:pn(jt(f),0);var m=this.__filtered__&&!u?new Qt(this):this.clone();return m.__filtered__?m.__takeCount__=Ln(f,m.__takeCount__):m.__views__.push({size:Ln(f,Re),type:l+(m.__dir__<0?"Right":"")}),m},Qt.prototype[l+"Right"]=function(f){return this.reverse()[l](f).reverse()}}),Fs(["filter","map","takeWhile"],function(l,u){var f=u+1,m=f==qe||f==Nt;Qt.prototype[l]=function(v){var T=this.clone();return T.__iteratees__.push({iteratee:St(v,3),type:f}),T.__filtered__=T.__filtered__||m,T}}),Fs(["head","last"],function(l,u){var f="take"+(u?"Right":"");Qt.prototype[l]=function(){return this[f](1).value()[0]}}),Fs(["initial","tail"],function(l,u){var f="drop"+(u?"":"Right");Qt.prototype[l]=function(){return this.__filtered__?new Qt(this):this[f](1)}}),Qt.prototype.compact=function(){return this.filter(fs)},Qt.prototype.find=function(l){return this.filter(l).head()},Qt.prototype.findLast=function(l){return this.reverse().find(l)},Qt.prototype.invokeMap=Kt(function(l,u){return typeof l=="function"?new Qt(this):this.map(function(f){return Jl(f,l,u)})}),Qt.prototype.reject=function(l){return this.filter(sd(St(l)))},Qt.prototype.slice=function(l,u){l=jt(l);var f=this;return f.__filtered__&&(l>0||u<0)?new Qt(f):(l<0?f=f.takeRight(-l):l&&(f=f.drop(l)),u!==n&&(u=jt(u),f=u<0?f.dropRight(-u):f.take(u-l)),f)},Qt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Qt.prototype.toArray=function(){return this.take(Re)},fi(Qt.prototype,function(l,u){var f=/^(?:filter|find|map|reject)|While$/.test(u),m=/^(?:head|last)$/.test(u),v=E[m?"take"+(u=="last"?"Right":""):u],T=m||/^find/.test(u);v&&(E.prototype[u]=function(){var S=this.__wrapped__,P=m?[1]:arguments,M=S instanceof Qt,z=P[0],q=M||Bt(S),J=function(Yt){var ne=v.apply(E,Tr([Yt],P));return m&&at?ne[0]:ne};q&&f&&typeof z=="function"&&z.length!=1&&(M=q=!1);var at=this.__chain__,vt=!!this.__actions__.length,Rt=T&&!at,qt=M&&!vt;if(!T&&q){S=qt?S:new Qt(this);var Ct=l.apply(S,P);return Ct.__actions__.push({func:Zh,args:[J],thisArg:n}),new Bs(Ct,at)}return Rt&&qt?l.apply(this,P):(Ct=this.thru(J),Rt?m?Ct.value()[0]:Ct.value():Ct)})}),Fs(["pop","push","shift","sort","splice","unshift"],function(l){var u=Ah[l],f=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",m=/^(?:pop|shift)$/.test(l);E.prototype[l]=function(){var v=arguments;if(m&&!this.__chain__){var T=this.value();return u.apply(Bt(T)?T:[],v)}return this[f](function(S){return u.apply(Bt(S)?S:[],v)})}}),fi(Qt.prototype,function(l,u){var f=E[u];if(f){var m=f.name+"";_e.call(Na,m)||(Na[m]=[]),Na[m].push({name:u,func:f})}}),Na[qh(n,A).name]=[{name:"wrapper",func:n}],Qt.prototype.clone=bM,Qt.prototype.reverse=wM,Qt.prototype.value=EM,E.prototype.at=XL,E.prototype.chain=JL,E.prototype.commit=ZL,E.prototype.next=t2,E.prototype.plant=n2,E.prototype.reverse=s2,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=i2,E.prototype.first=E.prototype.head,jl&&(E.prototype[jl]=e2),E},ka=ZO();wo?((wo.exports=ka)._=ka,Cg._=ka):An._=ka}).call(dc)})(zf,zf.exports);var R8=zf.exports;const gA=S8(R8),qP=e=>(Yn("data-v-c2aa726b"),e=e(),Qn(),e),C8={class:"container"},P8={class:"signup-card"},D8=qP(()=>I("h1",null,"Sign Up",-1)),k8={class:"error-message"},O8={class:"error-message"},M8=_p('<option value="" disabled selected hidden data-v-c2aa726b>Select Default Currency</option><option value="SGD" data-v-c2aa726b>SGD</option><option value="AUD" data-v-c2aa726b>AUD</option><option value="BGN" data-v-c2aa726b>BGN</option><option value="BRL" data-v-c2aa726b>BRL</option><option value="CAD" data-v-c2aa726b>CAD</option><option value="CHF" data-v-c2aa726b>CHF</option><option value="CNY" data-v-c2aa726b>CNY</option><option value="CZK" data-v-c2aa726b>CZK</option><option value="DKK" data-v-c2aa726b>DKK</option><option value="EUR" data-v-c2aa726b>EUR</option><option value="GBP" data-v-c2aa726b>GBP</option><option value="HKD" data-v-c2aa726b>HKD</option><option value="HRK" data-v-c2aa726b>HRK</option><option value="HUF" data-v-c2aa726b>HUF</option><option value="IDR" data-v-c2aa726b>IDR</option><option value="ILS" data-v-c2aa726b>ILS</option><option value="INR" data-v-c2aa726b>INR</option><option value="ISK" data-v-c2aa726b>ISK</option><option value="JPY" data-v-c2aa726b>JPY</option><option value="KRW" data-v-c2aa726b>KRW</option><option value="MYR" data-v-c2aa726b>MYR</option><option value="NZD" data-v-c2aa726b>NZD</option><option value="PHP" data-v-c2aa726b>PHP</option><option value="PLN" data-v-c2aa726b>PLN</option><option value="RON" data-v-c2aa726b>RON</option><option value="SEK" data-v-c2aa726b>SEK</option><option value="THB" data-v-c2aa726b>THB</option><option value="TRY" data-v-c2aa726b>TRY</option><option value="USD" data-v-c2aa726b>USD</option><option value="ZAR" data-v-c2aa726b>ZAR</option>',31),N8=[M8],L8=qP(()=>I("button",{type:"submit"},"Let's Tally!",-1)),U8={__name:"SignupPage",setup(e){const t=We(""),n=We(""),s=We(""),i=We(""),r=We(""),o=We(""),a=We(!1),c=We(!1),h=We(!1),d=We(""),p=We(""),g=h8(),_=async()=>{a.value=!1;const V=ct(mt,"Usernames",o.value);try{const B=await he(V);a.value=B.exists()}catch(B){console.error("Error checking username uniqueness:",B)}},y=gA.debounce(_,500),b=async()=>{c.value=!1,console.log("Checking email:",t.value);const V=ue(mt,"Users"),B=ha(V,Rb("Email","==",t.value));try{const tt=await Ns(B);c.value=!tt.empty,console.log("Is email taken:",c.value)}catch(tt){console.error("Error checking email uniqueness:",tt)}},w=gA.debounce(b,500);function A(){h.value=!1,n.value.length<6?(h.value=!0,d.value="Password must be at least 6 characters long."):R(n.value)&&D(n.value)&&O(n.value)||(h.value=!0,d.value="Password must contain at least 1 number, 1 uppercase and lowercase letter, 1 special character.")}function R(V){return/[^a-zA-Z0-9]/.test(V)}function D(V){const B=/[A-Z]/.test(V),tt=/[a-z]/.test(V);return!!(B&&tt)}function O(V){return/\d/.test(V)}async function N(){if(console.log("submitHandler function called"),a.value=!1,c.value=!1,h.value=!1,await w(),!c.value&&(await y(),!a.value)){if(A(),h.value){console.log("Password did not meet requirements.");return}try{const V=await e3(fa,t.value,n.value);console.log("User created with UID:",V.user.uid),p.value=V.user.uid,await L(p.value,t.value,o.value,s.value,r.value,i.value),console.log("User data written to Firestore"),await ni(ct(mt,"Usernames",o.value),{UID:p.value}),g.push("/")}catch(V){V.code==="auth/email-already-in-use"?console.log("Email already in use. Please use another email!"):V.code==="auth/weak-password"?console.log("Password must be at least 6 characters long."):console.error(V)}}}async function L(V,B,tt,bt,At,kt){await ni(ct(mt,"Users",V),{Email:B,Username:tt,Currency:bt,FirstName:At,LastName:kt,GroupTrips:[]})}return(V,B)=>(W(),j("div",C8,[I("div",P8,[D8,I("form",{onSubmit:Wu(N,["prevent"])},[Ae(I("input",{id:"firstName",type:"text","onUpdate:modelValue":B[0]||(B[0]=tt=>r.value=tt),placeholder:"First Name",required:""},null,512),[[gn,r.value]]),Ae(I("input",{id:"lastName",type:"text","onUpdate:modelValue":B[1]||(B[1]=tt=>i.value=tt),placeholder:"Last Name"},null,512),[[gn,i.value]]),Ae(I("input",{id:"email",type:"email","onUpdate:modelValue":B[2]||(B[2]=tt=>t.value=tt),onInput:B[3]||(B[3]=(...tt)=>Ei(w)&&Ei(w)(...tt)),placeholder:"Email",required:""},null,544),[[gn,t.value]]),Ae(I("div",k8,"Email already in use. Please login.",512),[[Vm,c.value]]),Ae(I("input",{id:"password",type:"password","onUpdate:modelValue":B[4]||(B[4]=tt=>n.value=tt),onInput:A,placeholder:"Password",required:""},null,544),[[gn,n.value]]),Ae(I("div",{class:"error-message"},ot(d.value),513),[[Vm,h.value]]),Ae(I("input",{id:"username",type:"text","onUpdate:modelValue":B[5]||(B[5]=tt=>o.value=tt),onInput:B[6]||(B[6]=(...tt)=>Ei(y)&&Ei(y)(...tt)),placeholder:"Username",required:""},null,544),[[gn,o.value]]),Ae(I("div",O8,"Username already taken. Please choose another one!",512),[[Vm,a.value]]),Ae(I("select",{"onUpdate:modelValue":B[7]||(B[7]=tt=>s.value=tt)},N8,512),[[lu,s.value]]),L8],32)])]))}},F8=en(U8,[["__scopeId","data-v-c2aa726b"]]),V8={props:{isVisible:Boolean},data(){return{userID:"",tripName:"",selectedMembers:[],currency:"",allUsers:[],tripID:"",searchTerm:"",showDropdown:!1,filteredUsers:[],tempSelectedImage:null,tempSelectedPhotoName:null,tempFile:null}},computed:{availableUsers(){return this.allUsers.filter(e=>!this.selectedMembers.some(t=>t.userID===e.userID))},filteredUsers(){if(!this.searchTerm)return this.availableUsers;const e=this.searchTerm.toLowerCase();return this.availableUsers.filter(t=>t.username.toLowerCase().includes(e))}},watch:{searchTerm(e){e.length>0?this.showDropdown=!0:this.showDropdown=!1}},async created(){await this.fetchUsers()},emits:["update:isVisible","refreshTrips"],async created(){await this.fetchUsers()},methods:{keepDropdownOpen(e){e.preventDefault(),setTimeout(()=>{this.showDropdown=this.searchTerm.trim().length>0},300)},selectUser(e){this.selectedMembers.push(e),this.searchTerm="",this.showDropdown=!1},async fetchUsers(){const e=ue(mt,"Usernames"),t=await Ns(e);this.allUsers=t.docs.map(n=>({username:n.id,userID:n.data().UID}))},addSelectedMember(e){const t=e.target.value,n=this.allUsers.find(s=>s.userID===t);n&&!this.selectedMembers.some(s=>s.userID===n.userID)&&this.selectedMembers.push(n),e.target.value=""},removeSelectedMember(e){this.selectedMembers.splice(e,1)},async createTrip(){await this.fetchUserData();var e=this.selectedMembers.map(t=>t.userID);e.includes(this.userID)||e.push(this.userID);try{if(this.tempFile){const s=Ub(),i=CP(s,`image/${this.tempSelectedPhotoName}`),r=await SP(i,this.tempFile),o=await RP(r.ref);this.selectedPhotoName=this.tempSelectedPhotoName;const a=await a_(ue(mt,"Trips"),{Members:e,TripName:this.tripName,Currency:this.currency,image:o});this.tripID=a.id,console.log("New trip added with ID: "+this.tripID)}else{const s=await a_(ue(mt,"Trips"),{Members:e,TripName:this.tripName,Currency:this.currency,image:""});this.tripID=s.id,console.log("New trip added with ID: "+this.tripID)}for(const s of e){const i=ct(mt,"Users",s);try{await rs(i,{GroupTrips:by(this.tripID)}),this.closeModal(),console.log("Trip added to user with userID: "+s)}catch(r){console.error("Error updating user document: ",r)}}const t=ue(mt,"Trips",this.tripID,"Budgets"),n=[{category:"Food",allocated:0,used:0,order:1},{category:"Shopping",allocated:0,used:0,order:2},{category:"Transport",allocated:0,used:0,order:3},{category:"Entertainment",allocated:0,used:0,order:4},{category:"Accommodations",allocated:0,used:0,order:5},{category:"Miscellaneous",allocated:0,used:0,order:6}];for(const s of n)await a_(t,s);this.$emit("refreshTrips",this.tripID)}catch(t){console.error("Error adding trip document: ",t)}this.tripName="",this.selectedMembers=[],this.currency=""},closeModal(){this.tripName="",this.selectedMembers=[],this.currency="",this.showDropdown=!1,this.$emit("update:isVisible",!1)},userList(){},async fetchUserData(){const e=fa.currentUser;console.log(e),e?this.userID=e.uid:console.error("No user is currently authenticated.")},tempDisplayPhoto(e){const t=e.target.files[0];if(t)try{const n=new FileReader;n.onload=s=>{this.tempSelectedImage=s.target.result,this.tempSelectedPhotoName=t.name},n.readAsDataURL(t),this.tempFile=t}catch(n){console.error("Error reading image file:",n)}}}},B8={key:0,class:"modal-overlay"},$8={class:"modal"},H8=I("h2",null,"New Group Trip",-1),W8=I("br",null,null,-1),z8={class:"select-wrapper"},j8={key:0,class:"custom-dropdown"},q8=["onClick"],K8={class:"selected-items"},G8={key:0,class:"placeholder"},Y8=["onClick"],Q8=_p('<option value="" disabled selected hidden>Select Default Currency</option><option value="SGD">SGD</option><option value="AUD">AUD</option><option value="BGN">BGN</option><option value="BRL">BRL</option><option value="CAD">CAD</option><option value="CHF">CHF</option><option value="CNY">CNY</option><option value="CZK">CZK</option><option value="DKK">DKK</option><option value="EUR">EUR</option><option value="GBP">GBP</option><option value="HKD">HKD</option><option value="HRK">HRK</option><option value="HUF">HUF</option><option value="IDR">IDR</option><option value="ILS">ILS</option><option value="INR">INR</option><option value="ISK">ISK</option><option value="JPY">JPY</option><option value="KRW">KRW</option><option value="MYR">MYR</option><option value="NZD">NZD</option><option value="PHP">PHP</option><option value="PLN">PLN</option><option value="RON">RON</option><option value="SEK">SEK</option><option value="THB">THB</option><option value="TRY">TRY</option><option value="USD">USD</option><option value="ZAR">ZAR</option>',31),X8=[Q8],J8=I("br",null,null,-1),Z8={class:"photo-form"},tK=I("label",null,"Upload Group Picture ",-1),eK=I("label",{class:"image-upload-btn",for:"actual-btn"},"Choose Image",-1),nK=["src","alt"],sK=I("br",null,null,-1);function iK(e,t,n,s,i,r){return n.isVisible?(W(),j("div",B8,[I("div",$8,[I("button",{class:"closeModal",onClick:t[0]||(t[0]=(...o)=>r.closeModal&&r.closeModal(...o))},"X"),H8,Ae(I("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.tripName=o),type:"text",id:"tripName",placeholder:"Enter Trip Name"},null,512),[[gn,i.tripName]]),W8,I("div",z8,[Ae(I("input",{type:"text",class:"search-input","onUpdate:modelValue":t[2]||(t[2]=o=>i.searchTerm=o),placeholder:"Search username",onFocus:t[3]||(t[3]=o=>i.showDropdown=!0),onBlur:t[4]||(t[4]=(...o)=>r.keepDropdownOpen&&r.keepDropdownOpen(...o))},null,544),[[gn,i.searchTerm]]),i.showDropdown?(W(),j("div",j8,[(W(!0),j(xe,null,Pn(r.filteredUsers,o=>(W(),j("div",{key:o.userID,onClick:a=>r.selectUser(o),class:"dropdown-item"},ot(o.username),9,q8))),128))])):Xt("",!0),I("div",K8,[i.selectedMembers.length?Xt("",!0):(W(),j("span",G8,"Members")),(W(!0),j(xe,null,Pn(i.selectedMembers,(o,a)=>(W(),j("div",{key:a,class:"selected-item"},[bs(ot(o.username)+" ",1),I("span",{onClick:c=>r.removeSelectedMember(a)},"x",8,Y8)]))),128))])]),Ae(I("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>i.currency=o),class:"select-currency"},X8,512),[[lu,i.currency]]),J8,I("div",Z8,[tK,I("input",{type:"file",accept:"image/*",id:"actual-btn",onChange:t[6]||(t[6]=(...o)=>r.tempDisplayPhoto&&r.tempDisplayPhoto(...o)),hidden:""},null,32),eK,i.tempSelectedImage?(W(),j("img",{key:0,src:i.tempSelectedImage,alt:i.tempSelectedPhotoName,class:"temp-image"},null,8,nK)):Xt("",!0)]),sK,I("button",{type:"submit",class:"createTrip",onClick:t[7]||(t[7]=(...o)=>r.createTrip&&r.createTrip(...o))},"Create New Trip!")])])):Xt("",!0)}const rK=en(V8,[["render",iK]]),mA="/assets/default-trip-image-BZxx9dTe.jpg",oK="/assets/settingsicon-B2H0xA-S.png",aK={name:"TripList",data(){return{user:!1,userID:"",showModal:!1,showLeaveGroupConfirmation:!1,showEditTripNamePopup:!1,showChangeGroupImage:!1,selectedTrip:null,defaultTripImage:mA,trips:[],tripLength:0,tempSelectedImage:null,tempSelectedPhotoName:null,tempFile:null}},components:{AddNewTripModal:rK},methods:{getTripImage(e){return e.image?e.image:mA},toggleDropdown(e){const t=this.trips.find(n=>n.UID===e);t&&(t.dropdownVisible=!t.dropdownVisible),this.trips.forEach(n=>{n.UID!==e&&(n.dropdownVisible=!1)})},confirmLeaveGroup(e){this.showLeaveGroupConfirmation=!0,this.selectedTrip=e},renameGroup(e){this.showEditTripNamePopup=!0,this.selectedTrip=e,this.newTripName=e.TripName,e.dropdownVisible=!1},async updateTripName(){this.selectedTrip.TripName=this.newTripName,this.showEditTripNamePopup=!1,console.log(this.newTripName);const e=ct(mt,"Trips",this.selectedTrip.UID);try{await rs(e,{TripName:this.newTripName}),console.log("Trip name changed to "+this.newTripName)}catch(t){console.log(t)}this.selectedTrip=null},tempDisplayPhoto(e){const t=e.target.files[0];if(t)try{const n=new FileReader;n.onload=s=>{this.tempSelectedImage=s.target.result,this.tempSelectedPhotoName=t.name},n.readAsDataURL(t),this.tempFile=t}catch(n){console.error("Error reading image file:",n)}},async confirmChangePhoto(){if(this.tempFile)try{const e=Ub(),t=CP(e,`image/${this.tempSelectedPhotoName}`),n=await SP(t,this.tempFile),s=await RP(n.ref);this.selectedTrip.image=s,this.selectedPhotoName=this.tempSelectedPhotoName;const i=ct(mt,"Trips",this.selectedTrip.UID);await rs(i,{image:s}),console.log("step"),this.showChangeGroupImage=!1}catch(e){console.error("Error uploading image:",e)}},cancelEditTripName(){this.selectedTrip=null,this.showEditTripNamePopup=!1},changeGroupImage(e){this.selectedTrip=e,this.showChangeGroupImage=!0},cancelChangePhoto(){this.selectedTrip=null,this.tempSelectedImage=null,this.showChangeGroupImage=!1},async leaveGroup(e){console.log("leaving group:",e.TripName),this.showLeaveGroupConfirmation=!1,this.selectedTrip=null;const t=ct(mt,"Trips",e.UID);try{await rs(t,{Members:Wf(this.user.uid)}),console.log("User removed from trip's members array")}catch(i){console.error(i)}const n=ct(mt,"Users",this.user.uid);try{await rs(n,{GroupTrips:Wf(e.UID)}),console.log("Trip removed from user's GroupTrips array")}catch(i){console.error(i)}const s=this.trips.filter(i=>i.UID!==e.UID);this.trips=s},cancelLeaveGroup(){this.selectedTrip.dropdownVisible=!1,this.showLeaveGroupConfirmation=!1,this.selectedTrip=null},addNewTrip(){this.isPopupVisible=!this.isPopupVisible},async fetchUserTrips(e){const t=ct(mt,"Trips",e);try{const n=await he(t);this.trips.push({Currency:n.data().Currency,Members:n.data().Members,TripName:n.data().TripName,UID:e,dropdownVisible:!1,image:n.data().image}),console.log(e+" added to user's group trips")}catch(n){console.error("Error fetching user data:",n)}},async fetchUserData(){const e=ct(mt,"Users",this.user.uid);try{const t=await he(e);if(t.exists()){const n=t.data().GroupTrips;console.log(n),this.trips=[];for(const s of t.data().GroupTrips){const i=ct(mt,"Trips",s);try{const r=await he(i),o=r.data().image!==void 0?r.data().image:"";console.log(r.data().image),this.trips.push({Currency:r.data().Currency,Members:r.data().Members,TripName:r.data().TripName,image:o,UID:s})}catch(r){console.error("Error retrieving trip ",r)}}}else console.error("User document does not exist.")}catch(t){console.error("Error fetching user data:",t)}}},mounted(){const e=Xn();Qs(e,t=>{t&&(this.user=t,this.fetchUserData())})}},mo=e=>(Yn("data-v-fd1828ff"),e=e(),Qn(),e),lK={key:0,class:"trip-container"},cK=mo(()=>I("h1",null,"My Trips",-1)),uK={key:0,class:"no-trips-message"},hK={class:"trip-grid"},dK=["onClick"],fK=["onClick"],pK=mo(()=>I("img",{src:oK,alt:"Settings",class:"settings-icon"},null,-1)),gK={key:0,class:"dropdown-menu"},mK=["onClick"],_K=["onClick"],yK=["onClick"],vK={key:1,class:"confirmation-popup"},bK={class:"leave-group-confirmation"},wK={key:2,class:"edit-name-popup"},EK={class:"popup-content"},TK=mo(()=>I("h2",{class:"edit-name"},"Edit Trip Name",-1)),IK={class:"name-form"},AK=mo(()=>I("label",{class:"name",for:"name"},"Group Name:",-1)),xK={class:"button-container"},SK={key:3,class:"change-image-popup"},RK={class:"popup-content"},CK=mo(()=>I("h2",{class:"change-image"},"Change Group Image",-1)),PK=mo(()=>I("label",{class:"image-upload-btn",for:"actual-btn"},"Choose Image",-1)),DK=["src","alt"],kK={class:"button-container"},OK=["src","alt"],MK={class:"trip-name"},NK=mo(()=>I("span",null,"+",-1)),LK=[NK],UK={key:1},FK=mo(()=>I("h1",null," You must be logged in to view this! ",-1)),VK=[FK];function BK(e,t,n,s,i,r){const o=ze("router-link"),a=ze("AddNewTripModal");return i.user?(W(),j("div",lK,[cK,i.trips.length===0?(W(),j("div",uK," No trips created yet. Start tallying by clicking the '+' button! ")):Xt("",!0),I("div",hK,[(W(!0),j(xe,null,Pn(i.trips,c=>(W(),na(o,{key:c.UID,to:{name:"GroupPage",query:{tripName:c.TripName},params:{tripID:c.UID}},custom:""},{default:vs(({navigate:h})=>[I("div",{class:"trip-card",onClick:h},[I("div",{class:"settings",onClick:Wu(d=>r.toggleDropdown(c.UID),["stop"])},[pK,c.dropdownVisible?(W(),j("div",gK,[I("div",{class:"dropdown-item",onClick:d=>r.renameGroup(c)},"Rename Group",8,mK),I("div",{class:"dropdown-item",onClick:d=>r.changeGroupImage(c)},"Change Group Image",8,_K),I("div",{class:"dropdown-item",onClick:d=>r.confirmLeaveGroup(c)},"Leave Group",8,yK)])):Xt("",!0),i.showLeaveGroupConfirmation&&i.selectedTrip?(W(),j("div",vK,[I("div",null,[I("p",bK,'Are you sure you want to leave the group "'+ot(i.selectedTrip.TripName)+'"?',1),I("button",{class:"confirm-button",onClick:t[0]||(t[0]=d=>r.leaveGroup(i.selectedTrip))},"Leave Group"),I("button",{class:"cancel-button",onClick:t[1]||(t[1]=(...d)=>r.cancelLeaveGroup&&r.cancelLeaveGroup(...d))},"Cancel")])])):Xt("",!0),i.showEditTripNamePopup?(W(),j("div",wK,[I("div",EK,[TK,I("div",IK,[AK,Ae(I("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=d=>e.newTripName=d)},null,512),[[gn,e.newTripName]])]),I("div",xK,[I("button",{class:"save-edit",onClick:t[3]||(t[3]=(...d)=>r.updateTripName&&r.updateTripName(...d))},"Save"),I("button",{class:"cancel-edit",onClick:t[4]||(t[4]=(...d)=>r.cancelEditTripName&&r.cancelEditTripName(...d))},"Cancel")])])])):Xt("",!0),i.showChangeGroupImage?(W(),j("div",SK,[I("div",RK,[CK,I("input",{type:"file",accept:"image/*",id:"actual-btn",onChange:t[5]||(t[5]=(...d)=>r.tempDisplayPhoto&&r.tempDisplayPhoto(...d)),hidden:""},null,32),PK,i.tempSelectedImage?(W(),j("img",{key:0,src:i.tempSelectedImage,alt:i.tempSelectedPhotoName,class:"temp-image"},null,8,DK)):Xt("",!0),I("div",kK,[I("button",{class:"confirm-photo",onClick:t[6]||(t[6]=(...d)=>r.confirmChangePhoto&&r.confirmChangePhoto(...d))},"Confirm"),I("button",{class:"cancel-photo",onClick:t[7]||(t[7]=(...d)=>r.cancelChangePhoto&&r.cancelChangePhoto(...d))},"Cancel")])])])):Xt("",!0)],8,fK),I("img",{src:r.getTripImage(c),alt:c.TripName,class:"trip-image"},null,8,OK),I("div",MK,ot(c.TripName),1)],8,dK)]),_:2},1032,["to"]))),128))]),I("button",{class:"add-trip-button",onClick:t[8]||(t[8]=c=>i.showModal=!0)},LK),Et(a,{onRefreshTrips:r.fetchUserTrips,"is-visible":i.showModal,"onUpdate:isVisible":t[9]||(t[9]=c=>i.showModal=c)},null,8,["onRefreshTrips","is-visible"])])):(W(),j("div",UK,VK))}const $K=en(aK,[["render",BK],["__scopeId","data-v-fd1828ff"]]),HK="/assets/expensestab-DGdSp3S_.png",WK="/assets/analyticstab-NPyBQXGq.png",zK="/assets/budgetstab-DCgvL6hf.png",jK="/assets/memberstab-Brhqet4t.png",qK={data(){return{user:!1,tripUID:""}},props:{tripID:String,tripName:String},mounted(){const e=Xn();Qs(e,t=>{t&&(this.user=t)})}},_o=e=>(Yn("data-v-112ef4ed"),e=e(),Qn(),e),KK={class:"sidebar"},GK={class:"sidebar-content"},YK={class:"sidebar-nav"},QK={class:"nav-list"},XK={class:"nav-trip"},JK=_o(()=>I("img",{src:HK,alt:"Expenses",class:"nav-icon"},null,-1)),ZK=_o(()=>I("span",null,"Expenses",-1)),t7=_o(()=>I("img",{src:WK,alt:"Analytics",class:"nav-icon"},null,-1)),e7=_o(()=>I("span",null,"Analytics",-1)),n7=_o(()=>I("img",{src:zK,alt:"Budgets",class:"nav-icon"},null,-1)),s7=_o(()=>I("span",null,"Budgets",-1)),i7=_o(()=>I("img",{src:jK,alt:"Members",class:"nav-icon"},null,-1)),r7=_o(()=>I("span",null,"Members",-1));function o7(e,t,n,s,i,r){const o=ze("router-link");return W(),j("aside",KK,[I("div",GK,[I("nav",YK,[I("ul",QK,[I("li",XK,[I("span",null,ot(n.tripName),1)]),Et(o,{to:{name:"GroupPage",query:{tripName:this.tripName},params:{tripID:n.tripID}},class:"nav-item"},{default:vs(()=>[JK,ZK]),_:1},8,["to"]),Et(o,{to:{name:"AnalyticsPage",query:{tripName:this.tripName},params:{tripID:n.tripID}},class:"nav-item"},{default:vs(()=>[t7,e7]),_:1},8,["to"]),Et(o,{to:{name:"BudgetsPage",query:{tripName:this.tripName},params:{tripID:n.tripID}},class:"nav-item"},{default:vs(()=>[n7,s7]),_:1},8,["to"]),Et(o,{to:{name:"MembersPage",query:{tripName:this.tripName},params:{tripID:n.tripID}},class:"nav-item"},{default:vs(()=>[i7,r7]),_:1},8,["to"])])])])])}const hh=en(qK,[["render",o7],["__scopeId","data-v-112ef4ed"]]);function KP(e,t){return function(){return e.apply(t,arguments)}}const{toString:a7}=Object.prototype,{getPrototypeOf:Bb}=Object,lg=(e=>t=>{const n=a7.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),$i=e=>(e=e.toLowerCase(),t=>lg(t)===e),cg=e=>t=>typeof t===e,{isArray:$l}=Array,Cu=cg("undefined");function l7(e){return e!==null&&!Cu(e)&&e.constructor!==null&&!Cu(e.constructor)&&Ys(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const GP=$i("ArrayBuffer");function c7(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&GP(e.buffer),t}const u7=cg("string"),Ys=cg("function"),YP=cg("number"),ug=e=>e!==null&&typeof e=="object",h7=e=>e===!0||e===!1,ef=e=>{if(lg(e)!=="object")return!1;const t=Bb(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},d7=$i("Date"),f7=$i("File"),p7=$i("Blob"),g7=$i("FileList"),m7=e=>ug(e)&&Ys(e.pipe),_7=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ys(e.append)&&((t=lg(e))==="formdata"||t==="object"&&Ys(e.toString)&&e.toString()==="[object FormData]"))},y7=$i("URLSearchParams"),v7=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dh(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),$l(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(s=0;s<o;s++)a=r[s],t.call(null,e[a],a,e)}}function QP(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,i;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const XP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,JP=e=>!Cu(e)&&e!==XP;function Ay(){const{caseless:e}=JP(this)&&this||{},t={},n=(s,i)=>{const r=e&&QP(t,i)||i;ef(t[r])&&ef(s)?t[r]=Ay(t[r],s):ef(s)?t[r]=Ay({},s):$l(s)?t[r]=s.slice():t[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&dh(arguments[s],n);return t}const b7=(e,t,n,{allOwnKeys:s}={})=>(dh(t,(i,r)=>{n&&Ys(i)?e[r]=KP(i,n):e[r]=i},{allOwnKeys:s}),e),w7=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),E7=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},T7=(e,t,n,s)=>{let i,r,o;const a={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)o=i[r],(!s||s(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=n!==!1&&Bb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},I7=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},A7=e=>{if(!e)return null;if($l(e))return e;let t=e.length;if(!YP(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},x7=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Bb(Uint8Array)),S7=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=s.next())&&!i.done;){const r=i.value;t.call(e,r[0],r[1])}},R7=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},C7=$i("HTMLFormElement"),P7=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,i){return s.toUpperCase()+i}),_A=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),D7=$i("RegExp"),ZP=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};dh(n,(i,r)=>{let o;(o=t(i,r,e))!==!1&&(s[r]=o||i)}),Object.defineProperties(e,s)},k7=e=>{ZP(e,(t,n)=>{if(Ys(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Ys(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},O7=(e,t)=>{const n={},s=i=>{i.forEach(r=>{n[r]=!0})};return $l(e)?s(e):s(String(e).split(t)),n},M7=()=>{},N7=(e,t)=>(e=+e,Number.isFinite(e)?e:t),f_="abcdefghijklmnopqrstuvwxyz",yA="0123456789",tD={DIGIT:yA,ALPHA:f_,ALPHA_DIGIT:f_+f_.toUpperCase()+yA},L7=(e=16,t=tD.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function U7(e){return!!(e&&Ys(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const F7=e=>{const t=new Array(10),n=(s,i)=>{if(ug(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[i]=s;const r=$l(s)?[]:{};return dh(s,(o,a)=>{const c=n(o,i+1);!Cu(c)&&(r[a]=c)}),t[i]=void 0,r}}return s};return n(e,0)},V7=$i("AsyncFunction"),B7=e=>e&&(ug(e)||Ys(e))&&Ys(e.then)&&Ys(e.catch),K={isArray:$l,isArrayBuffer:GP,isBuffer:l7,isFormData:_7,isArrayBufferView:c7,isString:u7,isNumber:YP,isBoolean:h7,isObject:ug,isPlainObject:ef,isUndefined:Cu,isDate:d7,isFile:f7,isBlob:p7,isRegExp:D7,isFunction:Ys,isStream:m7,isURLSearchParams:y7,isTypedArray:x7,isFileList:g7,forEach:dh,merge:Ay,extend:b7,trim:v7,stripBOM:w7,inherits:E7,toFlatObject:T7,kindOf:lg,kindOfTest:$i,endsWith:I7,toArray:A7,forEachEntry:S7,matchAll:R7,isHTMLForm:C7,hasOwnProperty:_A,hasOwnProp:_A,reduceDescriptors:ZP,freezeMethods:k7,toObjectSet:O7,toCamelCase:P7,noop:M7,toFiniteNumber:N7,findKey:QP,global:XP,isContextDefined:JP,ALPHABET:tD,generateString:L7,isSpecCompliantForm:U7,toJSONObject:F7,isAsyncFn:V7,isThenable:B7};function re(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i)}K.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const eD=re.prototype,nD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nD[e]={value:e}});Object.defineProperties(re,nD);Object.defineProperty(eD,"isAxiosError",{value:!0});re.from=(e,t,n,s,i,r)=>{const o=Object.create(eD);return K.toFlatObject(e,o,function(c){return c!==Error.prototype},a=>a!=="isAxiosError"),re.call(o,e.message,t,n,s,i),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const $7=null;function xy(e){return K.isPlainObject(e)||K.isArray(e)}function sD(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function vA(e,t,n){return e?e.concat(t).map(function(i,r){return i=sD(i),!n&&r?"["+i+"]":i}).join(n?".":""):t}function H7(e){return K.isArray(e)&&!e.some(xy)}const W7=K.toFlatObject(K,{},null,function(t){return/^is[A-Z]/.test(t)});function hg(e,t,n){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=K.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,w){return!K.isUndefined(w[b])});const s=n.metaTokens,i=n.visitor||d,r=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(i))throw new TypeError("visitor must be a function");function h(y){if(y===null)return"";if(K.isDate(y))return y.toISOString();if(!c&&K.isBlob(y))throw new re("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(y)||K.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function d(y,b,w){let A=y;if(y&&!w&&typeof y=="object"){if(K.endsWith(b,"{}"))b=s?b:b.slice(0,-2),y=JSON.stringify(y);else if(K.isArray(y)&&H7(y)||(K.isFileList(y)||K.endsWith(b,"[]"))&&(A=K.toArray(y)))return b=sD(b),A.forEach(function(D,O){!(K.isUndefined(D)||D===null)&&t.append(o===!0?vA([b],O,r):o===null?b:b+"[]",h(D))}),!1}return xy(y)?!0:(t.append(vA(w,b,r),h(y)),!1)}const p=[],g=Object.assign(W7,{defaultVisitor:d,convertValue:h,isVisitable:xy});function _(y,b){if(!K.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(y),K.forEach(y,function(A,R){(!(K.isUndefined(A)||A===null)&&i.call(t,A,K.isString(R)?R.trim():R,b,g))===!0&&_(A,b?b.concat(R):[R])}),p.pop()}}if(!K.isObject(e))throw new TypeError("data must be an object");return _(e),t}function bA(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function $b(e,t){this._pairs=[],e&&hg(e,this,t)}const iD=$b.prototype;iD.append=function(t,n){this._pairs.push([t,n])};iD.toString=function(t){const n=t?function(s){return t.call(this,s,bA)}:bA;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function z7(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rD(e,t,n){if(!t)return e;const s=n&&n.encode||z7,i=n&&n.serialize;let r;if(i?r=i(t,n):r=K.isURLSearchParams(t)?t.toString():new $b(t,n).toString(s),r){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+r}return e}class wA{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(s){s!==null&&t(s)})}}const oD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},j7=typeof URLSearchParams<"u"?URLSearchParams:$b,q7=typeof FormData<"u"?FormData:null,K7=typeof Blob<"u"?Blob:null,G7={isBrowser:!0,classes:{URLSearchParams:j7,FormData:q7,Blob:K7},protocols:["http","https","file","blob","url","data"]},aD=typeof window<"u"&&typeof document<"u",Y7=(e=>aD&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Q7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",X7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:aD,hasStandardBrowserEnv:Y7,hasStandardBrowserWebWorkerEnv:Q7},Symbol.toStringTag,{value:"Module"})),xi={...X7,...G7};function J7(e,t){return hg(e,new xi.classes.URLSearchParams,Object.assign({visitor:function(n,s,i,r){return xi.isNode&&K.isBuffer(n)?(this.append(s,n.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function Z7(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function tG(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}function lD(e){function t(n,s,i,r){let o=n[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),c=r>=n.length;return o=!o&&K.isArray(i)?i.length:o,c?(K.hasOwnProp(i,o)?i[o]=[i[o],s]:i[o]=s,!a):((!i[o]||!K.isObject(i[o]))&&(i[o]=[]),t(n,s,i[o],r)&&K.isArray(i[o])&&(i[o]=tG(i[o])),!a)}if(K.isFormData(e)&&K.isFunction(e.entries)){const n={};return K.forEachEntry(e,(s,i)=>{t(Z7(s),i,n,0)}),n}return null}function eG(e,t,n){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Hb={transitional:oD,adapter:["xhr","http"],transformRequest:[function(t,n){const s=n.getContentType()||"",i=s.indexOf("application/json")>-1,r=K.isObject(t);if(r&&K.isHTMLForm(t)&&(t=new FormData(t)),K.isFormData(t))return i?JSON.stringify(lD(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return J7(t,this.formSerializer).toString();if((a=K.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return hg(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||i?(n.setContentType("application/json",!1),eG(t)):t}],transformResponse:[function(t){const n=this.transitional||Hb.transitional,s=n&&n.forcedJSONParsing,i=this.responseType==="json";if(t&&K.isString(t)&&(s&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?re.from(a,re.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xi.classes.FormData,Blob:xi.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{Hb.headers[e]={}});const Wb=Hb,nG=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),sG=e=>{const t={};let n,s,i;return e&&e.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),s=o.substring(i+1).trim(),!(!n||t[n]&&nG[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},EA=Symbol("internals");function fc(e){return e&&String(e).trim().toLowerCase()}function nf(e){return e===!1||e==null?e:K.isArray(e)?e.map(nf):String(e)}function iG(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const rG=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function p_(e,t,n,s,i){if(K.isFunction(s))return s.call(this,t,n);if(i&&(t=n),!!K.isString(t)){if(K.isString(s))return t.indexOf(s)!==-1;if(K.isRegExp(s))return s.test(t)}}function oG(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function aG(e,t){const n=K.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(i,r,o){return this[s].call(this,t,i,r,o)},configurable:!0})})}class dg{constructor(t){t&&this.set(t)}set(t,n,s){const i=this;function r(a,c,h){const d=fc(c);if(!d)throw new Error("header name must be a non-empty string");const p=K.findKey(i,d);(!p||i[p]===void 0||h===!0||h===void 0&&i[p]!==!1)&&(i[p||c]=nf(a))}const o=(a,c)=>K.forEach(a,(h,d)=>r(h,d,c));return K.isPlainObject(t)||t instanceof this.constructor?o(t,n):K.isString(t)&&(t=t.trim())&&!rG(t)?o(sG(t),n):t!=null&&r(n,t,s),this}get(t,n){if(t=fc(t),t){const s=K.findKey(this,t);if(s){const i=this[s];if(!n)return i;if(n===!0)return iG(i);if(K.isFunction(n))return n.call(this,i,s);if(K.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=fc(t),t){const s=K.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||p_(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let i=!1;function r(o){if(o=fc(o),o){const a=K.findKey(s,o);a&&(!n||p_(s,s[a],a,n))&&(delete s[a],i=!0)}}return K.isArray(t)?t.forEach(r):r(t),i}clear(t){const n=Object.keys(this);let s=n.length,i=!1;for(;s--;){const r=n[s];(!t||p_(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const n=this,s={};return K.forEach(this,(i,r)=>{const o=K.findKey(s,r);if(o){n[o]=nf(i),delete n[r];return}const a=t?oG(r):String(r).trim();a!==r&&delete n[r],n[a]=nf(i),s[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return K.forEach(this,(s,i)=>{s!=null&&s!==!1&&(n[i]=t&&K.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[EA]=this[EA]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=fc(o);s[a]||(aG(i,o),s[a]=!0)}return K.isArray(t)?t.forEach(r):r(t),this}}dg.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(dg.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});K.freezeMethods(dg);const fr=dg;function g_(e,t){const n=this||Wb,s=t||n,i=fr.from(s.headers);let r=s.data;return K.forEach(e,function(a){r=a.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function cD(e){return!!(e&&e.__CANCEL__)}function fh(e,t,n){re.call(this,e??"canceled",re.ERR_CANCELED,t,n),this.name="CanceledError"}K.inherits(fh,re,{__CANCEL__:!0});function lG(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cG=xi.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const o=[e+"="+encodeURIComponent(t)];K.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),K.isString(s)&&o.push("path="+s),K.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function uG(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function hG(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function uD(e,t){return e&&!uG(t)?hG(e,t):t}const dG=xi.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function i(r){let o=r;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=i(window.location.href),function(o){const a=K.isString(o)?i(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}();function fG(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function pG(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(c){const h=Date.now(),d=s[r];o||(o=h),n[i]=c,s[i]=h;let p=r,g=0;for(;p!==i;)g+=n[p++],p=p%e;if(i=(i+1)%e,i===r&&(r=(r+1)%e),h-o<t)return;const _=d&&h-d;return _?Math.round(g*1e3/_):void 0}}function TA(e,t){let n=0;const s=pG(50,250);return i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,c=s(a),h=r<=o;n=r;const d={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&h?(o-r)/c:void 0,event:i};d[t?"download":"upload"]=!0,e(d)}}const gG=typeof XMLHttpRequest<"u",mG=gG&&function(e){return new Promise(function(n,s){let i=e.data;const r=fr.from(e.headers).normalize();let{responseType:o,withXSRFToken:a}=e,c;function h(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}let d;if(K.isFormData(i)){if(xi.hasStandardBrowserEnv||xi.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if((d=r.getContentType())!==!1){const[b,...w]=d?d.split(";").map(A=>A.trim()).filter(Boolean):[];r.setContentType([b||"multipart/form-data",...w].join("; "))}}let p=new XMLHttpRequest;if(e.auth){const b=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(b+":"+w))}const g=uD(e.baseURL,e.url);p.open(e.method.toUpperCase(),rD(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout;function _(){if(!p)return;const b=fr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),A={data:!o||o==="text"||o==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:b,config:e,request:p};lG(function(D){n(D),h()},function(D){s(D),h()},A),p=null}if("onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(s(new re("Request aborted",re.ECONNABORTED,e,p)),p=null)},p.onerror=function(){s(new re("Network Error",re.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let w=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const A=e.transitional||oD;e.timeoutErrorMessage&&(w=e.timeoutErrorMessage),s(new re(w,A.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,p)),p=null},xi.hasStandardBrowserEnv&&(a&&K.isFunction(a)&&(a=a(e)),a||a!==!1&&dG(g))){const b=e.xsrfHeaderName&&e.xsrfCookieName&&cG.read(e.xsrfCookieName);b&&r.set(e.xsrfHeaderName,b)}i===void 0&&r.setContentType(null),"setRequestHeader"in p&&K.forEach(r.toJSON(),function(w,A){p.setRequestHeader(A,w)}),K.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),o&&o!=="json"&&(p.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&p.addEventListener("progress",TA(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",TA(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=b=>{p&&(s(!b||b.type?new fh(null,e,p):b),p.abort(),p=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const y=fG(g);if(y&&xi.protocols.indexOf(y)===-1){s(new re("Unsupported protocol "+y+":",re.ERR_BAD_REQUEST,e));return}p.send(i||null)})},Sy={http:$7,xhr:mG};K.forEach(Sy,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const IA=e=>`- ${e}`,_G=e=>K.isFunction(e)||e===null||e===!1,hD={getAdapter:e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){n=e[r];let o;if(s=n,!_G(n)&&(s=Sy[(o=String(n)).toLowerCase()],s===void 0))throw new re(`Unknown adapter '${o}'`);if(s)break;i[o||"#"+r]=s}if(!s){const r=Object.entries(i).map(([a,c])=>`adapter ${a} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?r.length>1?`since :
`+r.map(IA).join(`
`):" "+IA(r[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Sy};function m_(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fh(null,e)}function AA(e){return m_(e),e.headers=fr.from(e.headers),e.data=g_.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),hD.getAdapter(e.adapter||Wb.adapter)(e).then(function(s){return m_(e),s.data=g_.call(e,e.transformResponse,s),s.headers=fr.from(s.headers),s},function(s){return cD(s)||(m_(e),s&&s.response&&(s.response.data=g_.call(e,e.transformResponse,s.response),s.response.headers=fr.from(s.response.headers))),Promise.reject(s)})}const xA=e=>e instanceof fr?{...e}:e;function Il(e,t){t=t||{};const n={};function s(h,d,p){return K.isPlainObject(h)&&K.isPlainObject(d)?K.merge.call({caseless:p},h,d):K.isPlainObject(d)?K.merge({},d):K.isArray(d)?d.slice():d}function i(h,d,p){if(K.isUndefined(d)){if(!K.isUndefined(h))return s(void 0,h,p)}else return s(h,d,p)}function r(h,d){if(!K.isUndefined(d))return s(void 0,d)}function o(h,d){if(K.isUndefined(d)){if(!K.isUndefined(h))return s(void 0,h)}else return s(void 0,d)}function a(h,d,p){if(p in t)return s(h,d);if(p in e)return s(void 0,h)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(h,d)=>i(xA(h),xA(d),!0)};return K.forEach(Object.keys(Object.assign({},e,t)),function(d){const p=c[d]||i,g=p(e[d],t[d],d);K.isUndefined(g)&&p!==a||(n[d]=g)}),n}const dD="1.6.8",zb={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zb[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const SA={};zb.transitional=function(t,n,s){function i(r,o){return"[Axios v"+dD+"] Transitional option '"+r+"'"+o+(s?". "+s:"")}return(r,o,a)=>{if(t===!1)throw new re(i(o," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!SA[o]&&(SA[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(r,o,a):!0}};function yG(e,t,n){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],o=t[r];if(o){const a=e[r],c=a===void 0||o(a,r,e);if(c!==!0)throw new re("option "+r+" must be "+c,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+r,re.ERR_BAD_OPTION)}}const Ry={assertOptions:yG,validators:zb},Mr=Ry.validators;class jf{constructor(t){this.defaults=t,this.interceptors={request:new wA,response:new wA}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Il(this.defaults,n);const{transitional:s,paramsSerializer:i,headers:r}=n;s!==void 0&&Ry.assertOptions(s,{silentJSONParsing:Mr.transitional(Mr.boolean),forcedJSONParsing:Mr.transitional(Mr.boolean),clarifyTimeoutError:Mr.transitional(Mr.boolean)},!1),i!=null&&(K.isFunction(i)?n.paramsSerializer={serialize:i}:Ry.assertOptions(i,{encode:Mr.function,serialize:Mr.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=r&&K.merge(r.common,r[n.method]);r&&K.forEach(["delete","get","head","post","put","patch","common"],y=>{delete r[y]}),n.headers=fr.concat(o,r);const a=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const h=[];this.interceptors.response.forEach(function(b){h.push(b.fulfilled,b.rejected)});let d,p=0,g;if(!c){const y=[AA.bind(this),void 0];for(y.unshift.apply(y,a),y.push.apply(y,h),g=y.length,d=Promise.resolve(n);p<g;)d=d.then(y[p++],y[p++]);return d}g=a.length;let _=n;for(p=0;p<g;){const y=a[p++],b=a[p++];try{_=y(_)}catch(w){b.call(this,w);break}}try{d=AA.call(this,_)}catch(y){return Promise.reject(y)}for(p=0,g=h.length;p<g;)d=d.then(h[p++],h[p++]);return d}getUri(t){t=Il(this.defaults,t);const n=uD(t.baseURL,t.url);return rD(n,t.params,t.paramsSerializer)}}K.forEach(["delete","get","head","options"],function(t){jf.prototype[t]=function(n,s){return this.request(Il(s||{},{method:t,url:n,data:(s||{}).data}))}});K.forEach(["post","put","patch"],function(t){function n(s){return function(r,o,a){return this.request(Il(a||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}jf.prototype[t]=n(),jf.prototype[t+"Form"]=n(!0)});const sf=jf;class jb{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(r){n=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{s.subscribe(a),r=a}).then(i);return o.cancel=function(){s.unsubscribe(r)},o},t(function(r,o,a){s.reason||(s.reason=new fh(r,o,a),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new jb(function(i){t=i}),cancel:t}}}const vG=jb;function bG(e){return function(n){return e.apply(null,n)}}function wG(e){return K.isObject(e)&&e.isAxiosError===!0}const Cy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cy).forEach(([e,t])=>{Cy[t]=e});const EG=Cy;function fD(e){const t=new sf(e),n=KP(sf.prototype.request,t);return K.extend(n,sf.prototype,t,{allOwnKeys:!0}),K.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return fD(Il(e,i))},n}const dn=fD(Wb);dn.Axios=sf;dn.CanceledError=fh;dn.CancelToken=vG;dn.isCancel=cD;dn.VERSION=dD;dn.toFormData=hg;dn.AxiosError=re;dn.Cancel=dn.CanceledError;dn.all=function(t){return Promise.all(t)};dn.spread=bG;dn.isAxiosError=wG;dn.mergeConfig=Il;dn.AxiosHeaders=fr;dn.formToJSON=e=>lD(K.isHTMLForm(e)?new FormData(e):e);dn.getAdapter=hD.getAdapter;dn.HttpStatusCode=EG;dn.default=dn;const qb="/assets/backbutton-DfUvoNQG.png",TG={name:"ClearDebtPage",data(){return{user:!1,userCurrency:"",debtsYouOwe:[],showConfirmationPopup:!1,selectedUser:null}},emits:["returnToMainPage","refreshDebtData"],props:{tripID:String,debts:Array},methods:{goBack(){this.$emit("returnToMainPage")},async fetchCurrencyRates(){for(let t=0;t<this.debtsYouOwe.length;t++){const n=this.debtsYouOwe[t];var e;if(n.currency!==this.userCurrency)try{const s=await dn.get("https://api.freecurrencyapi.com/v1/latest?apikey=fca_live_iaKyOqNjZI0PjnMBKqchb1UFhMxXh12FLbkCuzNy"),i=n.totalAmount/s.data.data[n.currency],r=s.data.data[this.userCurrency];e=i*r,this.debtsYouOwe[t].ConvertedAmount=e}catch(s){console.error("Failed to fetch currency rates:",s),this.debtsYouOwe[t].ConvertedAmount="Error"}else e=n.totalAmount,this.debtsYouOwe[t].ConvertedAmount=e}},async payUp(e){const t=ct(mt,"Trips",this.$route.params.tripID),n=ue(t,"Debts"),s=ct(n,this.user.uid),i=ct(n,e.UID),r=ue(s,"User Owes Who"),o=ct(r,e.UID),a=ue(i,"Who Owes User"),c=ct(a,this.user.uid);try{await to(o),await to(c);const h=this.debtsYouOwe.filter(d=>d.UID!==e.UID);this.debtsYouOwe=h,this.$emit("refreshDebtData"),this.showConfirmationPopup=!1}catch(h){console.error(h)}},confirmPayUp(e){this.selectedUser=e,this.showConfirmationPopup=!0},cancelPayment(){this.showConfirmationPopup=!1},async fetchUserData(){const e=ct(mt,"Users",this.user.uid),t=await he(e);this.userCurrency=t.data().Currency,this.debtsYouOwe=this.debts,console.log(this.debts)}},mounted(){const e=Xn();Qs(e,async t=>{t&&(this.user=t,await this.fetchUserData(),await this.fetchCurrencyRates())})}},Kb=e=>(Yn("data-v-80c082f9"),e=e(),Qn(),e),IG={class:"main-content"},AG=Kb(()=>I("img",{src:qb,alt:"Back",class:"backbutton-icon"},null,-1)),xG=[AG],SG={class:"debt-list"},RG=Kb(()=>I("h1",{class:"debt-heading"},"Clear Debt",-1)),CG={key:0,class:"no-debt-message"},PG={key:1},DG=["data-initials"],kG={class:"debt-info"},OG={class:"user-info"},MG={class:"debt-name"},NG={class:"user-email"},LG={key:0,class:"debt-description"},UG={key:1,class:"debt-description"},FG=Kb(()=>I("div",{h1:""},"You owe",-1)),VG={key:0},BG={key:1},$G=["onClick"],HG={key:0,class:"confirmation-popup"},WG={class:"popup-content"},zG={class:"buttons"};function jG(e,t,n,s,i,r){return W(),j("div",IG,[I("div",{class:"back-button",onClick:t[0]||(t[0]=(...o)=>r.goBack&&r.goBack(...o))},xG),I("div",SG,[RG,i.debtsYouOwe.length===0?(W(),j("div",CG," You don't owe anyone money. Keep it up! ")):(W(),j("div",PG,[(W(!0),j(xe,null,Pn(i.debtsYouOwe,o=>(W(),j("div",{class:"debt-details",key:o.UID,"data-initials":o.FirstName.charAt(0)+o.LastName.charAt(0)},[I("div",kG,[I("div",OG,[I("div",MG,ot(o.FirstName)+" "+ot(o.LastName),1),I("div",NG,ot(o.Email),1)]),o.currency===i.userCurrency?(W(),j("div",LG,"You owe "+ot(o.currency)+" "+ot(parseFloat(o.totalAmount).toFixed(2)),1)):(W(),j("div",UG,[FG,o.ConvertedAmount?(W(),j("div",VG,ot(o.currency)+" "+ot(parseFloat(o.totalAmount).toFixed(2))+" = "+ot(i.userCurrency)+" "+ot(parseFloat(o.ConvertedAmount).toFixed(2)),1)):(W(),j("div",BG,ot(o.currency)+" "+ot(parseFloat(o.totalAmount).toFixed(2))+" = Loading...",1))]))]),I("button",{onClick:a=>r.confirmPayUp(o),class:"payUpButton"},"Pay Up",8,$G)],8,DG))),128))]))]),i.showConfirmationPopup?(W(),j("div",HG,[I("div",WG,[I("p",null,"Are you sure you have paid "+ot(i.selectedUser.FirstName)+" "+ot(i.selectedUser.LastName)+"?",1),I("div",zG,[I("button",{class:"confirm-button",onClick:t[1]||(t[1]=o=>r.payUp(i.selectedUser))},"Yes"),I("button",{class:"cancel-button",onClick:t[2]||(t[2]=(...o)=>r.cancelPayment&&r.cancelPayment(...o))},"Cancel")])])])):Xt("",!0)])}const qG=en(TG,[["render",jG],["__scopeId","data-v-80c082f9"]]),ph={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Al={LIGHT:"light",DARK:"dark",COLORED:"colored",AUTO:"auto"},as={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},KG={BOUNCE:"bounce",SLIDE:"slide",FLIP:"flip",ZOOM:"zoom",NONE:"none"},pD={dangerouslyHTMLString:!1,multiple:!0,position:ph.TOP_RIGHT,autoClose:5e3,transition:"bounce",hideProgressBar:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,className:"",bodyClassName:"",style:{},progressClassName:"",progressStyle:{},role:"alert",theme:"light"},GG={rtl:!1,newestOnTop:!1,toastClassName:""},gD={...pD,...GG};({...pD,type:as.DEFAULT});var pe=(e=>(e[e.COLLAPSE_DURATION=300]="COLLAPSE_DURATION",e[e.DEBOUNCE_DURATION=50]="DEBOUNCE_DURATION",e.CSS_NAMESPACE="Toastify",e))(pe||{}),Py=(e=>(e.ENTRANCE_ANIMATION_END="d",e))(Py||{});const YG={enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0},QG={enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0},XG={enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"},JG={enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"},RA="Toastify--animate Toastify__none-enter";function mD(e,t=!1){var n;let s=YG;if(!e||typeof e=="string")switch(e){case"flip":s=JG;break;case"zoom":s=XG;break;case"slide":s=QG;break}else s=e;if(t)s.enter=RA;else if(s.enter===RA){const i=(n=s.exit.split("__")[1])==null?void 0:n.split("-")[0];s.enter="Toastify--animate Toastify__".concat(i,"-enter")}return s}function ZG(e){return e.containerId||String(e.position)}const fg="will-unmount";function tY(e=ph.TOP_RIGHT){return!!document.querySelector(".".concat(pe.CSS_NAMESPACE,"__toast-container--").concat(e))}function eY(e=ph.TOP_RIGHT){return"".concat(pe.CSS_NAMESPACE,"__toast-container--").concat(e)}function nY(e,t,n=!1){const s=["".concat(pe.CSS_NAMESPACE,"__toast-container"),"".concat(pe.CSS_NAMESPACE,"__toast-container--").concat(e),n?"".concat(pe.CSS_NAMESPACE,"__toast-container--rtl"):null].filter(Boolean).join(" ");return ll(t)?t({position:e,rtl:n,defaultClassName:s}):"".concat(s," ").concat(t||"")}function sY(e){var t;const{position:n,containerClassName:s,rtl:i=!1,style:r={}}=e,o=pe.CSS_NAMESPACE,a=eY(n),c=document.querySelector(".".concat(o)),h=document.querySelector(".".concat(a)),d=!!h&&!((t=h.className)!=null&&t.includes(fg)),p=c||document.createElement("div"),g=document.createElement("div");g.className=nY(n,s,i),g.dataset.testid="".concat(pe.CSS_NAMESPACE,"__toast-container--").concat(n),g.id=ZG(e);for(const _ in r)if(Object.prototype.hasOwnProperty.call(r,_)){const y=r[_];g.style[_]=y}return c||(p.className=pe.CSS_NAMESPACE,document.body.appendChild(p)),d||p.appendChild(g),g}function Dy(e){var t,n,s;const i=typeof e=="string"?e:((t=e.currentTarget)==null?void 0:t.id)||((n=e.target)==null?void 0:n.id),r=document.getElementById(i);r&&r.removeEventListener("animationend",Dy,!1);try{Pu[i].unmount(),(s=document.getElementById(i))==null||s.remove(),delete Pu[i],delete Sn[i]}catch{}}const Pu=Vi({});function iY(e,t){const n=document.getElementById(String(t));n&&(Pu[n.id]=e)}function ky(e,t=!0){const n=String(e);if(!Pu[n])return;const s=document.getElementById(n);s&&s.classList.add(fg),t?(oY(e),s&&s.addEventListener("animationend",Dy,!1)):Dy(n),Fi.items=Fi.items.filter(i=>i.containerId!==e)}function rY(e){for(const t in Pu)ky(t,e);Fi.items=[]}function _D(e,t){const n=document.getElementById(e.toastId);if(n){let s=e;s={...s,...mD(s.transition)};const i=s.appendPosition?"".concat(s.exit,"--").concat(s.position):s.exit;n.className+=" ".concat(i),t&&t(n)}}function oY(e){for(const t in Sn)if(t===e)for(const n of Sn[t]||[])_D(n)}function aY(e){const t=xl().find(n=>n.toastId===e);return t==null?void 0:t.containerId}function Gb(e){return document.getElementById(e)}function lY(e){const t=Gb(e.containerId);return t&&t.classList.contains(fg)}function CA(e){var t;const n=au(e.content)?Ut(e.content.props):null;return n??Ut((t=e.data)!=null?t:{})}function cY(e){return e?Fi.items.filter(t=>t.containerId===e).length>0:Fi.items.length>0}function uY(){if(Fi.items.length>0){const e=Fi.items.shift();rf(e==null?void 0:e.toastContent,e==null?void 0:e.toastProps)}}const Sn=Vi({}),Fi=Vi({items:[]});function xl(){const e=Ut(Sn);return Object.values(e).reduce((t,n)=>[...t,...n],[])}function hY(e){return xl().find(t=>t.toastId===e)}function rf(e,t={}){if(lY(t)){const n=Gb(t.containerId);n&&n.addEventListener("animationend",Oy.bind(null,e,t),!1)}else Oy(e,t)}function Oy(e,t={}){const n=Gb(t.containerId);n&&n.removeEventListener("animationend",Oy.bind(null,e,t),!1);const s=Sn[t.containerId]||[],i=s.length>0;if(!i&&!tY(t.position)){const r=sY(t),o=Kx(PY,t);o.mount(r),iY(o,r.id)}i&&!t.updateId&&(t.position=s[0].position),kl(()=>{t.updateId?ks.update(t):ks.add(e,t)})}const ks={add(e,t){const{containerId:n=""}=t;n&&(Sn[n]=Sn[n]||[],Sn[n].find(s=>s.toastId===t.toastId)||setTimeout(()=>{var s,i;t.newestOnTop?(s=Sn[n])==null||s.unshift(t):(i=Sn[n])==null||i.push(t),t.onOpen&&t.onOpen(CA(t))},t.delay||0))},remove(e){if(e){const t=aY(e);if(t){const n=Sn[t];let s=n.find(i=>i.toastId===e);Sn[t]=n.filter(i=>i.toastId!==e),!Sn[t].length&&!cY(t)&&ky(t,!1),uY(),kl(()=>{s!=null&&s.onClose&&(s.onClose(CA(s)),s=void 0)})}}},update(e={}){const{containerId:t=""}=e;if(t&&e.updateId){Sn[t]=Sn[t]||[];const n=Sn[t].find(r=>r.toastId===e.toastId),s=(n==null?void 0:n.position)!==e.position||(n==null?void 0:n.transition)!==e.transition,i={...e,disabledEnterTransition:!s,updateId:void 0};ks.dismissForce(e==null?void 0:e.toastId),setTimeout(()=>{be(i.content,i)},e.delay||0)}},clear(e,t=!0){e?ky(e,t):rY(t)},dismissCallback(e){var t;const n=(t=e.currentTarget)==null?void 0:t.id,s=document.getElementById(n);s&&(s.removeEventListener("animationend",ks.dismissCallback,!1),setTimeout(()=>{ks.remove(n)}))},dismiss(e){if(e){const t=xl();for(const n of t)if(n.toastId===e){_D(n,s=>{s.addEventListener("animationend",ks.dismissCallback,!1)});break}}},dismissForce(e){if(e){const t=xl();for(const n of t)if(n.toastId===e){const s=document.getElementById(e);s&&(s.remove(),s.removeEventListener("animationend",ks.dismissCallback,!1),ks.remove(e));break}}}},yD=Vi({}),qf=Vi({});function vD(){return Math.random().toString(36).substring(2,9)}function dY(e){return typeof e=="number"&&!isNaN(e)}function My(e){return typeof e=="string"}function ll(e){return typeof e=="function"}function pg(...e){return yr(...e)}function of(e){return typeof e=="object"&&(!!(e!=null&&e.render)||!!(e!=null&&e.setup)||typeof(e==null?void 0:e.type)=="object")}function fY(e={}){yD["".concat(pe.CSS_NAMESPACE,"-default-options")]=e}function pY(){return yD["".concat(pe.CSS_NAMESPACE,"-default-options")]||gD}function gY(){return document.documentElement.classList.contains("dark")?"dark":"light"}var af=(e=>(e[e.Enter=0]="Enter",e[e.Exit=1]="Exit",e))(af||{});const bD={containerId:{type:[String,Number],required:!1,default:""},clearOnUrlChange:{type:Boolean,required:!1,default:!0},disabledEnterTransition:{type:Boolean,required:!1,default:!1},dangerouslyHTMLString:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:void 0},position:{type:String,required:!1,default:ph.TOP_LEFT},bodyClassName:{type:String,required:!1,default:""},autoClose:{type:[Number,Boolean],required:!1,default:!1},closeButton:{type:[Boolean,Function,Object],required:!1,default:void 0},transition:{type:[String,Object],required:!1,default:"bounce"},hideProgressBar:{type:Boolean,required:!1,default:!1},pauseOnHover:{type:Boolean,required:!1,default:!0},pauseOnFocusLoss:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},progress:{type:Number,required:!1,default:void 0},progressClassName:{type:String,required:!1,default:""},toastStyle:{type:Object,required:!1,default(){return{}}},progressStyle:{type:Object,required:!1,default(){return{}}},role:{type:String,required:!1,default:"alert"},theme:{type:String,required:!1,default:Al.AUTO},content:{type:[String,Object,Function],required:!1,default:""},toastId:{type:[String,Number],required:!1,default:""},data:{type:[Object,String],required:!1,default(){return{}}},type:{type:String,required:!1,default:as.DEFAULT},icon:{type:[Boolean,String,Number,Object,Function],required:!1,default:void 0},delay:{type:Number,required:!1,default:void 0},onOpen:{type:Function,required:!1,default:void 0},onClose:{type:Function,required:!1,default:void 0},onClick:{type:Function,required:!1,default:void 0},isLoading:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},toastClassName:{type:String,required:!1,default:""},updateId:{type:[String,Number],required:!1,default:""}},mY={autoClose:{type:[Number,Boolean],required:!0},isRunning:{type:Boolean,required:!1,default:void 0},type:{type:String,required:!1,default:as.DEFAULT},theme:{type:String,required:!1,default:Al.AUTO},hide:{type:Boolean,required:!1,default:void 0},className:{type:[String,Function],required:!1,default:""},controlledProgress:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:void 0},isIn:{type:Boolean,required:!1,default:void 0},progress:{type:Number,required:!1,default:void 0},closeToast:{type:Function,required:!1,default:void 0}},_Y=uo({name:"ProgressBar",props:mY,setup(e,{attrs:t}){const n=We(),s=Se(()=>e.hide?"true":"false"),i=Se(()=>({...t.style||{},animationDuration:"".concat(e.autoClose===!0?5e3:e.autoClose,"ms"),animationPlayState:e.isRunning?"running":"paused",opacity:e.hide||e.autoClose===!1?0:1,transform:e.controlledProgress?"scaleX(".concat(e.progress,")"):"none"})),r=Se(()=>["".concat(pe.CSS_NAMESPACE,"__progress-bar"),e.controlledProgress?"".concat(pe.CSS_NAMESPACE,"__progress-bar--controlled"):"".concat(pe.CSS_NAMESPACE,"__progress-bar--animated"),"".concat(pe.CSS_NAMESPACE,"__progress-bar-theme--").concat(e.theme),"".concat(pe.CSS_NAMESPACE,"__progress-bar--").concat(e.type),e.rtl?"".concat(pe.CSS_NAMESPACE,"__progress-bar--rtl"):null].filter(Boolean).join(" ")),o=Se(()=>"".concat(r.value," ").concat((t==null?void 0:t.class)||"")),a=()=>{n.value&&(n.value.onanimationend=null,n.value.ontransitionend=null)},c=()=>{e.isIn&&e.closeToast&&e.autoClose!==!1&&(e.closeToast(),a())},h=Se(()=>e.controlledProgress?null:c),d=Se(()=>e.controlledProgress?c:null);return $d(()=>{n.value&&(a(),n.value.onanimationend=h.value,n.value.ontransitionend=d.value)}),()=>Et("div",{ref:n,role:"progressbar","aria-hidden":s.value,"aria-label":"notification timer",class:o.value,style:i.value},null)}}),yY=uo({name:"CloseButton",inheritAttrs:!1,props:{theme:{type:String,required:!1,default:Al.AUTO},type:{type:String,required:!1,default:Al.LIGHT},ariaLabel:{type:String,required:!1,default:"close"},closeToast:{type:Function,required:!1,default:void 0}},setup(e){return()=>Et("button",{class:"".concat(pe.CSS_NAMESPACE,"__close-button ").concat(pe.CSS_NAMESPACE,"__close-button--").concat(e.theme),type:"button",onClick:t=>{t.stopPropagation(),e.closeToast&&e.closeToast(t)},"aria-label":e.ariaLabel},[Et("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},[Et("path",{"fill-rule":"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"},null)])])}}),gg=({theme:e,type:t,path:n,...s})=>Et("svg",yr({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":"var(--toastify-icon-color-".concat(t,")")},s),[Et("path",{d:n},null)]);function vY(e){return Et(gg,yr(e,{path:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}),null)}function bY(e){return Et(gg,yr(e,{path:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}),null)}function wY(e){return Et(gg,yr(e,{path:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}),null)}function EY(e){return Et(gg,yr(e,{path:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}),null)}function TY(){return Et("div",{class:"".concat(pe.CSS_NAMESPACE,"__spinner")},null)}const Ny={info:bY,warning:vY,success:wY,error:EY,spinner:TY},IY=e=>e in Ny;function AY({theme:e,type:t,isLoading:n,icon:s}){let i;const r={theme:e,type:t};return n?i=Ny.spinner():s===!1?i=void 0:of(s)?i=Ut(s):ll(s)?i=s(r):au(s)?i=sa(s,r):My(s)||dY(s)?i=s:IY(t)&&(i=Ny[t](r)),i}const xY=()=>{};function SY(e,t,n=pe.COLLAPSE_DURATION){const{scrollHeight:s,style:i}=e,r=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition="all ".concat(r,"ms"),requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,r)})})}function RY(e){const t=We(!1),n=We(!1),s=We(!1),i=We(af.Enter),r=Vi({...e,appendPosition:e.appendPosition||!1,collapse:typeof e.collapse>"u"?!0:e.collapse,collapseDuration:e.collapseDuration||pe.COLLAPSE_DURATION}),o=r.done||xY,a=Se(()=>r.appendPosition?"".concat(r.enter,"--").concat(r.position):r.enter),c=Se(()=>r.appendPosition?"".concat(r.exit,"--").concat(r.position):r.exit),h=Se(()=>e.pauseOnHover?{onMouseenter:w,onMouseleave:b}:{});function d(){const R=a.value.split(" ");g().addEventListener(Py.ENTRANCE_ANIMATION_END,b,{once:!0});const D=N=>{const L=g();N.target===L&&(L.dispatchEvent(new Event(Py.ENTRANCE_ANIMATION_END)),L.removeEventListener("animationend",D),L.removeEventListener("animationcancel",D),i.value===af.Enter&&N.type!=="animationcancel"&&L.classList.remove(...R))},O=()=>{const N=g();N.classList.add(...R),N.addEventListener("animationend",D),N.addEventListener("animationcancel",D)};e.pauseOnFocusLoss&&_(),O()}function p(){if(!g())return;const R=()=>{const O=g();O.removeEventListener("animationend",R),r.collapse?SY(O,o,r.collapseDuration):o()},D=()=>{const O=g();i.value=af.Exit,O&&(O.className+=" ".concat(c.value),O.addEventListener("animationend",R))};n.value||(s.value?R():setTimeout(D))}function g(){return e.toastRef.value}function _(){document.hasFocus()||w(),window.addEventListener("focus",b),window.addEventListener("blur",w)}function y(){window.removeEventListener("focus",b),window.removeEventListener("blur",w)}function b(){(!e.loading.value||e.isLoading===void 0)&&(t.value=!0)}function w(){t.value=!1}function A(R){R&&(R.stopPropagation(),R.preventDefault()),n.value=!1}return $d(p),$d(()=>{const R=xl();n.value=R.findIndex(D=>D.toastId===r.toastId)>-1}),$d(()=>{e.isLoading!==void 0&&(e.loading.value?w():b())}),Bu(d),$u(()=>{e.pauseOnFocusLoss&&y()}),{isIn:n,isRunning:t,hideToast:A,eventHandlers:h}}const CY=uo({name:"ToastItem",inheritAttrs:!1,props:bD,setup(e){const t=We(),n=Se(()=>!!e.isLoading),s=Se(()=>e.progress!==void 0&&e.progress!==null),i=Se(()=>AY(e)),r=Se(()=>["".concat(pe.CSS_NAMESPACE,"__toast"),"".concat(pe.CSS_NAMESPACE,"__toast-theme--").concat(e.theme),"".concat(pe.CSS_NAMESPACE,"__toast--").concat(e.type),e.rtl?"".concat(pe.CSS_NAMESPACE,"__toast--rtl"):void 0,e.toastClassName||""].filter(Boolean).join(" ")),{isRunning:o,isIn:a,hideToast:c,eventHandlers:h}=RY({toastRef:t,loading:n,done:()=>{ks.remove(e.toastId)},...mD(e.transition,e.disabledEnterTransition),...e});return()=>Et("div",yr({id:e.toastId,class:r.value,style:e.toastStyle||{},ref:t,"data-testid":"toast-item-".concat(e.toastId),onClick:d=>{e.closeOnClick&&c(),e.onClick&&e.onClick(d)}},h.value),[Et("div",{role:e.role,"data-testid":"toast-body",class:"".concat(pe.CSS_NAMESPACE,"__toast-body ").concat(e.bodyClassName||"")},[i.value!=null&&Et("div",{"data-testid":"toast-icon-".concat(e.type),class:["".concat(pe.CSS_NAMESPACE,"__toast-icon"),e.isLoading?"":"".concat(pe.CSS_NAMESPACE,"--animate-icon ").concat(pe.CSS_NAMESPACE,"__zoom-enter")].join(" ")},[of(i.value)?ir(Ut(i.value),{theme:e.theme,type:e.type}):ll(i.value)?i.value({theme:e.theme,type:e.type}):i.value]),Et("div",{"data-testid":"toast-content"},[of(e.content)?ir(Ut(e.content),{toastProps:Ut(e),closeToast:c,data:e.data}):ll(e.content)?e.content({toastProps:Ut(e),closeToast:c,data:e.data}):e.dangerouslyHTMLString?ir("div",{innerHTML:e.content}):e.content])]),(e.closeButton===void 0||e.closeButton===!0)&&Et(yY,{theme:e.theme,closeToast:d=>{d.stopPropagation(),d.preventDefault(),c()}},null),of(e.closeButton)?ir(Ut(e.closeButton),{closeToast:c,type:e.type,theme:e.theme}):ll(e.closeButton)?e.closeButton({closeToast:c,type:e.type,theme:e.theme}):null,Et(_Y,{className:e.progressClassName,style:e.progressStyle,rtl:e.rtl,theme:e.theme,isIn:a.value,type:e.type,hide:e.hideProgressBar,isRunning:o.value,autoClose:e.autoClose,controlledProgress:s.value,progress:e.progress,closeToast:e.isLoading?void 0:c},null)])}});let Gc=0;function wD(){typeof window>"u"||(Gc&&window.cancelAnimationFrame(Gc),Gc=window.requestAnimationFrame(wD),qf.lastUrl!==window.location.href&&(qf.lastUrl=window.location.href,ks.clear()))}const PY=uo({name:"ToastifyContainer",inheritAttrs:!1,props:bD,setup(e){const t=Se(()=>e.containerId),n=Se(()=>Sn[t.value]||[]),s=Se(()=>n.value.filter(i=>i.position===e.position));return Bu(()=>{typeof window<"u"&&e.clearOnUrlChange&&window.requestAnimationFrame(wD)}),$u(()=>{typeof window<"u"&&Gc&&(window.cancelAnimationFrame(Gc),qf.lastUrl="")}),()=>Et(xe,null,[s.value.map(i=>{const{toastId:r=""}=i;return Et(CY,yr({key:r},i),null)})])}});let __=!1;function ED(){const e=[];return xl().forEach(t=>{const n=document.getElementById(t.containerId);n&&!n.classList.contains(fg)&&e.push(t)}),e}function DY(e){const t=ED().length,n=e??0;return n>0&&t+Fi.items.length>=n}function kY(e){DY(e.limit)&&!e.updateId&&Fi.items.push({toastId:e.toastId,containerId:e.containerId,toastContent:e.content,toastProps:e})}function yo(e,t,n={}){if(__)return;n=pg(pY(),{type:t},Ut(n)),(!n.toastId||typeof n.toastId!="string"&&typeof n.toastId!="number")&&(n.toastId=vD()),n={...n,content:e,containerId:n.containerId||String(n.position)};const s=Number(n==null?void 0:n.progress);return s<0&&(n.progress=0),s>1&&(n.progress=1),n.theme==="auto"&&(n.theme=gY()),kY(n),qf.lastUrl=window.location.href,n.multiple?Fi.items.length?n.updateId&&rf(e,n):rf(e,n):(__=!0,be.clearAll(void 0,!1),setTimeout(()=>{rf(e,n)},0),setTimeout(()=>{__=!1},390)),n.toastId}const be=(e,t)=>yo(e,as.DEFAULT,t);be.info=(e,t)=>yo(e,as.DEFAULT,{...t,type:as.INFO});be.error=(e,t)=>yo(e,as.DEFAULT,{...t,type:as.ERROR});be.warning=(e,t)=>yo(e,as.DEFAULT,{...t,type:as.WARNING});be.warn=be.warning;be.success=(e,t)=>yo(e,as.DEFAULT,{...t,type:as.SUCCESS});be.loading=(e,t)=>yo(e,as.DEFAULT,pg(t,{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1}));be.dark=(e,t)=>yo(e,as.DEFAULT,pg(t,{theme:Al.DARK}));be.remove=e=>{e?ks.dismiss(e):ks.clear()};be.clearAll=(e,t)=>{ks.clear(e,t)};be.isActive=e=>{let t=!1;return t=ED().findIndex(n=>n.toastId===e)>-1,t};be.update=(e,t={})=>{setTimeout(()=>{const n=hY(e);if(n){const s=Ut(n),{content:i}=s,r={...s,...t,toastId:t.toastId||e,updateId:vD()},o=r.render||i;delete r.render,yo(o,r.type,r)}},0)};be.done=e=>{be.update(e,{isLoading:!1,progress:1})};be.promise=OY;function OY(e,{pending:t,error:n,success:s},i){var r,o,a;let c;const h={...i||{},autoClose:!1};t&&(c=My(t)?be.loading(t,h):be.loading(t.render,{...h,...t}));const d={autoClose:(r=i==null?void 0:i.autoClose)!=null?r:!0,closeOnClick:(o=i==null?void 0:i.closeOnClick)!=null?o:!0,closeButton:(a=i==null?void 0:i.autoClose)!=null?a:null,isLoading:void 0,draggable:null,delay:100},p=(_,y,b)=>{if(y==null){be.remove(c);return}const w={type:_,...d,...i,data:b},A=My(y)?{render:y}:y;return c?be.update(c,{...w,...A,isLoading:!1}):be(A.render,{...w,...A,isLoading:!1}),b},g=ll(e)?e():e;return g.then(_=>{p("success",s,_)}).catch(_=>{p("error",n,_)}),g}be.POSITION=ph;be.THEME=Al;be.TYPE=as;be.TRANSITIONS=KG;const MY={install(e,t={}){NY(t)}};typeof window<"u"&&(window.Vue3Toastify=MY);function NY(e={}){const t=pg(gD,e);fY(t)}const LY="/assets/receipt-icon-C-LvMz67.png",UY={name:"AddNewExpenseModal",data(){return{showSuccessMessage:!1,showErrorMessage:!1,selectedCurrency:"",user:!1,tempSelectedImage:null,tempSelectedPhotoName:null,tempFile:null,currentUser:{FirstName:"",LastName:"",UID:""},trip:{TripName:"",Members:[],MemberDetails:[],Currency:"",UID:""},expense:{date:"",title:"",amount:"",paidBy:"",category:"Food",splitBetween:"",owedMembers:[]}}},emits:["returnToMainPage"],props:{tripID:String},computed:{currencyOptions(){return Object.entries(this.currencySymbols).map(([e,t])=>({code:e,symbol:t}))},availableMembers(){const e=this.trip.MemberDetails.filter(t=>!this.expense.owedMembers.some(n=>n.UID===t.UID));return console.log("Filtered Members:",e),e}},methods:{initializeCurrency(){this.trip.Currency&&(this.selectedCurrency=this.trip.Currency)},addSelectedMember(e){const t=e.target.value;if(t==="Everyone"){const n=this.trip.MemberDetails.slice();this.expense.owedMembers=n}else{const n=this.trip.MemberDetails.find(s=>s.UID===t);n&&!this.expense.owedMembers.some(s=>s.UID===n.userID)&&this.expense.owedMembers.push(n)}console.log(this.expense.owedMembers),e.target.value=""},removeSelectedMember(e){this.expense.owedMembers.splice(e,1),console.log("User index: "+e),console.log("Owed members: "+this.expense.owedMembers)},async fetchCurrentUserDetails(e){const t=ct(mt,"Users",e),n=await he(t);if(n.exists()){const s=n.data();this.currentUser.FirstName=s.FirstName,this.currentUser.LastName=s.LastName,this.currentUser.UID=e,this.expense.paidBy=e}else console.error("No user found with UID:",e)},returnToMainExpensesPage(){this.$emit("returnToMainPage")},async fetchTripData(){const e=ct(mt,"Trips",this.$route.params.tripID),t=await he(e);if(t.exists()){const n=t.data();this.trip.TripName=n.TripName,this.trip.Currency=n.Currency,this.trip.Members=n.Members,this.trip.UID=this.$route.params.tripID,this.initializeCurrency()}else console.log("Error")},async convertMembersArray(){const e=ha(ue(mt,"Users"),Rb("__name__","in",this.trip.Members));(await Ns(e)).forEach(n=>{this.trip.MemberDetails.push({...n.data(),UID:n.id})})},async updateDebts(e){for(const t of this.expense.owedMembers)if(t.UID!==this.expense.paidBy){const n=ct(mt,"Trips",this.trip.UID),s=ct(ue(n,"Debts"),t.UID),i=ct(ue(n,"Debts"),this.expense.paidBy),r=ue(i,"Who Owes User"),o=ue(i,"User Owes Who"),a=ue(s,"User Owes Who"),c=ue(s,"Who Owes User"),h=Number((this.expense.amount/this.expense.owedMembers.length).toFixed(2)),d=ct(o,t.UID),p=await he(d);if(p.exists()){const g=p.data();if(g.totalAmount>h)try{await rs(ct(o,t.UID),{totalAmount:Cs(-h)}),await rs(ct(c,this.expense.paidBy),{totalAmount:Cs(-h)})}catch(_){console.error(_)}else try{const _=ct(o,t.UID),y=ct(c,this.expense.paidBy);await to(_),await to(y);const b=ct(a,this.expense.paidBy),A=(await he(b)).data();let R={expenses:{[`expenses.${e}`]:Cs(h-g.totalAmount)},totalAmount:Cs(h-g.totalAmount),currency:this.trip.Currency};(!A||A.reminder===void 0)&&(R.reminder=!1),await ni(b,R,{merge:!0}),console.log(`${memberID} owes ${this.expense.paidBy} $${h}`),await ni(ct(r,t.UID),{expenses:{[`expenses.${e}`]:Cs(h-g.totalAmount)},totalAmount:Cs(h-g.totalAmount),currency:this.trip.Currency},{merge:!0})}catch(_){console.error(_)}}else{const g=ct(r,t.UID),_=ct(a,this.expense.paidBy);try{await ni(g,{expenses:{[`expenses.${e}`]:Cs(h)},totalAmount:Cs(h),currency:this.trip.Currency},{merge:!0}),console.log(`${t.UID} owes ${this.expense.paidBy} $${h}`),await ni(_,{expenses:{[`expenses.${e}`]:Cs(h)},totalAmount:Cs(h),currency:this.trip.Currency,reminder:!1},{merge:!0}),console.log(`${this.expense.paidBy} has a debtor with memberID ${t.UID} who owes him/her $${h}`)}catch(y){console.error(y)}}}},async handleFileChange(e){this.handlePhotoChange(e),this.tempDisplayPhoto(e)},async handlePhotoChange(e){const t=e.target.files[0];if(t){const n=new FormData;n.append("file",t);try{const i=await(await fetch("http://localhost:3000/upload",{method:"POST",body:n})).json();console.log("Received data:",i),i?this.expense.amount=i.totalAmount.toFixed(2):alert("Receipt processing failed.")}catch(s){console.error("Error uploading and processing image:",s),alert("Error processing the receipt")}}},tempDisplayPhoto(e){const t=e.target.files[0];if(t)try{const n=new FileReader;n.onload=s=>{this.tempSelectedImage=s.target.result,console.log(s.target.result),this.tempSelectedPhotoName=t.name},n.readAsDataURL(t),this.tempFile=t}catch(n){console.error("Error reading image file:",n)}},async addExpense(){const e=ct(mt,"Trips",this.trip.UID),t=ct(ue(e,"Expenses")),n=t.id;await this.updateDebts(n);try{await ni(t,{title:this.expense.title,amount:this.expense.amount,paidBy:this.expense.paidBy,category:this.expense.category,currency:this.trip.Currency,date:un.fromDate(new Date(this.expense.date)),UID:t.id,owedMembers:this.expense.owedMembers}),this.showSuccessMessage=!0,console.log("Expense added successfully!");const s=ue(e,"Budgets"),i=ct(s,this.expense.category);await ni(i,{used:Cs(Number(this.expense.amount))},{merge:!0}),this.expense.date="",this.expense.title="",this.expense.amount="",this.expense.paidBy="",this.expense.category="",this.expense.splitBetween="",this.expense.owedMembers=[],be("Expense added successfully!",{autoClose:2e3}),this.showErrorMessage=!1}catch(s){console.error("Error adding expense: "+s),this.showErrorMessage=!0}}},mounted(){this.initializeCurrency();const e=Xn();Qs(e,async t=>{t&&(this.user=t,await this.fetchTripData(),await this.fetchCurrentUserDetails(t.uid),await this.convertMembersArray())})}},Hi=e=>(Yn("data-v-dc6d50aa"),e=e(),Qn(),e),FY={class:"app-container"},VY={class:"main-content"},BY={key:0,class:"error-message"},$Y={class:"main-container"},HY={class:"header"},WY=Hi(()=>I("img",{src:qb,alt:"Back",class:"backbutton-icon"},null,-1)),zY=[WY],jY=Hi(()=>I("h1",null,"Add New Expense",-1)),qY={class:"form-container"},KY={class:"first-row"},GY={class:"second-row"},YY=_p('<option value="Food" data-v-dc6d50aa></option><option value="Shopping" data-v-dc6d50aa></option><option value="Transport" data-v-dc6d50aa></option><option value="Entertainment" data-v-dc6d50aa></option><option value="Accomodations" data-v-dc6d50aa></option><option value="Miscellaneous" data-v-dc6d50aa></option>',6),QY=[YY],XY=Hi(()=>I("br",null,null,-1)),JY={class:"third-row"},ZY={class:"currency-category"},tQ=Hi(()=>I("br",null,null,-1)),eQ={class:"fourth-row"},nQ={class:"paid-by"},sQ=Hi(()=>I("span",null,"Paid by",-1)),iQ=["value"],rQ=Hi(()=>I("span",null,"and split between",-1)),oQ={class:"select-wrapper"},aQ={class:"selected-items"},lQ={key:0,class:"placeholder"},cQ=["onClick"],uQ=Hi(()=>I("option",{disabled:"",selected:"",value:""},"Select",-1)),hQ=Hi(()=>I("option",{value:"Everyone"},"Everyone",-1)),dQ=["value"],fQ={class:"receipt-upload"},pQ=Hi(()=>I("img",{src:LY,class:"receipt-icon"},null,-1)),gQ=Hi(()=>I("label",{class:"receipt-upload-btn",for:"actual-btn"},"Upload Receipt",-1)),mQ=["src","alt"];function _Q(e,t,n,s,i,r){return W(),j("div",FY,[I("div",VY,[i.showErrorMessage?(W(),j("p",BY,"All fields must be filled!")):Xt("",!0),I("div",$Y,[I("div",HY,[I("div",{class:"back-button",onClick:t[0]||(t[0]=(...o)=>r.returnToMainExpensesPage&&r.returnToMainExpensesPage(...o))},zY),jY]),I("div",qY,[I("div",KY,[Ae(I("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=o=>i.expense.date=o),placeholder:"Choose Date"},null,512),[[gn,i.expense.date]])]),I("div",GY,[Ae(I("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.expense.category=o),class:"expense-category"},QY,512),[[lu,i.expense.category]]),Ae(I("input",{class:"expense-title",type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>i.expense.title=o),placeholder:"Description"},null,512),[[gn,i.expense.title]]),XY]),I("div",JY,[I("div",ZY,[I("p",null,ot(i.selectedCurrency),1)]),Ae(I("input",{class:"expense-amount",type:"number","onUpdate:modelValue":t[4]||(t[4]=o=>i.expense.amount=o),placeholder:"0.00"},null,512),[[gn,i.expense.amount]]),tQ]),I("div",eQ,[I("div",nQ,[sQ,Ae(I("select",{class:"payer","onUpdate:modelValue":t[5]||(t[5]=o=>i.expense.paidBy=o)},[(W(!0),j(xe,null,Pn(this.trip.MemberDetails,o=>(W(),j("option",{key:o.UID,value:o.UID},ot(o.FirstName)+" "+ot(o.LastName),9,iQ))),128))],512),[[lu,i.expense.paidBy]]),rQ,I("div",oQ,[I("div",aQ,[i.expense.owedMembers.length?Xt("",!0):(W(),j("span",lQ,"Add Members")),(W(!0),j(xe,null,Pn(i.expense.owedMembers,(o,a)=>(W(),j("div",{key:a,class:"selected-item"},[bs(ot(o.FirstName)+" "+ot(o.LastName)+" ",1),I("span",{onClick:c=>r.removeSelectedMember(a)},"x",8,cQ)]))),128))]),I("select",{onChange:t[6]||(t[6]=(...o)=>r.addSelectedMember&&r.addSelectedMember(...o)),class:"custom-select"},[uQ,hQ,(W(!0),j(xe,null,Pn(r.availableMembers,o=>(W(),j("option",{key:o.UID,value:o.UID},ot(o.FirstName)+" "+ot(o.LastName),9,dQ))),128))],32)])]),I("div",fQ,[pQ,I("input",{class:"input-file",type:"file",id:"actual-btn",accept:"image/*",onChange:t[7]||(t[7]=(...o)=>r.handleFileChange&&r.handleFileChange(...o))},null,32),gQ,i.tempSelectedImage?(W(),j("img",{key:0,src:i.tempSelectedImage,alt:i.tempSelectedPhotoName,class:"temp-image"},null,8,mQ)):Xt("",!0)])])]),I("button",{type:"submit",onClick:t[8]||(t[8]=(...o)=>r.addExpense&&r.addExpense(...o))},"Add Expense!")])])])}const TD=en(UY,[["render",_Q],["__scopeId","data-v-dc6d50aa"]]),yQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEjElEQVR4nO2ZXWgcVRTHj7Z77+zW4kOCUWmTIH621RbrQ0FTWrUFUanoQ0v75IO++KDVWCyCqekuVqn6IoofT0JYnNlVKH4UTbJzd5MG2pqoiUm7m7Ta+KKYgE2UhKb7lztzs9udzX7PLgnsgQPLmXvP+f/23jt7ZpaobnWrW92WsvN+3+OJgPZHwq9Njvt9j9FKs4Rfm0wEvJAeD3gv1bQ4Ouj6SnMsil/0mmmCThug02kEqbWsQibfBZN9Ov8dx9WI7fMnOSDYJ4jwR8vKGaZ10KkPOt1bDMBHMAgw6HhJRaLsTphMQEixedxkJkx2R0m5DTpuadLpg0LiV8GgKQWwsegCQtsOk08XFJ+C4NMwtbai8wfpHqVpChFanXtgiLYr0hEHGEMXNeb+5ksQn4aYQoTfvmTOLmqUNTNiBo0qbQ/lBjDoiBr0ngNsJwy6hDBty5ojWG/J4tPbSWTlC9M2q1aIdjq0va+0vZEbQKewGrTXMfkdFe/MOrDlil/0KH/EUcuvah1zaNuvtpGRbwXsZTLoPkc8ZsVDlHEXgck+qxhAsI8dQncpgKhjZTYrbb/mA/jLGvQlNTiSTljxIK13rMC5ygH4WEbOELUooQkHwE0K7M/cADrNqUHOAzSr4t6MuOAzLgDMZOQ8QT4FMJsR/5a40jBXDsCMFT9BPgcA3HC6NufntEZpuFw6wOIWctwyYdC4mtxcdYAgtapa8dK3UKmHuBoABu1e8hDrtKXwIdYppCbvcyR9W00+WnUAnQKq1ls5bqN6PoCOUn7IqgIQruSHzKC2YlsJ9HlvdQsAEd/NRbcSIXrQlWYOgr3mGoDJDuWtFaZNqWZOp1X5xkrSDwu10+jRWmDyy64BCD6LGL8tj6Z3i2qni3mgAeg6CPa9i+KhVuGkzJ33gSZMmwoCFHp8g+Bvui5epCA6ytFUtMFkT8PkyeoB8CSEJ6MTds0Q8Wyx9mq1xIsUxH+IrH7AZfE3NMJkF6ouXqS20u/oXtPkjvizT/gwsmcSAy21ES84rFrDeyZl7coBRg8M4rdOWH7uOWCoDehvcl90fxMw2Aacf96uJX30wGBl4uXbhlhDEr88CVx8PZ1Y+virwOh+4OfdwNmtwOm7gVPNQH8jELsxW6CMyWsDzfbYH7fac2WOiUOZuWUtWbOvQc59uAIAPpwWsBY4cz8w8gww0Z5Z0A2faLdzyxqyVhp+uHwAk/+Ue8lvAc5sBoZ2ACNPAWPPAokXgPGX7W/0wmHg4hHb5WcZk9fkGDlWzhnaYeeQuXJvr6HyAX5Y2wCTByH4Qs0OsEj5FQjeJTWUDZACifBWCNZuvQMy+b9VFD1r12CvyH6rYuE5O9aYZyOinn0Q7LB8LQLBv4FgA/ItxZVuPr/QoyHZmxYmP8vYQg+fs99ksFMw+df2XNnVevYiyjYU7DRrYT0v+ZLdL/qwlMtrtNwtctB3tfegJfZa4ZAxeY2Wu8X92lfOPzdS/9T4vV/QcrexTnZX3K9NZwH4tb/jx7zraCVY4qi2PhHw6omA9x/p8ptfMeLrVre6UU3tf6vPWPtLVFlTAAAAAElFTkSuQmCC",vQ="/assets/dustbin-C3thgPmA.png",bQ={data(){return{user:!1,trip:{TripName:"",Members:[],Currency:"",UID:""},toDeleteExpense:null,totalDebtOwedToYou:0,totalDebtYouOwe:0,debtsOwedToYou:[],debtsYouOwe:[],reminders:[],groupedExpenses:{},currencySymbols:{USD:"$",JPY:"",SGD:"S$",AUD:"A$",CAD:"C$",CHF:"",CNY:"",EUR:"",GBP:"",KRW:"",MYR:"RM",NZD:"NZ$",SEK:"kr"},showAddExpenseModal:!1,showClearDebtPage:!1,showReminderConfirmation:!1,showCancelExpenseConfirmation:!1,selectedUser:null}},components:{SideNavBar:hh,AddNewExpenseModal:TD,ClearDebtPage:qG},watch:{showAddExpenseModal(e,t){t===!0&&e===!1&&(this.fetchDebtData(),this.fetchExpensesData())}},computed:{consolidatedReminder(){return this.reminders.length===0?null:this.reminders.map(e=>`${e.FirstName} ${e.LastName} has reminded you to pay ${this.trip.Currency} ${e.totalAmount.toFixed(2)}!`)}},methods:{removeClearDebtPage(){this.showClearDebtPage=!1},sumUpDebts(e){var t=0;for(const n of e)t+=n.totalAmount;return t.toFixed(2)},async fetchExpensesData(){console.log("fetchExpensesData method called");const e=ct(mt,"Trips",this.$route.params.tripID),t=ue(e,"Expenses"),n=ha(t,Db("date","desc")),s=await Ns(n),i={},r=async a=>{if(!i[a]){const c=ct(mt,"Users",a),h=await he(c);i[a]=h.exists()?h.data():{firstName:"Unknown",lastName:""}}return i[a]},o=await Promise.all(s.docs.map(async a=>{const c=a.data();var h;return c.paidBy===this.user.uid?h={FirstName:"You",LastName:""}:h=await r(c.paidBy),{id:a.id,...c,date:c.date.toDate(),paidByFirstName:h.FirstName,paidByLastName:h.LastName}}));this.groupExpensesByDate(o)},async groupExpensesByDate(e){console.log("groupedExpensesByDate called");const t=e.reduce((n,s)=>{const i=s.date.toLocaleDateString("en-GB");n[i]||(n[i]=[]);const r=(s.amount/s.owedMembers.length).toFixed(2);var o;return console.log(s.paidBy),s.owedMembers.some(a=>a.UID===this.user.uid)&&s.paidBy!==this.user.uid?o=`You borrowed ${this.trip.Currency} ${r}`:s.paidBy===this.user.uid?o=`You lent ${this.trip.Currency} ${(s.amount-r).toFixed(2)}`:o="No balance",n[i].push({id:s.id,amount:s.amount,title:s.title,paidBy:s.paidBy,owedMembers:s.owedMembers,category:s.category,subtitle:`${s.paidByFirstName} ${s.paidByLastName} paid ${s.currency} ${s.amount.toFixed(2)}`,sideDisplayText:o}),n},{});this.groupedExpenses=t,console.log(t)},async fetchDebtData(){console.log("fetchDebtData called");const e=ct(mt,"Trips",this.$route.params.tripID),t=ue(e,"Debts"),n=ct(t,this.user.uid),s=ue(n,"User Owes Who"),i=await Ns(s);this.debtsYouOwe=[],this.reminders=[];const r=i.docs.map(async p=>{const g=ct(mt,"Users",p.id),_=await he(g);return _.exists()?(p.data().reminder&&p.data().totalAmount>0&&this.reminders.push({totalAmount:p.data().totalAmount,paidByID:p.id,..._.data()}),{...p.data(),UID:p.id,FirstName:_.data().FirstName,LastName:_.data().LastName,Username:_.data().Username,Email:_.data().Email}):{...p.data(),UID:p.id}}),o=await Promise.all(r);this.debtsYouOwe=o,console.log(this.debtsYouOwe),this.totalDebtYouOwe=this.sumUpDebts(this.debtsYouOwe);const a=ue(n,"Who Owes User"),c=await Ns(a);this.debtsOwedToYou=[];const h=c.docs.map(async p=>{const g=ct(mt,"Users",p.id),_=await he(g);return _.exists()?{...p.data(),UID:p.id,FirstName:_.data().FirstName,LastName:_.data().LastName,Username:_.data().Username}:{...p.data(),UID:p.id}}),d=await Promise.all(h);this.debtsOwedToYou=d,this.totalDebtOwedToYou=this.sumUpDebts(this.debtsOwedToYou),console.log(this.totalDebtOwedToYou)},async fetchTripData(){const e=ct(mt,"Trips",this.$route.params.tripID);try{const t=await he(e);this.trip.TripName=t.data().TripName,this.trip.Currency=t.data().Currency,this.trip.Members=t.data().Members,this.trip.UID=this.$route.params.tripID}catch(t){console.error("Error fetching user data:",t)}},showReminderPopup(e){this.showReminderConfirmation=!0,this.selectedUser=e},async remindUser(e){const t=ct(mt,"Trips",this.$route.params.tripID);console.log("tripdocref: "+t);const n=ue(t,"Debts");console.log("debtCollection: "+n);const s=ct(n,e.UID);console.log(s);const i=ue(s,"User Owes Who");console.log("userOwesWhoRef: "+i);const r=ct(i,this.user.uid);console.log("userOwesWhoDoc: "+r),this.showReminderConfirmation=!0;try{await rs(r,{reminder:!0}),console.log("Reminder successfully sent to owing member!"),this.showReminderConfirmation=!1,this.selectedUser=null,be("Reminder sent successfully!",{autoClose:2e3})}catch(o){console.error(o)}},clearDebt(){this.showClearDebtPage=!0},cancelReminder(){this.showReminderConfirmation=!1,this.selectedUser=null},showCancelExpensePopup(e){this.showCancelExpenseConfirmation=!0,this.toDeleteExpense=e},cancelConfirmation(){this.showCancelExpenseConfirmation=!1,this.toDeleteExpense=null},async deleteExpense(){console.log(this.toDeleteExpense);const e=ct(mt,"Trips",this.trip.UID),t=ct(e,"Expenses",this.toDeleteExpense.id),n=ct(e,"Debts",this.toDeleteExpense.paidBy);console.log(this.toDeleteExpense.owedMembers);for(const s of this.toDeleteExpense.owedMembers)if(s.UID!==this.toDeleteExpense.paidBy){const i=ue(n,"Who Owes User");console.log(s.UID);const r=ct(i,s.UID),o=await he(r);if(o.exists()){const d=o.data();if(console.log(d.expenses),d.expenses.hasOwnProperty(`expenses.${this.toDeleteExpense.id}`)){const p=d.expenses[`expenses.${this.toDeleteExpense.id}`];console.log(p),d.totalAmount>p?await ni(r,{expenses:{[`expenses.${this.toDeleteExpense.id}`]:KI()},totalAmount:Cs(-p)},{merge:!0}):await to(r),console.log("Expense removed from paid member's debt data")}}const a=ct(e,"Debts",s.UID),c=ct(a,"User Owes Who",this.toDeleteExpense.paidBy),h=await he(c);if(h.exists()){const d=h.data();if(d.expenses.hasOwnProperty(`expenses.${this.toDeleteExpense.id}`)){const p=d.expenses[`expenses.${this.toDeleteExpense.id}`];d.totalAmount>p?await ni(c,{expenses:{[`expenses.${this.toDeleteExpense.id}`]:KI()},totalAmount:Cs(-p)},{merge:!0}):await to(c),console.log("Expense removed from owing member's debt data")}}}await to(t),await this.fetchDebtData(),await this.fetchExpensesData(),this.showCancelExpenseConfirmation=!1,be("Expense deleted successfully!",{autoClose:2e3})}},mounted(){const e=Xn();Qs(e,async t=>{t&&(this.user=t,console.log(this.$route.query.tripName),await this.fetchTripData(),await this.fetchDebtData(),await this.fetchExpensesData())})}},Hl=e=>(Yn("data-v-8981b8b0"),e=e(),Qn(),e),wQ={class:"app-container"},EQ={key:0,class:"main-container"},TQ={key:0,class:"reminders"},IQ={class:"reminder-msg"},AQ=Hl(()=>I("img",{src:yQ,alt:"Reminder Icon",class:"reminder-icon"},null,-1)),xQ=Hl(()=>I("h1",null,"Reminders:",-1)),SQ=Hl(()=>I("h1",{class:"debt-overview"},"Debt Overview",-1)),RQ={class:"debt-container"},CQ={class:"owed-container"},PQ={class:"amount"},DQ={key:0,class:"debt-details"},kQ={class:"initials"},OQ={class:"details"},MQ={class:"name"},NQ={class:"debt-amount"},LQ={class:"action-buttons"},UQ=["onClick"],FQ={key:1},VQ={class:"owe-container"},BQ={class:"amount"},$Q={key:0,class:"debt-details"},HQ={class:"initials"},WQ={class:"details"},zQ={class:"name"},jQ={class:"debt-amount"},qQ={class:"action-buttons"},KQ={key:1},GQ={class:"expenses-list-container"},YQ=Hl(()=>I("h2",{class:"expense-list-heading"},"LIST OF EXPENSES",-1)),QQ={key:0,class:"no-expense-msg"},XQ={key:1},JQ={class:"date"},ZQ={class:"expense-item"},tX={class:"expense-icon"},eX={key:0},nX={key:1},sX={key:2},iX={key:3},rX={key:4},oX={key:5},aX={class:"expense-details"},lX={class:"expense-title"},cX={class:"expense-subtitle"},uX={class:"right-side"},hX=["onClick"],dX=Hl(()=>I("img",{src:vQ,alt:"delete",class:"dustbin-icon"},null,-1)),fX=[dX],pX={key:0,class:"expense-balance"},gX={key:1,class:"confirmation-popup"},mX={class:"confirmation-content"},_X=Hl(()=>I("p",{class:"reminder-confirmation"}," Are you sure you want to delete this expense? ",-1)),yX={class:"confirmation-buttons"},vX={key:2,class:"confirmation-popup"},bX={class:"confirmation-content"},wX={class:"reminder-confirmation"},EX={class:"confirmation-buttons"},TX={key:1},IX={key:0},AX={key:1};function xX(e,t,n,s,i,r){const o=ze("SideNavBar"),a=ze("ClearDebtPage"),c=ze("AddNewExpenseModal");return W(),j("div",wQ,[Et(o,{tripName:e.$route.query.tripName,tripID:e.$route.params.tripID},null,8,["tripName","tripID"]),!i.showAddExpenseModal&&!i.showClearDebtPage?(W(),j("div",EQ,[r.consolidatedReminder?(W(),j("div",TQ,[I("div",IQ,[AQ,xQ,I("ul",null,[(W(!0),j(xe,null,Pn(r.consolidatedReminder,h=>(W(),j("li",{key:h.id},ot(h),1))),128))])])])):Xt("",!0),SQ,I("div",RQ,[I("div",CQ,[I("h2",null,[bs("YOU ARE OWED "),I("span",PQ,ot(i.currencySymbols[this.trip.Currency])+" "+ot(this.totalDebtOwedToYou),1),bs(" IN TOTAL")]),(W(!0),j(xe,null,Pn(i.debtsOwedToYou,h=>(W(),j("div",{class:"individual-debt",key:h.UID},[h.totalAmount!==0?(W(),j("div",DQ,[I("div",kQ,ot(h.FirstName[0])+ot(h.LastName[0]),1),I("div",OQ,[I("span",MQ,ot(h.FirstName)+" "+ot(h.LastName)+" owes you",1),I("span",NQ,ot(i.currencySymbols[this.trip.Currency])+" "+ot(h.totalAmount.toFixed(2)),1)]),I("div",LQ,[I("button",{class:"remind-btn",onClick:d=>r.showReminderPopup(h)},"Remind",8,UQ)])])):(W(),j("div",FQ))]))),128))]),I("div",VQ,[I("h2",null,[bs("YOU OWE "),I("span",BQ,ot(i.currencySymbols[this.trip.Currency])+" "+ot(this.totalDebtYouOwe),1),bs(" IN TOTAL")]),(W(!0),j(xe,null,Pn(i.debtsYouOwe,h=>(W(),j("div",{class:"individual-debt",key:h.UID},[h.totalAmount!==0?(W(),j("div",$Q,[I("div",HQ,ot(h.FirstName[0])+ot(h.LastName[0]),1),I("div",WQ,[I("span",zQ,"You owe "+ot(h.FirstName)+" "+ot(h.LastName),1),I("span",jQ,ot(i.currencySymbols[this.trip.Currency])+" "+ot(h.totalAmount.toFixed(2)),1)]),I("div",qQ,[I("button",{class:"clear-btn",onClick:t[0]||(t[0]=(...d)=>r.clearDebt&&r.clearDebt(...d))},"Clear Debt")])])):(W(),j("div",KQ))]))),128))])]),I("div",GQ,[YQ,Object.keys(i.groupedExpenses).length===0?(W(),j("div",QQ," No expense added yet. Start tallying by clicking the '+' button! ")):(W(),j("div",XQ,[(W(!0),j(xe,null,Pn(i.groupedExpenses,(h,d)=>(W(),j("div",{class:"date-expense-group",key:d},[I("div",JQ,ot(d),1),(W(!0),j(xe,null,Pn(h,p=>(W(),j("div",{class:"expenses",key:p.id},[I("div",ZQ,[I("div",tX,[p.category==="Food"?(W(),j("span",eX,"")):p.category==="Shopping"?(W(),j("span",nX,"")):p.category==="Transport"?(W(),j("span",sX,"")):p.category==="Entertainment"?(W(),j("span",iX,"")):p.category==="Accommodations"?(W(),j("span",rX,"")):(W(),j("span",oX,""))]),I("div",aX,[I("div",lX,ot(p.title),1),I("div",cX,ot(p.subtitle),1)]),I("div",uX,[I("div",{class:"delete-expense",onClick:g=>r.showCancelExpensePopup(p)},fX,8,hX),I("div",{class:Dl(["expense-amount",{"no-balance":!p.balance}])},ot(p.sideDisplayText),3)]),p.balance?(W(),j("div",pX,ot(p.balance),1)):Xt("",!0)])]))),128))]))),128))])),I("button",{class:"add-expense-btn",onClick:t[1]||(t[1]=h=>i.showAddExpenseModal=!0)},"+")]),i.showCancelExpenseConfirmation?(W(),j("div",gX,[I("div",mX,[_X,I("div",yX,[I("button",{class:"confirm-button",onClick:t[2]||(t[2]=(...h)=>r.deleteExpense&&r.deleteExpense(...h))},"Delete"),I("button",{class:"cancel-button",onClick:t[3]||(t[3]=(...h)=>r.cancelConfirmation&&r.cancelConfirmation(...h))},"Cancel")])])])):Xt("",!0),i.showReminderConfirmation&&i.selectedUser?(W(),j("div",vX,[I("div",bX,[I("p",wX," Are you sure you want to send a reminder to "+ot(i.selectedUser.FirstName)+" "+ot(i.selectedUser.LastName)+"? ",1),I("div",EX,[I("button",{class:"confirm-button",onClick:t[4]||(t[4]=h=>r.remindUser(i.selectedUser))},"Remind"),I("button",{class:"cancel-button",onClick:t[5]||(t[5]=(...h)=>r.cancelReminder&&r.cancelReminder(...h))},"Cancel")])])])):Xt("",!0)])):(W(),j("div",TX,[i.showClearDebtPage?(W(),j("div",IX,[Et(a,{onRefreshDebtData:r.fetchDebtData,onReturnToMainPage:r.removeClearDebtPage,debts:i.debtsYouOwe,tripID:i.trip.UID},null,8,["onRefreshDebtData","onReturnToMainPage","debts","tripID"])])):(W(),j("div",AX,[Et(c,{onReturnToMainPage:t[6]||(t[6]=h=>i.showAddExpenseModal=!1),tripID:i.trip.UID},null,8,["tripID"])]))]))])}const SX=en(bQ,[["render",xX],["__scopeId","data-v-8981b8b0"]]);/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function gh(e){return e+.5|0}const qr=(e,t,n)=>Math.max(Math.min(e,n),t);function Sc(e){return qr(gh(e*2.55),0,255)}function eo(e){return qr(gh(e*255),0,255)}function sr(e){return qr(gh(e/2.55)/100,0,1)}function PA(e){return qr(gh(e*100),0,100)}const js={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ly=[..."0123456789ABCDEF"],RX=e=>Ly[e&15],CX=e=>Ly[(e&240)>>4]+Ly[e&15],Id=e=>(e&240)>>4===(e&15),PX=e=>Id(e.r)&&Id(e.g)&&Id(e.b)&&Id(e.a);function DX(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&js[e[1]]*17,g:255&js[e[2]]*17,b:255&js[e[3]]*17,a:t===5?js[e[4]]*17:255}:(t===7||t===9)&&(n={r:js[e[1]]<<4|js[e[2]],g:js[e[3]]<<4|js[e[4]],b:js[e[5]]<<4|js[e[6]],a:t===9?js[e[7]]<<4|js[e[8]]:255})),n}const kX=(e,t)=>e<255?t(e):"";function OX(e){var t=PX(e)?RX:CX;return e?"#"+t(e.r)+t(e.g)+t(e.b)+kX(e.a,t):void 0}const MX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ID(e,t,n){const s=t*Math.min(n,1-n),i=(r,o=(r+e/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function NX(e,t,n){const s=(i,r=(i+e/60)%6)=>n-n*t*Math.max(Math.min(r,4-r,1),0);return[s(5),s(3),s(1)]}function LX(e,t,n){const s=ID(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)s[i]*=1-t-n,s[i]+=t;return s}function UX(e,t,n,s,i){return e===i?(t-n)/s+(t<n?6:0):t===i?(n-e)/s+2:(e-t)/s+4}function Yb(e){const n=e.r/255,s=e.g/255,i=e.b/255,r=Math.max(n,s,i),o=Math.min(n,s,i),a=(r+o)/2;let c,h,d;return r!==o&&(d=r-o,h=a>.5?d/(2-r-o):d/(r+o),c=UX(n,s,i,d,r),c=c*60+.5),[c|0,h||0,a]}function Qb(e,t,n,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,s)).map(eo)}function Xb(e,t,n){return Qb(ID,e,t,n)}function FX(e,t,n){return Qb(LX,e,t,n)}function VX(e,t,n){return Qb(NX,e,t,n)}function AD(e){return(e%360+360)%360}function BX(e){const t=MX.exec(e);let n=255,s;if(!t)return;t[5]!==s&&(n=t[6]?Sc(+t[5]):eo(+t[5]));const i=AD(+t[2]),r=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?s=FX(i,r,o):t[1]==="hsv"?s=VX(i,r,o):s=Xb(i,r,o),{r:s[0],g:s[1],b:s[2],a:n}}function $X(e,t){var n=Yb(e);n[0]=AD(n[0]+t),n=Xb(n),e.r=n[0],e.g=n[1],e.b=n[2]}function HX(e){if(!e)return;const t=Yb(e),n=t[0],s=PA(t[1]),i=PA(t[2]);return e.a<255?`hsla(${n}, ${s}%, ${i}%, ${sr(e.a)})`:`hsl(${n}, ${s}%, ${i}%)`}const DA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function WX(){const e={},t=Object.keys(kA),n=Object.keys(DA);let s,i,r,o,a;for(s=0;s<t.length;s++){for(o=a=t[s],i=0;i<n.length;i++)r=n[i],a=a.replace(r,DA[r]);r=parseInt(kA[o],16),e[a]=[r>>16&255,r>>8&255,r&255]}return e}let Ad;function zX(e){Ad||(Ad=WX(),Ad.transparent=[0,0,0,0]);const t=Ad[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const jX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function qX(e){const t=jX.exec(e);let n=255,s,i,r;if(t){if(t[7]!==s){const o=+t[7];n=t[8]?Sc(o):qr(o*255,0,255)}return s=+t[1],i=+t[3],r=+t[5],s=255&(t[2]?Sc(s):qr(s,0,255)),i=255&(t[4]?Sc(i):qr(i,0,255)),r=255&(t[6]?Sc(r):qr(r,0,255)),{r:s,g:i,b:r,a:n}}}function KX(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${sr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const y_=e=>e<=.0031308?e*12.92:Math.pow(e,1/2.4)*1.055-.055,Wa=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function GX(e,t,n){const s=Wa(sr(e.r)),i=Wa(sr(e.g)),r=Wa(sr(e.b));return{r:eo(y_(s+n*(Wa(sr(t.r))-s))),g:eo(y_(i+n*(Wa(sr(t.g))-i))),b:eo(y_(r+n*(Wa(sr(t.b))-r))),a:e.a+n*(t.a-e.a)}}function xd(e,t,n){if(e){let s=Yb(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*n,t===0?360:1)),s=Xb(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function xD(e,t){return e&&Object.assign(t||{},e)}function OA(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=eo(e[3]))):(t=xD(e,{r:0,g:0,b:0,a:1}),t.a=eo(t.a)),t}function YX(e){return e.charAt(0)==="r"?qX(e):BX(e)}class Du{constructor(t){if(t instanceof Du)return t;const n=typeof t;let s;n==="object"?s=OA(t):n==="string"&&(s=DX(t)||zX(t)||YX(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=xD(this._rgb);return t&&(t.a=sr(t.a)),t}set rgb(t){this._rgb=OA(t)}rgbString(){return this._valid?KX(this._rgb):void 0}hexString(){return this._valid?OX(this._rgb):void 0}hslString(){return this._valid?HX(this._rgb):void 0}mix(t,n){if(t){const s=this.rgb,i=t.rgb;let r;const o=n===r?.5:n,a=2*o-1,c=s.a-i.a,h=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;r=1-h,s.r=255&h*s.r+r*i.r+.5,s.g=255&h*s.g+r*i.g+.5,s.b=255&h*s.b+r*i.b+.5,s.a=o*s.a+(1-o)*i.a,this.rgb=s}return this}interpolate(t,n){return t&&(this._rgb=GX(this._rgb,t._rgb,n)),this}clone(){return new Du(this.rgb)}alpha(t){return this._rgb.a=eo(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=gh(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return xd(this._rgb,2,t),this}darken(t){return xd(this._rgb,2,-t),this}saturate(t){return xd(this._rgb,1,t),this}desaturate(t){return xd(this._rgb,1,-t),this}rotate(t){return $X(this._rgb,t),this}}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function tr(){}const QX=(()=>{let e=0;return()=>e++})();function ae(e){return e===null||typeof e>"u"}function Ue(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Zt(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function Ye(e){return(typeof e=="number"||e instanceof Number)&&isFinite(+e)}function Ps(e,t){return Ye(e)?e:t}function Wt(e,t){return typeof e>"u"?t:e}const XX=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:+e/t,SD=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Pe(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function ve(e,t,n,s){let i,r,o;if(Ue(e))if(r=e.length,s)for(i=r-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<r;i++)t.call(n,e[i],i);else if(Zt(e))for(o=Object.keys(e),r=o.length,i=0;i<r;i++)t.call(n,e[o[i]],o[i])}function Kf(e,t){let n,s,i,r;if(!e||!t||e.length!==t.length)return!1;for(n=0,s=e.length;n<s;++n)if(i=e[n],r=t[n],i.datasetIndex!==r.datasetIndex||i.index!==r.index)return!1;return!0}function Gf(e){if(Ue(e))return e.map(Gf);if(Zt(e)){const t=Object.create(null),n=Object.keys(e),s=n.length;let i=0;for(;i<s;++i)t[n[i]]=Gf(e[n[i]]);return t}return e}function RD(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function JX(e,t,n,s){if(!RD(e))return;const i=t[e],r=n[e];Zt(i)&&Zt(r)?ku(i,r,s):t[e]=Gf(r)}function ku(e,t,n){const s=Ue(t)?t:[t],i=s.length;if(!Zt(e))return e;n=n||{};const r=n.merger||JX;let o;for(let a=0;a<i;++a){if(o=s[a],!Zt(o))continue;const c=Object.keys(o);for(let h=0,d=c.length;h<d;++h)r(c[h],e,o,n)}return e}function Yc(e,t){return ku(e,t,{merger:ZX})}function ZX(e,t,n){if(!RD(e))return;const s=t[e],i=n[e];Zt(s)&&Zt(i)?Yc(s,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Gf(i))}const MA={"":e=>e,x:e=>e.x,y:e=>e.y};function tJ(e){const t=e.split("."),n=[];let s="";for(const i of t)s+=i,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function eJ(e){const t=tJ(e);return n=>{for(const s of t){if(s==="")break;n=n&&n[s]}return n}}function lo(e,t){return(MA[t]||(MA[t]=eJ(t)))(e)}function Jb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Ou=e=>typeof e<"u",co=e=>typeof e=="function",NA=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function nJ(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Ve=Math.PI,Fe=2*Ve,sJ=Fe+Ve,Yf=Number.POSITIVE_INFINITY,iJ=Ve/180,rn=Ve/2,ko=Ve/4,LA=Ve*2/3,Kr=Math.log10,Mi=Math.sign;function Qc(e,t,n){return Math.abs(e-t)<n}function UA(e){const t=Math.round(e);e=Qc(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Kr(e))),s=e/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function rJ(e){const t=[],n=Math.sqrt(e);let s;for(s=1;s<n;s++)e%s===0&&(t.push(s),t.push(e/s));return n===(n|0)&&t.push(n),t.sort((i,r)=>i-r).pop(),t}function Sl(e){return!isNaN(parseFloat(e))&&isFinite(e)}function oJ(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function CD(e,t,n){let s,i,r;for(s=0,i=e.length;s<i;s++)r=e[s][n],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function ii(e){return e*(Ve/180)}function Zb(e){return e*(180/Ve)}function FA(e){if(!Ye(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function PD(e,t){const n=t.x-e.x,s=t.y-e.y,i=Math.sqrt(n*n+s*s);let r=Math.atan2(s,n);return r<-.5*Ve&&(r+=Fe),{angle:r,distance:i}}function Uy(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function aJ(e,t){return(e-t+sJ)%Fe-Ve}function Ds(e){return(e%Fe+Fe)%Fe}function Mu(e,t,n,s){const i=Ds(e),r=Ds(t),o=Ds(n),a=Ds(r-i),c=Ds(o-i),h=Ds(i-r),d=Ds(i-o);return i===r||i===o||s&&r===o||a>c&&h<d}function bn(e,t,n){return Math.max(t,Math.min(n,e))}function lJ(e){return bn(e,-32768,32767)}function lr(e,t,n,s=1e-6){return e>=Math.min(t,n)-s&&e<=Math.max(t,n)+s}function t0(e,t,n){n=n||(o=>e[o]<t);let s=e.length-1,i=0,r;for(;s-i>1;)r=i+s>>1,n(r)?i=r:s=r;return{lo:i,hi:s}}const cr=(e,t,n,s)=>t0(e,n,s?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),cJ=(e,t,n)=>t0(e,n,s=>e[s][t]>=n);function uJ(e,t,n){let s=0,i=e.length;for(;s<i&&e[s]<t;)s++;for(;i>s&&e[i-1]>n;)i--;return s>0||i<e.length?e.slice(s,i):e}const DD=["push","pop","shift","splice","unshift"];function hJ(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),DD.forEach(n=>{const s="_onData"+Jb(n),i=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...r){const o=i.apply(this,r);return e._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...r)}),o}})})}function VA(e,t){const n=e._chartjs;if(!n)return;const s=n.listeners,i=s.indexOf(t);i!==-1&&s.splice(i,1),!(s.length>0)&&(DD.forEach(r=>{delete e[r]}),delete e._chartjs)}function kD(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const OD=function(){return typeof window>"u"?function(e){return e()}:window.requestAnimationFrame}();function MD(e,t){let n=[],s=!1;return function(...i){n=i,s||(s=!0,OD.call(window,()=>{s=!1,e.apply(t,n)}))}}function dJ(e,t){let n;return function(...s){return t?(clearTimeout(n),n=setTimeout(e,t,s)):e.apply(this,s),t}}const e0=e=>e==="start"?"left":e==="end"?"right":"center",Vn=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,fJ=(e,t,n,s)=>e===(s?"left":"right")?n:e==="center"?(t+n)/2:t;function ND(e,t,n){const s=t.length;let i=0,r=s;if(e._sorted){const{iScale:o,_parsed:a}=e,c=o.axis,{min:h,max:d,minDefined:p,maxDefined:g}=o.getUserBounds();p&&(i=bn(Math.min(cr(a,c,h).lo,n?s:cr(t,c,o.getPixelForValue(h)).lo),0,s-1)),g?r=bn(Math.max(cr(a,o.axis,d,!0).hi+1,n?0:cr(t,c,o.getPixelForValue(d),!0).hi+1),i,s)-i:r=s-i}return{start:i,count:r}}function LD(e){const{xScale:t,yScale:n,_scaleRanges:s}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!s)return e._scaleRanges=i,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,i),r}const Sd=e=>e===0||e===1,BA=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Fe/n)),$A=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Fe/n)+1,Xc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*rn)+1,easeOutSine:e=>Math.sin(e*rn),easeInOutSine:e=>-.5*(Math.cos(Ve*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>Sd(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Sd(e)?e:BA(e,.075,.3),easeOutElastic:e=>Sd(e)?e:$A(e,.075,.3),easeInOutElastic(e){return Sd(e)?e:e<.5?.5*BA(e*2,.1125,.45):.5+.5*$A(e*2-1,.1125,.45)},easeInBack(e){return e*e*((1.70158+1)*e-1.70158)},easeOutBack(e){return(e-=1)*e*((1.70158+1)*e+1.70158)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Xc.easeOutBounce(1-e),easeOutBounce(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:e=>e<.5?Xc.easeInBounce(e*2)*.5:Xc.easeOutBounce(e*2-1)*.5+.5};function n0(e){if(e&&typeof e=="object"){const t=e.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function HA(e){return n0(e)?e:new Du(e)}function v_(e){return n0(e)?e:new Du(e).saturate(.5).darken(.1).hexString()}const pJ=["x","y","borderWidth","radius","tension"],gJ=["color","borderColor","backgroundColor"];function mJ(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),e.set("animations",{colors:{type:"color",properties:gJ},numbers:{type:"number",properties:pJ}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function _J(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const WA=new Map;function yJ(e,t){t=t||{};const n=e+JSON.stringify(t);let s=WA.get(n);return s||(s=new Intl.NumberFormat(e,t),WA.set(n,s)),s}function mh(e,t,n){return yJ(t,n).format(e)}const UD={values(e){return Ue(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const s=this.chart.options.locale;let i,r=e;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(i="scientific"),r=vJ(e,n)}const o=Kr(Math.abs(r)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),mh(e,s,c)},logarithmic(e,t,n){if(e===0)return"0";const s=n[t].significand||e/Math.pow(10,Math.floor(Kr(e)));return[1,2,3,5,10,15].includes(s)||t>.8*n.length?UD.numeric.call(this,e,t,n):""}};function vJ(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var mg={formatters:UD};function bJ(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,n)=>n.lineWidth,tickColor:(t,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:mg.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const pa=Object.create(null),Fy=Object.create(null);function Jc(e,t){if(!t)return e;const n=t.split(".");for(let s=0,i=n.length;s<i;++s){const r=n[s];e=e[r]||(e[r]=Object.create(null))}return e}function b_(e,t,n){return typeof t=="string"?ku(Jc(e,t),n):ku(Jc(e,""),t)}class wJ{constructor(t,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,i)=>v_(i.backgroundColor),this.hoverBorderColor=(s,i)=>v_(i.borderColor),this.hoverColor=(s,i)=>v_(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}set(t,n){return b_(this,t,n)}get(t){return Jc(this,t)}describe(t,n){return b_(Fy,t,n)}override(t,n){return b_(pa,t,n)}route(t,n,s,i){const r=Jc(this,t),o=Jc(this,s),a="_"+n;Object.defineProperties(r,{[a]:{value:r[n],writable:!0},[n]:{enumerable:!0,get(){const c=this[a],h=o[i];return Zt(c)?Object.assign({},h,c):Wt(c,h)},set(c){this[a]=c}}})}apply(t){t.forEach(n=>n(this))}}var Qe=new wJ({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mJ,_J,bJ]);function EJ(e){return!e||ae(e.size)||ae(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function Qf(e,t,n,s,i){let r=t[i];return r||(r=t[i]=e.measureText(i).width,n.push(i)),r>s&&(s=r),s}function TJ(e,t,n,s){s=s||{};let i=s.data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(i=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let o=0;const a=n.length;let c,h,d,p,g;for(c=0;c<a;c++)if(p=n[c],p!=null&&!Ue(p))o=Qf(e,i,r,o,p);else if(Ue(p))for(h=0,d=p.length;h<d;h++)g=p[h],g!=null&&!Ue(g)&&(o=Qf(e,i,r,o,g));e.restore();const _=r.length/2;if(_>n.length){for(c=0;c<_;c++)delete i[r[c]];r.splice(0,_)}return o}function Oo(e,t,n){const s=e.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((t-i)*s)/s+i}function zA(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Vy(e,t,n,s){FD(e,t,n,s,null)}function FD(e,t,n,s,i){let r,o,a,c,h,d,p,g;const _=t.pointStyle,y=t.rotation,b=t.radius;let w=(y||0)*iJ;if(_&&typeof _=="object"&&(r=_.toString(),r==="[object HTMLImageElement]"||r==="[object HTMLCanvasElement]")){e.save(),e.translate(n,s),e.rotate(w),e.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),e.restore();return}if(!(isNaN(b)||b<=0)){switch(e.beginPath(),_){default:i?e.ellipse(n,s,i/2,b,0,0,Fe):e.arc(n,s,b,0,Fe),e.closePath();break;case"triangle":d=i?i/2:b,e.moveTo(n+Math.sin(w)*d,s-Math.cos(w)*b),w+=LA,e.lineTo(n+Math.sin(w)*d,s-Math.cos(w)*b),w+=LA,e.lineTo(n+Math.sin(w)*d,s-Math.cos(w)*b),e.closePath();break;case"rectRounded":h=b*.516,c=b-h,o=Math.cos(w+ko)*c,p=Math.cos(w+ko)*(i?i/2-h:c),a=Math.sin(w+ko)*c,g=Math.sin(w+ko)*(i?i/2-h:c),e.arc(n-p,s-a,h,w-Ve,w-rn),e.arc(n+g,s-o,h,w-rn,w),e.arc(n+p,s+a,h,w,w+rn),e.arc(n-g,s+o,h,w+rn,w+Ve),e.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*b,d=i?i/2:c,e.rect(n-d,s-c,2*d,2*c);break}w+=ko;case"rectRot":p=Math.cos(w)*(i?i/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,g=Math.sin(w)*(i?i/2:b),e.moveTo(n-p,s-a),e.lineTo(n+g,s-o),e.lineTo(n+p,s+a),e.lineTo(n-g,s+o),e.closePath();break;case"crossRot":w+=ko;case"cross":p=Math.cos(w)*(i?i/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,g=Math.sin(w)*(i?i/2:b),e.moveTo(n-p,s-a),e.lineTo(n+p,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o);break;case"star":p=Math.cos(w)*(i?i/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,g=Math.sin(w)*(i?i/2:b),e.moveTo(n-p,s-a),e.lineTo(n+p,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o),w+=ko,p=Math.cos(w)*(i?i/2:b),o=Math.cos(w)*b,a=Math.sin(w)*b,g=Math.sin(w)*(i?i/2:b),e.moveTo(n-p,s-a),e.lineTo(n+p,s+a),e.moveTo(n+g,s-o),e.lineTo(n-g,s+o);break;case"line":o=i?i/2:Math.cos(w)*b,a=Math.sin(w)*b,e.moveTo(n-o,s-a),e.lineTo(n+o,s+a);break;case"dash":e.moveTo(n,s),e.lineTo(n+Math.cos(w)*(i?i/2:b),s+Math.sin(w)*b);break;case!1:e.closePath();break}e.fill(),t.borderWidth>0&&e.stroke()}}function ur(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function _g(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function yg(e){e.restore()}function IJ(e,t,n,s,i){if(!t)return e.lineTo(n.x,n.y);if(i==="middle"){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else i==="after"!=!!s?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function AJ(e,t,n,s){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function xJ(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ae(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function SJ(e,t,n,s,i){if(i.strikethrough||i.underline){const r=e.measureText(s),o=t-r.actualBoundingBoxLeft,a=t+r.actualBoundingBoxRight,c=n-r.actualBoundingBoxAscent,h=n+r.actualBoundingBoxDescent,d=i.strikethrough?(c+h)/2:h;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,d),e.lineTo(a,d),e.stroke()}}function RJ(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function ga(e,t,n,s,i,r={}){const o=Ue(t)?t:[t],a=r.strokeWidth>0&&r.strokeColor!=="";let c,h;for(e.save(),e.font=i.string,xJ(e,r),c=0;c<o.length;++c)h=o[c],r.backdrop&&RJ(e,r.backdrop),a&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ae(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(h,n,s,r.maxWidth)),e.fillText(h,n,s,r.maxWidth),SJ(e,n,s,h,r),s+=Number(i.lineHeight);e.restore()}function Nu(e,t){const{x:n,y:s,w:i,h:r,radius:o}=t;e.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),e.lineTo(n,s+r-o.bottomLeft),e.arc(n+o.bottomLeft,s+r-o.bottomLeft,o.bottomLeft,Ve,rn,!0),e.lineTo(n+i-o.bottomRight,s+r),e.arc(n+i-o.bottomRight,s+r-o.bottomRight,o.bottomRight,rn,0,!0),e.lineTo(n+i,s+o.topRight),e.arc(n+i-o.topRight,s+o.topRight,o.topRight,0,-rn,!0),e.lineTo(n+o.topLeft,s)}const CJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,PJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function DJ(e,t){const n=(""+e).match(CJ);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const kJ=e=>+e||0;function s0(e,t){const n={},s=Zt(t),i=s?Object.keys(t):t,r=Zt(e)?s?o=>Wt(e[o],e[t[o]]):o=>e[o]:()=>e;for(const o of i)n[o]=kJ(r(o));return n}function VD(e){return s0(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Zo(e){return s0(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Gn(e){const t=VD(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function mn(e,t){e=e||{},t=t||Qe.font;let n=Wt(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let s=Wt(e.style,t.style);s&&!(""+s).match(PJ)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const i={family:Wt(e.family,t.family),lineHeight:DJ(Wt(e.lineHeight,t.lineHeight),n),size:n,style:s,weight:Wt(e.weight,t.weight),string:""};return i.string=EJ(i),i}function Rc(e,t,n,s){let i=!0,r,o,a;for(r=0,o=e.length;r<o;++r)if(a=e[r],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),n!==void 0&&Ue(a)&&(a=a[n%a.length],i=!1),a!==void 0))return s&&!i&&(s.cacheable=!1),a}function OJ(e,t,n){const{min:s,max:i}=e,r=SD(t,(i-s)/2),o=(a,c)=>n&&a===0?0:a+c;return{min:o(s,-Math.abs(r)),max:o(i,r)}}function vo(e,t){return Object.assign(Object.create(e),t)}function i0(e,t=[""],n,s,i=()=>e[0]){const r=n||e;typeof s>"u"&&(s=WD("_fallback",e));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:s,_getTarget:i,override:a=>i0([a,...e],t,r,s)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete e[0][c],!0},get(a,c){return $D(a,c,()=>$J(c,t,e,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(a,c){return qA(a).includes(c)},ownKeys(a){return qA(a)},set(a,c,h){const d=a._storage||(a._storage=i());return a[c]=d[c]=h,delete a._keys,!0}})}function Rl(e,t,n,s){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:BD(e,s),setContext:r=>Rl(e,r,n,s),override:r=>Rl(e.override(r),t,n,s)};return new Proxy(i,{deleteProperty(r,o){return delete r[o],delete e[o],!0},get(r,o,a){return $D(r,o,()=>NJ(r,o,a))},getOwnPropertyDescriptor(r,o){return r._descriptors.allKeys?Reflect.has(e,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,o)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(r,o){return Reflect.has(e,o)},ownKeys(){return Reflect.ownKeys(e)},set(r,o,a){return e[o]=a,delete r[o],!0}})}function BD(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:s=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:s,isScriptable:co(n)?n:()=>n,isIndexable:co(s)?s:()=>s}}const MJ=(e,t)=>e?e+Jb(t):t,r0=(e,t)=>Zt(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function $D(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const s=n();return e[t]=s,s}function NJ(e,t,n){const{_proxy:s,_context:i,_subProxy:r,_descriptors:o}=e;let a=s[t];return co(a)&&o.isScriptable(t)&&(a=LJ(t,a,e,n)),Ue(a)&&a.length&&(a=UJ(t,a,e,o.isIndexable)),r0(t,a)&&(a=Rl(a,i,r&&r[t],o)),a}function LJ(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let c=t(r,o||s);return a.delete(e),r0(e,c)&&(c=o0(i._scopes,i,e,c)),c}function UJ(e,t,n,s){const{_proxy:i,_context:r,_subProxy:o,_descriptors:a}=n;if(typeof r.index<"u"&&s(e))return t[r.index%t.length];if(Zt(t[0])){const c=t,h=i._scopes.filter(d=>d!==c);t=[];for(const d of c){const p=o0(h,i,e,d);t.push(Rl(p,r,o&&o[e],a))}}return t}function HD(e,t,n){return co(e)?e(t,n):e}const FJ=(e,t)=>e===!0?t:typeof e=="string"?lo(t,e):void 0;function VJ(e,t,n,s,i){for(const r of t){const o=FJ(n,r);if(o){e.add(o);const a=HD(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function o0(e,t,n,s){const i=t._rootScopes,r=HD(t._fallback,n,s),o=[...e,...i],a=new Set;a.add(s);let c=jA(a,o,n,r||n,s);return c===null||typeof r<"u"&&r!==n&&(c=jA(a,o,r,c,s),c===null)?!1:i0(Array.from(a),[""],i,r,()=>BJ(t,n,s))}function jA(e,t,n,s,i){for(;n;)n=VJ(e,t,n,s,i);return n}function BJ(e,t,n){const s=e._getTarget();t in s||(s[t]={});const i=s[t];return Ue(i)&&Zt(n)?n:i||{}}function $J(e,t,n,s){let i;for(const r of t)if(i=WD(MJ(r,e),n),typeof i<"u")return r0(e,i)?o0(n,s,e,i):i}function WD(e,t){for(const n of t){if(!n)continue;const s=n[e];if(typeof s<"u")return s}}function qA(e){let t=e._keys;return t||(t=e._keys=HJ(e._scopes)),t}function HJ(e){const t=new Set;for(const n of e)for(const s of Object.keys(n).filter(i=>!i.startsWith("_")))t.add(s);return Array.from(t)}function zD(e,t,n,s){const{iScale:i}=e,{key:r="r"}=this._parsing,o=new Array(s);let a,c,h,d;for(a=0,c=s;a<c;++a)h=a+n,d=t[h],o[a]={r:i.parse(lo(d,r),h)};return o}const WJ=Number.EPSILON||1e-14,Cl=(e,t)=>t<e.length&&!e[t].skip&&e[t],jD=e=>e==="x"?"y":"x";function zJ(e,t,n,s){const i=e.skip?t:e,r=t,o=n.skip?t:n,a=Uy(r,i),c=Uy(o,r);let h=a/(a+c),d=c/(a+c);h=isNaN(h)?0:h,d=isNaN(d)?0:d;const p=s*h,g=s*d;return{previous:{x:r.x-p*(o.x-i.x),y:r.y-p*(o.y-i.y)},next:{x:r.x+g*(o.x-i.x),y:r.y+g*(o.y-i.y)}}}function jJ(e,t,n){const s=e.length;let i,r,o,a,c,h=Cl(e,0);for(let d=0;d<s-1;++d)if(c=h,h=Cl(e,d+1),!(!c||!h)){if(Qc(t[d],0,WJ)){n[d]=n[d+1]=0;continue}i=n[d]/t[d],r=n[d+1]/t[d],a=Math.pow(i,2)+Math.pow(r,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*t[d],n[d+1]=r*o*t[d])}}function qJ(e,t,n="x"){const s=jD(n),i=e.length;let r,o,a,c=Cl(e,0);for(let h=0;h<i;++h){if(o=a,a=c,c=Cl(e,h+1),!a)continue;const d=a[n],p=a[s];o&&(r=(d-o[n])/3,a[`cp1${n}`]=d-r,a[`cp1${s}`]=p-r*t[h]),c&&(r=(c[n]-d)/3,a[`cp2${n}`]=d+r,a[`cp2${s}`]=p+r*t[h])}}function KJ(e,t="x"){const n=jD(t),s=e.length,i=Array(s).fill(0),r=Array(s);let o,a,c,h=Cl(e,0);for(o=0;o<s;++o)if(a=c,c=h,h=Cl(e,o+1),!!c){if(h){const d=h[t]-c[t];i[o]=d!==0?(h[n]-c[n])/d:0}r[o]=a?h?Mi(i[o-1])!==Mi(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}jJ(e,i,r),qJ(e,r,t)}function Rd(e,t,n){return Math.max(Math.min(e,n),t)}function GJ(e,t){let n,s,i,r,o,a=ur(e[0],t);for(n=0,s=e.length;n<s;++n)o=r,r=a,a=n<s-1&&ur(e[n+1],t),r&&(i=e[n],o&&(i.cp1x=Rd(i.cp1x,t.left,t.right),i.cp1y=Rd(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=Rd(i.cp2x,t.left,t.right),i.cp2y=Rd(i.cp2y,t.top,t.bottom)))}function YJ(e,t,n,s,i){let r,o,a,c;if(t.spanGaps&&(e=e.filter(h=>!h.skip)),t.cubicInterpolationMode==="monotone")KJ(e,i);else{let h=s?e[e.length-1]:e[0];for(r=0,o=e.length;r<o;++r)a=e[r],c=zJ(h,a,e[Math.min(r+1,o-(s?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,h=a}t.capBezierPoints&&GJ(e,n)}function a0(){return typeof window<"u"&&typeof document<"u"}function l0(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function Xf(e,t,n){let s;return typeof e=="string"?(s=parseInt(e,10),e.indexOf("%")!==-1&&(s=s/100*t.parentNode[n])):s=e,s}const vg=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);function QJ(e,t){return vg(e).getPropertyValue(t)}const XJ=["top","right","bottom","left"];function ta(e,t,n){const s={};n=n?"-"+n:"";for(let i=0;i<4;i++){const r=XJ[i];s[r]=parseFloat(e[t+"-"+r+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const JJ=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function ZJ(e,t){const n=e.touches,s=n&&n.length?n[0]:e,{offsetX:i,offsetY:r}=s;let o=!1,a,c;if(JJ(i,r,e.target))a=i,c=r;else{const h=t.getBoundingClientRect();a=s.clientX-h.left,c=s.clientY-h.top,o=!0}return{x:a,y:c,box:o}}function Uo(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:s}=t,i=vg(n),r=i.boxSizing==="border-box",o=ta(i,"padding"),a=ta(i,"border","width"),{x:c,y:h,box:d}=ZJ(e,n),p=o.left+(d&&a.left),g=o.top+(d&&a.top);let{width:_,height:y}=t;return r&&(_-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-p)/_*n.width/s),y:Math.round((h-g)/y*n.height/s)}}function tZ(e,t,n){let s,i;if(t===void 0||n===void 0){const r=l0(e);if(!r)t=e.clientWidth,n=e.clientHeight;else{const o=r.getBoundingClientRect(),a=vg(r),c=ta(a,"border","width"),h=ta(a,"padding");t=o.width-h.width-c.width,n=o.height-h.height-c.height,s=Xf(a.maxWidth,r,"clientWidth"),i=Xf(a.maxHeight,r,"clientHeight")}}return{width:t,height:n,maxWidth:s||Yf,maxHeight:i||Yf}}const Cd=e=>Math.round(e*10)/10;function eZ(e,t,n,s){const i=vg(e),r=ta(i,"margin"),o=Xf(i.maxWidth,e,"clientWidth")||Yf,a=Xf(i.maxHeight,e,"clientHeight")||Yf,c=tZ(e,t,n);let{width:h,height:d}=c;if(i.boxSizing==="content-box"){const g=ta(i,"border","width"),_=ta(i,"padding");h-=_.width+g.width,d-=_.height+g.height}return h=Math.max(0,h-r.width),d=Math.max(0,s?h/s:d-r.height),h=Cd(Math.min(h,o,c.maxWidth)),d=Cd(Math.min(d,a,c.maxHeight)),h&&!d&&(d=Cd(h/2)),(t!==void 0||n!==void 0)&&s&&c.height&&d>c.height&&(d=c.height,h=Cd(Math.floor(d*s))),{width:h,height:d}}function KA(e,t,n){const s=t||1,i=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${e.height}px`,o.style.width=`${e.width}px`),e.currentDevicePixelRatio!==s||o.height!==i||o.width!==r?(e.currentDevicePixelRatio=s,o.height=i,o.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0):!1}const nZ=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};a0()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return e}();function GA(e,t){const n=QJ(e,t),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Fo(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function sZ(e,t,n,s){return{x:e.x+n*(t.x-e.x),y:s==="middle"?n<.5?e.y:t.y:s==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function iZ(e,t,n,s){const i={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},o=Fo(e,i,n),a=Fo(i,r,n),c=Fo(r,t,n),h=Fo(o,a,n),d=Fo(a,c,n);return Fo(h,d,n)}const rZ=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},oZ=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function cl(e,t,n){return e?rZ(t,n):oZ()}function qD(e,t){let n,s;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=s)}function KD(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function GD(e){return e==="angle"?{between:Mu,compare:aJ,normalize:Ds}:{between:lr,compare:(t,n)=>t-n,normalize:t=>t}}function YA({start:e,end:t,count:n,loop:s,style:i}){return{start:e%n,end:t%n,loop:s&&(t-e+1)%n===0,style:i}}function aZ(e,t,n){const{property:s,start:i,end:r}=n,{between:o,normalize:a}=GD(s),c=t.length;let{start:h,end:d,loop:p}=e,g,_;if(p){for(h+=c,d+=c,g=0,_=c;g<_&&o(a(t[h%c][s]),i,r);++g)h--,d--;h%=c,d%=c}return d<h&&(d+=c),{start:h,end:d,loop:p,style:e.style}}function YD(e,t,n){if(!n)return[e];const{property:s,start:i,end:r}=n,o=t.length,{compare:a,between:c,normalize:h}=GD(s),{start:d,end:p,loop:g,style:_}=aZ(e,t,n),y=[];let b=!1,w=null,A,R,D;const O=()=>c(i,D,A)&&a(i,D)!==0,N=()=>a(r,A)===0||c(r,D,A),L=()=>b||O(),V=()=>!b||N();for(let B=d,tt=d;B<=p;++B)R=t[B%o],!R.skip&&(A=h(R[s]),A!==D&&(b=c(A,i,r),w===null&&L()&&(w=a(A,i)===0?B:tt),w!==null&&V()&&(y.push(YA({start:w,end:B,loop:g,count:o,style:_})),w=null),tt=B,D=A));return w!==null&&y.push(YA({start:w,end:p,loop:g,count:o,style:_})),y}function QD(e,t){const n=[],s=e.segments;for(let i=0;i<s.length;i++){const r=YD(s[i],e.points,t);r.length&&n.push(...r)}return n}function lZ(e,t,n,s){let i=0,r=t-1;if(n&&!s)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(r+=i);r>i&&e[r%t].skip;)r--;return r%=t,{start:i,end:r}}function cZ(e,t,n,s){const i=e.length,r=[];let o=t,a=e[t],c;for(c=t+1;c<=n;++c){const h=e[c%i];h.skip||h.stop?a.skip||(s=!1,r.push({start:t%i,end:(c-1)%i,loop:s}),t=o=h.stop?c:null):(o=c,a.skip&&(t=c)),a=h}return o!==null&&r.push({start:t%i,end:o%i,loop:s}),r}function uZ(e,t){const n=e.points,s=e.options.spanGaps,i=n.length;if(!i)return[];const r=!!e._loop,{start:o,end:a}=lZ(n,i,r,s);if(s===!0)return QA(e,[{start:o,end:a,loop:r}],n,t);const c=a<o?a+i:a,h=!!e._fullLoop&&o===0&&a===i-1;return QA(e,cZ(n,o,c,h),n,t)}function QA(e,t,n,s){return!s||!s.setContext||!n?t:hZ(e,t,n,s)}function hZ(e,t,n,s){const i=e._chart.getContext(),r=XA(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,c=n.length,h=[];let d=r,p=t[0].start,g=p;function _(y,b,w,A){const R=a?-1:1;if(y!==b){for(y+=c;n[y%c].skip;)y-=R;for(;n[b%c].skip;)b+=R;y%c!==b%c&&(h.push({start:y%c,end:b%c,loop:w,style:A}),d=A,p=b%c)}}for(const y of t){p=a?p:y.start;let b=n[p%c],w;for(g=p+1;g<=y.end;g++){const A=n[g%c];w=XA(s.setContext(vo(i,{type:"segment",p0:b,p1:A,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),dZ(w,d)&&_(p,g-1,y.loop,d),b=A,d=w}p<g-1&&_(p,g-1,y.loop,d)}return h}function XA(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function dZ(e,t){if(!t)return!1;const n=[],s=function(i,r){return n0(r)?(n.includes(r)||n.push(r),n.indexOf(r)):r};return JSON.stringify(e,s)!==JSON.stringify(t,s)}/*!
 * Chart.js v4.4.2
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class fZ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,s,i){const r=n.listeners[i],o=n.duration;r.forEach(a=>a({chart:t,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=OD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((s,i)=>{if(!s.running||!s.items.length)return;const r=s.items;let o=r.length-1,a=!1,c;for(;o>=0;--o)c=r[o],c._active?(c._total>s.duration&&(s.duration=c._total),c.tick(t),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,s,t,"progress")),r.length||(s.running=!1,this._notify(i,s,t,"complete"),s.initial=!1),n+=r.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let s=n.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,s)),s}listen(t,n,s){this._getAnims(t).listeners[n].push(s)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,i)=>Math.max(s,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const s=n.items;let i=s.length-1;for(;i>=0;--i)s[i].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var er=new fZ;const JA="transparent",pZ={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const s=HA(e||JA),i=s.valid&&HA(t||JA);return i&&i.valid?i.mix(s,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class gZ{constructor(t,n,s,i){const r=n[s];i=Rc([t.to,i,r,t.from]);const o=Rc([t.from,r,i]);this._active=!0,this._fn=t.fn||pZ[t.type||typeof o],this._easing=Xc[t.easing]||Xc.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=s,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,n,s){if(this._active){this._notify(!1);const i=this._target[this._prop],r=s-this._start,o=this._duration-r;this._start=s,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=Rc([t.to,n,i,t.from]),this._from=Rc([t.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,s=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let c;if(this._active=r!==a&&(o||n<s),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=r;return}c=n/s%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(r,a,c)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,s)=>{t.push({res:n,rej:s})})}_notify(t){const n=t?"res":"rej",s=this._promises||[];for(let i=0;i<s.length;i++)s[i][n]()}}class XD{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Zt(t))return;const n=Object.keys(Qe.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const r=t[i];if(!Zt(r))return;const o={};for(const a of n)o[a]=r[a];(Ue(r.properties)&&r.properties||[i]).forEach(a=>{(a===i||!s.has(a))&&s.set(a,o)})})}_animateOptions(t,n){const s=n.options,i=_Z(t,s);if(!i)return[];const r=this._createAnimations(i,s);return s.$shared&&mZ(t.options.$animations,s).then(()=>{t.options=s},()=>{}),r}_createAnimations(t,n){const s=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(n),a=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if(h.charAt(0)==="$")continue;if(h==="options"){i.push(...this._animateOptions(t,n));continue}const d=n[h];let p=r[h];const g=s.get(h);if(p)if(g&&p.active()){p.update(g,d,a);continue}else p.cancel();if(!g||!g.duration){t[h]=d;continue}r[h]=p=new gZ(g,t,h,d),i.push(p)}return i}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const s=this._createAnimations(t,n);if(s.length)return er.add(this._chart,s),!0}}function mZ(e,t){const n=[],s=Object.keys(t);for(let i=0;i<s.length;i++){const r=e[s[i]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}function _Z(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function ZA(e,t){const n=e&&e.options||{},s=n.reverse,i=n.min===void 0?t:0,r=n.max===void 0?t:0;return{start:s?r:i,end:s?i:r}}function yZ(e,t,n){if(n===!1)return!1;const s=ZA(e,n),i=ZA(t,n);return{top:i.end,right:s.end,bottom:i.start,left:s.start}}function vZ(e){let t,n,s,i;return Zt(e)?(t=e.top,n=e.right,s=e.bottom,i=e.left):t=n=s=i=e,{top:t,right:n,bottom:s,left:i,disabled:e===!1}}function JD(e,t){const n=[],s=e._getSortedDatasetMetas(t);let i,r;for(i=0,r=s.length;i<r;++i)n.push(s[i].index);return n}function t1(e,t,n,s={}){const i=e.keys,r=s.mode==="single";let o,a,c,h;if(t!==null){for(o=0,a=i.length;o<a;++o){if(c=+i[o],c===n){if(s.all)continue;break}h=e.values[c],Ye(h)&&(r||t===0||Mi(t)===Mi(h))&&(t+=h)}return t}}function bZ(e){const t=Object.keys(e),n=new Array(t.length);let s,i,r;for(s=0,i=t.length;s<i;++s)r=t[s],n[s]={x:r,y:e[r]};return n}function e1(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function wZ(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function EZ(e){const{min:t,max:n,minDefined:s,maxDefined:i}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function TZ(e,t,n){const s=e[t]||(e[t]={});return s[n]||(s[n]={})}function n1(e,t,n,s){for(const i of t.getMatchingVisibleMetas(s).reverse()){const r=e[i.index];if(n&&r>0||!n&&r<0)return i.index}return null}function s1(e,t){const{chart:n,_cachedMeta:s}=e,i=n._stacks||(n._stacks={}),{iScale:r,vScale:o,index:a}=s,c=r.axis,h=o.axis,d=wZ(r,o,s),p=t.length;let g;for(let _=0;_<p;++_){const y=t[_],{[c]:b,[h]:w}=y,A=y._stacks||(y._stacks={});g=A[h]=TZ(i,d,b),g[a]=w,g._top=n1(g,o,!0,s.type),g._bottom=n1(g,o,!1,s.type);const R=g._visualValues||(g._visualValues={});R[a]=w}}function w_(e,t){const n=e.scales;return Object.keys(n).filter(s=>n[s].axis===t).shift()}function IZ(e,t){return vo(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function AZ(e,t,n){return vo(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function pc(e,t){const n=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const i of t){const r=i._stacks;if(!r||r[s]===void 0||r[s][n]===void 0)return;delete r[s][n],r[s]._visualValues!==void 0&&r[s]._visualValues[n]!==void 0&&delete r[s]._visualValues[n]}}}const E_=e=>e==="reset"||e==="none",i1=(e,t)=>t?e:Object.assign({},e),xZ=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:JD(n,!0),values:null};class oi{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=e1(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&pc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,s=this.getDataset(),i=(p,g,_,y)=>p==="x"?g:p==="r"?y:_,r=n.xAxisID=Wt(s.xAxisID,w_(t,"x")),o=n.yAxisID=Wt(s.yAxisID,w_(t,"y")),a=n.rAxisID=Wt(s.rAxisID,w_(t,"r")),c=n.indexAxis,h=n.iAxisID=i(c,r,o,a),d=n.vAxisID=i(c,o,r,a);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&VA(this._data,this),t._stacked&&pc(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),s=this._data;if(Zt(n))this._data=bZ(n);else if(s!==n){if(s){VA(s,this);const i=this._cachedMeta;pc(i),i._parsed=[]}n&&Object.isExtensible(n)&&hJ(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,s=this.getDataset();let i=!1;this._dataCheck();const r=n._stacked;n._stacked=e1(n.vScale,n),n.stack!==s.stack&&(i=!0,pc(n),n.stack=s.stack),this._resyncElements(t),(i||r!==n._stacked)&&s1(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:s,_data:i}=this,{iScale:r,_stacked:o}=s,a=r.axis;let c=t===0&&n===i.length?!0:s._sorted,h=t>0&&s._parsed[t-1],d,p,g;if(this._parsing===!1)s._parsed=i,s._sorted=!0,g=i;else{Ue(i[t])?g=this.parseArrayData(s,i,t,n):Zt(i[t])?g=this.parseObjectData(s,i,t,n):g=this.parsePrimitiveData(s,i,t,n);const _=()=>p[a]===null||h&&p[a]<h[a];for(d=0;d<n;++d)s._parsed[d+t]=p=g[d],c&&(_()&&(c=!1),h=p);s._sorted=c}o&&s1(this,g)}parsePrimitiveData(t,n,s,i){const{iScale:r,vScale:o}=t,a=r.axis,c=o.axis,h=r.getLabels(),d=r===o,p=new Array(i);let g,_,y;for(g=0,_=i;g<_;++g)y=g+s,p[g]={[a]:d||r.parse(h[y],y),[c]:o.parse(n[y],y)};return p}parseArrayData(t,n,s,i){const{xScale:r,yScale:o}=t,a=new Array(i);let c,h,d,p;for(c=0,h=i;c<h;++c)d=c+s,p=n[d],a[c]={x:r.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(t,n,s,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,h=new Array(i);let d,p,g,_;for(d=0,p=i;d<p;++d)g=d+s,_=n[g],h[d]={x:r.parse(lo(_,a),g),y:o.parse(lo(_,c),g)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,s){const i=this.chart,r=this._cachedMeta,o=n[t.axis],a={keys:JD(i,!0),values:n._stacks[t.axis]._visualValues};return t1(a,o,r.index,{mode:s})}updateRangeFromParsed(t,n,s,i){const r=s[n.axis];let o=r===null?NaN:r;const a=i&&s._stacks[n.axis];i&&a&&(i.values=a,o=t1(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,n){const s=this._cachedMeta,i=s._parsed,r=s._sorted&&t===s.iScale,o=i.length,a=this._getOtherScale(t),c=xZ(n,s,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=EZ(a);let g,_;function y(){_=i[g];const b=_[a.axis];return!Ye(_[t.axis])||d>b||p<b}for(g=0;g<o&&!(!y()&&(this.updateRangeFromParsed(h,t,_,c),r));++g);if(r){for(g=o-1;g>=0;--g)if(!y()){this.updateRangeFromParsed(h,t,_,c);break}}return h}getAllParsedValues(t){const n=this._cachedMeta._parsed,s=[];let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i][t.axis],Ye(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,s=n.iScale,i=n.vScale,r=this.getParsed(t);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=vZ(Wt(this.options.clip,yZ(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,s=this._cachedMeta,i=s.data||[],r=n.chartArea,o=[],a=this._drawStart||0,c=this._drawCount||i.length-a,h=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,r,a,c),d=a;d<a+c;++d){const p=i[d];p.hidden||(p.active&&h?o.push(p):p.draw(t,r))}for(d=0;d<o.length;++d)o[d].draw(t,r)}getStyle(t,n){const s=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,n,s){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const o=this._cachedMeta.data[t];r=o.$context||(o.$context=AZ(this.getContext(),t,o)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=IZ(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",s){const i=n==="active",r=this._cachedDataOpts,o=t+"-"+n,a=r[o],c=this.enableOptionSharing&&Ou(s);if(a)return i1(a,c);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),p=i?[`${t}Hover`,"hover",t,""]:[t,""],g=h.getOptionScopes(this.getDataset(),d),_=Object.keys(Qe.elements[t]),y=()=>this.getContext(s,i,n),b=h.resolveNamedOptions(g,_,y,p);return b.$shared&&(b.$shared=c,r[o]=Object.freeze(i1(b,c))),b}_resolveAnimations(t,n,s){const i=this.chart,r=this._cachedDataOpts,o=`animation-${n}`,a=r[o];if(a)return a;let c;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),g=d.getOptionScopes(this.getDataset(),p);c=d.createResolver(g,this.getContext(t,s,n))}const h=new XD(i,c&&c.animations);return c&&c._cacheable&&(r[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||E_(t)||this.chart._animationsDisabled}_getSharedOptions(t,n){const s=this.resolveDataElementOptions(t,n),i=this._sharedOptions,r=this.getSharedOptions(s),o=this.includeOptions(n,r)||r!==i;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:o}}updateElement(t,n,s,i){E_(i)?Object.assign(t,s):this._resolveAnimations(n,i).update(t,s)}updateSharedOptions(t,n,s){t&&!E_(n)&&this._resolveAnimations(void 0,n).update(t,s)}_setStyle(t,n,s,i){t.active=i;const r=this.getStyle(n,i);this._resolveAnimations(n,s,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,n,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,n,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,s=this._cachedMeta.data;for(const[a,c,h]of this._syncList)this[a](c,h);this._syncList=[];const i=s.length,r=n.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,n,s=!0){const i=this._cachedMeta,r=i.data,o=t+n;let a;const c=h=>{for(h.length+=n,a=h.length-1;a>=o;a--)h[a]=h[a-n]};for(c(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(t,n),s&&this.updateElements(r,t,n,"reset")}updateElements(t,n,s,i){}_removeElements(t,n){const s=this._cachedMeta;if(this._parsing){const i=s._parsed.splice(t,n);s._stacked&&pc(s,i)}s.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,s,i]=t;this[n](s,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}it(oi,"defaults",{}),it(oi,"datasetElementType",null),it(oi,"dataElementType",null);function SZ(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let s=[];for(let i=0,r=n.length;i<r;i++)s=s.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=kD(s.sort((i,r)=>i-r))}return e._cache.$bar}function RZ(e){const t=e.iScale,n=SZ(t,e.type);let s=t._length,i,r,o,a;const c=()=>{o===32767||o===-32768||(Ou(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=t.getPixelForValue(n[i]),c();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)o=t.getPixelForTick(i),c();return s}function CZ(e,t,n,s){const i=n.barThickness;let r,o;return ae(i)?(r=t.min*n.categoryPercentage,o=n.barPercentage):(r=i*s,o=1),{chunk:r/s,ratio:o,start:t.pixels[e]-r/2}}function PZ(e,t,n,s){const i=t.pixels,r=i[e];let o=e>0?i[e-1]:null,a=e<i.length-1?i[e+1]:null;const c=n.categoryPercentage;o===null&&(o=r-(a===null?t.end-t.start:a-r)),a===null&&(a=r+r-o);const h=r-(r-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/s,ratio:n.barPercentage,start:h}}function DZ(e,t,n,s){const i=n.parse(e[0],s),r=n.parse(e[1],s),o=Math.min(i,r),a=Math.max(i,r);let c=o,h=a;Math.abs(o)>Math.abs(a)&&(c=a,h=o),t[n.axis]=h,t._custom={barStart:c,barEnd:h,start:i,end:r,min:o,max:a}}function ZD(e,t,n,s){return Ue(e)?DZ(e,t,n,s):t[n.axis]=n.parse(e,s),t}function r1(e,t,n,s){const i=e.iScale,r=e.vScale,o=i.getLabels(),a=i===r,c=[];let h,d,p,g;for(h=n,d=n+s;h<d;++h)g=t[h],p={},p[i.axis]=a||i.parse(o[h],h),c.push(ZD(g,p,r,h));return c}function T_(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function kZ(e,t,n){return e!==0?Mi(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function OZ(e){let t,n,s,i,r;return e.horizontal?(t=e.base>e.x,n="left",s="right"):(t=e.base<e.y,n="bottom",s="top"),t?(i="end",r="start"):(i="start",r="end"),{start:n,end:s,reverse:t,top:i,bottom:r}}function MZ(e,t,n,s){let i=t.borderSkipped;const r={};if(!i){e.borderSkipped=r;return}if(i===!0){e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:c,top:h,bottom:d}=OZ(e);i==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===s?i=h:(n._bottom||0)===s?i=d:(r[o1(d,o,a,c)]=!0,i=h)),r[o1(i,o,a,c)]=!0,e.borderSkipped=r}function o1(e,t,n,s){return s?(e=NZ(e,t,n),e=a1(e,n,t)):e=a1(e,t,n),e}function NZ(e,t,n){return e===t?n:e===n?t:e}function a1(e,t,n){return e==="start"?t:e==="end"?n:e}function LZ(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class lf extends oi{parsePrimitiveData(t,n,s,i){return r1(t,n,s,i)}parseArrayData(t,n,s,i){return r1(t,n,s,i)}parseObjectData(t,n,s,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:c="y"}=this._parsing,h=r.axis==="x"?a:c,d=o.axis==="x"?a:c,p=[];let g,_,y,b;for(g=s,_=s+i;g<_;++g)b=n[g],y={},y[r.axis]=r.parse(lo(b,h),g),p.push(ZD(lo(b,d),y,o,g));return p}updateRangeFromParsed(t,n,s,i){super.updateRangeFromParsed(t,n,s,i);const r=s._custom;r&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:s,vScale:i}=n,r=this.getParsed(t),o=r._custom,a=T_(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,s,i){const r=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,c=a.getBasePixel(),h=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:g}=this._getSharedOptions(n,i);for(let _=n;_<n+s;_++){const y=this.getParsed(_),b=r||ae(y[a.axis])?{base:c,head:c}:this._calculateBarValuePixels(_),w=this._calculateBarIndexPixels(_,d),A=(y._stacks||{})[a.axis],R={horizontal:h,base:b.base,enableBorderRadius:!A||T_(y._custom)||o===A._top||o===A._bottom,x:h?b.head:w.center,y:h?w.center:b.head,height:h?w.size:Math.abs(b.size),width:h?Math.abs(b.size):w.size};g&&(R.options=p||this.resolveDataElementOptions(_,t[_].active?"active":i));const D=R.options||t[_].options;MZ(R,D,A,o),LZ(R,D,d.ratio),this.updateElement(t[_],_,R,i)}}_getStacks(t,n){const{iScale:s}=this._cachedMeta,i=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=s.options.stacked,o=[],a=c=>{const h=c.controller.getParsed(n),d=h&&h[c.vScale.axis];if(ae(d)||isNaN(d))return!0};for(const c of i)if(!(n!==void 0&&a(c))&&((r===!1||o.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&o.push(c.stack),c.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,s){const i=this._getStacks(t,s),r=n!==void 0?i.indexOf(n):-1;return r===-1?i.length-1:r}_getRuler(){const t=this.options,n=this._cachedMeta,s=n.iScale,i=[];let r,o;for(r=0,o=n.data.length;r<o;++r)i.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));const a=t.barThickness;return{min:a||RZ(n),pixels:i,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:s,index:i},options:{base:r,minBarLength:o}}=this,a=r||0,c=this.getParsed(t),h=c._custom,d=T_(h);let p=c[n.axis],g=0,_=s?this.applyStack(n,c,s):p,y,b;_!==p&&(g=_-p,_=p),d&&(p=h.barStart,_=h.barEnd-h.barStart,p!==0&&Mi(p)!==Mi(h.barEnd)&&(g=0),g+=p);const w=!ae(r)&&!d?r:g;let A=n.getPixelForValue(w);if(this.chart.getDataVisibility(t)?y=n.getPixelForValue(g+_):y=A,b=y-A,Math.abs(b)<o){b=kZ(b,n,a)*o,p===a&&(A-=b/2);const R=n.getPixelForDecimal(0),D=n.getPixelForDecimal(1),O=Math.min(R,D),N=Math.max(R,D);A=Math.max(Math.min(A,N),O),y=A+b,s&&!d&&(c._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const R=Mi(b)*n.getLineWidthForValue(a)/2;A+=R,b-=R}return{size:b,base:A,head:y,center:y+b/2}}_calculateBarIndexPixels(t,n){const s=n.scale,i=this.options,r=i.skipNull,o=Wt(i.maxBarThickness,1/0);let a,c;if(n.grouped){const h=r?this._getStackCount(t):n.stackCount,d=i.barThickness==="flex"?PZ(t,n,i,h):CZ(t,n,i,h),p=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0);a=d.start+d.chunk*p+d.chunk/2,c=Math.min(o,d.chunk*d.ratio)}else a=s.getPixelForValue(this.getParsed(t)[s.axis],t),c=Math.min(o,n.min*n.ratio);return{base:a-c/2,head:a+c/2,center:a,size:c}}draw(){const t=this._cachedMeta,n=t.vScale,s=t.data,i=s.length;let r=0;for(;r<i;++r)this.getParsed(r)[n.axis]!==null&&s[r].draw(this._ctx)}}it(lf,"id","bar"),it(lf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),it(lf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class cf extends oi{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,s,i){const r=super.parsePrimitiveData(t,n,s,i);for(let o=0;o<r.length;o++)r[o]._custom=this.resolveDataElementOptions(o+s).radius;return r}parseArrayData(t,n,s,i){const r=super.parseArrayData(t,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Wt(a[2],this.resolveDataElementOptions(o+s).radius)}return r}parseObjectData(t,n,s,i){const r=super.parseObjectData(t,n,s,i);for(let o=0;o<r.length;o++){const a=n[s+o];r[o]._custom=Wt(a&&a.r&&+a.r,this.resolveDataElementOptions(o+s).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let s=t.length-1;s>=0;--s)n=Math.max(n,t[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y),h=o._custom;return{label:s[t]||"",value:"("+a+", "+c+(h?", "+h:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let g=n;g<n+s;g++){const _=t[g],y=!r&&this.getParsed(g),b={},w=b[d]=r?o.getPixelForDecimal(.5):o.getPixelForValue(y[d]),A=b[p]=r?a.getBasePixel():a.getPixelForValue(y[p]);b.skip=isNaN(w)||isNaN(A),h&&(b.options=c||this.resolveDataElementOptions(g,_.active?"active":i),r&&(b.options.radius=0)),this.updateElement(_,g,b,i)}}resolveDataElementOptions(t,n){const s=this.getParsed(t);let i=super.resolveDataElementOptions(t,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return n!=="active"&&(i.radius=0),i.radius+=Wt(s&&s._custom,r),i}}it(cf,"id","bubble"),it(cf,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),it(cf,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function UZ(e,t,n){let s=1,i=1,r=0,o=0;if(t<Fe){const a=e,c=a+t,h=Math.cos(a),d=Math.sin(a),p=Math.cos(c),g=Math.sin(c),_=(D,O,N)=>Mu(D,a,c,!0)?1:Math.max(O,O*n,N,N*n),y=(D,O,N)=>Mu(D,a,c,!0)?-1:Math.min(O,O*n,N,N*n),b=_(0,h,p),w=_(rn,d,g),A=y(Ve,h,p),R=y(Ve+rn,d,g);s=(b-A)/2,i=(w-R)/2,r=-(b+A)/2,o=-(w+R)/2}return{ratioX:s,ratioY:i,offsetX:r,offsetY:o}}class Ko extends oi{constructor(t,n){super(t,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const s=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=s;else{let r=c=>+s[c];if(Zt(s[t])){const{key:c="value"}=this._parsing;r=h=>+lo(s[h],c)}let o,a;for(o=t,a=t+n;o<a;++o)i._parsed[o]=r(o)}}_getRotation(){return ii(this.options.rotation-90)}_getCircumference(){return ii(this.options.circumference)}_getRotationExtents(){let t=Fe,n=-Fe;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const i=this.chart.getDatasetMeta(s).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),n=Math.max(n,r+o)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:s}=n,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),c=Math.min(XX(this.options.cutout,a),1),h=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:g,ratioY:_,offsetX:y,offsetY:b}=UZ(p,d,c),w=(s.width-o)/g,A=(s.height-o)/_,R=Math.max(Math.min(w,A)/2,0),D=SD(this.options.radius,R),O=Math.max(D*c,0),N=(D-O)/this._getVisibleDatasetWeightTotal();this.offsetX=y*D,this.offsetY=b*D,i.total=this.calculateTotal(),this.outerRadius=D-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,n){const s=this.options,i=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/Fe)}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,a=o.chartArea,h=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,g=r&&h.animateScale,_=g?0:this.innerRadius,y=g?0:this.outerRadius,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(n,i);let A=this._getRotation(),R;for(R=0;R<n;++R)A+=this._circumference(R,r);for(R=n;R<n+s;++R){const D=this._circumference(R,r),O=t[R],N={x:d+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+D,circumference:D,outerRadius:y,innerRadius:_};w&&(N.options=b||this.resolveDataElementOptions(R,O.active?"active":i)),A+=D,this.updateElement(O,R,N,i)}}calculateTotal(){const t=this._cachedMeta,n=t.data;let s=0,i;for(i=0;i<n.length;i++){const r=t._parsed[i];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Fe*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=mh(n._parsed[t],s.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let n=0;const s=this.chart;let i,r,o,a,c;if(!t){for(i=0,r=s.data.datasets.length;i<r;++i)if(s.isDatasetVisible(i)){o=s.getDatasetMeta(i),t=o.data,a=o.controller;break}}if(!t)return 0;for(i=0,r=t.length;i<r;++i)c=a.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let s=0,i=t.length;s<i;++s){const r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(t){return Math.max(Wt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}it(Ko,"id","doughnut"),it(Ko,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),it(Ko,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),it(Ko,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}});class Zc extends oi{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:s,data:i=[],_dataset:r}=n,o=this.chart._animationsDisabled;let{start:a,count:c}=ND(n,i,o);this._drawStart=a,this._drawCount=c,LD(n)&&(a=0,c=i.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=i;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:h},t),this.updateElements(i,a,c,t)}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),g=o.axis,_=a.axis,{spanGaps:y,segment:b}=this.options,w=Sl(y)?y:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||r||i==="none",R=n+s,D=t.length;let O=n>0&&this.getParsed(n-1);for(let N=0;N<D;++N){const L=t[N],V=A?L:{};if(N<n||N>=R){V.skip=!0;continue}const B=this.getParsed(N),tt=ae(B[_]),bt=V[g]=o.getPixelForValue(B[g],N),At=V[_]=r||tt?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,B,c):B[_],N);V.skip=isNaN(bt)||isNaN(At)||tt,V.stop=N>0&&Math.abs(B[g]-O[g])>w,b&&(V.parsed=B,V.raw=h.data[N]),p&&(V.options=d||this.resolveDataElementOptions(N,L.active?"active":i)),A||this.updateElement(L,N,V,i),O=B}}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,s=n.options&&n.options.borderWidth||0,i=t.data||[];if(!i.length)return s;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}it(Zc,"id","line"),it(Zc,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),it(Zc,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class tu extends oi{constructor(t,n){super(t,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,s=this.chart,i=s.data.labels||[],r=mh(n._parsed[t].r,s.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,n,s,i){return zD.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}getMinMax(){const t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,i)=>{const r=this.getParsed(i).r;!isNaN(r)&&this.chart.getDataVisibility(i)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){const t=this.chart,n=t.chartArea,s=t.options,i=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(i/2,0),o=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),a=(r-o)/t.getVisibleDatasetCount();this.outerRadius=r-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(t,n,s,i){const r=i==="reset",o=this.chart,c=o.options.animation,h=this._cachedMeta.rScale,d=h.xCenter,p=h.yCenter,g=h.getIndexAngle(0)-.5*Ve;let _=g,y;const b=360/this.countVisibleElements();for(y=0;y<n;++y)_+=this._computeAngle(y,i,b);for(y=n;y<n+s;y++){const w=t[y];let A=_,R=_+this._computeAngle(y,i,b),D=o.getDataVisibility(y)?h.getDistanceFromCenterForValue(this.getParsed(y).r):0;_=R,r&&(c.animateScale&&(D=0),c.animateRotate&&(A=R=g));const O={x:d,y:p,innerRadius:0,outerRadius:D,startAngle:A,endAngle:R,options:this.resolveDataElementOptions(y,w.active?"active":i)};this.updateElement(w,y,O,i)}}countVisibleElements(){const t=this._cachedMeta;let n=0;return t.data.forEach((s,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(t,n,s){return this.chart.getDataVisibility(t)?ii(this.resolveDataElementOptions(t,n).angle||s):0}}it(tu,"id","polarArea"),it(tu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),it(tu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const n=t.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:i}}=t.legend.options;return n.labels.map((r,o)=>{const c=t.getDatasetMeta(0).controller.getStyle(o);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(o),index:o}})}return[]}},onClick(t,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class By extends Ko{}it(By,"id","pie"),it(By,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class uf extends oi{getLabelAndValue(t){const n=this._cachedMeta.vScale,s=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(t,n,s,i){return zD.bind(this)(t,n,s,i)}update(t){const n=this._cachedMeta,s=n.dataset,i=n.data||[],r=n.iScale.getLabels();if(s.points=i,t!=="resize"){const o=this.resolveDatasetElementOptions(t);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===i.length,options:o};this.updateElement(s,void 0,a,t)}this.updateElements(i,0,i.length,t)}updateElements(t,n,s,i){const r=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+s;a++){const c=t[a],h=this.resolveDataElementOptions(a,c.active?"active":i),d=r.getPointPositionForValue(a,this.getParsed(a).r),p=o?r.xCenter:d.x,g=o?r.yCenter:d.y,_={x:p,y:g,angle:d.angle,skip:isNaN(p)||isNaN(g),options:h};this.updateElement(c,a,_,i)}}}it(uf,"id","radar"),it(uf,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),it(uf,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class hf extends oi{getLabelAndValue(t){const n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:i,yScale:r}=n,o=this.getParsed(t),a=i.getLabelForValue(o.x),c=r.getLabelForValue(o.y);return{label:s[t]||"",value:"("+a+", "+c+")"}}update(t){const n=this._cachedMeta,{data:s=[]}=n,i=this.chart._animationsDisabled;let{start:r,count:o}=ND(n,s,i);if(this._drawStart=r,this._drawCount=o,LD(n)&&(r=0,o=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:c}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!c._decimated,a.points=s;const h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:h},t)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,n,s,i){const r=i==="reset",{iScale:o,vScale:a,_stacked:c,_dataset:h}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),g=this.includeOptions(i,p),_=o.axis,y=a.axis,{spanGaps:b,segment:w}=this.options,A=Sl(b)?b:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||r||i==="none";let D=n>0&&this.getParsed(n-1);for(let O=n;O<n+s;++O){const N=t[O],L=this.getParsed(O),V=R?N:{},B=ae(L[y]),tt=V[_]=o.getPixelForValue(L[_],O),bt=V[y]=r||B?a.getBasePixel():a.getPixelForValue(c?this.applyStack(a,L,c):L[y],O);V.skip=isNaN(tt)||isNaN(bt)||B,V.stop=O>0&&Math.abs(L[_]-D[_])>A,w&&(V.parsed=L,V.raw=h.data[O]),g&&(V.options=p||this.resolveDataElementOptions(O,N.active?"active":i)),R||this.updateElement(N,O,V,i),D=L}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const t=this._cachedMeta,n=t.data||[];if(!this.options.showLine){let a=0;for(let c=n.length-1;c>=0;--c)a=Math.max(a,n[c].size(this.resolveDataElementOptions(c))/2);return a>0&&a}const s=t.dataset,i=s.options&&s.options.borderWidth||0;if(!n.length)return i;const r=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,r,o)/2}}it(hf,"id","scatter"),it(hf,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),it(hf,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var FZ=Object.freeze({__proto__:null,BarController:lf,BubbleController:cf,DoughnutController:Ko,LineController:Zc,PieController:By,PolarAreaController:tu,RadarController:uf,ScatterController:hf});function Mo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class c0{constructor(t){it(this,"options");this.options=t||{}}static override(t){Object.assign(c0.prototype,t)}init(){}formats(){return Mo()}parse(){return Mo()}format(){return Mo()}add(){return Mo()}diff(){return Mo()}startOf(){return Mo()}endOf(){return Mo()}}var VZ={_date:c0};function BZ(e,t,n,s){const{controller:i,data:r,_sorted:o}=e,a=i._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&r.length){const c=a._reversePixels?cJ:cr;if(s){if(i._sharedOptions){const h=r[0],d=typeof h.getRange=="function"&&h.getRange(t);if(d){const p=c(r,t,n-d),g=c(r,t,n+d);return{lo:p.lo,hi:g.hi}}}}else return c(r,t,n)}return{lo:0,hi:r.length-1}}function _h(e,t,n,s,i){const r=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,c=r.length;a<c;++a){const{index:h,data:d}=r[a],{lo:p,hi:g}=BZ(r[a],t,o,i);for(let _=p;_<=g;++_){const y=d[_];y.skip||s(y,h,_)}}}function $Z(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(s,i){const r=t?Math.abs(s.x-i.x):0,o=n?Math.abs(s.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}function I_(e,t,n,s,i){const r=[];return!i&&!e.isPointInArea(t)||_h(e,n,t,function(a,c,h){!i&&!ur(a,e.chartArea,0)||a.inRange(t.x,t.y,s)&&r.push({element:a,datasetIndex:c,index:h})},!0),r}function HZ(e,t,n,s){let i=[];function r(o,a,c){const{startAngle:h,endAngle:d}=o.getProps(["startAngle","endAngle"],s),{angle:p}=PD(o,{x:t.x,y:t.y});Mu(p,h,d)&&i.push({element:o,datasetIndex:a,index:c})}return _h(e,n,t,r),i}function WZ(e,t,n,s,i,r){let o=[];const a=$Z(n);let c=Number.POSITIVE_INFINITY;function h(d,p,g){const _=d.inRange(t.x,t.y,i);if(s&&!_)return;const y=d.getCenterPoint(i);if(!(!!r||e.isPointInArea(y))&&!_)return;const w=a(t,y);w<c?(o=[{element:d,datasetIndex:p,index:g}],c=w):w===c&&o.push({element:d,datasetIndex:p,index:g})}return _h(e,n,t,h),o}function A_(e,t,n,s,i,r){return!r&&!e.isPointInArea(t)?[]:n==="r"&&!s?HZ(e,t,n,i):WZ(e,t,n,s,i,r)}function l1(e,t,n,s,i){const r=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return _h(e,n,t,(c,h,d)=>{c[o](t[n],i)&&(r.push({element:c,datasetIndex:h,index:d}),a=a||c.inRange(t.x,t.y,i))}),s&&!a?[]:r}var zZ={evaluateInteractionItems:_h,modes:{index(e,t,n,s){const i=Uo(t,e),r=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?I_(e,i,r,s,o):A_(e,i,r,!1,s,o),c=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(h=>{const d=a[0].index,p=h.data[d];p&&!p.skip&&c.push({element:p,datasetIndex:h.index,index:d})}),c):[]},dataset(e,t,n,s){const i=Uo(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?I_(e,i,r,s,o):A_(e,i,r,!1,s,o);if(a.length>0){const c=a[0].datasetIndex,h=e.getDatasetMeta(c).data;a=[];for(let d=0;d<h.length;++d)a.push({element:h[d],datasetIndex:c,index:d})}return a},point(e,t,n,s){const i=Uo(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return I_(e,i,r,s,o)},nearest(e,t,n,s){const i=Uo(t,e),r=n.axis||"xy",o=n.includeInvisible||!1;return A_(e,i,r,n.intersect,s,o)},x(e,t,n,s){const i=Uo(t,e);return l1(e,i,"x",n.intersect,s)},y(e,t,n,s){const i=Uo(t,e);return l1(e,i,"y",n.intersect,s)}}};const tk=["left","top","right","bottom"];function gc(e,t){return e.filter(n=>n.pos===t)}function c1(e,t){return e.filter(n=>tk.indexOf(n.pos)===-1&&n.box.axis===t)}function mc(e,t){return e.sort((n,s)=>{const i=t?s:n,r=t?n:s;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function jZ(e){const t=[];let n,s,i,r,o,a;for(n=0,s=(e||[]).length;n<s;++n)i=e[n],{position:r,options:{stack:o,stackWeight:a=1}}=i,t.push({index:n,box:i,pos:r,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&r+o,stackWeight:a});return t}function qZ(e){const t={};for(const n of e){const{stack:s,pos:i,stackWeight:r}=n;if(!s||!tk.includes(i))continue;const o=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return t}function KZ(e,t){const n=qZ(e),{vBoxMaxWidth:s,hBoxMaxHeight:i}=t;let r,o,a;for(r=0,o=e.length;r<o;++r){a=e[r];const{fullSize:c}=a.box,h=n[a.stack],d=h&&a.stackWeight/h.weight;a.horizontal?(a.width=d?d*s:c&&t.availableWidth,a.height=i):(a.width=s,a.height=d?d*i:c&&t.availableHeight)}return n}function GZ(e){const t=jZ(e),n=mc(t.filter(h=>h.box.fullSize),!0),s=mc(gc(t,"left"),!0),i=mc(gc(t,"right")),r=mc(gc(t,"top"),!0),o=mc(gc(t,"bottom")),a=c1(t,"x"),c=c1(t,"y");return{fullSize:n,leftAndTop:s.concat(r),rightAndBottom:i.concat(c).concat(o).concat(a),chartArea:gc(t,"chartArea"),vertical:s.concat(i).concat(c),horizontal:r.concat(o).concat(a)}}function u1(e,t,n,s){return Math.max(e[n],t[n])+Math.max(e[s],t[s])}function ek(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function YZ(e,t,n,s){const{pos:i,box:r}=n,o=e.maxPadding;if(!Zt(i)){n.size&&(e[i]-=n.size);const p=s[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?r.height:r.width),n.size=p.size/p.count,e[i]+=n.size}r.getPadding&&ek(o,r.getPadding());const a=Math.max(0,t.outerWidth-u1(o,e,"left","right")),c=Math.max(0,t.outerHeight-u1(o,e,"top","bottom")),h=a!==e.w,d=c!==e.h;return e.w=a,e.h=c,n.horizontal?{same:h,other:d}:{same:d,other:h}}function QZ(e){const t=e.maxPadding;function n(s){const i=Math.max(t[s]-e[s],0);return e[s]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function XZ(e,t){const n=t.maxPadding;function s(i){const r={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{r[o]=Math.max(t[o],n[o])}),r}return s(e?["left","right"]:["top","bottom"])}function Cc(e,t,n,s){const i=[];let r,o,a,c,h,d;for(r=0,o=e.length,h=0;r<o;++r){a=e[r],c=a.box,c.update(a.width||t.w,a.height||t.h,XZ(a.horizontal,t));const{same:p,other:g}=YZ(t,n,a,s);h|=p&&i.length,d=d||g,c.fullSize||i.push(a)}return h&&Cc(i,t,n,s)||d}function Pd(e,t,n,s,i){e.top=n,e.left=t,e.right=t+s,e.bottom=n+i,e.width=s,e.height=i}function h1(e,t,n,s){const i=n.padding;let{x:r,y:o}=t;for(const a of e){const c=a.box,h=s[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/h.weight||1;if(a.horizontal){const p=t.w*d,g=h.size||c.height;Ou(h.start)&&(o=h.start),c.fullSize?Pd(c,i.left,o,n.outerWidth-i.right-i.left,g):Pd(c,t.left+h.placed,o,p,g),h.start=o,h.placed+=p,o=c.bottom}else{const p=t.h*d,g=h.size||c.width;Ou(h.start)&&(r=h.start),c.fullSize?Pd(c,r,i.top,g,n.outerHeight-i.bottom-i.top):Pd(c,r,t.top+h.placed,g,p),h.start=r,h.placed+=p,r=c.right}}t.x=r,t.y=o}var zn={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,s){if(!e)return;const i=Gn(e.options.layout.padding),r=Math.max(t-i.width,0),o=Math.max(n-i.height,0),a=GZ(e.boxes),c=a.vertical,h=a.horizontal;ve(e.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=c.reduce((b,w)=>w.box.options&&w.box.options.display===!1?b:b+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:r,availableHeight:o,vBoxMaxWidth:r/2/d,hBoxMaxHeight:o/2}),g=Object.assign({},i);ek(g,Gn(s));const _=Object.assign({maxPadding:g,w:r,h:o,x:i.left,y:i.top},i),y=KZ(c.concat(h),p);Cc(a.fullSize,_,p,y),Cc(c,_,p,y),Cc(h,_,p,y)&&Cc(c,_,p,y),QZ(_),h1(a.leftAndTop,_,p,y),_.x+=_.w,_.y+=_.h,h1(a.rightAndBottom,_,p,y),e.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},ve(a.chartArea,b=>{const w=b.box;Object.assign(w,e.chartArea),w.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class nk{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,s){}removeEventListener(t,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,s,i){return n=Math.max(0,n||t.width),s=s||t.height,{width:n,height:Math.max(0,i?Math.floor(n/i):s)}}isAttached(t){return!0}updateConfig(t){}}class JZ extends nk{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const df="$chartjs",ZZ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},d1=e=>e===null||e==="";function ttt(e,t){const n=e.style,s=e.getAttribute("height"),i=e.getAttribute("width");if(e[df]={initial:{height:s,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",d1(i)){const r=GA(e,"width");r!==void 0&&(e.width=r)}if(d1(s))if(e.style.height==="")e.height=e.width/(t||2);else{const r=GA(e,"height");r!==void 0&&(e.height=r)}return e}const sk=nZ?{passive:!0}:!1;function ett(e,t,n){e&&e.addEventListener(t,n,sk)}function ntt(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,sk)}function stt(e,t){const n=ZZ[e.type]||e.type,{x:s,y:i}=Uo(e,t);return{type:n,chart:t,native:e,x:s!==void 0?s:null,y:i!==void 0?i:null}}function Jf(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function itt(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Jf(a.addedNodes,s),o=o&&!Jf(a.removedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function rtt(e,t,n){const s=e.canvas,i=new MutationObserver(r=>{let o=!1;for(const a of r)o=o||Jf(a.removedNodes,s),o=o&&!Jf(a.addedNodes,s);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Lu=new Map;let f1=0;function ik(){const e=window.devicePixelRatio;e!==f1&&(f1=e,Lu.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function ott(e,t){Lu.size||window.addEventListener("resize",ik),Lu.set(e,t)}function att(e){Lu.delete(e),Lu.size||window.removeEventListener("resize",ik)}function ltt(e,t,n){const s=e.canvas,i=s&&l0(s);if(!i)return;const r=MD((a,c)=>{const h=i.clientWidth;n(a,c),h<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const c=a[0],h=c.contentRect.width,d=c.contentRect.height;h===0&&d===0||r(h,d)});return o.observe(i),ott(e,r),o}function x_(e,t,n){n&&n.disconnect(),t==="resize"&&att(e)}function ctt(e,t,n){const s=e.canvas,i=MD(r=>{e.ctx!==null&&n(stt(r,e))},e);return ett(s,t,i),i}class utt extends nk{acquireContext(t,n){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(ttt(t,n),s):null}releaseContext(t){const n=t.canvas;if(!n[df])return!1;const s=n[df].initial;["height","width"].forEach(r=>{const o=s[r];ae(o)?n.removeAttribute(r):n.setAttribute(r,o)});const i=s.style||{};return Object.keys(i).forEach(r=>{n.style[r]=i[r]}),n.width=n.width,delete n[df],!0}addEventListener(t,n,s){this.removeEventListener(t,n);const i=t.$proxies||(t.$proxies={}),o={attach:itt,detach:rtt,resize:ltt}[n]||ctt;i[n]=o(t,n,s)}removeEventListener(t,n){const s=t.$proxies||(t.$proxies={}),i=s[n];if(!i)return;({attach:x_,detach:x_,resize:x_}[n]||ntt)(t,n,i),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,s,i){return eZ(t,n,s,i)}isAttached(t){const n=l0(t);return!!(n&&n.isConnected)}}function htt(e){return!a0()||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas?JZ:utt}var Fd;let wr=(Fd=class{constructor(){it(this,"x");it(this,"y");it(this,"active",!1);it(this,"options");it(this,"$animations")}tooltipPosition(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}hasValue(){return Sl(this.x)&&Sl(this.y)}getProps(t,n){const s=this.$animations;if(!n||!s)return this;const i={};return t.forEach(r=>{i[r]=s[r]&&s[r].active()?s[r]._to:this[r]}),i}},it(Fd,"defaults",{}),it(Fd,"defaultRoutes"),Fd);function dtt(e,t){const n=e.options.ticks,s=ftt(e),i=Math.min(n.maxTicksLimit||s,s),r=n.major.enabled?gtt(t):[],o=r.length,a=r[0],c=r[o-1],h=[];if(o>i)return mtt(t,h,r,o/i),h;const d=ptt(r,t,i);if(o>0){let p,g;const _=o>1?Math.round((c-a)/(o-1)):null;for(Dd(t,h,d,ae(_)?0:a-_,a),p=0,g=o-1;p<g;p++)Dd(t,h,d,r[p],r[p+1]);return Dd(t,h,d,c,ae(_)?t.length:c+_),h}return Dd(t,h,d),h}function ftt(e){const t=e.options.offset,n=e._tickSize(),s=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(s,i))}function ptt(e,t,n){const s=_tt(e),i=t.length/n;if(!s)return Math.max(i,1);const r=rJ(s);for(let o=0,a=r.length-1;o<a;o++){const c=r[o];if(c>i)return c}return Math.max(i,1)}function gtt(e){const t=[];let n,s;for(n=0,s=e.length;n<s;n++)e[n].major&&t.push(n);return t}function mtt(e,t,n,s){let i=0,r=n[0],o;for(s=Math.ceil(s),o=0;o<e.length;o++)o===r&&(t.push(e[o]),i++,r=n[i*s])}function Dd(e,t,n,s,i){const r=Wt(s,0),o=Math.min(Wt(i,e.length),e.length);let a=0,c,h,d;for(n=Math.ceil(n),i&&(c=i-s,n=c/Math.floor(c/n)),d=r;d<0;)a++,d=Math.round(r+a*n);for(h=Math.max(r,0);h<o;h++)h===d&&(t.push(e[h]),a++,d=Math.round(r+a*n))}function _tt(e){const t=e.length;let n,s;if(t<2)return!1;for(s=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==s)return!1;return s}const ytt=e=>e==="left"?"right":e==="right"?"left":e,p1=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n,g1=(e,t)=>Math.min(t||e,e);function m1(e,t){const n=[],s=e.length/t,i=e.length;let r=0;for(;r<i;r+=s)n.push(e[Math.floor(r)]);return n}function vtt(e,t,n){const s=e.ticks.length,i=Math.min(t,s-1),r=e._startPixel,o=e._endPixel,a=1e-6;let c=e.getPixelForTick(i),h;if(!(n&&(s===1?h=Math.max(c-r,o-c):t===0?h=(e.getPixelForTick(1)-c)/2:h=(c-e.getPixelForTick(i-1))/2,c+=i<t?h:-h,c<r-a||c>o+a)))return c}function btt(e,t){ve(e,n=>{const s=n.gc,i=s.length/2;let r;if(i>t){for(r=0;r<i;++r)delete n.data[s[r]];s.splice(0,i)}})}function _c(e){return e.drawTicks?e.tickLength:0}function _1(e,t){if(!e.display)return 0;const n=mn(e.font,t),s=Gn(e.padding);return(Ue(e.text)?e.text.length:1)*n.lineHeight+s.height}function wtt(e,t){return vo(e,{scale:t,type:"scale"})}function Ett(e,t,n){return vo(e,{tick:n,index:t,type:"tick"})}function Ttt(e,t,n){let s=e0(e);return(n&&t!=="right"||!n&&t==="right")&&(s=ytt(s)),s}function Itt(e,t,n,s){const{top:i,left:r,bottom:o,right:a,chart:c}=e,{chartArea:h,scales:d}=c;let p=0,g,_,y;const b=o-i,w=a-r;if(e.isHorizontal()){if(_=Vn(s,r,a),Zt(n)){const A=Object.keys(n)[0],R=n[A];y=d[A].getPixelForValue(R)+b-t}else n==="center"?y=(h.bottom+h.top)/2+b-t:y=p1(e,n,t);g=a-r}else{if(Zt(n)){const A=Object.keys(n)[0],R=n[A];_=d[A].getPixelForValue(R)-w+t}else n==="center"?_=(h.left+h.right)/2-w+t:_=p1(e,n,t);y=Vn(s,o,i),p=n==="left"?-rn:rn}return{titleX:_,titleY:y,maxWidth:g,rotation:p}}class Aa extends wr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:s,_suggestedMax:i}=this;return t=Ps(t,Number.POSITIVE_INFINITY),n=Ps(n,Number.NEGATIVE_INFINITY),s=Ps(s,Number.POSITIVE_INFINITY),i=Ps(i,Number.NEGATIVE_INFINITY),{min:Ps(t,s),max:Ps(n,i),minDefined:Ye(t),maxDefined:Ye(n)}}getMinMax(t){let{min:n,max:s,minDefined:i,maxDefined:r}=this.getUserBounds(),o;if(i&&r)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let c=0,h=a.length;c<h;++c)o=a[c].controller.getMinMax(this,t),i||(n=Math.min(n,o.min)),r||(s=Math.max(s,o.max));return n=r&&n>s?s:n,s=i&&n>s?n:s,{min:Ps(n,Ps(s,n)),max:Ps(s,Ps(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Pe(this.options.beforeUpdate,[this])}update(t,n,s){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OJ(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=a<this.ticks.length;this._convertTicksToLabels(c?m1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=dtt(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,t=!t),this._startPixel=n,this._endPixel=s,this._reversePixels=t,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Pe(this.options.afterUpdate,[this])}beforeSetDimensions(){Pe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Pe(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Pe(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Pe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let s,i,r;for(s=0,i=t.length;s<i;s++)r=t[s],r.label=Pe(n.callback,[r.value,s,t],this)}afterTickToLabelConversion(){Pe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Pe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,s=g1(this.ticks.length,t.ticks.maxTicksLimit),i=n.minRotation||0,r=n.maxRotation;let o=i,a,c,h;if(!this._isVisible()||!n.display||i>=r||s<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,g=d.highest.height,_=bn(this.chart.width-p,0,this.maxWidth);a=t.offset?this.maxWidth/s:_/(s-1),p+6>a&&(a=_/(s-(t.offset?.5:1)),c=this.maxHeight-_c(t.grid)-n.padding-_1(t.title,this.chart.options.font),h=Math.sqrt(p*p+g*g),o=Zb(Math.min(Math.asin(bn((d.highest.height+6)/a,-1,1)),Math.asin(bn(c/h,-1,1))-Math.asin(bn(g/h,-1,1)))),o=Math.max(i,Math.min(r,o))),this.labelRotation=o}afterCalculateLabelRotation(){Pe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Pe(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:s,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const c=_1(i,n.options.font);if(a?(t.width=this.maxWidth,t.height=_c(r)+c):(t.height=this.maxHeight,t.width=_c(r)+c),s.display&&this.ticks.length){const{first:h,last:d,widest:p,highest:g}=this._getLabelSizes(),_=s.padding*2,y=ii(this.labelRotation),b=Math.cos(y),w=Math.sin(y);if(a){const A=s.mirror?0:w*p.width+b*g.height;t.height=Math.min(this.maxHeight,t.height+A+_)}else{const A=s.mirror?0:b*p.width+w*g.height;t.width=Math.min(this.maxWidth,t.width+A+_)}this._calculatePadding(h,d,w,b)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,s,i){const{ticks:{align:r,padding:o},position:a}=this.options,c=this.labelRotation!==0,h=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,_=0;c?h?(g=i*t.width,_=s*n.height):(g=s*t.height,_=i*n.width):r==="start"?_=n.width:r==="end"?g=t.width:r!=="inner"&&(g=t.width/2,_=n.width/2),this.paddingLeft=Math.max((g-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((_-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=t.height/2;r==="start"?(d=0,p=t.height):r==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Pe(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,s;for(n=0,s=t.length;n<s;n++)ae(t[n].label)&&(t.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=m1(s,n)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,n,s){const{ctx:i,_longestTextCache:r}=this,o=[],a=[],c=Math.floor(n/g1(n,s));let h=0,d=0,p,g,_,y,b,w,A,R,D,O,N;for(p=0;p<n;p+=c){if(y=t[p].label,b=this._resolveTickFontOptions(p),i.font=w=b.string,A=r[w]=r[w]||{data:{},gc:[]},R=b.lineHeight,D=O=0,!ae(y)&&!Ue(y))D=Qf(i,A.data,A.gc,D,y),O=R;else if(Ue(y))for(g=0,_=y.length;g<_;++g)N=y[g],!ae(N)&&!Ue(N)&&(D=Qf(i,A.data,A.gc,D,N),O+=R);o.push(D),a.push(O),h=Math.max(D,h),d=Math.max(O,d)}btt(r,n);const L=o.indexOf(h),V=a.indexOf(d),B=tt=>({width:o[tt]||0,height:a[tt]||0});return{first:B(0),last:B(n-1),widest:B(L),highest:B(V),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return lJ(this._alignToPixels?Oo(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const s=n[t];return s.$context||(s.$context=Ett(this.getContext(),t,s))}return this.$context||(this.$context=wtt(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=ii(this.labelRotation),s=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,c=r?r.highest.height+o:0;return this.isHorizontal()?c*s>a*i?a/s:c/i:c*i<a*s?c/s:a/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,s=this.chart,i=this.options,{grid:r,position:o,border:a}=i,c=r.offset,h=this.isHorizontal(),p=this.ticks.length+(c?1:0),g=_c(r),_=[],y=a.setContext(this.getContext()),b=y.display?y.width:0,w=b/2,A=function(Nt){return Oo(s,Nt,b)};let R,D,O,N,L,V,B,tt,bt,At,kt,de;if(o==="top")R=A(this.bottom),V=this.bottom-g,tt=R-w,At=A(t.top)+w,de=t.bottom;else if(o==="bottom")R=A(this.top),At=t.top,de=A(t.bottom)-w,V=R+w,tt=this.top+g;else if(o==="left")R=A(this.right),L=this.right-g,B=R-w,bt=A(t.left)+w,kt=t.right;else if(o==="right")R=A(this.left),bt=t.left,kt=A(t.right)-w,L=R+w,B=this.left+g;else if(n==="x"){if(o==="center")R=A((t.top+t.bottom)/2+.5);else if(Zt(o)){const Nt=Object.keys(o)[0],wt=o[Nt];R=A(this.chart.scales[Nt].getPixelForValue(wt))}At=t.top,de=t.bottom,V=R+w,tt=V+g}else if(n==="y"){if(o==="center")R=A((t.left+t.right)/2);else if(Zt(o)){const Nt=Object.keys(o)[0],wt=o[Nt];R=A(this.chart.scales[Nt].getPixelForValue(wt))}L=R-w,B=L-g,bt=t.left,kt=t.right}const qe=Wt(i.ticks.maxTicksLimit,p),Gt=Math.max(1,Math.ceil(p/qe));for(D=0;D<p;D+=Gt){const Nt=this.getContext(D),wt=r.setContext(Nt),xt=a.setContext(Nt),Ee=wt.lineWidth,on=wt.color,Re=xt.dash||[],$e=xt.dashOffset,ls=wt.tickWidth,Nn=wt.tickColor,Tn=wt.tickBorderDash||[],ge=wt.tickBorderDashOffset;O=vtt(this,D,c),O!==void 0&&(N=Oo(s,O,Ee),h?L=B=bt=kt=N:V=tt=At=de=N,_.push({tx1:L,ty1:V,tx2:B,ty2:tt,x1:bt,y1:At,x2:kt,y2:de,width:Ee,color:on,borderDash:Re,borderDashOffset:$e,tickWidth:ls,tickColor:Nn,tickBorderDash:Tn,tickBorderDashOffset:ge}))}return this._ticksLength=p,this._borderValue=R,_}_computeLabelItems(t){const n=this.axis,s=this.options,{position:i,ticks:r}=s,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:h,padding:d,mirror:p}=r,g=_c(s.grid),_=g+d,y=p?-d:_,b=-ii(this.labelRotation),w=[];let A,R,D,O,N,L,V,B,tt,bt,At,kt,de="middle";if(i==="top")L=this.bottom-y,V=this._getXAxisLabelAlignment();else if(i==="bottom")L=this.top+y,V=this._getXAxisLabelAlignment();else if(i==="left"){const Gt=this._getYAxisLabelAlignment(g);V=Gt.textAlign,N=Gt.x}else if(i==="right"){const Gt=this._getYAxisLabelAlignment(g);V=Gt.textAlign,N=Gt.x}else if(n==="x"){if(i==="center")L=(t.top+t.bottom)/2+_;else if(Zt(i)){const Gt=Object.keys(i)[0],Nt=i[Gt];L=this.chart.scales[Gt].getPixelForValue(Nt)+_}V=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")N=(t.left+t.right)/2-_;else if(Zt(i)){const Gt=Object.keys(i)[0],Nt=i[Gt];N=this.chart.scales[Gt].getPixelForValue(Nt)}V=this._getYAxisLabelAlignment(g).textAlign}n==="y"&&(c==="start"?de="top":c==="end"&&(de="bottom"));const qe=this._getLabelSizes();for(A=0,R=a.length;A<R;++A){D=a[A],O=D.label;const Gt=r.setContext(this.getContext(A));B=this.getPixelForTick(A)+r.labelOffset,tt=this._resolveTickFontOptions(A),bt=tt.lineHeight,At=Ue(O)?O.length:1;const Nt=At/2,wt=Gt.color,xt=Gt.textStrokeColor,Ee=Gt.textStrokeWidth;let on=V;o?(N=B,V==="inner"&&(A===R-1?on=this.options.reverse?"left":"right":A===0?on=this.options.reverse?"right":"left":on="center"),i==="top"?h==="near"||b!==0?kt=-At*bt+bt/2:h==="center"?kt=-qe.highest.height/2-Nt*bt+bt:kt=-qe.highest.height+bt/2:h==="near"||b!==0?kt=bt/2:h==="center"?kt=qe.highest.height/2-Nt*bt:kt=qe.highest.height-At*bt,p&&(kt*=-1),b!==0&&!Gt.showLabelBackdrop&&(N+=bt/2*Math.sin(b))):(L=B,kt=(1-At)*bt/2);let Re;if(Gt.showLabelBackdrop){const $e=Gn(Gt.backdropPadding),ls=qe.heights[A],Nn=qe.widths[A];let Tn=kt-$e.top,ge=0-$e.left;switch(de){case"middle":Tn-=ls/2;break;case"bottom":Tn-=ls;break}switch(V){case"center":ge-=Nn/2;break;case"right":ge-=Nn;break;case"inner":A===R-1?ge-=Nn:A>0&&(ge-=Nn/2);break}Re={left:ge,top:Tn,width:Nn+$e.width,height:ls+$e.height,color:Gt.backdropColor}}w.push({label:O,font:tt,textOffset:kt,options:{rotation:b,color:wt,strokeColor:xt,strokeWidth:Ee,textAlign:on,textBaseline:de,translation:[N,L],backdrop:Re}})}return w}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-ii(this.labelRotation))return t==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:s,mirror:i,padding:r}}=this.options,o=this._getLabelSizes(),a=t+r,c=o.widest.width;let h,d;return n==="left"?i?(d=this.right+r,s==="near"?h="left":s==="center"?(h="center",d+=c/2):(h="right",d+=c)):(d=this.right-a,s==="near"?h="right":s==="center"?(h="center",d-=c/2):(h="left",d=this.left)):n==="right"?i?(d=this.left+r,s==="near"?h="right":s==="center"?(h="center",d-=c/2):(h="left",d-=c)):(d=this.left+a,s==="near"?h="left":s==="center"?(h="center",d+=c/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:s,top:i,width:r,height:o}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(s,i,r,o),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(r=>r.value===t);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const n=this.options.grid,s=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(c,h,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(c.x,c.y),s.lineTo(h.x,h.y),s.stroke(),s.restore())};if(n.display)for(r=0,o=i.length;r<o;++r){const c=i[r];n.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),n.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{border:s,grid:i}}=this,r=s.setContext(this.getContext()),o=s.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,d,p,g;this.isHorizontal()?(h=Oo(t,this.left,o)-o/2,d=Oo(t,this.right,a)+a/2,p=g=c):(p=Oo(t,this.top,o)-o/2,g=Oo(t,this.bottom,a)+a/2,h=d=c),n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.beginPath(),n.moveTo(h,p),n.lineTo(d,g),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,i=this._computeLabelArea();i&&_g(s,i);const r=this.getLabelItems(t);for(const o of r){const a=o.options,c=o.font,h=o.label,d=o.textOffset;ga(s,h,0,d,c,a)}i&&yg(s)}drawTitle(){const{ctx:t,options:{position:n,title:s,reverse:i}}=this;if(!s.display)return;const r=mn(s.font),o=Gn(s.padding),a=s.align;let c=r.lineHeight/2;n==="bottom"||n==="center"||Zt(n)?(c+=o.bottom,Ue(s.text)&&(c+=r.lineHeight*(s.text.length-1))):c+=o.top;const{titleX:h,titleY:d,maxWidth:p,rotation:g}=Itt(this,c,n,a);ga(t,s.text,0,0,r,{color:s.color,maxWidth:p,rotation:g,textAlign:Ttt(a,n,i),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,s=Wt(t.grid&&t.grid.z,-1),i=Wt(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Aa.prototype.draw?[{z:n,draw:r=>{this.draw(r)}}]:[{z:s,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",i=[];let r,o;for(r=0,o=n.length;r<o;++r){const a=n[r];a[s]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return mn(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class kd{constructor(t,n,s){this.type=t,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let s;Stt(n)&&(s=this.register(n));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,Att(t,o,s),this.override&&Qe.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const n=this.items,s=t.id,i=this.scope;s in n&&delete n[s],i&&s in Qe[i]&&(delete Qe[i][s],this.override&&delete pa[s])}}function Att(e,t,n){const s=ku(Object.create(null),[n?Qe.get(n):{},Qe.get(t),e.defaults]);Qe.set(t,s),e.defaultRoutes&&xtt(t,e.defaultRoutes),e.descriptors&&Qe.describe(t,e.descriptors)}function xtt(e,t){Object.keys(t).forEach(n=>{const s=n.split("."),i=s.pop(),r=[e].concat(s).join("."),o=t[n].split("."),a=o.pop(),c=o.join(".");Qe.route(r,i,c,a)})}function Stt(e){return"id"in e&&"defaults"in e}class Rtt{constructor(){this.controllers=new kd(oi,"datasets",!0),this.elements=new kd(wr,"elements"),this.plugins=new kd(Object,"plugins"),this.scales=new kd(Aa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,s){[...n].forEach(i=>{const r=s||this._getRegistryForType(i);s||r.isForType(i)||r===this.plugins&&i.id?this._exec(t,r,i):ve(i,o=>{const a=s||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,n,s){const i=Jb(t);Pe(s["before"+i],[],s),n[t](s),Pe(s["after"+i],[],s)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(t))return s}return this.plugins}_get(t,n,s){const i=n.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return i}}var yi=new Rtt;class Ctt{constructor(){this._init=[]}notify(t,n,s,i){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,n,s);return n==="afterDestroy"&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,n,s,i){i=i||{};for(const r of t){const o=r.plugin,a=o[s],c=[n,i,r.options];if(Pe(a,c,o)===!1&&i.cancelable)return!1}return!0}invalidate(){ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const s=t&&t.config,i=Wt(s.options&&s.options.plugins,{}),r=Ptt(s);return i===!1&&!n?[]:ktt(t,r,i,n)}_notifyStateChanges(t){const n=this._oldCache||[],s=this._cache,i=(r,o)=>r.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(i(n,s),t,"stop"),this._notify(i(s,n),t,"start")}}function Ptt(e){const t={},n=[],s=Object.keys(yi.plugins.items);for(let r=0;r<s.length;r++)n.push(yi.getPlugin(s[r]));const i=e.plugins||[];for(let r=0;r<i.length;r++){const o=i[r];n.indexOf(o)===-1&&(n.push(o),t[o.id]=!0)}return{plugins:n,localIds:t}}function Dtt(e,t){return!t&&e===!1?null:e===!0?{}:e}function ktt(e,{plugins:t,localIds:n},s,i){const r=[],o=e.getContext();for(const a of t){const c=a.id,h=Dtt(s[c],i);h!==null&&r.push({plugin:a,options:Ott(e.config,{plugin:a,local:n[c]},h,o)})}return r}function Ott(e,{plugin:t,local:n},s,i){const r=e.pluginScopeKeys(t),o=e.getOptionScopes(s,r);return n&&t.defaults&&o.push(t.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $y(e,t){const n=Qe.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Mtt(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function Ntt(e,t){return e===t?"_index_":"_value_"}function y1(e){if(e==="x"||e==="y"||e==="r")return e}function Ltt(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function Hy(e,...t){if(y1(e))return e;for(const n of t){const s=n.axis||Ltt(n.position)||e.length>1&&y1(e[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function v1(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Utt(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(s=>s.xAxisID===e||s.yAxisID===e);if(n.length)return v1(e,"x",n[0])||v1(e,"y",n[0])}return{}}function Ftt(e,t){const n=pa[e.type]||{scales:{}},s=t.scales||{},i=$y(e.type,t),r=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Zt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Hy(o,a,Utt(o,e),Qe.scales[a.type]),h=Ntt(c,i),d=n.scales||{};r[o]=Yc(Object.create(null),[{axis:c},a,d[c],d[h]])}),e.data.datasets.forEach(o=>{const a=o.type||e.type,c=o.indexAxis||$y(a,t),d=(pa[a]||{}).scales||{};Object.keys(d).forEach(p=>{const g=Mtt(p,c),_=o[g+"AxisID"]||g;r[_]=r[_]||Object.create(null),Yc(r[_],[{axis:g},s[_],d[p]])})}),Object.keys(r).forEach(o=>{const a=r[o];Yc(a,[Qe.scales[a.type],Qe.scale])}),r}function rk(e){const t=e.options||(e.options={});t.plugins=Wt(t.plugins,{}),t.scales=Ftt(e,t)}function ok(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function Vtt(e){return e=e||{},e.data=ok(e.data),rk(e),e}const b1=new Map,ak=new Set;function Od(e,t){let n=b1.get(e);return n||(n=t(),b1.set(e,n),ak.add(n)),n}const yc=(e,t,n)=>{const s=lo(t,n);s!==void 0&&e.add(s)};class Btt{constructor(t){this._config=Vtt(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ok(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),rk(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Od(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Od(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Od(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,s=this.type;return Od(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const s=this._scopeCache;let i=s.get(t);return(!i||n)&&(i=new Map,s.set(t,i)),i}getOptionScopes(t,n,s){const{options:i,type:r}=this,o=this._cachedScopes(t,s),a=o.get(n);if(a)return a;const c=new Set;n.forEach(d=>{t&&(c.add(t),d.forEach(p=>yc(c,t,p))),d.forEach(p=>yc(c,i,p)),d.forEach(p=>yc(c,pa[r]||{},p)),d.forEach(p=>yc(c,Qe,p)),d.forEach(p=>yc(c,Fy,p))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),ak.has(n)&&o.set(n,h),h}chartOptionScopes(){const{options:t,type:n}=this;return[t,pa[n]||{},Qe.datasets[n]||{},{type:n},Qe,Fy]}resolveNamedOptions(t,n,s,i=[""]){const r={$shared:!0},{resolver:o,subPrefixes:a}=w1(this._resolverCache,t,i);let c=o;if(Htt(o,n)){r.$shared=!1,s=co(s)?s():s;const h=this.createResolver(t,s,a);c=Rl(o,s,h)}for(const h of n)r[h]=c[h];return r}createResolver(t,n,s=[""],i){const{resolver:r}=w1(this._resolverCache,t,s);return Zt(n)?Rl(r,n,void 0,i):r}}function w1(e,t,n){let s=e.get(t);s||(s=new Map,e.set(t,s));const i=n.join();let r=s.get(i);return r||(r={resolver:i0(t,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(i,r)),r}const $tt=e=>Zt(e)&&Object.getOwnPropertyNames(e).some(t=>co(e[t]));function Htt(e,t){const{isScriptable:n,isIndexable:s}=BD(e);for(const i of t){const r=n(i),o=s(i),a=(o||r)&&e[i];if(r&&(co(a)||$tt(a))||o&&Ue(a))return!0}return!1}var Wtt="4.4.2";const ztt=["top","bottom","left","right","chartArea"];function E1(e,t){return e==="top"||e==="bottom"||ztt.indexOf(e)===-1&&t==="x"}function T1(e,t){return function(n,s){return n[e]===s[e]?n[t]-s[t]:n[e]-s[e]}}function I1(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Pe(n&&n.onComplete,[e],t)}function jtt(e){const t=e.chart,n=t.options.animation;Pe(n&&n.onProgress,[e],t)}function lk(e){return a0()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ff={},A1=e=>{const t=lk(e);return Object.values(ff).filter(n=>n.canvas===t).pop()};function qtt(e,t,n){const s=Object.keys(e);for(const i of s){const r=+i;if(r>=t){const o=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=o)}}}function Ktt(e,t,n,s){return!n||e.type==="mouseout"?null:s?t:e}function Md(e,t,n){return e.options.clip?e[n]:t[n]}function Gtt(e,t){const{xScale:n,yScale:s}=e;return n&&s?{left:Md(n,t,"left"),right:Md(n,t,"right"),top:Md(s,t,"top"),bottom:Md(s,t,"bottom")}:t}var Nr;let bo=(Nr=class{static register(...t){yi.add(...t),x1()}static unregister(...t){yi.remove(...t),x1()}constructor(t,n){const s=this.config=new Btt(n),i=lk(t),r=A1(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||htt(i)),this.platform.updateConfig(s);const a=this.platform.acquireContext(i,o.aspectRatio),c=a&&a.canvas,h=c&&c.height,d=c&&c.width;if(this.id=QX(),this.ctx=a,this.canvas=c,this.width=d,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ctt,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=dJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],ff[this.id]=this,!a||!c){console.error("Failed to create chart: can't acquire context from the given item");return}er.listen(this,"complete",I1),er.listen(this,"progress",jtt),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:s,height:i,_aspectRatio:r}=this;return ae(t)?n&&r?r:i?s/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():KA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zA(this.canvas,this.ctx),this}stop(){return er.stop(this),this}resize(t,n){er.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const s=this.options,i=this.canvas,r=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,n,r),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,KA(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Pe(s.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(s,i)=>{s.id=i})}buildOrUpdateScales(){const t=this.options,n=t.scales,s=this.scales,i=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let r=[];n&&(r=r.concat(Object.keys(n).map(o=>{const a=n[o],c=Hy(o,a),h=c==="r",d=c==="x";return{options:a,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),ve(r,o=>{const a=o.options,c=a.id,h=Hy(c,a),d=Wt(a.type,o.dtype);(a.position===void 0||E1(a.position,h)!==E1(o.dposition))&&(a.position=o.dposition),i[c]=!0;let p=null;if(c in s&&s[c].type===d)p=s[c];else{const g=yi.getScale(d);p=new g({id:c,type:d,ctx:this.ctx,chart:this}),s[p.id]=p}p.init(a,t)}),ve(i,(o,a)=>{o||delete s[a]}),ve(s,o=>{zn.configure(this,o,o.options),zn.addBox(this,o)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,s=t.length;if(t.sort((i,r)=>i.index-r.index),s>n){for(let i=n;i<s;++i)this._destroyDatasetMeta(i);t.splice(n,s-n)}this._sortedMetasets=t.slice(0).sort(T1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((s,i)=>{n.filter(r=>r===s._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let s,i;for(this._removeUnreferencedMetasets(),s=0,i=n.length;s<i;s++){const r=n[s];let o=this.getDatasetMeta(s);const a=r.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=r.indexAxis||$y(a,this.options),o.order=r.order||0,o.index=s,o.label=""+r.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const c=yi.getController(a),{datasetElementType:h,dataElementType:d}=Qe.datasets[a];Object.assign(c,{dataElementType:yi.getElement(d),datasetElementType:h&&yi.getElement(h)}),o.controller=new c(this,s),t.push(o.controller)}}return this._updateMetasets(),t}_resetElements(){ve(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:p}=this.getDatasetMeta(h),g=!i&&r.indexOf(p)===-1;p.buildOrUpdateElements(g),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),i||ve(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(T1("z","_idx"));const{_active:a,_lastEvent:c}=this;c?this._eventHandler(c,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,t=>{zn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!NA(n,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:i,count:r}of n){const o=s==="_removeElements"?-r:r;qtt(t,i,o)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=r=>new Set(t.filter(o=>o[0]===r).map((o,a)=>a+","+o.splice(1).join(","))),i=s(0);for(let r=1;r<n;r++)if(!NA(i,s(r)))return;return Array.from(i).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;zn.update(this,this.width,this.height,t);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,i=>{s&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,r)=>{i._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,co(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const s=this.getDatasetMeta(t),i={meta:s,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(s.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(er.has(this)?this.attached&&!er.running(this)&&er.start(this):(this.draw(),I1({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:i}=this._resizeBeforeDraw;this._resize(s,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,s=[];let i,r;for(i=0,r=n.length;i<r;++i){const o=n[i];(!t||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,s=t._clip,i=!s.disabled,r=Gtt(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&_g(n,{left:s.left===!1?0:r.left-s.left,right:s.right===!1?this.width:r.right+s.right,top:s.top===!1?0:r.top-s.top,bottom:s.bottom===!1?this.height:r.bottom+s.bottom}),t.controller.draw(),i&&yg(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return ur(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,n,s,i){const r=zZ.modes[n];return typeof r=="function"?r(this,t,s,i):[]}getDatasetMeta(t){const n=this.data.datasets[t],s=this._metasets;let i=s.filter(r=>r&&r._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},s.push(i)),i}getContext(){return this.$context||(this.$context=vo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(t,n){const s=this.getDatasetMeta(t);s.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,s){const i=s?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);Ou(n)?(r.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),o.update(r,{visible:s}),this.update(a=>a.datasetIndex===t?i:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),er.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),zA(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete ff[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,s=(r,o)=>{n.addEventListener(this,r,o),t[r]=o},i=(r,o,a)=>{r.offsetX=o,r.offsetY=a,this._eventHandler(r)};ve(this.options.events,r=>s(r,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,s=(c,h)=>{n.addEventListener(this,c,h),t[c]=h},i=(c,h)=>{t[c]&&(n.removeEventListener(this,c,h),delete t[c])},r=(c,h)=>{this.canvas&&this.resize(c,h)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),s("resize",r),s("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},ve(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,s){const i=s?"set":"remove";let r,o,a,c;for(n==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,c=t.length;a<c;++a){o=t[a];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],s=t.map(({datasetIndex:r,index:o})=>{const a=this.getDatasetMeta(r);if(!a)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:a.data[o],index:o}});!Kf(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(t,n,s){return this._plugins.notify(this,t,n,s)}isPluginEnabled(t){return this._plugins._cache.filter(n=>n.plugin.id===t).length===1}_updateHoverStyles(t,n,s){const i=this.options.hover,r=(c,h)=>c.filter(d=>!h.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=r(n,t),a=s?t:r(t,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,n){const s={event:t,replay:n,cancelable:!0,inChartArea:this.isPointInArea(t)},i=o=>(o.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,i)===!1)return;const r=this._handleEvent(t,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,i),(r||s.changed)&&this.render(),this}_handleEvent(t,n,s){const{_active:i=[],options:r}=this,o=n,a=this._getActiveElements(t,i,s,o),c=nJ(t),h=Ktt(t,this._lastEvent,s,c);s&&(this._lastEvent=null,Pe(r.onHover,[t,a,this],this),c&&Pe(r.onClick,[t,a,this],this));const d=!Kf(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=h,d}_getActiveElements(t,n,s,i){if(t.type==="mouseout")return[];if(!s)return n;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}},it(Nr,"defaults",Qe),it(Nr,"instances",ff),it(Nr,"overrides",pa),it(Nr,"registry",yi),it(Nr,"version",Wtt),it(Nr,"getChart",A1),Nr);function x1(){return ve(bo.instances,e=>e._plugins.invalidate())}function Ytt(e,t,n){const{startAngle:s,pixelMargin:i,x:r,y:o,outerRadius:a,innerRadius:c}=t;let h=i/a;e.beginPath(),e.arc(r,o,a,s-h,n+h),c>i?(h=i/c,e.arc(r,o,c,n+h,s-h,!0)):e.arc(r,o,i,n+rn,s-rn),e.closePath(),e.clip()}function Qtt(e){return s0(e,["outerStart","outerEnd","innerStart","innerEnd"])}function Xtt(e,t,n,s){const i=Qtt(e.options.borderRadius),r=(n-t)/2,o=Math.min(r,s*t/2),a=c=>{const h=(n-Math.min(r,c))*s/2;return bn(c,0,Math.min(r,h))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:bn(i.innerStart,0,o),innerEnd:bn(i.innerEnd,0,o)}}function za(e,t,n,s){return{x:n+e*Math.cos(t),y:s+e*Math.sin(t)}}function Zf(e,t,n,s,i,r){const{x:o,y:a,startAngle:c,pixelMargin:h,innerRadius:d}=t,p=Math.max(t.outerRadius+s+n-h,0),g=d>0?d+s+n+h:0;let _=0;const y=i-c;if(s){const Gt=d>0?d-s:0,Nt=p>0?p-s:0,wt=(Gt+Nt)/2,xt=wt!==0?y*wt/(wt+s):y;_=(y-xt)/2}const b=Math.max(.001,y*p-n/Ve)/p,w=(y-b)/2,A=c+w+_,R=i-w-_,{outerStart:D,outerEnd:O,innerStart:N,innerEnd:L}=Xtt(t,g,p,R-A),V=p-D,B=p-O,tt=A+D/V,bt=R-O/B,At=g+N,kt=g+L,de=A+N/At,qe=R-L/kt;if(e.beginPath(),r){const Gt=(tt+bt)/2;if(e.arc(o,a,p,tt,Gt),e.arc(o,a,p,Gt,bt),O>0){const Ee=za(B,bt,o,a);e.arc(Ee.x,Ee.y,O,bt,R+rn)}const Nt=za(kt,R,o,a);if(e.lineTo(Nt.x,Nt.y),L>0){const Ee=za(kt,qe,o,a);e.arc(Ee.x,Ee.y,L,R+rn,qe+Math.PI)}const wt=(R-L/g+(A+N/g))/2;if(e.arc(o,a,g,R-L/g,wt,!0),e.arc(o,a,g,wt,A+N/g,!0),N>0){const Ee=za(At,de,o,a);e.arc(Ee.x,Ee.y,N,de+Math.PI,A-rn)}const xt=za(V,A,o,a);if(e.lineTo(xt.x,xt.y),D>0){const Ee=za(V,tt,o,a);e.arc(Ee.x,Ee.y,D,A-rn,tt)}}else{e.moveTo(o,a);const Gt=Math.cos(tt)*p+o,Nt=Math.sin(tt)*p+a;e.lineTo(Gt,Nt);const wt=Math.cos(bt)*p+o,xt=Math.sin(bt)*p+a;e.lineTo(wt,xt)}e.closePath()}function Jtt(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a}=t;let c=t.endAngle;if(r){Zf(e,t,n,s,c,i);for(let h=0;h<r;++h)e.fill();isNaN(a)||(c=o+(a%Fe||Fe))}return Zf(e,t,n,s,c,i),e.fill(),c}function Ztt(e,t,n,s,i){const{fullCircles:r,startAngle:o,circumference:a,options:c}=t,{borderWidth:h,borderJoinStyle:d,borderDash:p,borderDashOffset:g}=c,_=c.borderAlign==="inner";if(!h)return;e.setLineDash(p||[]),e.lineDashOffset=g,_?(e.lineWidth=h*2,e.lineJoin=d||"round"):(e.lineWidth=h,e.lineJoin=d||"bevel");let y=t.endAngle;if(r){Zf(e,t,n,s,y,i);for(let b=0;b<r;++b)e.stroke();isNaN(a)||(y=o+(a%Fe||Fe))}_&&Ytt(e,t,y),r||(Zf(e,t,n,s,y,i),e.stroke())}class Pc extends wr{constructor(n){super();it(this,"circumference");it(this,"endAngle");it(this,"fullCircles");it(this,"innerRadius");it(this,"outerRadius");it(this,"pixelMargin");it(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.getProps(["x","y"],i),{angle:o,distance:a}=PD(r,{x:n,y:s}),{startAngle:c,endAngle:h,innerRadius:d,outerRadius:p,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),_=(this.options.spacing+this.options.borderWidth)/2,b=Wt(g,h-c)>=Fe||Mu(o,c,h),w=lr(a,d+_,p+_);return b&&w}getCenterPoint(n){const{x:s,y:i,startAngle:r,endAngle:o,innerRadius:a,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:h,spacing:d}=this.options,p=(r+o)/2,g=(a+c+d+h)/2;return{x:s+Math.cos(p)*g,y:i+Math.sin(p)*g}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:s,circumference:i}=this,r=(s.offset||0)/4,o=(s.spacing||0)/2,a=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=i>Fe?Math.floor(i/Fe):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const c=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(c)*r,Math.sin(c)*r);const h=1-Math.sin(Math.min(Ve,i||0)),d=r*h;n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,Jtt(n,this,d,o,a),Ztt(n,this,d,o,a),n.restore()}}it(Pc,"id","arc"),it(Pc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),it(Pc,"defaultRoutes",{backgroundColor:"backgroundColor"}),it(Pc,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function ck(e,t,n=t){e.lineCap=Wt(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Wt(n.borderDash,t.borderDash)),e.lineDashOffset=Wt(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Wt(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Wt(n.borderWidth,t.borderWidth),e.strokeStyle=Wt(n.borderColor,t.borderColor)}function tet(e,t,n){e.lineTo(n.x,n.y)}function eet(e){return e.stepped?IJ:e.tension||e.cubicInterpolationMode==="monotone"?AJ:tet}function uk(e,t,n={}){const s=e.length,{start:i=0,end:r=s-1}=n,{start:o,end:a}=t,c=Math.max(i,o),h=Math.min(r,a),d=i<o&&r<o||i>a&&r>a;return{count:s,start:c,loop:t.loop,ilen:h<c&&!d?s+h-c:h-c}}function net(e,t,n,s){const{points:i,options:r}=t,{count:o,start:a,loop:c,ilen:h}=uk(i,n,s),d=eet(r);let{move:p=!0,reverse:g}=s||{},_,y,b;for(_=0;_<=h;++_)y=i[(a+(g?h-_:_))%o],!y.skip&&(p?(e.moveTo(y.x,y.y),p=!1):d(e,b,y,g,r.stepped),b=y);return c&&(y=i[(a+(g?h:0))%o],d(e,b,y,g,r.stepped)),!!c}function set(e,t,n,s){const i=t.points,{count:r,start:o,ilen:a}=uk(i,n,s),{move:c=!0,reverse:h}=s||{};let d=0,p=0,g,_,y,b,w,A;const R=O=>(o+(h?a-O:O))%r,D=()=>{b!==w&&(e.lineTo(d,w),e.lineTo(d,b),e.lineTo(d,A))};for(c&&(_=i[R(0)],e.moveTo(_.x,_.y)),g=0;g<=a;++g){if(_=i[R(g)],_.skip)continue;const O=_.x,N=_.y,L=O|0;L===y?(N<b?b=N:N>w&&(w=N),d=(p*d+O)/++p):(D(),e.lineTo(O,N),y=L,p=0,b=w=N),A=N}D()}function Wy(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?set:net}function iet(e){return e.stepped?sZ:e.tension||e.cubicInterpolationMode==="monotone"?iZ:Fo}function ret(e,t,n,s){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,s)&&i.closePath()),ck(e,t.options),e.stroke(i)}function oet(e,t,n,s){const{segments:i,options:r}=t,o=Wy(t);for(const a of i)ck(e,r,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+s-1})&&e.closePath(),e.stroke()}const aet=typeof Path2D=="function";function cet(e,t,n,s){aet&&!t.options.segment?ret(e,t,n,s):oet(e,t,n,s)}class hr extends wr{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const i=s.spanGaps?this._loop:this._fullLoop;YJ(this._points,s,t,i,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uZ(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,s=t.length;return s&&n[t[s-1].end]}interpolate(t,n){const s=this.options,i=t[n],r=this.points,o=QD(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],c=iet(s);let h,d;for(h=0,d=o.length;h<d;++h){const{start:p,end:g}=o[h],_=r[p],y=r[g];if(_===y){a.push(_);continue}const b=Math.abs((i-_[n])/(y[n]-_[n])),w=c(_,y,b,s.stepped);w[n]=t[n],a.push(w)}return a.length===1?a[0]:a}pathSegment(t,n,s){return Wy(this)(t,this,n,s)}path(t,n,s){const i=this.segments,r=Wy(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of i)o&=r(t,this,a,{start:n,end:n+s-1});return!!o}draw(t,n,s,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),cet(t,this,s,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}it(hr,"id","line"),it(hr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),it(hr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),it(hr,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function S1(e,t,n,s){const i=e.options,{[n]:r}=e.getProps([n],s);return Math.abs(t-r)<i.radius+i.hitRadius}class eu extends wr{constructor(n){super();it(this,"parsed");it(this,"skip");it(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,i){const r=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(s-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(n,s){return S1(this,n,"x",s)}inYRange(n,s){return S1(this,n,"y",s)}getCenterPoint(n){const{x:s,y:i}=this.getProps(["x","y"],n);return{x:s,y:i}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const i=s&&n.borderWidth||0;return(s+i)*2}draw(n,s){const i=this.options;this.skip||i.radius<.1||!ur(this,s,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Vy(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}it(eu,"id","point"),it(eu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),it(eu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function hk(e,t){const{x:n,y:s,base:i,width:r,height:o}=e.getProps(["x","y","base","width","height"],t);let a,c,h,d,p;return e.horizontal?(p=o/2,a=Math.min(n,i),c=Math.max(n,i),h=s-p,d=s+p):(p=r/2,a=n-p,c=n+p,h=Math.min(s,i),d=Math.max(s,i)),{left:a,top:h,right:c,bottom:d}}function Gr(e,t,n,s){return e?0:bn(t,n,s)}function uet(e,t,n){const s=e.options.borderWidth,i=e.borderSkipped,r=VD(s);return{t:Gr(i.top,r.top,0,n),r:Gr(i.right,r.right,0,t),b:Gr(i.bottom,r.bottom,0,n),l:Gr(i.left,r.left,0,t)}}function het(e,t,n){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,r=Zo(i),o=Math.min(t,n),a=e.borderSkipped,c=s||Zt(i);return{topLeft:Gr(!c||a.top||a.left,r.topLeft,0,o),topRight:Gr(!c||a.top||a.right,r.topRight,0,o),bottomLeft:Gr(!c||a.bottom||a.left,r.bottomLeft,0,o),bottomRight:Gr(!c||a.bottom||a.right,r.bottomRight,0,o)}}function det(e){const t=hk(e),n=t.right-t.left,s=t.bottom-t.top,i=uet(e,n/2,s/2),r=het(e,n/2,s/2);return{outer:{x:t.left,y:t.top,w:n,h:s,radius:r},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:s-i.t-i.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,r.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(i.b,i.r))}}}}function S_(e,t,n,s){const i=t===null,r=n===null,a=e&&!(i&&r)&&hk(e,s);return a&&(i||lr(t,a.left,a.right))&&(r||lr(n,a.top,a.bottom))}function fet(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function pet(e,t){e.rect(t.x,t.y,t.w,t.h)}function R_(e,t,n={}){const s=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,r=(e.x+e.w!==n.x+n.w?t:0)-s,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+s,y:e.y+i,w:e.w+r,h:e.h+o,radius:e.radius}}class pf extends wr{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:s,backgroundColor:i}}=this,{inner:r,outer:o}=det(this),a=fet(o.radius)?Nu:pet;t.save(),(o.w!==r.w||o.h!==r.h)&&(t.beginPath(),a(t,R_(o,n,r)),t.clip(),a(t,R_(r,-n,o)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),a(t,R_(r,n)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,n,s){return S_(this,t,n,s)}inXRange(t,n){return S_(this,t,null,n)}inYRange(t,n){return S_(this,null,t,n)}getCenterPoint(t){const{x:n,y:s,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(n+i)/2:n,y:r?s:(s+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}it(pf,"id","bar"),it(pf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),it(pf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var get=Object.freeze({__proto__:null,ArcElement:Pc,BarElement:pf,LineElement:hr,PointElement:eu});const zy=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],R1=zy.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function dk(e){return zy[e%zy.length]}function fk(e){return R1[e%R1.length]}function met(e,t){return e.borderColor=dk(t),e.backgroundColor=fk(t),++t}function _et(e,t){return e.backgroundColor=e.data.map(()=>dk(t++)),t}function yet(e,t){return e.backgroundColor=e.data.map(()=>fk(t++)),t}function vet(e){let t=0;return(n,s)=>{const i=e.getDatasetMeta(s).controller;i instanceof Ko?t=_et(n,t):i instanceof tu?t=yet(n,t):i&&(t=met(n,t))}}function C1(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}function bet(e){return e&&(e.borderColor||e.backgroundColor)}var wet={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:s},options:i}=e.config,{elements:r}=i;if(!n.forceOverride&&(C1(s)||bet(i)||r&&C1(r)))return;const o=vet(e);s.forEach(o)}};function Eet(e,t,n,s,i){const r=i.samples||s;if(r>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(r-2);let c=0;const h=t+n-1;let d=t,p,g,_,y,b;for(o[c++]=e[d],p=0;p<r-2;p++){let w=0,A=0,R;const D=Math.floor((p+1)*a)+1+t,O=Math.min(Math.floor((p+2)*a)+1,n)+t,N=O-D;for(R=D;R<O;R++)w+=e[R].x,A+=e[R].y;w/=N,A/=N;const L=Math.floor(p*a)+1+t,V=Math.min(Math.floor((p+1)*a)+1,n)+t,{x:B,y:tt}=e[d];for(_=y=-1,R=L;R<V;R++)y=.5*Math.abs((B-w)*(e[R].y-tt)-(B-e[R].x)*(A-tt)),y>_&&(_=y,g=e[R],b=R);o[c++]=g,d=b}return o[c++]=e[h],o}function Tet(e,t,n,s){let i=0,r=0,o,a,c,h,d,p,g,_,y,b;const w=[],A=t+n-1,R=e[t].x,O=e[A].x-R;for(o=t;o<t+n;++o){a=e[o],c=(a.x-R)/O*s,h=a.y;const N=c|0;if(N===d)h<y?(y=h,p=o):h>b&&(b=h,g=o),i=(r*i+a.x)/++r;else{const L=o-1;if(!ae(p)&&!ae(g)){const V=Math.min(p,g),B=Math.max(p,g);V!==_&&V!==L&&w.push({...e[V],x:i}),B!==_&&B!==L&&w.push({...e[B],x:i})}o>0&&L!==_&&w.push(e[L]),w.push(a),d=N,r=0,y=b=h,p=g=_=o}}return w}function pk(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function P1(e){e.data.datasets.forEach(t=>{pk(t)})}function Iet(e,t){const n=t.length;let s=0,i;const{iScale:r}=e,{min:o,max:a,minDefined:c,maxDefined:h}=r.getUserBounds();return c&&(s=bn(cr(t,r.axis,o).lo,0,n-1)),h?i=bn(cr(t,r.axis,a).hi+1,s,n)-s:i=n-s,{start:s,count:i}}var Aet={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled){P1(e);return}const s=e.width;e.data.datasets.forEach((i,r)=>{const{_data:o,indexAxis:a}=i,c=e.getDatasetMeta(r),h=o||i.data;if(Rc([a,e.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const d=e.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||e.options.parsing)return;let{start:p,count:g}=Iet(c,h);const _=n.threshold||4*s;if(g<=_){pk(i);return}ae(o)&&(i._data=h,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(n.algorithm){case"lttb":y=Eet(h,p,g,s,n);break;case"min-max":y=Tet(h,p,g,s);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=y})},destroy(e){P1(e)}};function xet(e,t,n){const s=e.segments,i=e.points,r=t.points,o=[];for(const a of s){let{start:c,end:h}=a;h=u0(c,h,i);const d=jy(n,i[c],i[h],a.loop);if(!t.segments){o.push({source:a,target:d,start:i[c],end:i[h]});continue}const p=QD(t,d);for(const g of p){const _=jy(n,r[g.start],r[g.end],g.loop),y=YD(a,i,_);for(const b of y)o.push({source:b,target:g,start:{[n]:D1(d,_,"start",Math.max)},end:{[n]:D1(d,_,"end",Math.min)}})}}return o}function jy(e,t,n,s){if(s)return;let i=t[e],r=n[e];return e==="angle"&&(i=Ds(i),r=Ds(r)),{property:e,start:i,end:r}}function Ret(e,t){const{x:n=null,y:s=null}=e||{},i=t.points,r=[];return t.segments.forEach(({start:o,end:a})=>{a=u0(o,a,i);const c=i[o],h=i[a];s!==null?(r.push({x:c.x,y:s}),r.push({x:h.x,y:s})):n!==null&&(r.push({x:n,y:c.y}),r.push({x:n,y:h.y}))}),r}function u0(e,t,n){for(;t>e;t--){const s=n[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function D1(e,t,n,s){return e&&t?s(e[n],t[n]):e?e[n]:t?t[n]:0}function gk(e,t){let n=[],s=!1;return Ue(e)?(s=!0,n=e):n=Ret(e,t),n.length?new hr({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function k1(e){return e&&e.fill!==!1}function Cet(e,t,n){let i=e[t].fill;const r=[t];let o;if(!n)return i;for(;i!==!1&&r.indexOf(i)===-1;){if(!Ye(i))return i;if(o=e[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function Pet(e,t,n){const s=Met(e);if(Zt(s))return isNaN(s.value)?!1:s;let i=parseFloat(s);return Ye(i)&&Math.floor(i)===i?Det(s[0],t,i,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Det(e,t,n,s){return(e==="-"||e==="+")&&(n=t+n),n===t||n<0||n>=s?!1:n}function ket(e,t){let n=null;return e==="start"?n=t.bottom:e==="end"?n=t.top:Zt(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}function Oet(e,t,n){let s;return e==="start"?s=n:e==="end"?s=t.options.reverse?t.min:t.max:Zt(e)?s=e.value:s=t.getBaseValue(),s}function Met(e){const t=e.options,n=t.fill;let s=Wt(n&&n.target,n);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Net(e){const{scale:t,index:n,line:s}=e,i=[],r=s.segments,o=s.points,a=Let(t,n);a.push(gk({x:null,y:t.bottom},s));for(let c=0;c<r.length;c++){const h=r[c];for(let d=h.start;d<=h.end;d++)Uet(i,o[d],a)}return new hr({points:i,options:{}})}function Let(e,t){const n=[],s=e.getMatchingVisibleMetas("line");for(let i=0;i<s.length;i++){const r=s[i];if(r.index===t)break;r.hidden||n.unshift(r.dataset)}return n}function Uet(e,t,n){const s=[];for(let i=0;i<n.length;i++){const r=n[i],{first:o,last:a,point:c}=Fet(r,t,"x");if(!(!c||o&&a)){if(o)s.unshift(c);else if(e.push(c),!a)break}}e.push(...s)}function Fet(e,t,n){const s=e.interpolate(t,n);if(!s)return{};const i=s[n],r=e.segments,o=e.points;let a=!1,c=!1;for(let h=0;h<r.length;h++){const d=r[h],p=o[d.start][n],g=o[d.end][n];if(lr(i,p,g)){a=i===p,c=i===g;break}}return{first:a,last:c,point:s}}class mk{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,s){const{x:i,y:r,radius:o}=this;return n=n||{start:0,end:Fe},t.arc(i,r,o,n.end,n.start,!0),!s.bounds}interpolate(t){const{x:n,y:s,radius:i}=this,r=t.angle;return{x:n+Math.cos(r)*i,y:s+Math.sin(r)*i,angle:r}}}function Vet(e){const{chart:t,fill:n,line:s}=e;if(Ye(n))return Bet(t,n);if(n==="stack")return Net(e);if(n==="shape")return!0;const i=$et(e);return i instanceof mk?i:gk(i,s)}function Bet(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function $et(e){return(e.scale||{}).getPointPositionForValue?Wet(e):Het(e)}function Het(e){const{scale:t={},fill:n}=e,s=ket(n,t);if(Ye(s)){const i=t.isHorizontal();return{x:i?s:null,y:i?null:s}}return null}function Wet(e){const{scale:t,fill:n}=e,s=t.options,i=t.getLabels().length,r=s.reverse?t.max:t.min,o=Oet(n,t,r),a=[];if(s.grid.circular){const c=t.getPointPositionForValue(0,r);return new mk({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<i;++c)a.push(t.getPointPositionForValue(c,o));return a}function C_(e,t,n){const s=Vet(t),{line:i,scale:r,axis:o}=t,a=i.options,c=a.fill,h=a.backgroundColor,{above:d=h,below:p=h}=c||{};s&&i.points.length&&(_g(e,n),zet(e,{line:i,target:s,above:d,below:p,area:n,scale:r,axis:o}),yg(e))}function zet(e,t){const{line:n,target:s,above:i,below:r,area:o,scale:a}=t,c=n._loop?"angle":t.axis;e.save(),c==="x"&&r!==i&&(O1(e,s,o.top),M1(e,{line:n,target:s,color:i,scale:a,property:c}),e.restore(),e.save(),O1(e,s,o.bottom)),M1(e,{line:n,target:s,color:r,scale:a,property:c}),e.restore()}function O1(e,t,n){const{segments:s,points:i}=t;let r=!0,o=!1;e.beginPath();for(const a of s){const{start:c,end:h}=a,d=i[c],p=i[u0(c,h,i)];r?(e.moveTo(d.x,d.y),r=!1):(e.lineTo(d.x,n),e.lineTo(d.x,d.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(p.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function M1(e,t){const{line:n,target:s,property:i,color:r,scale:o}=t,a=xet(n,s,i);for(const{source:c,target:h,start:d,end:p}of a){const{style:{backgroundColor:g=r}={}}=c,_=s!==!0;e.save(),e.fillStyle=g,jet(e,o,_&&jy(i,d,p)),e.beginPath();const y=!!n.pathSegment(e,c);let b;if(_){y?e.closePath():N1(e,s,p,i);const w=!!s.pathSegment(e,h,{move:y,reverse:!0});b=y&&w,b||N1(e,s,d,i)}e.closePath(),e.fill(b?"evenodd":"nonzero"),e.restore()}}function jet(e,t,n){const{top:s,bottom:i}=t.chart.chartArea,{property:r,start:o,end:a}=n||{};r==="x"&&(e.beginPath(),e.rect(o,s,a-o,i-s),e.clip())}function N1(e,t,n,s){const i=t.interpolate(n,s);i&&e.lineTo(i.x,i.y)}var qet={id:"filler",afterDatasetsUpdate(e,t,n){const s=(e.data.datasets||[]).length,i=[];let r,o,a,c;for(o=0;o<s;++o)r=e.getDatasetMeta(o),a=r.dataset,c=null,a&&a.options&&a instanceof hr&&(c={visible:e.isDatasetVisible(o),index:o,fill:Pet(a,o,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:a}),r.$filler=c,i.push(c);for(o=0;o<s;++o)c=i[o],!(!c||c.fill===!1)&&(c.fill=Cet(i,o,n.propagate))},beforeDraw(e,t,n){const s=n.drawTime==="beforeDraw",i=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(r,a.axis),s&&a.fill&&C_(e.ctx,a,r))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=e.getSortedVisibleDatasetMetas();for(let i=s.length-1;i>=0;--i){const r=s[i].$filler;k1(r)&&C_(e.ctx,r,e.chartArea)}},beforeDatasetDraw(e,t,n){const s=t.meta.$filler;!k1(s)||n.drawTime!=="beforeDatasetDraw"||C_(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const L1=(e,t)=>{let{boxHeight:n=t,boxWidth:s=t}=e;return e.usePointStyle&&(n=Math.min(n,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(t,n)}},Ket=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class U1 extends wr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,s){this.maxWidth=t,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Pe(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(s=>t.filter(s,this.chart.data))),t.sort&&(n=n.sort((s,i)=>t.sort(s,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,i=mn(s.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=L1(s,r);let h,d;n.font=i.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(o,r,a,c)+10):(d=this.maxHeight,h=this._fitCols(o,i,a,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,n,s,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],d=i+a;let p=t;r.textAlign="left",r.textBaseline="middle";let g=-1,_=-d;return this.legendItems.forEach((y,b)=>{const w=s+n/2+r.measureText(y.text).width;(b===0||h[h.length-1]+w+2*a>o)&&(p+=d,h[h.length-(b>0?0:1)]=0,_+=d,g++),c[b]={left:0,top:_,row:g,width:w,height:i},h[h.length-1]+=w+a}),p}_fitCols(t,n,s,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],d=o-t;let p=a,g=0,_=0,y=0,b=0;return this.legendItems.forEach((w,A)=>{const{itemWidth:R,itemHeight:D}=Get(s,n,r,w,i);A>0&&_+D+2*a>d&&(p+=g+a,h.push({width:g,height:_}),y+=g+a,b++,g=_=0),c[A]={left:y,top:_,col:b,width:R,height:D},g=Math.max(g,R),_+=D+a}),p+=g,h.push({width:g,height:_}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:i},rtl:r}}=this,o=cl(r,this.left,this.width);if(this.isHorizontal()){let a=0,c=Vn(s,this.left+i,this.right-this.lineWidths[a]);for(const h of n)a!==h.row&&(a=h.row,c=Vn(s,this.left+i,this.right-this.lineWidths[a])),h.top+=this.top+t+i,h.left=o.leftForLtr(o.x(c),h.width),c+=h.width+i}else{let a=0,c=Vn(s,this.top+t+i,this.bottom-this.columnSizes[a].height);for(const h of n)h.col!==a&&(a=h.col,c=Vn(s,this.top+t+i,this.bottom-this.columnSizes[a].height)),h.top=c,h.left+=this.left+i,h.left=o.leftForLtr(o.x(h.left),h.width),c+=h.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;_g(t,this),this._draw(),yg(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:s,ctx:i}=this,{align:r,labels:o}=t,a=Qe.color,c=cl(t.rtl,this.left,this.width),h=mn(o.font),{padding:d}=o,p=h.size,g=p/2;let _;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=h.string;const{boxWidth:y,boxHeight:b,itemHeight:w}=L1(o,p),A=function(L,V,B){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;i.save();const tt=Wt(B.lineWidth,1);if(i.fillStyle=Wt(B.fillStyle,a),i.lineCap=Wt(B.lineCap,"butt"),i.lineDashOffset=Wt(B.lineDashOffset,0),i.lineJoin=Wt(B.lineJoin,"miter"),i.lineWidth=tt,i.strokeStyle=Wt(B.strokeStyle,a),i.setLineDash(Wt(B.lineDash,[])),o.usePointStyle){const bt={radius:b*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:tt},At=c.xPlus(L,y/2),kt=V+g;FD(i,bt,At,kt,o.pointStyleWidth&&y)}else{const bt=V+Math.max((p-b)/2,0),At=c.leftForLtr(L,y),kt=Zo(B.borderRadius);i.beginPath(),Object.values(kt).some(de=>de!==0)?Nu(i,{x:At,y:bt,w:y,h:b,radius:kt}):i.rect(At,bt,y,b),i.fill(),tt!==0&&i.stroke()}i.restore()},R=function(L,V,B){ga(i,B.text,L,V+w/2,h,{strikethrough:B.hidden,textAlign:c.textAlign(B.textAlign)})},D=this.isHorizontal(),O=this._computeTitleHeight();D?_={x:Vn(r,this.left+d,this.right-s[0]),y:this.top+d+O,line:0}:_={x:this.left+d,y:Vn(r,this.top+O+d,this.bottom-n[0].height),line:0},qD(this.ctx,t.textDirection);const N=w+d;this.legendItems.forEach((L,V)=>{i.strokeStyle=L.fontColor,i.fillStyle=L.fontColor;const B=i.measureText(L.text).width,tt=c.textAlign(L.textAlign||(L.textAlign=o.textAlign)),bt=y+g+B;let At=_.x,kt=_.y;c.setWidth(this.width),D?V>0&&At+bt+d>this.right&&(kt=_.y+=N,_.line++,At=_.x=Vn(r,this.left+d,this.right-s[_.line])):V>0&&kt+N>this.bottom&&(At=_.x=At+n[_.line].width+d,_.line++,kt=_.y=Vn(r,this.top+O+d,this.bottom-n[_.line].height));const de=c.x(At);if(A(de,kt,L),At=fJ(tt,At+y+g,D?At+bt:this.right,t.rtl),R(c.x(At),kt,L),D)_.x+=bt+d;else if(typeof L.text!="string"){const qe=h.lineHeight;_.y+=_k(L,qe)+d}else _.y+=N}),KD(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,s=mn(n.font),i=Gn(n.padding);if(!n.display)return;const r=cl(t.rtl,this.left,this.width),o=this.ctx,a=n.position,c=s.size/2,h=i.top+c;let d,p=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),d=this.top+h,p=Vn(t.align,p,this.right-g);else{const y=this.columnSizes.reduce((b,w)=>Math.max(b,w.height),0);d=h+Vn(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}const _=Vn(a,p,p+g);o.textAlign=r.textAlign(e0(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,ga(o,n.text,_,d,s)}_computeTitleHeight(){const t=this.options.title,n=mn(t.font),s=Gn(t.padding);return t.display?n.lineHeight+s.height:0}_getLegendItemAt(t,n){let s,i,r;if(lr(t,this.left,this.right)&&lr(n,this.top,this.bottom)){for(r=this.legendHitBoxes,s=0;s<r.length;++s)if(i=r[s],lr(t,i.left,i.left+i.width)&&lr(n,i.top,i.top+i.height))return this.legendItems[s]}return null}handleEvent(t){const n=this.options;if(!Xet(t.type,n))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,r=Ket(i,s);i&&!r&&Pe(n.onLeave,[t,i,this],this),this._hoveredItem=s,s&&!r&&Pe(n.onHover,[t,s,this],this)}else s&&Pe(n.onClick,[t,s,this],this)}}function Get(e,t,n,s,i){const r=Yet(s,e,t,n),o=Qet(i,s,t.lineHeight);return{itemWidth:r,itemHeight:o}}function Yet(e,t,n,s){let i=e.text;return i&&typeof i!="string"&&(i=i.reduce((r,o)=>r.length>o.length?r:o)),t+n.size/2+s.measureText(i).width}function Qet(e,t,n){let s=e;return typeof t.text!="string"&&(s=_k(t,n)),s}function _k(e,t){const n=e.text?e.text.length:0;return t*n}function Xet(e,t){return!!((e==="mousemove"||e==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var yk={id:"legend",_element:U1,start(e,t,n){const s=e.legend=new U1({ctx:e.ctx,options:n,chart:e});zn.configure(e,s,n),zn.addBox(e,s)},stop(e){zn.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const s=e.legend;zn.configure(e,s,n),s.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const s=t.datasetIndex,i=n.chart;i.isDatasetVisible(s)?(i.hide(s),t.hidden=!0):(i.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:i,color:r,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(n?0:void 0),d=Gn(h.borderWidth);return{text:t[c.index].label,fillStyle:h.backgroundColor,fontColor:r,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:i||h.textAlign,borderRadius:o&&(a||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class h0 extends wr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=n;const i=Ue(s.text)?s.text.length:1;this._padding=Gn(s.padding);const r=i*mn(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:n,left:s,bottom:i,right:r,options:o}=this,a=o.align;let c=0,h,d,p;return this.isHorizontal()?(d=Vn(a,s,r),p=n+t,h=r-s):(o.position==="left"?(d=s+t,p=Vn(a,i,n),c=Ve*-.5):(d=r-t,p=Vn(a,n,i),c=Ve*.5),h=i-n),{titleX:d,titleY:p,maxWidth:h,rotation:c}}draw(){const t=this.ctx,n=this.options;if(!n.display)return;const s=mn(n.font),r=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:h}=this._drawArgs(r);ga(t,n.text,0,0,s,{color:n.color,maxWidth:c,rotation:h,textAlign:e0(n.align),textBaseline:"middle",translation:[o,a]})}}function Jet(e,t){const n=new h0({ctx:e.ctx,options:t,chart:e});zn.configure(e,n,t),zn.addBox(e,n),e.titleBlock=n}var vk={id:"title",_element:h0,start(e,t,n){Jet(e,n)},stop(e){const t=e.titleBlock;zn.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const s=e.titleBlock;zn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Nd=new WeakMap;var Zet={id:"subtitle",start(e,t,n){const s=new h0({ctx:e.ctx,options:n,chart:e});zn.configure(e,s,n),zn.addBox(e,s),Nd.set(e,s)},stop(e){zn.removeBox(e,Nd.get(e)),Nd.delete(e)},beforeUpdate(e,t,n){const s=Nd.get(e);zn.configure(e,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dc={average(e){if(!e.length)return!1;let t,n,s=new Set,i=0,r=0;for(t=0,n=e.length;t<n;++t){const a=e[t].element;if(a&&a.hasValue()){const c=a.tooltipPosition();s.add(c.x),i+=c.y,++r}}return{x:[...s].reduce((a,c)=>a+c)/s.size,y:i/r}},nearest(e,t){if(!e.length)return!1;let n=t.x,s=t.y,i=Number.POSITIVE_INFINITY,r,o,a;for(r=0,o=e.length;r<o;++r){const c=e[r].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),d=Uy(t,h);d<i&&(i=d,a=c)}}if(a){const c=a.tooltipPosition();n=c.x,s=c.y}return{x:n,y:s}}};function _i(e,t){return t&&(Ue(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function nr(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function tnt(e,t){const{element:n,datasetIndex:s,index:i}=t,r=e.getDatasetMeta(s).controller,{label:o,value:a}=r.getLabelAndValue(i);return{chart:e,label:o,parsed:r.getParsed(i),raw:e.data.datasets[s].data[i],formattedValue:a,dataset:r.getDataset(),dataIndex:i,datasetIndex:s,element:n}}function F1(e,t){const n=e.chart.ctx,{body:s,footer:i,title:r}=e,{boxWidth:o,boxHeight:a}=t,c=mn(t.bodyFont),h=mn(t.titleFont),d=mn(t.footerFont),p=r.length,g=i.length,_=s.length,y=Gn(t.padding);let b=y.height,w=0,A=s.reduce((O,N)=>O+N.before.length+N.lines.length+N.after.length,0);if(A+=e.beforeBody.length+e.afterBody.length,p&&(b+=p*h.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),A){const O=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;b+=_*O+(A-_)*c.lineHeight+(A-1)*t.bodySpacing}g&&(b+=t.footerMarginTop+g*d.lineHeight+(g-1)*t.footerSpacing);let R=0;const D=function(O){w=Math.max(w,n.measureText(O).width+R)};return n.save(),n.font=h.string,ve(e.title,D),n.font=c.string,ve(e.beforeBody.concat(e.afterBody),D),R=t.displayColors?o+2+t.boxPadding:0,ve(s,O=>{ve(O.before,D),ve(O.lines,D),ve(O.after,D)}),R=0,n.font=d.string,ve(e.footer,D),n.restore(),w+=y.width,{width:w,height:b}}function ent(e,t){const{y:n,height:s}=t;return n<s/2?"top":n>e.height-s/2?"bottom":"center"}function nnt(e,t,n,s){const{x:i,width:r}=s,o=n.caretSize+n.caretPadding;if(e==="left"&&i+r+o>t.width||e==="right"&&i-r-o<0)return!0}function snt(e,t,n,s){const{x:i,width:r}=n,{width:o,chartArea:{left:a,right:c}}=e;let h="center";return s==="center"?h=i<=(a+c)/2?"left":"right":i<=r/2?h="left":i>=o-r/2&&(h="right"),nnt(h,e,t,n)&&(h="center"),h}function V1(e,t,n){const s=n.yAlign||t.yAlign||ent(e,n);return{xAlign:n.xAlign||t.xAlign||snt(e,t,n,s),yAlign:s}}function int(e,t){let{x:n,width:s}=e;return t==="right"?n-=s:t==="center"&&(n-=s/2),n}function rnt(e,t,n){let{y:s,height:i}=e;return t==="top"?s+=n:t==="bottom"?s-=i+n:s-=i/2,s}function B1(e,t,n,s){const{caretSize:i,caretPadding:r,cornerRadius:o}=e,{xAlign:a,yAlign:c}=n,h=i+r,{topLeft:d,topRight:p,bottomLeft:g,bottomRight:_}=Zo(o);let y=int(t,a);const b=rnt(t,c,h);return c==="center"?a==="left"?y+=h:a==="right"&&(y-=h):a==="left"?y-=Math.max(d,g)+i:a==="right"&&(y+=Math.max(p,_)+i),{x:bn(y,0,s.width-t.width),y:bn(b,0,s.height-t.height)}}function Ld(e,t,n){const s=Gn(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-s.right:e.x+s.left}function $1(e){return _i([],nr(e))}function ont(e,t,n){return vo(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function H1(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const bk={beforeTitle:tr,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return n[t.dataIndex]}return""},afterTitle:tr,beforeBody:tr,beforeLabel:tr,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ae(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:tr,afterBody:tr,beforeFooter:tr,footer:tr,afterFooter:tr};function ps(e,t,n,s){const i=e[t].call(n,s);return typeof i>"u"?bk[t].call(n,s):i}class qy extends wr{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,s=this.options.setContext(this.getContext()),i=s.enabled&&n.options.animation&&s.animations,r=new XD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=ont(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:s}=n,i=ps(s,"beforeTitle",this,t),r=ps(s,"title",this,t),o=ps(s,"afterTitle",this,t);let a=[];return a=_i(a,nr(i)),a=_i(a,nr(r)),a=_i(a,nr(o)),a}getBeforeBody(t,n){return $1(ps(n.callbacks,"beforeBody",this,t))}getBody(t,n){const{callbacks:s}=n,i=[];return ve(t,r=>{const o={before:[],lines:[],after:[]},a=H1(s,r);_i(o.before,nr(ps(a,"beforeLabel",this,r))),_i(o.lines,ps(a,"label",this,r)),_i(o.after,nr(ps(a,"afterLabel",this,r))),i.push(o)}),i}getAfterBody(t,n){return $1(ps(n.callbacks,"afterBody",this,t))}getFooter(t,n){const{callbacks:s}=n,i=ps(s,"beforeFooter",this,t),r=ps(s,"footer",this,t),o=ps(s,"afterFooter",this,t);let a=[];return a=_i(a,nr(i)),a=_i(a,nr(r)),a=_i(a,nr(o)),a}_createItems(t){const n=this._active,s=this.chart.data,i=[],r=[],o=[];let a=[],c,h;for(c=0,h=n.length;c<h;++c)a.push(tnt(this.chart,n[c]));return t.filter&&(a=a.filter((d,p,g)=>t.filter(d,p,g,s))),t.itemSort&&(a=a.sort((d,p)=>t.itemSort(d,p,s))),ve(a,d=>{const p=H1(t.callbacks,d);i.push(ps(p,"labelColor",this,d)),r.push(ps(p,"labelPointStyle",this,d)),o.push(ps(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=a,a}update(t,n){const s=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(!i.length)this.opacity!==0&&(r={opacity:0});else{const a=Dc[s.position].call(this,i,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const c=this._size=F1(this,s),h=Object.assign({},a,c),d=V1(this.chart,s,h),p=B1(s,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,r={opacity:1,x:p.x,y:p.y,width:c.width,height:c.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,s,i){const r=this.getCaretPosition(t,s,i);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(t,n,s){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:p}=Zo(a),{x:g,y:_}=t,{width:y,height:b}=n;let w,A,R,D,O,N;return r==="center"?(O=_+b/2,i==="left"?(w=g,A=w-o,D=O+o,N=O-o):(w=g+y,A=w+o,D=O-o,N=O+o),R=w):(i==="left"?A=g+Math.max(c,d)+o:i==="right"?A=g+y-Math.max(h,p)-o:A=this.caretX,r==="top"?(D=_,O=D-o,w=A-o,R=A+o):(D=_+b,O=D+o,w=A+o,R=A-o),N=D),{x1:w,x2:A,x3:R,y1:D,y2:O,y3:N}}drawTitle(t,n,s){const i=this.title,r=i.length;let o,a,c;if(r){const h=cl(s.rtl,this.x,this.width);for(t.x=Ld(this,s.titleAlign,s),n.textAlign=h.textAlign(s.titleAlign),n.textBaseline="middle",o=mn(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,c=0;c<r;++c)n.fillText(i[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,c+1===r&&(t.y+=s.titleMarginBottom-a)}}_drawColorBox(t,n,s,i,r){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:c,boxWidth:h}=r,d=mn(r.bodyFont),p=Ld(this,"left",r),g=i.x(p),_=c<d.lineHeight?(d.lineHeight-c)/2:0,y=n.y+_;if(r.usePointStyle){const b={radius:Math.min(h,c)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},w=i.leftForLtr(g,h)+h/2,A=y+c/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Vy(t,b,w,A),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Vy(t,b,w,A)}else{t.lineWidth=Zt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const b=i.leftForLtr(g,h),w=i.leftForLtr(i.xPlus(g,1),h-2),A=Zo(o.borderRadius);Object.values(A).some(R=>R!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Nu(t,{x:b,y,w:h,h:c,radius:A}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Nu(t,{x:w,y:y+1,w:h-2,h:c-2,radius:A}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(b,y,h,c),t.strokeRect(b,y,h,c),t.fillStyle=o.backgroundColor,t.fillRect(w,y+1,h-2,c-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,n,s){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:c,boxWidth:h,boxPadding:d}=s,p=mn(s.bodyFont);let g=p.lineHeight,_=0;const y=cl(s.rtl,this.x,this.width),b=function(B){n.fillText(B,y.x(t.x+_),t.y+g/2),t.y+=g+r},w=y.textAlign(o);let A,R,D,O,N,L,V;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,t.x=Ld(this,w,s),n.fillStyle=s.bodyColor,ve(this.beforeBody,b),_=a&&w!=="right"?o==="center"?h/2+d:h+2+d:0,O=0,L=i.length;O<L;++O){for(A=i[O],R=this.labelTextColors[O],n.fillStyle=R,ve(A.before,b),D=A.lines,a&&D.length&&(this._drawColorBox(n,t,O,y,s),g=Math.max(p.lineHeight,c)),N=0,V=D.length;N<V;++N)b(D[N]),g=p.lineHeight;ve(A.after,b)}_=0,g=p.lineHeight,ve(this.afterBody,b),t.y-=r}drawFooter(t,n,s){const i=this.footer,r=i.length;let o,a;if(r){const c=cl(s.rtl,this.x,this.width);for(t.x=Ld(this,s.footerAlign,s),t.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",o=mn(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<r;++a)n.fillText(i[a],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+s.footerSpacing}}drawBackground(t,n,s,i){const{xAlign:r,yAlign:o}=this,{x:a,y:c}=t,{width:h,height:d}=s,{topLeft:p,topRight:g,bottomLeft:_,bottomRight:y}=Zo(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,c),o==="top"&&this.drawCaret(t,n,s,i),n.lineTo(a+h-g,c),n.quadraticCurveTo(a+h,c,a+h,c+g),o==="center"&&r==="right"&&this.drawCaret(t,n,s,i),n.lineTo(a+h,c+d-y),n.quadraticCurveTo(a+h,c+d,a+h-y,c+d),o==="bottom"&&this.drawCaret(t,n,s,i),n.lineTo(a+_,c+d),n.quadraticCurveTo(a,c+d,a,c+d-_),o==="center"&&r==="left"&&this.drawCaret(t,n,s,i),n.lineTo(a,c+p),n.quadraticCurveTo(a,c,a+p,c),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,s=this.$animations,i=s&&s.x,r=s&&s.y;if(i||r){const o=Dc[t.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=F1(this,t),c=Object.assign({},o,this._size),h=V1(n,t,c),d=B1(t,c,h,n);(i._to!==d.x||r._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=Gn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(t.save(),t.globalAlpha=s,this.drawBackground(r,t,i,n),qD(t,n.textDirection),r.y+=o.top,this.drawTitle(r,t,n),this.drawBody(r,t,n),this.drawFooter(r,t,n),KD(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const s=this._active,i=t.map(({datasetIndex:a,index:c})=>{const h=this.chart.getDatasetMeta(a);if(!h)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:h.data[c],index:c}}),r=!Kf(s,i),o=this._positionChanged(i,n);(r||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,n,s),a=this._positionChanged(o,t),c=n||!Kf(o,r)||a;return c&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),c}_getActiveElements(t,n,s,i){const r=this.options;if(t.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(t,r.mode,r,s);return r.reverse&&o.reverse(),o}_positionChanged(t,n){const{caretX:s,caretY:i,options:r}=this,o=Dc[r.position].call(this,t,n);return o!==!1&&(s!==o.x||i!==o.y)}}it(qy,"positioners",Dc);var wk={id:"tooltip",_element:qy,positioners:Dc,afterInit(e,t,n){n&&(e.tooltip=new qy({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ant=Object.freeze({__proto__:null,Colors:wet,Decimation:Aet,Filler:qet,Legend:yk,SubTitle:Zet,Title:vk,Tooltip:wk});const lnt=(e,t,n,s)=>(typeof t=="string"?(n=e.push(t)-1,s.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function cnt(e,t,n,s){const i=e.indexOf(t);if(i===-1)return lnt(e,t,n,s);const r=e.lastIndexOf(t);return i!==r?n:i}const unt=(e,t)=>e===null?null:bn(Math.round(e),0,t);function W1(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class tp extends Aa{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:i,label:r}of n)s[i]===r&&s.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(ae(t))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===t?n:cnt(s,t,Wt(n,t),this._addedLabels),unt(n,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),n||(i=this.getLabels().length-1)),this.min=s,this.max=i}buildTicks(){const t=this.min,n=this.max,s=this.options.offset,i=[];let r=this.getLabels();r=t===0&&n===r.length-1?r:r.slice(t,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=t;o<=n;o++)i.push({value:o});return i}getLabelForValue(t){return W1.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}it(tp,"id","category"),it(tp,"defaults",{ticks:{callback:W1}});function hnt(e,t){const n=[],{bounds:i,step:r,min:o,max:a,precision:c,count:h,maxTicks:d,maxDigits:p,includeBounds:g}=e,_=r||1,y=d-1,{min:b,max:w}=t,A=!ae(o),R=!ae(a),D=!ae(h),O=(w-b)/(p+1);let N=UA((w-b)/y/_)*_,L,V,B,tt;if(N<1e-14&&!A&&!R)return[{value:b},{value:w}];tt=Math.ceil(w/N)-Math.floor(b/N),tt>y&&(N=UA(tt*N/y/_)*_),ae(c)||(L=Math.pow(10,c),N=Math.ceil(N*L)/L),i==="ticks"?(V=Math.floor(b/N)*N,B=Math.ceil(w/N)*N):(V=b,B=w),A&&R&&r&&oJ((a-o)/r,N/1e3)?(tt=Math.round(Math.min((a-o)/N,d)),N=(a-o)/tt,V=o,B=a):D?(V=A?o:V,B=R?a:B,tt=h-1,N=(B-V)/tt):(tt=(B-V)/N,Qc(tt,Math.round(tt),N/1e3)?tt=Math.round(tt):tt=Math.ceil(tt));const bt=Math.max(FA(N),FA(V));L=Math.pow(10,ae(c)?bt:c),V=Math.round(V*L)/L,B=Math.round(B*L)/L;let At=0;for(A&&(g&&V!==o?(n.push({value:o}),V<o&&At++,Qc(Math.round((V+At*N)*L)/L,o,z1(o,O,e))&&At++):V<o&&At++);At<tt;++At){const kt=Math.round((V+At*N)*L)/L;if(R&&kt>a)break;n.push({value:kt})}return R&&g&&B!==a?n.length&&Qc(n[n.length-1].value,a,z1(a,O,e))?n[n.length-1].value=a:n.push({value:a}):(!R||B===a)&&n.push({value:B}),n}function z1(e,t,{horizontal:n,minRotation:s}){const i=ii(s),r=(n?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/r,o)}class ep extends Aa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:i,max:r}=this;const o=c=>i=n?i:c,a=c=>r=s?r:c;if(t){const c=Mi(i),h=Mi(r);c<0&&h<0?a(0):c>0&&h>0&&o(0)}if(i===r){let c=r===0?1:Math.abs(r*.05);a(r+c),t||o(i-c)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=t,i;return s?(i=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const i={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},r=this._range||this,o=hnt(i,r);return t.bounds==="ticks"&&CD(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const t=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const i=(s-n)/Math.max(t.length-1,1)/2;n-=i,s+=i}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(t){return mh(t,this.chart.options.locale,this.options.ticks.format)}}class np extends ep{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ye(t)?t:0,this.max=Ye(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,s=ii(this.options.ticks.minRotation),i=(t?Math.sin(s):Math.cos(s))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}it(np,"id","linear"),it(np,"defaults",{ticks:{callback:mg.formatters.numeric}});const Uu=e=>Math.floor(Kr(e)),No=(e,t)=>Math.pow(10,Uu(e)+t);function j1(e){return e/Math.pow(10,Uu(e))===1}function q1(e,t,n){const s=Math.pow(10,n),i=Math.floor(e/s);return Math.ceil(t/s)-i}function dnt(e,t){const n=t-e;let s=Uu(n);for(;q1(e,t,s)>10;)s++;for(;q1(e,t,s)<10;)s--;return Math.min(s,Uu(e))}function fnt(e,{min:t,max:n}){t=Ps(e.min,t);const s=[],i=Uu(t);let r=dnt(t,n),o=r<0?Math.pow(10,Math.abs(r)):1;const a=Math.pow(10,r),c=i>r?Math.pow(10,i):0,h=Math.round((t-c)*o)/o,d=Math.floor((t-c)/a/10)*a*10;let p=Math.floor((h-d)/Math.pow(10,r)),g=Ps(e.min,Math.round((c+d+p*Math.pow(10,r))*o)/o);for(;g<n;)s.push({value:g,major:j1(g),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(r++,p=2,o=r>=0?1:o),g=Math.round((c+d+p*Math.pow(10,r))*o)/o;const _=Ps(e.max,g);return s.push({value:_,major:j1(_),significand:p}),s}class Ky extends Aa{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const s=ep.prototype.parse.apply(this,[t,n]);if(s===0){this._zero=!0;return}return Ye(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=Ye(t)?Math.max(0,t):null,this.max=Ye(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ye(this._userMin)&&(this.min=t===No(this.min,0)?No(this.min,-1):No(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let s=this.min,i=this.max;const r=a=>s=t?s:a,o=a=>i=n?i:a;s===i&&(s<=0?(r(1),o(10)):(r(No(s,-1)),o(No(i,1)))),s<=0&&r(No(i,-1)),i<=0&&o(No(s,1)),this.min=s,this.max=i}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},s=fnt(n,this);return t.bounds==="ticks"&&CD(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":mh(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Kr(t),this._valueRange=Kr(this.max)-Kr(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Kr(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}it(Ky,"id","logarithmic"),it(Ky,"defaults",{ticks:{callback:mg.formatters.logarithmic,major:{enabled:!0}}});function Gy(e){const t=e.ticks;if(t.display&&e.display){const n=Gn(t.backdropPadding);return Wt(t.font&&t.font.size,Qe.font.size)+n.height}return 0}function pnt(e,t,n){return n=Ue(n)?n:[n],{w:TJ(e,t.string,n),h:n.length*t.lineHeight}}function K1(e,t,n,s,i){return e===s||e===i?{start:t-n/2,end:t+n/2}:e<s||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function gnt(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),s=[],i=[],r=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Ve/r:0;for(let c=0;c<r;c++){const h=o.setContext(e.getPointLabelContext(c));i[c]=h.padding;const d=e.getPointPosition(c,e.drawingArea+i[c],a),p=mn(h.font),g=pnt(e.ctx,p,e._pointLabels[c]);s[c]=g;const _=Ds(e.getIndexAngle(c)+a),y=Math.round(Zb(_)),b=K1(y,d.x,g.w,0,180),w=K1(y,d.y,g.h,90,270);mnt(n,t,_,b,w)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=vnt(e,s,i)}function mnt(e,t,n,s,i){const r=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,c=0;s.start<t.l?(a=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-a)):s.end>t.r&&(a=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+a)),i.start<t.t?(c=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-c)):i.end>t.b&&(c=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+c))}function _nt(e,t,n){const s=e.drawingArea,{extra:i,additionalAngle:r,padding:o,size:a}=n,c=e.getPointPosition(t,s+i+o,r),h=Math.round(Zb(Ds(c.angle+rn))),d=Ent(c.y,a.h,h),p=bnt(h),g=wnt(c.x,a.w,p);return{visible:!0,x:c.x,y:d,textAlign:p,left:g,top:d,right:g+a.w,bottom:d+a.h}}function ynt(e,t){if(!t)return!0;const{left:n,top:s,right:i,bottom:r}=e;return!(ur({x:n,y:s},t)||ur({x:n,y:r},t)||ur({x:i,y:s},t)||ur({x:i,y:r},t))}function vnt(e,t,n){const s=[],i=e._pointLabels.length,r=e.options,{centerPointLabels:o,display:a}=r.pointLabels,c={extra:Gy(r)/2,additionalAngle:o?Ve/i:0};let h;for(let d=0;d<i;d++){c.padding=n[d],c.size=t[d];const p=_nt(e,d,c);s.push(p),a==="auto"&&(p.visible=ynt(p,h),p.visible&&(h=p))}return s}function bnt(e){return e===0||e===180?"center":e<180?"left":"right"}function wnt(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function Ent(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function Tnt(e,t,n){const{left:s,top:i,right:r,bottom:o}=n,{backdropColor:a}=t;if(!ae(a)){const c=Zo(t.borderRadius),h=Gn(t.backdropPadding);e.fillStyle=a;const d=s-h.left,p=i-h.top,g=r-s+h.width,_=o-i+h.height;Object.values(c).some(y=>y!==0)?(e.beginPath(),Nu(e,{x:d,y:p,w:g,h:_,radius:c}),e.fill()):e.fillRect(d,p,g,_)}}function Int(e,t){const{ctx:n,options:{pointLabels:s}}=e;for(let i=t-1;i>=0;i--){const r=e._pointLabelItems[i];if(!r.visible)continue;const o=s.setContext(e.getPointLabelContext(i));Tnt(n,o,r);const a=mn(o.font),{x:c,y:h,textAlign:d}=r;ga(n,e._pointLabels[i],c,h+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function Ek(e,t,n,s){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Fe);else{let r=e.getPointPosition(0,t);i.moveTo(r.x,r.y);for(let o=1;o<s;o++)r=e.getPointPosition(o,t),i.lineTo(r.x,r.y)}}function Ant(e,t,n,s,i){const r=e.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!s||!a||!c||n<0||(r.save(),r.strokeStyle=a,r.lineWidth=c,r.setLineDash(i.dash),r.lineDashOffset=i.dashOffset,r.beginPath(),Ek(e,n,o,s),r.closePath(),r.stroke(),r.restore())}function xnt(e,t,n){return vo(e,{label:n,index:t,type:"pointLabel"})}class kc extends ep{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Gn(Gy(this.options)/2),n=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(n,s)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=Ye(t)&&!isNaN(t)?t:0,this.max=Ye(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Gy(this.options))}generateTickLabels(t){ep.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,s)=>{const i=Pe(this.options.pointLabels.callback,[n,s],this);return i||i===0?i:""}).filter((n,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?gnt(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,s,i){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((s-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,s,i))}getIndexAngle(t){const n=Fe/(this._pointLabels.length||1),s=this.options.startAngle||0;return Ds(t*n+ii(s))}getDistanceFromCenterForValue(t){if(ae(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(ae(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const s=n[t];return xnt(this.getContext(),t,s)}}getPointPosition(t,n,s=0){const i=this.getIndexAngle(t)-rn+s;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:s,right:i,bottom:r}=this._pointLabelItems[t];return{left:n,top:s,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),Ek(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:s,grid:i,border:r}=n,o=this._pointLabels.length;let a,c,h;if(n.pointLabels.display&&Int(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0||p===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const g=this.getContext(p),_=i.setContext(g),y=r.setContext(g);Ant(this,_,c,o,y)}}),s.display){for(t.save(),a=o-1;a>=0;a--){const d=s.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:g}=d;!g||!p||(t.lineWidth=g,t.strokeStyle=p,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),h=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,s=n.ticks;if(!s.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!n.reverse)return;const h=s.setContext(this.getContext(c)),d=mn(h.font);if(r=this.getDistanceFromCenterForValue(this.ticks[c].value),h.showLabelBackdrop){t.font=d.string,o=t.measureText(a.label).width,t.fillStyle=h.backdropColor;const p=Gn(h.backdropPadding);t.fillRect(-o/2-p.left,-r-d.size/2-p.top,o+p.width,d.size+p.height)}ga(t,a.label,0,-r,d,{color:h.color,strokeColor:h.textStrokeColor,strokeWidth:h.textStrokeWidth})}),t.restore()}drawTitle(){}}it(kc,"id","radialLinear"),it(kc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:mg.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),it(kc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),it(kc,"descriptors",{angleLines:{_fallback:"grid"}});const bg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_s=Object.keys(bg);function G1(e,t){return e-t}function Y1(e,t){if(ae(t))return null;const n=e._adapter,{parser:s,round:i,isoWeekday:r}=e._parseOpts;let o=t;return typeof s=="function"&&(o=s(o)),Ye(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Sl(r)||r===!0)?n.startOf(o,"isoWeek",r):n.startOf(o,i)),+o)}function Q1(e,t,n,s){const i=_s.length;for(let r=_s.indexOf(e);r<i-1;++r){const o=bg[_s[r]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(a*o.size))<=s)return _s[r]}return _s[i-1]}function Snt(e,t,n,s,i){for(let r=_s.length-1;r>=_s.indexOf(n);r--){const o=_s[r];if(bg[o].common&&e._adapter.diff(i,s,o)>=t-1)return o}return _s[n?_s.indexOf(n):0]}function Rnt(e){for(let t=_s.indexOf(e)+1,n=_s.length;t<n;++t)if(bg[_s[t]].common)return _s[t]}function X1(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:s,hi:i}=t0(n,t),r=n[s]>=t?n[s]:n[i];e[r]=!0}}function Cnt(e,t,n,s){const i=e._adapter,r=+i.startOf(t[0].value,s),o=t[t.length-1].value;let a,c;for(a=r;a<=o;a=+i.add(a,1,s))c=n[a],c>=0&&(t[c].major=!0);return t}function J1(e,t,n){const s=[],i={},r=t.length;let o,a;for(o=0;o<r;++o)a=t[o],i[a]=o,s.push({value:a,major:!1});return r===0||!n?s:Cnt(e,s,i,n)}class Fu extends Aa{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n={}){const s=t.time||(t.time={}),i=this._adapter=new VZ._date(t.adapters.date);i.init(n),Yc(s.displayFormats,i.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:Y1(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,s=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:a}=this.getUserBounds();function c(h){!o&&!isNaN(h.min)&&(i=Math.min(i,h.min)),!a&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!o||!a)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Ye(i)&&!isNaN(i)?i:+n.startOf(Date.now(),s),r=Ye(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],s=t[t.length-1]),{min:n,max:s}}buildTicks(){const t=this.options,n=t.time,s=t.ticks,i=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=this.max,a=uJ(i,r,o);return this._unit=n.unit||(s.autoSkip?Q1(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):Snt(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Rnt(this._unit),this.initOffsets(i),t.reverse&&a.reverse(),J1(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let n=0,s=0,i,r;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?n=1-i:n=(this.getDecimalForValue(t[1])-i)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?s=r:s=(r-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;n=bn(n,0,o),s=bn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const t=this._adapter,n=this.min,s=this.max,i=this.options,r=i.time,o=r.unit||Q1(r.minUnit,n,s,this._getLabelCapacity(n)),a=Wt(i.ticks.stepSize,1),c=o==="week"?r.isoWeekday:!1,h=Sl(c)||c===!0,d={};let p=n,g,_;if(h&&(p=+t.startOf(p,"isoWeek",c)),p=+t.startOf(p,h?"day":o),t.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(g=p,_=0;g<s;g=+t.add(g,a,o),_++)X1(d,g,y);return(g===s||i.bounds==="ticks"||_===1)&&X1(d,g,y),Object.keys(d).sort(G1).map(b=>+b)}getLabelForValue(t){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(t,s.tooltipFormat):n.format(t,s.displayFormats.datetime)}format(t,n){const i=this.options.time.displayFormats,r=this._unit,o=n||i[r];return this._adapter.format(t,o)}_tickFormatFunction(t,n,s,i){const r=this.options,o=r.ticks.callback;if(o)return Pe(o,[t,n,s],this);const a=r.time.displayFormats,c=this._unit,h=this._majorUnit,d=c&&a[c],p=h&&a[h],g=s[n],_=h&&p&&g&&g.major;return this._adapter.format(t,i||(_?p:d))}generateTickLabels(t){let n,s,i;for(n=0,s=t.length;n<s;++n)i=t[n],i.label=this._tickFormatFunction(i.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,s=this.ctx.measureText(t).width,i=ii(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:s*r+a*o,h:s*o+a*r}}_getLabelCapacity(t){const n=this.options.time,s=n.displayFormats,i=s[n.unit]||s.millisecond,r=this._tickFormatFunction(t,0,J1(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t=this._cache.data||[],n,s;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,s=i.length;n<s;++n)t=t.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,s;if(t.length)return t;const i=this.getLabels();for(n=0,s=i.length;n<s;++n)t.push(Y1(this,i[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return kD(t.sort(G1))}}it(Fu,"id","time"),it(Fu,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Ud(e,t,n){let s=0,i=e.length-1,r,o,a,c;n?(t>=e[s].pos&&t<=e[i].pos&&({lo:s,hi:i}=cr(e,"pos",t)),{pos:r,time:a}=e[s],{pos:o,time:c}=e[i]):(t>=e[s].time&&t<=e[i].time&&({lo:s,hi:i}=cr(e,"time",t)),{time:r,pos:a}=e[s],{time:o,pos:c}=e[i]);const h=o-r;return h?a+(c-a)*(t-r)/h:a}class Yy extends Fu{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=Ud(n,this.min),this._tableRange=Ud(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:s}=this,i=[],r=[];let o,a,c,h,d;for(o=0,a=t.length;o<a;++o)h=t[o],h>=n&&h<=s&&i.push(h);if(i.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],c=i[o-1],h=i[o],Math.round((d+c)/2)!==h&&r.push({time:h,pos:o/(a-1)});return r}_generate(){const t=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((i,r)=>i-r)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?t=this.normalize(n.concat(s)):t=n.length?n:s,t=this._cache.all=t,t}getDecimalForValue(t){return(Ud(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,s=this.getDecimalForPixel(t)/n.factor-n.end;return Ud(this._table,s*this._tableRange+this._minPos,!0)}}it(Yy,"id","timeseries"),it(Yy,"defaults",Fu.defaults);var Pnt=Object.freeze({__proto__:null,CategoryScale:tp,LinearScale:np,LogarithmicScale:Ky,RadialLinearScale:kc,TimeScale:Fu,TimeSeriesScale:Yy});const Tk=[FZ,get,ant,Pnt];bo.register(...Tk);const Ik={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},Dnt={ariaLabel:{type:String},ariaDescribedby:{type:String}},knt={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...Ik,...Dnt},Ont=jx[0]==="2"?(e,t)=>Object.assign(e,{attrs:t}):(e,t)=>Object.assign(e,t);function ja(e){return up(e)?Ut(e):e}function Mnt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return up(t)?new Proxy(e,{}):e}function Nnt(e,t){const n=e.options;n&&t&&Object.assign(n,t)}function Ak(e,t){e.labels=t}function xk(e,t,n){const s=[];e.datasets=t.map(i=>{const r=e.datasets.find(o=>o[n]===i[n]);return!r||!i.data||s.includes(r)?{...i}:(s.push(r),Object.assign(r,i),r)})}function Lnt(e,t){const n={labels:[],datasets:[]};return Ak(n,e.labels),xk(n,e.datasets,t),n}const Unt=uo({props:knt,setup(e,t){let{expose:n,slots:s}=t;const i=We(null),r=av(null);n({chart:r});const o=()=>{if(!i.value)return;const{type:h,data:d,options:p,plugins:g,datasetIdKey:_}=e,y=Lnt(d,_),b=Mnt(y,d);r.value=new bo(i.value,{type:h,data:b,options:{...p},plugins:g})},a=()=>{const h=Ut(r.value);h&&(e.destroyDelay>0?setTimeout(()=>{h.destroy(),r.value=null},e.destroyDelay):(h.destroy(),r.value=null))},c=h=>{h.update(e.updateMode)};return Bu(o),$u(a),Mc([()=>e.options,()=>e.data],(h,d)=>{let[p,g]=h,[_,y]=d;const b=Ut(r.value);if(!b)return;let w=!1;if(p){const A=ja(p),R=ja(_);A&&A!==R&&(Nnt(b,A),w=!0)}if(g){const A=ja(g.labels),R=ja(y.labels),D=ja(g.datasets),O=ja(y.datasets);A!==R&&(Ak(b.config.data,A),w=!0),D&&D!==O&&(xk(b.config.data,D,e.datasetIdKey),w=!0)}w&&kl(()=>{c(b)})},{deep:!0}),()=>ir("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:i},[ir("p",{},[s.default?s.default():""])])}});function Fnt(e,t){return bo.register(t),uo({props:Ik,setup(n,s){let{expose:i}=s;const r=av(null),o=a=>{r.value=a==null?void 0:a.chart};return i({chart:r}),()=>ir(Unt,Ont({ref:o},{type:e,...n}))}})}const Vnt=Fnt("line",Zc);bo.register(tp,np,eu,hr,vk,wk,yk);const Bnt={name:"ExpensesAnalytics",data(){return{user:!1,chartData:null,chart:null,options:{scales:{xAxes:[{type:"time"}]},responsive:!0,maintainAspectRatio:!1},expenses:{},trip:{Currency:"",TripName:"",Members:[],UID:""},groupedExpenses:{}}},props:{tripID:String,tripCurrency:String},components:{Line:Vnt},methods:{async fetchExpensesData(){const e=ct(mt,"Trips",this.tripID),t=ue(e,"Expenses"),n=ha(t,Db("date","asc")),s=await Ns(n),i={},r=async a=>{if(!i[a]){const c=ct(mt,"Users",a),h=await he(c);i[a]=h.exists()?h.data():{firstName:"Unknown",lastName:""}}return i[a]},o=await Promise.all(s.docs.map(async a=>{const c=a.data();var h;return c.paidBy===this.user.uid?h={FirstName:"You",LastName:""}:h=await r(c.paidBy),{id:a.id,...c,date:c.date.toDate(),paidByFirstName:h.FirstName,paidByLastName:h.LastName}}));this.groupExpensesByDate(o)},async groupExpensesByDate(e){const t=e.reduce((s,i)=>{const r=i.date.toLocaleDateString("en-GB");s[r]||(s[r]=[]);const o=(i.amount/(i.owedMembers.length+1)).toFixed(2);return i.owedMembers.indexOf(this.user.uid)>-1?`${this.trip.Currency}${o}`:i.paidBy===this.user.uid&&`${this.trip.Currency}${(i.amount-o).toFixed(2)}`,s[r].push({id:i.id,title:i.title,category:i.category,amount:i.amount}),s},{}),n=Object.keys(t).sort((s,i)=>new Date(s)-new Date(i));this.groupedExpenses=n.reduce((s,i)=>(s[i]=t[i],s),{}),console.log(this.groupedExpenses),this.calculateDailyTotals()},async fetchTripData(){const e=ct(mt,"Trips",this.tripID);try{const t=await he(e);this.trip.TripName=t.data().TripName,this.trip.Currency=t.data().Currency,this.trip.Members=t.data().Members,this.trip.UID=this.$route.params.tripID}catch(t){console.error("Error fetching user data:",t)}},calculateDailyTotals(){const e={};for(const t in this.groupedExpenses)e[t]=this.groupedExpenses[t].reduce((n,s)=>n+Number(s.amount),0);console.log("Daily Totals:",e),this.plotLineGraph(e)},plotLineGraph(e){const t=Object.keys(e),n=Object.values(e);console.log(t),console.log(n),this.chartData={labels:t,datasets:[{label:"Total Daily Expenses",tension:.3,pointRadius:2,backgroundColor:"#16697A",borderColor:"#16697A",data:Object.values(e)}]},console.log(this.chartData)}},mounted(){const e=Xn();Qs(e,async t=>{if(t){this.user=t,await this.fetchExpensesData();const n={type:"line",data:this.chartData,options:{responsive:!0,interaction:{intersect:!1},plugins:{legend:{display:!1},title:{display:!0,text:"Total Daily Expenses",color:"black",font:{family:"'Montserrat', sans-serif",weight:"bold",size:25}}},scales:{y:{beginAtZero:!0,ticks:{color:"",font:{size:12,family:"'Montserrat', sans-serif"}},grid:{drawTicks:!1},border:{dash:[5,10]}},x:{ticks:{color:"",font:{size:12,family:"'Montserrat', sans-serif"}},grid:{display:!1},border:{display:!1}}},tooltips:{callbacks:{label(i,r){const o=r.datasets[i.datasetIndex].label,a=numeral(i.yLabel).format("$0, 0");return`${o} : ${a}`}}},maintainAspectRatio:!1}},s=document.getElementById("expensesGraph");new bo(s,n)}})}},$nt={id:"expensesGraph",height:"400",width:"700"};function Hnt(e,t,n,s,i,r){return W(),j("canvas",$nt)}const Wnt=en(Bnt,[["render",Hnt]]);bo.register(...Tk);const znt={name:"BudgetAnalytics",props:["tripID","Currency"],data(){return{user:!1,trip:{TripName:"",Members:[],Currency:"",UID:""},currencySymbols:{USD:"$",JPY:"",SGD:"S$",AUD:"A$",CAD:"C$",CHF:"",CNY:"",EUR:"",GBP:"",KRW:"",MYR:"RM",NZD:"NZ$",SEK:"kr"},chart:null,totalBudget:0,totalExpense:0,categoryOrder:["Food","Shopping","Transport","Entertainment","Accommodations","Miscellaneous"],categoryColors:{Food:"#16697A",Shopping:"#489FB5",Transport:"#82C0CC",Entertainment:"#EDE7E3",Accommodations:"#B8D4D8",Miscellaneous:"#FFA62B"}}},methods:{async fetchTripData(){const e=ct(mt,"Trips",this.tripID),t=await he(e);t.exists()&&(this.trip=t.data(),this.trip.UID=this.tripID)},async fetchAndPlotExpenses(){if(!this.tripID){console.error("TripID is not provided in BudgetAnalytics.");return}console.log("Fetching expenses for tripID:",this.tripID);const e=ue(mt,"Trips",this.tripID,"Expenses"),t=await Ns(ha(e)),n={};let s=0;t.forEach(i=>{const{category:r,amount:o}=i.data(),a=Number(o);n[r]=(n[r]||0)+a,s+=a}),this.totalExpense=s,console.log("Expenses by category:",n),console.log("Total expenses:",this.totalExpense),this.plotChart(Object.keys(n),Object.values(n))},async fetchBudgetItems(){if(!this.tripID){console.error("TripID is not provided for fetching budget items.");return}const e=ue(mt,"Trips",this.tripID,"Budgets");try{const t=await Ns(e);let n=0;t.forEach(s=>{const i=s.data().allocated;typeof i=="number"&&(n+=i)}),this.totalBudget=n}catch(t){console.error("Error fetching budget items:",t)}},plotChart(e,t){const n=this.categoryOrder.filter(r=>e.includes(r)),s={labels:n,datasets:[{label:"Expenses by Category",data:n.map(r=>t[e.indexOf(r)]),backgroundColor:n.map(r=>this.categoryColors[r]),borderColor:n.map(r=>this.categoryColors[r]),borderWidth:1}]};this.chart&&this.chart.destroy();const i=this.$refs.expensesChart.getContext("2d");this.chart=new bo(i,{type:"doughnut",data:s,options:{plugins:{legend:{position:"bottom",labels:{color:"black",font:{family:"'Montserrat', sans-serif",weight:500,size:12}}}},cutout:"60%"}})}},async mounted(){this.tripID&&(await this.fetchTripData(),await this.fetchAndPlotExpenses(),await this.fetchBudgetItems())},watch:{tripID(e){e&&(this.fetchAndPlotExpenses(),this.fetchBudgetItems())}}},d0=e=>(Yn("data-v-4f7ffc5c"),e=e(),Qn(),e),jnt={class:"budget-analytics-container"},qnt={class:"totals-container"},Knt={class:"budgetTot"},Gnt=d0(()=>I("div",{class:"budget-label"},"Total Budget",-1)),Ynt={class:"expenseTot"},Qnt=d0(()=>I("div",{class:"budget-label"},"Total Expense",-1)),Xnt={class:"chart-container"},Jnt=d0(()=>I("div",{class:"chart-header"},"Breakdown of Expenses",-1)),Znt={ref:"expensesChart"};function tst(e,t,n,s,i,r){return W(),j("div",jnt,[I("div",qnt,[I("div",Knt,[Gnt,I("h2",null,ot(i.currencySymbols[this.trip.Currency])+ot(i.totalBudget),1)]),I("div",Ynt,[Qnt,I("h2",null,ot(i.currencySymbols[this.trip.Currency])+ot(i.totalExpense),1)])]),I("div",Xnt,[Jnt,I("canvas",Znt,null,512)])])}const est=en(znt,[["render",tst],["__scopeId","data-v-4f7ffc5c"]]),nst={name:"AnalyticsPage",data(){return{trip:{TripName:"",Members:[],Currency:"",UID:""},user:!1,currencySymbols:{USD:"$",JPY:"",SGD:"S$",AUD:"A$",CAD:"C$",CHF:"",CNY:"",EUR:"",GBP:"",KRW:"",MYR:"RM",NZD:"NZ$",SEK:"kr"},groupedExpenses:{}}},setup(){const e=We(""),t=We(0),n=We(0),s=We("");return Bu(async()=>{const i=fa.currentUser;if(i){const r=i.uid,o=await he(ct(mt,"Currency",r));o.exists()&&(e.value=o.data().SelectedCurrency)}}),{currency:e,totalBudget:t,totalExpense:n,tripName:s}},components:{SideNavBar:hh,BudgetAnalytics:est,ExpensesAnalytics:Wnt},methods:{async fetchTripData(){const e=ct(mt,"Trips",this.$route.params.tripID);try{const t=await he(e);this.trip.TripName=t.data().TripName,this.trip.Currency=t.data().Currency,this.trip.Members=t.data().Members,this.trip.UID=this.$route.params.tripID}catch(t){console.error("Error fetching user data:",t)}}},mounted(){const e=Xn();this.fetchTripData(),Qs(e,t=>{t&&(this.user=t)})}},sst=e=>(Yn("data-v-89113ca8"),e=e(),Qn(),e),ist={class:"main-container"},rst={key:0},ost={class:"content-container"},ast=sst(()=>I("h1",null,"Analytics & Reports",-1)),lst={class:"budget-wrapper"},cst={class:"budget-analytics"},ust={class:"expense-wrapper"},hst={class:"expenses-analytics"};function dst(e,t,n,s,i,r){const o=ze("SideNavBar"),a=ze("BudgetAnalytics"),c=ze("ExpensesAnalytics");return W(),j("div",ist,[i.user?(W(),j("div",rst,[Et(o,{tripName:e.$route.query.tripName,tripID:e.$route.params.tripID},null,8,["tripName","tripID"])])):Xt("",!0),I("div",ost,[ast,I("div",lst,[I("div",cst,[Et(a,{tripID:e.$route.params.tripID,"onUpdate:totalExpense":t[0]||(t[0]=h=>s.totalExpense=h),"onUpdate:totalBudget":t[1]||(t[1]=h=>s.totalBudget=h)},null,8,["tripID"])])]),I("div",ust,[I("div",hst,[Et(c,{tripCurrency:i.currencySymbols[i.trip.Currency],tripID:e.$route.params.tripID},null,8,["tripCurrency","tripID"])])])])])}const fst=en(nst,[["render",dst],["__scopeId","data-v-89113ca8"]]),pst={name:"BudgetPage",data(){return{isLoading:!0,user:!1,trip:{TripName:"",Members:[],Currency:"",UID:""},currencySymbols:{USD:"$",JPY:"",SGD:"S$",AUD:"A$",CAD:"C$",CHF:"",CNY:"",EUR:"",GBP:"",KRW:"",MYR:"RM",NZD:"NZ$",SEK:"kr"},totalBudget:0,budget:[],showAmountOutside:{},budgetExceeded:{}}},components:{SideNavBar:hh},props:["tripID"],methods:{async fetchTripData(){const e=ct(mt,"Trips",this.$route.params.tripID);try{const t=await he(e);this.trip.TripName=t.data().TripName,this.trip.Currency=t.data().Currency,this.trip.Members=t.data().Members,this.trip.UID=this.$route.params.tripID}catch(t){console.error("Error fetching user data:",t)}},progressWidth(e,t){const n=e.used/e.allocated*100;return this.showAmountOutside[t]=n<10,`${n}%`},getCategoryIcon(e){return{Food:"",Shopping:"",Transport:"",Entertainment:"",Accommodations:"",Miscellaneous:""}[e]||""},getCategoryColor(e){return{Food:"#B2DFAB",Shopping:"#F0E694",Transport:"#ABD9EA",Entertainment:"#DDC9F7",Accommodations:"#FCC2AB",Miscellaneous:"#EDA5B9"}[e]||"#cccccc"},editBudget(){this.$router.push({name:"EditBudgetPage",params:{tripID:this.$route.params.tripID},query:{tripName:this.$route.query.tripName}})},checkBudgetExceeded(){this.budget.forEach((e,t)=>{this.budgetExceeded[t]=e.used>e.allocated})},amountSpentClass(e,t){return{"text-danger":this.budgetExceeded[t],"spent-amount":!this.budgetExceeded[t],"amount-outside":this.showAmountOutside[t]&&!this.budgetExceeded[t]}},determineAmountPosition(){this.budget.forEach((e,t)=>{const n=e.used/e.allocated*100;this.showAmountOutside[t]=n<25})},async fetchBudgetItems(){this.isLoading=!0;const e=ue(mt,"Trips",this.tripID,"Budgets"),t=ha(e,Db("order"));try{let s=(await Ns(t)).docs.map(i=>({id:i.id,...i.data()}));for(let i=0;i<s.length;i++){let r=0;const o=ue(mt,"Trips",this.tripID,"Expenses"),a=ha(o,Rb("category","==",s[i].category));(await Ns(a)).forEach(h=>{r+=Number(h.data().amount)}),s[i]={...s[i],used:r}}s=s.map(i=>({...i,progress:(i.used/i.allocated*100).toFixed(2)+"%"})),this.budget=s,this.determineAmountPosition(),this.checkBudgetExceeded(),this.totalBudget=this.budget.reduce((i,r)=>i+r.allocated,0),this.isLoading=!1}catch(n){console.error("Error fetching budget items:",n),this.isLoading=!1}}},mounted(){const e=Xn();this.trip.UID=this.tripID,this.fetchTripData(),console.log("Trip ID from route:",this.$route.params.tripID),Qs(e,async t=>{t&&(this.user=t,await this.fetchBudgetItems())})},watch:{$route(){console.log("Route changed, fetching budget items..."),this.fetchBudgetItems(),this.fetchTripDetails()}}},gst={class:"app-container"},mst={class:"budget-page"},_st={key:0,class:"loading"},yst={key:1},vst={class:"budget-categories"},bst={class:"icon-and-category"},wst={class:"icon"},Est={class:Dl(["category-name"])},Tst={key:0,class:"exceeded-message"},Ist={class:"progress-and-amount"},Ast={class:"progress-container"},xst={class:"amount-info"},Sst={class:"amount-allocated"},Rst={class:"amount-left"};function Cst(e,t,n,s,i,r){const o=ze("SideNavBar");return W(),j("div",gst,[Et(o,{tripID:e.$route.params.tripID,tripName:e.$route.query.tripName},null,8,["tripID","tripName"]),I("div",mst,[I("button",{class:"edit-button",onClick:t[0]||(t[0]=(...a)=>r.editBudget&&r.editBudget(...a))},"Edit"),i.isLoading?(W(),j("h1",_st,"Fetching Budget for "+ot(i.trip.TripName)+"...",1)):(W(),j("h1",yst,"Total Budget: "+ot(i.currencySymbols[i.trip.Currency])+ot(i.totalBudget),1)),I("div",vst,[(W(!0),j(xe,null,Pn(i.budget,(a,c)=>(W(),j("div",{class:"category-block",key:c},[I("div",bst,[I("span",wst,ot(r.getCategoryIcon(a.category)),1),I("span",Est,[bs(ot(a.category)+" ",1),i.budgetExceeded[c]?(W(),j("span",Tst," Budget has been exceeded! ")):Xt("",!0)])]),I("div",Ist,[I("div",Ast,[I("div",{class:"progress-bar",style:ap({width:r.progressWidth(a),backgroundColor:r.getCategoryColor(a.category)})},[I("span",{class:Dl(r.amountSpentClass(a,c))},ot(i.currencySymbols[i.trip.Currency])+ot(a.used),3)],4)]),I("div",xst,[I("div",Sst,ot(i.currencySymbols[i.trip.Currency])+ot(a.allocated),1),I("div",Rst,"left "+ot(i.currencySymbols[i.trip.Currency])+ot(a.allocated-a.used),1)])])]))),128))])])])}const Pst=en(pst,[["render",Cst],["__scopeId","data-v-86116c4f"]]),Dst="/assets/delete-minus-btn-BwbaJvLm.png",kst="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFGklEQVR4nO1aaahVVRQ+Ty1fSdOjooGyckBsnssmsIRIbMIoKswGkiaazMh+JKH1J4uKQIlGkiyRBrLSJqkgqIgiGx5WlEgikVb2jLO/b70v9u28x72nd887w333vivng/Pnsu931vr2PmuvtfYOghIlSpQoUaJEiQKQc1MMWGpAtwE9Bmw18ksDHpA0LjWPtJPIq4x8w4CNBoQG/GrkuyJvkLRrMJwgaS8jV/SSqvdETiyUNDKRy7lTDfh+EK4NAs4NhgMk7W/AN0kG1xhPviJp1IBcwAwD/knFA1DkNc33OLZUjfw4rfNVxi/+H1cYHm7Atow8Ts6dEbQKIm/K6nxkeK/C8NhqLiM/yMnVXW9FDa3z0gj/LeYxOjL8pX4u507Ly+MfkZc0XwDnTi5itAF/S+r0XAY8VJBrWfMFIG8uYnRl5sLwuIoA5IcFBfih6QIYsLCwAMD0iKu7oAA9TReA5H0NEOCcigDkuoICbG26ACKvKyyANDkSYE0hAch1zRdAGldw1jZJ6ojEvLcg1+NBK2Dk5wWMfrRKzIk+s8u9kpw7vSUCCJie0/keSQfUiAk8l3P5r2mJ830w4MnMM0ZeHQxUUAE/ZhTyd0mHBq2EpNFGvpzS4F6RdydwTTLgp5Rcm30yFgwHSOoQeZvfjhIMXi/gvBRc+xrwvBcrYdm/KmlsMNwgaQ+Rswx4xsh3oobGEz5WSNo5I9dEkff4msHI941cacACheFRQ+dBiWKQdEhltslZvlYQOUfATDl3lqSuDDxdvjPk22Iir4+4ZvuGiY8TvhINhgMkjRZ5mQHLDdgyWAD0Nb+kMQNyheExvipMkxYb8JeRq0ReK2nPVji+S/R9bsqwZa0faMuSc2ca+VHeJKgiBrBY0j7NcR6Y6svPjEb+Jml8TMTdDXgxr+MD5gTk7KF1nrw1a8pa2fuBs2POTyhaAie8b4nvVQ6F83NzGvR0zPmxRVppMe5tPvYYYLHflzc0UAo4PykxSTDQ17wHx7rIX+R2mPxU5Dw5d5Kk3ap4OyQdFgXkZQZsN2BRY5xX5VvdmNPgVTVc5PycPG/JuRMy2Ly3AfcrDI8sLgB5Z94Zq877fSbo8/eMK+gPP6u5bW9ELDBydW4BgAuqjJmc0fkN/rCkjmPjRV4h8vbouTzL2WNWAdY2ol+vMDw6g/ObfS0Qc3qEyCuN/DrhU/kqEqNxAdCABwsIMLfKgU6/pFM4bwKmxZzfL8sRnG+z+6qyIQLIv3yQNDfBkLUxMRekEGBp7P0HGfBL5ncDP0s6sDEiuMqRdeq0t2Y2nTuxyplRfo9OGL+9euZ8yl1v24wC5HzfUDXgzzoT8Fnf6VNxEaQuvyMY+Zon9g3RVA+wJMbTER2Dv2DkJ7Gxi9Jum74tXzVuTsK4u4J2hKQxSTFDzp3SP9a5KQmraotfSUG7QcDFiQE2pQCVscCMoN1gwGMDlL0P++Sq8lS11X2w6/vdgEfiFy38/4J2g5ErY7M4M+1/RV4aC4YrgnaDkW/XCBCGR6T9r2+cxgR4M2g3WOykyK8If3iSZrfyF7Fin8BTQbtB5LyGBUHyjqDdIGlSwwSQJgTtCCPfS9japvaN87VD3TyAXB20K+Tc8QYg4cJlZ5Quv14nCXK+3R60M0TeMkhPsO7lSpE3BjsC9F+CU9P4THGNtr8U3yEgYFqaO8n+ZCneht9hIGmkgIui4/Pv+j4BA7414FkBFw52G71EiRIlSpQoUSKI4V/PbS1lT6p5vQAAAABJRU5ErkJggg==",Ost={props:{isVisible:{type:Boolean,default:!1},member:{type:Object,default:()=>({})},tripName:{type:String,default:""}},emits:["confirm-delete","update:isVisible"],methods:{closeModal(){this.$emit("update:isVisible",!1)},confirmDelete(){this.$emit("confirm-delete",this.member)}}},Mst=e=>(Yn("data-v-c2fc9018"),e=e(),Qn(),e),Nst={class:"delete-member-modal"},Lst=Mst(()=>I("div",{class:"modal-header"},[I("span",{class:"warning-icon"},""),I("h3",null,"Are you sure you want to remove:")],-1)),Ust={class:"modal-body"},Fst={class:"member-info"},Vst={class:"member-initials"},Bst={class:"member-details"},$st={class:"member-name"},Hst={class:"member-email"},Wst={class:"member-trip"},zst={class:"modal-footer"};function jst(e,t,n,s,i,r){return n.isVisible?(W(),j("div",{key:0,class:"delete-member-overlay",onClick:t[2]||(t[2]=Wu((...o)=>r.closeModal&&r.closeModal(...o),["self"]))},[I("div",Nst,[Lst,I("div",Ust,[I("div",Fst,[I("span",Vst,ot(n.member.initials),1),I("div",Bst,[I("span",$st,ot(n.member.name),1),I("span",Hst,ot(n.member.email),1)]),I("span",Wst,"from "+ot(n.tripName)+" ?",1)])]),I("div",zst,[I("button",{class:"confirm-button",onClick:t[0]||(t[0]=(...o)=>r.confirmDelete&&r.confirmDelete(...o))},"Yes"),I("button",{class:"cancel-button",onClick:t[1]||(t[1]=(...o)=>r.closeModal&&r.closeModal(...o))},"No")])])])):Xt("",!0)}const qst=en(Ost,[["render",jst],["__scopeId","data-v-c2fc9018"]]),Kst={props:{tripID:String},data(){return{selectedMembers:[],allUsers:[],searchTerm:"",showDropdown:!1}},computed:{availableUsers(){return this.allUsers.filter(e=>!this.selectedMembers.some(t=>t.userID===e.userID))},filteredUsers(){return this.searchTerm?this.availableUsers.filter(e=>e.username.toLowerCase().includes(this.searchTerm.toLowerCase())):this.availableUsers}},methods:{keepDropdownOpen(e){e.preventDefault(),setTimeout(()=>{this.showDropdown=this.searchTerm.trim().length>0},300)},async selectUser(e){if(this.selectedMembers.some(t=>t.userID===e.userID))alert("This user is already in the group!");else{const t=ct(mt,"Users",e.userID),n=await he(t);if(n.exists()){const s=n.data();this.selectedMembers.push({userID:e.userID,username:s.Username,initials:`${s.FirstName[0]}${s.LastName[0]}`,name:`${s.FirstName} ${s.LastName}`,email:s.Email}),this.searchTerm=""}else console.error("User data could not be fetched.")}},async fetchUsers(){const e=ue(mt,"Usernames"),t=await Ns(e);this.allUsers=t.docs.map(n=>({userID:n.data().UID,username:n.id}))},removeSelectedMember(e){this.selectedMembers.splice(e,1)},async addSelectedMembers(){const e=ct(mt,"Trips",this.tripID),t=await he(e);if(t.exists()){const n=t.data().Members||[];for(const s of this.selectedMembers)if(n.includes(s.userID))console.log(`User ${s.username} is already in the group!`);else{const i=ct(mt,"Users",s.userID);(await he(i)).exists()?(await rs(e,{Members:by(s.userID)}),await rs(i,{GroupTrips:by(this.tripID)}),console.log(`User ${s.username} added to the trip`)):console.error(`User data for ${s.username} could not be fetched.`)}this.selectedMembers=[],this.$emit("member-added")}else console.error("Trip does not exist.")}},async created(){await this.fetchUsers()}},Gst={class:"select-wrapper"},Yst={key:0,class:"custom-dropdown"},Qst=["onClick"],Xst={class:"selected-items"},Jst={key:0,class:"placeholder"},Zst=["onClick"];function tit(e,t,n,s,i,r){return W(),j("div",Gst,[Ae(I("input",{type:"text",class:"search-input","onUpdate:modelValue":t[0]||(t[0]=o=>i.searchTerm=o),placeholder:"Search username",onInput:t[1]||(t[1]=(...o)=>e.filterUsers&&e.filterUsers(...o)),onFocus:t[2]||(t[2]=o=>i.showDropdown=!0),onBlur:t[3]||(t[3]=(...o)=>r.keepDropdownOpen&&r.keepDropdownOpen(...o))},null,544),[[gn,i.searchTerm]]),i.showDropdown?(W(),j("div",Yst,[(W(!0),j(xe,null,Pn(r.filteredUsers,o=>(W(),j("div",{key:o.userID,onClick:a=>r.selectUser(o),class:"dropdown-item"},ot(o.username),9,Qst))),128))])):Xt("",!0),I("div",Xst,[i.selectedMembers.length?Xt("",!0):(W(),j("span",Jst,"Members")),(W(!0),j(xe,null,Pn(i.selectedMembers,(o,a)=>(W(),j("div",{key:o.userID,class:"selected-item"},[bs(ot(o.username)+" ",1),I("span",{onClick:c=>r.removeSelectedMember(a)},"x",8,Zst)]))),128)),i.selectedMembers.length?(W(),j("button",{key:1,onClick:t[4]||(t[4]=(...o)=>r.addSelectedMembers&&r.addSelectedMembers(...o)),class:"add-members-btn"},"+")):Xt("",!0)])])}const eit=en(Kst,[["render",tit],["__scopeId","data-v-5ca96035"]]),nit={components:{SideNavBar:hh,DeleteMember:qst,AddMember:eit},data(){return{user:!1,trip:{TripName:"",Members:[],Currency:"",UID:""},deleteIcon:Dst,addMemberIcon:kst,Members:[],showAddNewMemberInput:!1,showDeleteMemberModal:!1,selectedMemberToDelete:null}},methods:{toggleAddMember(){this.showAddNewMemberInput=!this.showAddNewMemberInput},async fetchMembers(){try{console.log("trying to fetch members");const e=ct(mt,"Trips",this.$route.params.tripID),t=await he(e);if(t.exists()){const n=t.data();console.log("Trip data:",n),this.Members=n.Members,console.log("Members array:",this.Members);const s=this.Members.map(async i=>{const r=ct(mt,"Users",i),o=await he(r);if(o.exists()){const a=o.data();console.log(`Member data for ID ${i}:`,a);const c={initials:a.FirstName[0]+a.LastName[0],username:a.Username,email:a.Email,name:a.FirstName+" "+a.LastName,UID:i};return console.log("this user exists:",c),c}else return console.error(`Member document with ID ${i} does not exist`),null});this.Members=await Promise.all(s)}else console.error("Trip document does not exist")}catch(e){console.error("Error fetching members:",e)}},openDeleteMemberModal(e){this.selectedMemberToDelete=e,this.showDeleteMemberModal=!0},closeDeleteMemberModal(){this.selectedMemberToDelete=null,this.showDeleteMemberModal=!1},async handleDeleteConfirmation(e){try{const t=ct(mt,"Users",e.UID);await rs(t,{GroupTrips:Wf(this.trip.UID)}),console.log("Trip ID removed from user's GroupTrips array");const n=ct(mt,"Trips",this.trip.UID);await rs(n,{Members:Wf(e.UID)}),console.log("User ID removed from group trip's Members array");const s=this.Members.filter(r=>r.username!==e.username);this.Members=s;const i=this.trip.Members.filter(r=>r!==e.UID);this.trip.Members=i}catch(t){console.error("Error removing member from trip:",t)}console.log("Member deleted:",e),this.closeDeleteMemberModal()},async fetchTripData(){const e=ct(mt,"Trips",this.$route.params.tripID);try{const t=await he(e);if(t.exists()){const n=t.data();this.trip.TripName=n.TripName,this.trip.Currency=n.Currency,this.trip.Members=n.Members,this.trip.UID=this.$route.params.tripID}else console.error("Trip document does not exist")}catch(t){console.error("Error fetching trip data:",t)}}},mounted(){const e=Xn();Qs(e,async t=>{t&&(this.user=t,await this.fetchTripData(),await this.fetchMembers())})}},sit=e=>(Yn("data-v-680402ed"),e=e(),Qn(),e),iit={class:"app-container"},rit={key:0,class:"main-content"},oit={class:"group-members-section"},ait={class:"group-members-header"},lit=sit(()=>I("h2",{class:"group-members-title"},"Group Members",-1)),cit=["src"],uit={class:"group-members-list"},hit={class:"member-initials"},dit={class:"member-info"},fit={class:"member-name"},pit={class:"member-email"},git={class:"member-settings"},mit=["src","onClick"];function _it(e,t,n,s,i,r){const o=ze("SideNavBar"),a=ze("AddMember"),c=ze("delete-member");return W(),j("div",iit,[Et(o,{tripName:e.$route.query.tripName,tripID:e.$route.params.tripID},null,8,["tripName","tripID"]),i.user?(W(),j("div",rit,[I("div",oit,[I("div",ait,[lit,I("img",{src:i.addMemberIcon,alt:"Add Member",class:"add-member-btn",onClick:t[0]||(t[0]=(...h)=>r.toggleAddMember&&r.toggleAddMember(...h))},null,8,cit)]),i.showAddNewMemberInput?(W(),na(a,{key:0,tripID:i.trip.UID,onMemberAdded:r.fetchMembers},null,8,["tripID","onMemberAdded"])):Xt("",!0),I("div",uit,[(W(!0),j(xe,null,Pn(i.Members,h=>(W(),j("div",{class:"group-member",key:h.UID},[I("div",hit,ot(h.initials),1),I("div",dit,[I("div",fit,ot(h.name),1),I("div",pit,ot(h.email),1)]),I("div",git,[I("img",{src:i.deleteIcon,alt:"Delete",class:"delete-user-btn",onClick:d=>r.openDeleteMemberModal(h)},null,8,mit)])]))),128))])])])):Xt("",!0),i.showDeleteMemberModal?(W(),na(c,{key:1,tripName:i.trip.TripName,isVisible:i.showDeleteMemberModal,member:i.selectedMemberToDelete,"onUpdate:isVisible":t[1]||(t[1]=h=>i.showDeleteMemberModal=h),onConfirmDelete:r.handleDeleteConfirmation},null,8,["tripName","isVisible","member","onConfirmDelete"])):Xt("",!0)])}const yit=en(nit,[["render",_it],["__scopeId","data-v-680402ed"]]),vit={name:"ProfileForm",data(){return{user:!1,userID:"",enteredUsername:"",selectedCurrency:"",profile:{name:"No Authenticated User",email:"invalid@email",username:"xxxxxxxx",currency:"SGD"},usernameChanged:!1,currencyChanged:!1,usernameTaken:{value:!1},saveButtonClicked:!1,updateSuccess:!1,updateCurrSuccess:!1,change:!1}},methods:{onUsernameInput(){this.saveButtonClicked=!1,this.updateSuccess=!1},async checkUsernameAvailability(){this.usernameTaken=!1;const e=ct(mt,"Usernames",this.enteredUsername);try{const t=await he(e);this.usernameTaken=t.exists()}catch(t){console.error("Error checking username uniqueness:",t)}},async updateUsername(){const e=fa.currentUser;if(e){const t=ct(mt,"Users",e.uid);try{await rs(t,{Username:this.enteredUsername}),await to(ct(mt,"Usernames",this.profile.username)),this.profile.username=this.enteredUsername,await ni(ct(mt,"Usernames",this.enteredUsername),{UID:this.userID}),OP.emit("usernameUpdated",this.enteredUsername)}catch(n){console.error("Error updating currency:",n)}}},async updateCurrency(){const e=ct(mt,"Users",this.user.uid);try{await rs(e,{Currency:this.selectedCurrency}),console.log("Currency updated")}catch(t){console.error("Error updating currency:",t)}},async saveChanges(){if(this.saveButtonClicked=!0,this.updateSuccess=!1,this.updateCurrSuccess=!1,this.noChange=!1,this.enteredUsername=this.enteredUsername.trim(),this.usernameChanged=this.enteredUsername!==this.profile.username,this.currencyChanged=this.profile.currency!==this.selectedCurrency,this.usernameChanged)if(await this.checkUsernameAvailability(),!this.usernameTaken)await this.updateUsername(),console.log("Username updated successfully."),this.updateSuccess=!0;else{console.log("Username is already taken. Please choose a different username.");return}this.currencyChanged&&(await this.updateCurrency(),this.updateCurrSuccess=!0,this.profile.currency=this.selectedCurrency,console.log("Currency updated successfully."))},async fetchUserData(){const e=fa.currentUser;if(console.log(e),e){this.userID=e.uid;const t=ct(mt,"Users",e.uid);try{const n=await he(t);if(n.exists()){const s=n.data();this.profile.name=s.FirstName+" "+s.LastName,this.profile.email=s.Email,this.profile.username=s.Username,this.profile.currency=s.Currency,this.enteredUsername=s.Username,this.selectedCurrency=s.Currency}else console.error("User document does not exist.")}catch(n){console.error("Error fetching user data:",n)}}else console.error("No user is currently authenticated.")}},mounted(){this.fetchUserData();const e=Xn();Qs(e,async t=>{t&&(this.user=t,await this.fetchUserData())}),this.initialCurrency=this.profile.currency}},Wl=e=>(Yn("data-v-43252335"),e=e(),Qn(),e),bit={class:"main-container"},wit={key:0,class:"profile-container"},Eit={class:"profile-content"},Tit=Wl(()=>I("h1",{class:"profile-text"},"Profile",-1)),Iit={class:"profile-form"},Ait={class:"form-group"},xit=Wl(()=>I("label",{for:"name"},"Name:",-1)),Sit={class:"form-group"},Rit=Wl(()=>I("label",{for:"email"},"Email:",-1)),Cit={class:"form-group"},Pit=Wl(()=>I("label",{for:"username"},"Username:",-1)),Dit={key:0},kit={key:0,class:"error-message-success"},Oit={key:1,class:"error-message-fail"},Mit={class:"form-group"},Nit=Wl(()=>I("label",{for:"currency"},"Default Currency:",-1)),Lit=_p('<option value="SGD" data-v-43252335>SGD</option><option value="AUD" data-v-43252335>AUD</option><option value="BGN" data-v-43252335>BGN</option><option value="BRL" data-v-43252335>BRL</option><option value="CAD" data-v-43252335>CAD</option><option value="CHF" data-v-43252335>CHF</option><option value="CNY" data-v-43252335>CNY</option><option value="CZK" data-v-43252335>CZK</option><option value="DKK" data-v-43252335>DKK</option><option value="EUR" data-v-43252335>EUR</option><option value="GBP" data-v-43252335>GBP</option><option value="HKD" data-v-43252335>HKD</option><option value="HRK" data-v-43252335>HRK</option><option value="HUF" data-v-43252335>HUF</option><option value="IDR" data-v-43252335>IDR</option><option value="ILS" data-v-43252335>ILS</option><option value="INR" data-v-43252335>INR</option><option value="ISK" data-v-43252335>ISK</option><option value="JPY" data-v-43252335>JPY</option><option value="KRW" data-v-43252335>KRW</option><option value="MYR" data-v-43252335>MYR</option><option value="NZD" data-v-43252335>NZD</option><option value="PHP" data-v-43252335>PHP</option><option value="PLN" data-v-43252335>PLN</option><option value="RON" data-v-43252335>RON</option><option value="SEK" data-v-43252335>SEK</option><option value="THB" data-v-43252335>THB</option><option value="TRY" data-v-43252335>TRY</option><option value="USD" data-v-43252335>USD</option><option value="ZAR" data-v-43252335>ZAR</option>',30),Uit=[Lit],Fit={key:0},Vit={key:0,class:"error-message-success-b"},Bit={key:1},$it=Wl(()=>I("h1",{class:"msg"},"You must be logged in to view this!",-1)),Hit=[$it];function Wit(e,t,n,s,i,r){return W(),j("div",bit,[i.user?(W(),j("div",wit,[I("div",Eit,[Tit,I("form",Iit,[I("div",Ait,[xit,Ae(I("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>i.profile.name=o),readonly:""},null,512),[[gn,i.profile.name]])]),I("div",Sit,[Rit,Ae(I("input",{type:"email",id:"email","onUpdate:modelValue":t[1]||(t[1]=o=>i.profile.email=o),readonly:""},null,512),[[gn,i.profile.email]])]),I("div",Cit,[Pit,Ae(I("input",{type:"text",id:"username","onUpdate:modelValue":t[2]||(t[2]=o=>i.enteredUsername=o),onInput:t[3]||(t[3]=(...o)=>r.onUsernameInput&&r.onUsernameInput(...o)),placeholder:"Username",required:""},null,544),[[gn,i.enteredUsername]]),i.saveButtonClicked&&(i.updateSuccess||i.usernameTaken||i.enteredUsername===i.profile.username)?(W(),j("div",Dit,[i.updateSuccess&&i.usernameChanged?(W(),j("p",kit,"Username successfully updated!")):i.usernameTaken&&i.usernameChanged?(W(),j("p",Oit,"Username already taken. Please choose another one!")):Xt("",!0)])):Xt("",!0)]),I("div",Mit,[Nit,Ae(I("select",{id:"currency","onUpdate:modelValue":t[4]||(t[4]=o=>i.selectedCurrency=o)},Uit,512),[[lu,i.selectedCurrency]]),i.saveButtonClicked?(W(),j("div",Fit,[i.updateCurrSuccess&&i.currencyChanged?(W(),j("p",Vit,"Currency successfully updated!")):Xt("",!0)])):Xt("",!0)])]),I("button",{type:"button",onClick:t[5]||(t[5]=(...o)=>r.saveChanges&&r.saveChanges(...o))},"Save Changes")])])):(W(),j("div",Bit,Hit))])}const zit=en(vit,[["render",Wit],["__scopeId","data-v-43252335"]]),jit={name:"EditBudgetPage",props:{tripID:String},data(){return{showSuccessMessage:!1,trip:{TripName:"",Members:[],Currency:"",UID:""},currencySymbols:{USD:"$",JPY:"",SGD:"S$",AUD:"A$",CAD:"C$",CHF:"",CNY:"",EUR:"",GBP:"",KRW:"",MYR:"RM",NZD:"NZ$",SEK:"kr"},budget:[]}},methods:{async fetchTripData(){const e=this.tripID||this.$route.params.tripID,t=ct(mt,"Trips",e);try{const n=await he(t);n.exists()?(this.trip.TripName=n.data().TripName,this.trip.Currency=n.data().Currency,this.trip.Members=n.data().Members,this.trip.UID=e):console.error("Trip document does not exist")}catch(n){console.error("Error fetching trip data:",n)}},async fetchBudgetItems(){const e=ue(mt,"Trips",this.tripID,"Budgets");try{let n=(await Ns(e)).docs.map(i=>({id:i.id,...i.data()}));const s=["Food","Shopping","Transport","Entertainment","Accommodations","Miscellaneous"];this.budget=s.map(i=>n.find(r=>r.category===i))}catch(t){console.error("Error fetching budget items:",t)}},async saveBudget(){this.showSuccessMessage=!1;try{for(const e of this.budget){const t=ct(mt,"Trips",this.tripID,"Budgets",e.id);await rs(t,{allocated:e.allocated,used:e.used})}this.showSuccessMessage=!0,console.log("Budget updated successfully")}catch(e){console.error("Error updating budget items:",e)}}},async mounted(){await this.fetchTripData(),await this.fetchBudgetItems()},components:{SideNavBar:hh}},Sk=e=>(Yn("data-v-d1a769b4"),e=e(),Qn(),e),qit={class:"app-container"},Kit={class:"main-content"},Git={key:0,class:"success-message"},Yit={class:"edit-budget-card"},Qit={class:"header"},Xit=Sk(()=>I("img",{src:qb,alt:"Back",class:"backbutton-icon"},null,-1)),Jit=Sk(()=>I("h1",null,"Edit Budget",-1)),Zit={class:"budget-fields"},trt=["for"],ert={class:"input-group"},nrt={class:"currency-symbol"},srt=["id","onUpdate:modelValue"],irt={class:"save-button-container"};function rrt(e,t,n,s,i,r){const o=ze("SideNavBar"),a=ze("router-link");return W(),j("div",qit,[(W(),na(o,{key:i.trip.TripName,tripID:e.$route.params.tripID,tripName:e.$route.query.tripName},null,8,["tripID","tripName"])),I("div",Kit,[i.showSuccessMessage?(W(),j("p",Git,"Budget saved successfully!")):Xt("",!0),I("div",Yit,[I("div",Qit,[Et(a,{to:{path:`/group/${n.tripID}/budgets`,name:"BudgetsPage",query:{tripName:this.trip.TripName},params:{tripID:this.tripID}},class:"budget-page-link"},{default:vs(()=>[Xit]),_:1},8,["to"]),Jit]),I("div",Zit,[(W(!0),j(xe,null,Pn(i.budget,c=>(W(),j("div",{class:"field",key:c.id},[I("label",{for:`category-${c.category}`},ot(c.category)+": ",9,trt),I("div",ert,[I("span",nrt,ot(i.currencySymbols[i.trip.Currency]),1),Ae(I("input",{type:"number",id:`category-${c.category}`,"onUpdate:modelValue":h=>c.allocated=h},null,8,srt),[[gn,c.allocated,void 0,{number:!0}]])])]))),128))]),I("div",irt,[I("button",{class:"save-button",onClick:t[0]||(t[0]=(...c)=>r.saveBudget&&r.saveBudget(...c))},"Save")])])])])}const ort=en(jit,[["render",rrt],["__scopeId","data-v-d1a769b4"]]),art="/assets/triptallyshadow-Bo4LcgzH.png",lrt={name:"LandingPage",methods:{navigateToSignUp(){this.$router.push("/signup")}}},wg=e=>(Yn("data-v-a64afb21"),e=e(),Qn(),e),crt={class:"container"},urt=wg(()=>I("img",{src:art,class:"tt_logo",alt:"TripTally"},null,-1)),hrt=wg(()=>I("br",null,null,-1)),drt=wg(()=>I("h1",null,"Reinvent group travel with TripTally",-1)),frt=wg(()=>I("br",null,null,-1));function prt(e,t,n,s,i,r){return W(),j("div",crt,[urt,hrt,drt,frt,I("button",{class:"get-started-btn",onClick:t[0]||(t[0]=(...o)=>r.navigateToSignUp&&r.navigateToSignUp(...o))},"Get Started")])}const grt=en(lrt,[["render",prt],["__scopeId","data-v-a64afb21"]]),mrt=[{path:"/",name:"LandingPage",component:grt,meta:{disallowAuthed:!0}},{path:"/login",name:"LoginPage",component:y8,meta:{disallowAuthed:!0}},{path:"/forgot-password",name:"ForgotPassword",component:x8,meta:{disallowAuthed:!0}},{path:"/signup",name:"SignupPage",component:F8,meta:{disallowAuthed:!0}},{path:"/homepage",name:"HomePage",component:$K,meta:{requiresAuth:!0}},{path:"/profilepage",name:"ProfilePage",component:zit},{path:"/group/:tripID",name:"GroupPage",component:SX,props:!0},{path:"/group/:tripID/add-expense",name:"AddNewExpenseModal",component:TD,props:!0},{path:"/group/:tripID/analytics",name:"AnalyticsPage",component:fst,props:!0},{path:"/group/:tripID/budgets",name:"BudgetsPage",component:Pst,props:!0},{path:"/group/:tripID/editbudget",name:"EditBudgetPage",component:ort,props:!0},{path:"/group/:tripID/members",name:"MembersPage",component:yit,props:!0}],Rk=c8({history:Fq(),routes:mrt});Rk.beforeEach((e,t,n)=>{const s=!!Bj();s&&e.name==="LoginPage"?kP().then(()=>{n("/login")}):!s&&e.meta.requiresAuth?n({name:"LoginPage"}):n()});Kx(aq).use(Rk).mount("#app");
